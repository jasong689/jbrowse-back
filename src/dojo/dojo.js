//>>built
(function(g,j){var f,h,e=function(){},d=function(a){for(var b in a)return 0;return 1},c={}.toString,b=function(a){return"[object Function]"==c.call(a)},i=function(a){return"[object String]"==c.call(a)},a=function(a){return"[object Array]"==c.call(a)},k=function(a,b){if(a)for(var c=0;c<a.length;)b(a[c++])},o=function(a,b){for(var c in b)a[c]=b[c];return a},p=function(a,b){return o(Error(a),{src:"dojoLoader",info:b})},l=1,m=function(){return"_"+l++},n=function(a,b,c){return X(a,b,c,0,n)},q=this,r=q.document,
u=r&&r.createElement("DiV"),s=n.has=function(a){return b(v[a])?v[a]=v[a](q,r,u):v[a]},v=s.cache=j.hasCache;s.add=function(a,b,c,d){(void 0===v[a]||d)&&(v[a]=b);return c&&s(a)};for(var t in g.has)s.add(t,g.has[t],0,1);n.async=1;var x=new Function("return eval(arguments[0]);");n.eval=function(a,b){return x(a+"\r\n////@ sourceURL="+b)};var w={},E=n.signal=function(b,c){var d=w[b];k(d&&d.slice(0),function(b){b.apply(null,a(c)?c:[c])})},C=n.on=function(a,b){var c=w[a]||(w[a]=[]);c.push(b);return{remove:function(){for(var a=
0;a<c.length;a++)if(c[a]===b){c.splice(a,1);break}}}},G=[],I={},Q=[],K={},F=n.map={},z=[],y={},A="",D={},L={},J={},N=function(a){var b,c,d,e;for(b in L)c=L[b],(d=b.match(/^url\:(.+)/))?D["url:"+ya(d[1],a)]=c:"*now"==b?e=c:"*noref"!=b&&(d=ea(b,a),D[d.mid]=D["url:"+d.url]=c);e&&e(Y(a));L={}},T=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},H=function(a,b){b.splice(0,b.length);for(var c in a)b.push([c,a[c],RegExp("^"+T(c)+"(/|$)"),c.length]);b.sort(function(a,
b){return b[3]-a[3]});return b},B=function(a){var b=a.name;b||(b=a,a={name:b});a=o({main:"main"},a);a.location=a.location?a.location:b;if(a.packageMap)F[b]=a.packageMap;if(!a.main.indexOf("./"))a.main=a.main.substring(2);K[b]=a},V=[],M=function(a,b,c){for(var d in a){if("waitSeconds"==d)n.waitms=1E3*(a[d]||0);"cacheBust"==d&&(A=a[d]?i(a[d])?a[d]:(new Date).getTime()+"":"");if("baseUrl"==d||"combo"==d)n[d]=a[d];a[d]!==v&&(n.rawConfig[d]=a[d],"has"!=d&&s.add("config-"+d,a[d],0,b))}if(!n.baseUrl)n.baseUrl=
"./";/\/$/.test(n.baseUrl)||(n.baseUrl+="/");for(d in a.has)s.add(d,a.has[d],0,b);k(a.packages,B);for(h in a.packagePaths)k(a.packagePaths[h],function(a){var b=h+"/"+a;i(a)&&(a={name:a});a.location=b;B(a)});H(o(F,a.map),z);k(z,function(a){a[1]=H(a[1],[]);if("*"==a[0])z.star=a});H(o(I,a.paths),Q);k(a.aliases,function(a){i(a[0])&&(a[0]=RegExp("^"+T(a[0])+"$"));G.push(a)});if(b)V.push({config:a.config});else for(d in a.config)b=ba(d,c),b.config=o(b.config||{},a.config[d]);if(a.cache)N(),L=a.cache,a.cache["*noref"]&&
N();E("config",[a,n.rawConfig])};s("dojo-cdn");var P=r.getElementsByTagName("script");f=0;for(var O,R,Z,U;f<P.length;)if(O=P[f++],(Z=O.getAttribute("src"))&&(U=Z.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))){R=U[3]||"";j.baseUrl=j.baseUrl||R;(Z=O.getAttribute("data-dojo-config")||O.getAttribute("djConfig"))&&(J=n.eval("({ "+Z+" })","data-dojo-config"));break}n.rawConfig={};M(j,1);if(s("dojo-cdn"))(K.dojo.location=R)&&(R+="/"),K.dijit.location=R+"../dijit/",K.dojox.location=R+"../dojox/";M(g,1);M(J,1);var $=
function(a){ma(function(){k(a.deps,za)})},X=function(b,c,d,k,l){var f;if(i(b)){if((f=ba(b,k,!0))&&f.executed)return f.result;throw p("undefinedModule",b);}a(b)||(M(b,0,k),b=c,c=d);if(a(b))if(b.length){for(var d="require*"+m(),r,h=[],q=0;q<b.length;)r=b[q++],h.push(ba(r,k));f=o(fa("",d,0,""),{injected:2,deps:h,def:c||e,require:k?k.require:n,gc:1});y[f.mid]=f;$(f);var t=da&&0!="sync";ma(function(){na(f,t)});f.executed||S.push(f);ga()}else c&&c();return l},Y=function(a){if(!a)return n;var b=a.require;
if(!b)b=function(c,d,e){return X(c,d,e,a,b)},a.require=o(b,n),b.module=a,b.toUrl=function(b){return ya(b,a)},b.toAbsMid=function(b){return oa(b,a)};return b},S=[],aa=[],W={},ha=function(a){a.injected=1;W[a.mid]=1;a.url&&(W[a.url]=a.pack||1);Aa()},ja=function(a){a.injected=2;delete W[a.mid];a.url&&delete W[a.url];d(W)&&ia()},Ma=n.idle=function(){return!aa.length&&d(W)&&!S.length&&!da},pa=function(a,b){if(b)for(var c=0;c<b.length;c++)if(b[c][2].test(a))return b[c];return 0},Ba=function(a){for(var b=
[],c,d,a=a.replace(/\\/g,"/").split("/");a.length;)c=a.shift(),".."==c&&b.length&&".."!=d?(b.pop(),d=b[b.length-1]):"."!=c&&b.push(d=c);return b.join("/")},fa=function(a,b,c,d){return{pid:a,mid:b,pack:c,url:d,executed:0,def:0}},Ca=function(a,c,d,e,i,l,f,m){var o,r,h,q;q=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||q&&!c)return fa(0,a,0,a);a=Ba(q?c.mid+"/../"+a:a);if(/^\./.test(a))throw p("irrationalPath",a);c&&(h=pa(c.mid,l));(h=(h=h||l.star)&&pa(a,h[1]))&&(a=h[1]+a.substring(h[3]));c=(U=a.match(/^([^\/]+)(\/(.+))?$/))?
U[1]:"";(o=d[c])?a=c+"/"+(r=U[3]||o.main):c="";var n=0;k(G,function(c){var d=a.match(c[0]);d&&0<d.length&&(n=b(c[1])?a.replace(c[0],c[1]):c[1])});if(n)return Ca(n,0,d,e,i,l,f,m);if(d=e[a])return m?fa(d.pid,d.mid,d.pack,d.url):e[a];e=(h=pa(a,f))?h[1]+a.substring(h[3]):c?o.location+"/"+r:s("config-tlmSiblingOfDojo")?"../"+a:a;/(^\/)|(\:)/.test(e)||(e=i+e);return fa(c,a,o,Ba(e+".js"))},ea=function(a,b){return Ca(a,b,K,y,n.baseUrl,z,Q)},Da=function(a,b,c){return a.normalize?a.normalize(b,function(a){return oa(a,
c)}):oa(b,c)},Ea=0,ba=function(a,b,c){var d,e;(d=a.match(/^(.+?)\!(.*)$/))?(e=ba(d[1],b,c),5===e.executed&&!e.load&&qa(e),e.load?(d=Da(e,d[2],b),a=e.mid+"!"+(e.dynamic?++Ea+"!":"")+d):(d=d[2],a=e.mid+"!"+ ++Ea+"!waitingForPlugin"),a={plugin:e,mid:a,req:Y(b),prid:d}):a=ea(a,b);return y[a.mid]||!c&&(y[a.mid]=a)},oa=n.toAbsMid=function(a,b){return ea(a,b).mid},ya=n.toUrl=function(a,b){var c=ea(a+"/x",b),d=c.url;return Fa(0===c.pid?a:d.substring(0,d.length-5))},Ga={injected:2,executed:5,def:3,result:3},
ra=function(a){return y[a]=o({mid:a},Ga)},Na=ra("require"),Oa=ra("exports"),Pa=ra("module"),ka={},sa=0,qa=function(a){var b=a.result;a.dynamic=b.dynamic;a.normalize=b.normalize;a.load=b.load;return a},Qa=function(a){var b={};k(a.loadQ,function(c){var d=Da(a,c.prid,c.req.module),e=a.dynamic?c.mid.replace(/waitingForPlugin$/,d):a.mid+"!"+d,d=o(o({},c),{mid:e,prid:d,injected:0});y[e]||Ha(y[e]=d);b[c.mid]=y[e];ja(c);delete y[c.mid]});a.loadQ=0;var c=function(a){for(var c=a.deps||[],d=0;d<c.length;d++)(a=
b[c[d].mid])&&(c[d]=a)},d;for(d in y)c(y[d]);k(S,c)},ta=function(a){n.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=sa++;a.loadQ&&(qa(a),Qa(a));for(f=0;f<S.length;)S[f]===a?S.splice(f,1):f++;/^require\*/.test(a.mid)&&delete y[a.mid]},Ra=[],na=function(a,c){if(4===a.executed)return n.trace("loader-circular-dependency",[Ra.concat(a.mid).join("->")]),!a.def||c?ka:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return ka;var d=a.mid,e=a.deps||[],i,k=[],l=0;for(a.executed=4;l<e.length;){i=
e[l++];i=i===Na?Y(a):i===Oa?a.cjs.exports:i===Pa?a.cjs:na(i,c);if(i===ka)return a.executed=0,n.trace("loader-exec-module",["abort",d]),ka;k.push(i)}n.trace("loader-run-factory",[a.mid]);var d=a.def,f;if(s("config-dojo-loader-catches"))try{f=b(d)?d.apply(null,k):d}catch(m){E("error",a.result=p("factoryThrew",[a,m]))}else f=b(d)?d.apply(null,k):d;a.result=void 0===f&&a.cjs?a.cjs.exports:f;ta(a)}return a.result},da=0,ma=function(a){try{da++,a()}finally{da--}Ma()&&E("idle",[])},ga=function(){da||ma(function(){for(var a,
b,c=0;c<S.length;)a=sa,b=S[c],na(b),a!=sa?c=0:c++})};void 0===s("dojo-loader-eval-hint-url")&&s.add("dojo-loader-eval-hint-url",1);var Fa=function(a){a+="";return a+(A?(/\?/.test(a)?"&":"?")+A:"")},Ha=function(a){var b=a.plugin;5===b.executed&&!b.load&&qa(b);var c=function(b){a.result=b;ja(a);ta(a);ga()};b.load?b.load(a.prid,a.req,c):b.loadQ?b.loadQ.push(a):(b.loadQ=[a],S.unshift(b),za(b))},ca=0,ua=0,va=0,Sa=function(a,b){s("config-stripStrict")&&(a=a.replace(/"use strict"/g,""));va=1;if(s("config-dojo-loader-catches"))try{a===
ca?ca.call(null):n.eval(a,s("dojo-loader-eval-hint-url")?b.url:b.mid)}catch(c){E("error",p("evalModuleThrew",b))}else a===ca?ca.call(null):n.eval(a,s("dojo-loader-eval-hint-url")?b.url:b.mid);va=0},za=function(a){var b=a.mid,c=a.url;if(!a.executed&&!a.injected&&!(W[b]||a.url&&(a.pack&&W[a.url]===a.pack||1==W[a.url])))if(ha(a),a.plugin)Ha(a);else{var d=function(){Ta(a);2!==a.injected&&(ja(a),o(a,Ga),n.trace("loader-define-nonmodule",[a.url]));ga()};(ca=D[b]||D["url:"+a.url])?(n.trace("loader-inject",
["cache",a.mid,c]),Sa(ca,a),d()):(n.trace("loader-inject",["script",a.mid,c]),ua=a,n.injectUrl(Fa(c),d,a),ua=0)}},wa=function(a,c,d){n.trace("loader-define-module",[a.mid,c]);if(2===a.injected)return E("error",p("multipleDefine",a)),a;o(a,{deps:c,def:d,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(b){a.cjs.exports=b},config:function(){return a.config}}});for(var e=0;e<c.length;e++)c[e]=ba(c[e],a);ja(a);if(!b(d)&&!c.length)a.result=d,ta(a);return a},Ta=function(a,b){for(var c=[],
d,e;aa.length;)e=aa.shift(),b&&(e[0]=b.shift()),d=e[0]&&ba(e[0])||a,c.push([d,e[1],e[2]]);N(a);k(c,function(a){$(wa.apply(null,a))})},la=0,ia=e,Aa=e;ia=function(){la&&clearTimeout(la);la=0};Aa=function(){ia();n.waitms&&(la=window.setTimeout(function(){ia();E("error",p("timeout",W))},n.waitms))};s.add("ie-event-behavior",!!r.attachEvent&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var xa=function(a,b,c,d){if(s("ie-event-behavior"))return a.attachEvent(c,d),function(){a.detachEvent(c,
d)};a.addEventListener(b,d,!1);return function(){a.removeEventListener(b,d,!1)}},Ua=xa(window,"load","onload",function(){n.pageLoaded=1;"complete"!=r.readyState&&(r.readyState="complete");Ua()}),Ia=r.getElementsByTagName("script")[0],Va=Ia.parentNode;n.injectUrl=function(a,b,c){var c=c.node=r.createElement("script"),d=xa(c,"load","onreadystatechange",function(a){var a=a||window.event,c=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(c.readyState))d(),e(),b&&b()}),e=xa(c,"error",
"onerror",function(b){d();e();E("error",p("scriptError",[a,b]))});c.type="text/javascript";c.charset="utf-8";c.src=a;Va.insertBefore(c,Ia);return c};n.log=e;n.trace=e;var Ja=function(a,c,d){var e=arguments.length,k=["require","exports","module"],l=[0,a,c];1==e?l=[0,b(a)?k:[],a]:2==e&&i(a)?l=[a,b(c)?k:[],c]:3==e&&(l=[a,c,d]);n.trace("loader-define",l.slice(0,2));if((e=l[0]&&ba(l[0]))&&!W[e.mid])$(wa(e,l[1],l[2]));else if(!s("ie-event-behavior")||va)aa.push(l);else{e=e||ua;if(!e)for(a in W)if((k=y[a])&&
k.node&&"interactive"===k.node.readyState){e=k;break}e?(N(e),$(wa(e,l[1],l[2]))):E("error",p("ieDefineFailed",l[0]));ga()}};Ja.amd={vendor:"dojotoolkit.org"};o(o(n,j.loaderPatch),g.loaderPatch);C("error",function(a){try{if(console.error(a),a instanceof Error)for(var b in a);}catch(c){}});o(n,{uid:m,cache:D,packs:K});if(!q.define){q.define=Ja;q.require=n;k(V,function(a){M(a)});var Ka=J.deps||g.deps||j.deps,La=J.callback||g.callback||j.callback;n.boot=Ka||La?[Ka||[],La]:0}})(this.dojoConfig||this.djConfig||
this.require||{},{async:0,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../../../src/dijit",name:"dijit"},{location:"../../../src/dojox",name:"dojox"},{location:"../../../src/JBrowse",name:"JBrowse"},{location:"../../../src/jszlib",name:"jszlib"},{location:"../../../src/dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../../../src/xstyle",main:"css",name:"xstyle"},{location:"../../../src/put-selector",
main:"put",name:"put-selector"},{location:"../../../src/json-schema",main:"lib/validate.js",name:"json-schema"},{location:"../../../src/dbind",name:"dbind"},{location:"../../../src/lazyload",main:"lazyload",name:"lazyload"}]});
require({cache:{"JBrowse/main":function(){require("JBrowse/Browser,JBrowse/ConfigAdaptor/JB_json_v1,JBrowse/View/TrackList/Simple,JBrowse/Store/Sequence/StaticChunked,JBrowse/Store/SeqFeature/NCList,JBrowse/Store/TiledImage/Fixed,JBrowse/View/Track/Sequence,JBrowse/View/Track/HTMLFeatures,JBrowse/View/Track/FixedImage/Wiggle,JBrowse/View/Track/Wiggle,JBrowse/View/Track/Wiggle/XYPlot,JBrowse/View/Track/Wiggle/Density,JBrowse/View/Track/Alignments,JBrowse/View/Track/Alignments2,JBrowse/View/Track/FeatureCoverage,JBrowse/View/Track/SNPCoverage,JBrowse/View/TrackList/Simple,JBrowse/Store/TrackMetaData,xstyle/load-css,dojox/gfx/svg".split(","))},"JBrowse/Browser":function(){var g=
g||[];define("dojo/_base/lang,dojo/on,dojo/_base/Deferred,dojo/DeferredList,dojo/topic,dojo/aspect,dojo/_base/array,dijit/layout/ContentPane,dijit/layout/BorderContainer,dijit/Dialog,dijit/form/ComboBox,dijit/form/Button,dijit/form/Select,dijit/form/DropDownButton,dijit/DropDownMenu,dijit/MenuItem,JBrowse/Util,JBrowse/Store/LazyTrie,JBrowse/Store/Names/LazyTrieDojoData,dojo/store/DataStore,JBrowse/Store/Names/Hash,JBrowse/GenomeView,JBrowse/TouchScreenSupport,JBrowse/ConfigManager,JBrowse/View/InfoDialog,JBrowse/View/FileDialog,JBrowse/View/LocationChoiceDialog,dijit/focus,lazyload,dojo/domReady!".split(","),
function(j,f,h,e,d,c,b,i,a,k,o,p,l,m,n,q,r,u,s,v,t,x,w,E,C,G,I,Q,K){var F=r.dojof,j=function(a){this.globalKeyboardShortcuts={};this.config=a;if(!this.config.baseUrl)this.config.baseUrl=r.resolveUrl(window.location.href,".")+"/data/";this.startTime=Date.now();this.container=dojo.byId(this.config.containerID);this.container.onselectstart=function(){return!1};this.container.genomeBrowser=this;var b=this;dojo.addOnLoad(function(){b.loadConfig().then(function(){b.loadNames();b.loadUserCSS().then(function(){b.initPlugins().then(function(){b.initTrackMetadata();
b.loadRefSeqs().then(function(){b.initView().then(function(){w.loadTouch();b.navigateTo(b._initialLocation());b.passMilestone("completely initialized",{success:!0})});b.reportUsageStats()})})})})})};j.prototype._initialLocation=function(){var a=dojo.fromJson(this.cookie("location"))||{};return this.config.location?this.config.location:a[this.refSeq.name]?a[this.refSeq.name].l||a[this.refSeq.name]:this.config.defaultLocation?this.config.defaultLocation:r.assembleLocString({ref:this.refSeq.name,start:0.4*
(this.refSeq.start+this.refSeq.end),end:0.6*(this.refSeq.start+this.refSeq.end)})};j.prototype.version=function(){return"1.8.0"}.call();j.prototype.getPlugin=function(a,b){this.afterMilestone("initPlugins",dojo.hitch(this,function(){b(this.plugins[a])}))};j.prototype.initPlugins=function(){return this._milestoneFunction("initPlugins",function(a){this.plugins={};var c=this.config.plugins||[],c=b.map(dojo.isArray(c)?c:[c],function(a){return"object"==typeof a?a:{name:a}}),d=b.map(c,function(a){return a.name}),
i=b.map(c,function(){return new h});(new e(i)).then(function(){a.resolve({success:!0})});require({packages:b.map(d,function(a){return{name:a,location:"../plugins/"+a+"/js"}})},d,dojo.hitch(this,function(){b.forEach(arguments,function(a,b){var e=d[b],k=i[b];if("string"==typeof a)console.error("could not load plugin "+e+": "+a);else{var l=dojo.mixin(dojo.clone(c[b]),this.config[e]||{});l.browser=this;l=dojo.mixin(l,{browser:this});this._loadCSS({url:"plugins/"+e+"/css/main.css"},function(){k.resolve({success:!0})},
function(){k.resolve({success:!0})});l=new a(l);this.plugins[e]=l}},this)}))})};j.prototype.fatalError=function(a){a&&(a+="",/\.$/.exec(a)||(a+="."));if(this.hasFatalErrors){var b=dojo.byId("fatal_error_list")||document.body;dojo.create("div",{className:"error",innerHTML:a+""},b)}else(dojo.byId(this.config.containerID||"GenomeBrowser")||document.body).innerHTML='<div class="fatal_error">  <h1>Congratulations, JBrowse is on the web!</h1>  <p>However, JBrowse could not start, either because it has not yet been configured     and loaded with data, or because of an error.</p>  <p style="font-size: 110%; font-weight: bold"><a title="View the tutorial" href="docs/tutorial/">If this is your first time running JBrowse, click here to follow the Quick-start Tutorial to get up and running.</a></p>  <p>Otherwise, please refer to the following resources for help in getting JBrowse up and running.</p>  <ul><li><a target="_blank" href="docs/tutorial/">Quick-start tutorial</a></li>      <li><a target="_blank" href="http://gmod.org/wiki/JBrowse">JBrowse wiki</a></li>      <li><a target="_blank" href="docs/config.html">Configuration reference</a></li>      <li><a target="_blank" href="docs/featureglyphs.html">Feature glyph reference</a></li>  </ul>  <div id="fatal_error_list" class="errors"> <h2>Error message(s):</h2>'+
(a?'<div class="error"> '+a+"</div>":"")+"  </div></div>",this.hasFatalErrors=!0};j.prototype.loadRefSeqs=function(){return this._milestoneFunction("loadRefSeqs",function(a){if("string"==typeof this.config.refSeqs)this.config.refSeqs={url:this.config.refSeqs};dojo.xhrGet({url:this.config.refSeqs.url,handleAs:"json",load:dojo.hitch(this,function(b){this.addRefseqs(b);a.resolve({success:!0})}),error:dojo.hitch(this,function(b){this.fatalError("Failed to load reference sequence info: "+b);a.resolve({success:!1,
error:b})})})})};j.prototype.onRefSeqsLoaded=function(){};j.prototype.loadUserCSS=function(){return this._milestoneFunction("loadUserCSS",function(a){if(this.config.css&&!dojo.isArray(this.config.css))this.config.css=[this.config.css];var c=this.config.css||[];if(c.length){var d=this,c=b.map(c,function(a){var b=new h;d._loadCSS(a,function(){b.resolve({success:!0})},function(){b.resolve({success:!1})});return b});(new e(c)).then(function(){a.resolve({success:!0})})}else a.resolve({success:!0})})};
j.prototype._loadCSS=function(a,b){"string"==typeof a&&(-1<a.indexOf("{")?(dojo.create("style",{"data-from":"JBrowse Config",type:"text/css",innerHTML:a},document.head),b&&b()):a={url:a});"object"==typeof a&&K.css(a.url,b)};j.prototype.loadNames=function(){return this._milestoneFunction("loadNames",function(a){var b=dojo.mixin(dojo.clone(this.config.names||{}),this.config.autocomplete||{});if(!b.url)b.url=this.config.nameUrl||"data/names/";if(b.baseUrl)b.url=r.resolveUrl(b.baseUrl,b.url);this.nameStore=
"Hash"==b.type?new t(dojo.mixin({browser:this},b)):new v({store:new s({browser:this,namesTrie:new u(b.url,"lazy-{Chunk}.json"),stopPrefixes:b.stopPrefixes,resultLimit:b.resultLimit||15,tooManyMatchesMessage:b.tooManyMatchesMessage})});a.resolve({success:!0})})};j.prototype.initView=function(){var b=this;return this._milestoneFunction("initView",function(c){dojo.addClass(this.container,"jbrowse");dojo.addClass(document.body,this.config.theme||"tundra");var d=dojo.create("div",{style:{overflow:"hidden"}},
this.container),e=dojo.create("div",{className:this.config.show_nav?"menuBar":"topLink"});b.menuBar=e;(this.config.show_nav?d:this.container).appendChild(e);var k=dojo.create("div",{className:"overview",id:"overview"},d);this.overviewDiv=k;if(!this.config.show_overview)k.style.cssText="display: none";if(this.config.show_nav)this.navbox=this.createNavBox(d);this.poweredByLink=dojo.create("a",{className:"powered_by",innerHTML:"JBrowse",href:"http://jbrowse.org",title:"powered by JBrowse"},e);if(this.config.show_nav){this.addGlobalMenuItem("file",
new q({label:"Open",iconClass:"dijitIconFolderOpen",onClick:dojo.hitch(this,"openFileDialog")}));if(k=this.makeGlobalMenu("file"))k=new m({className:"file",innerHTML:"File",dropDown:k}),dojo.addClass(k.domNode,"menu"),e.appendChild(k.domNode);if(k=this.makeGlobalMenu("options"))k=new m({className:"config",innerHTML:'<span class="icon"></span> Options',title:"configure JBrowse",dropDown:k}),e.appendChild(k.domNode)}this.config.show_nav&&this.config.show_tracklist&&this.config.show_overview?e.appendChild(this.makeShareLink()):
e.appendChild(this.makeFullViewLink());this.config.show_nav&&e.appendChild(this.makeHelpDialog());this.viewElem=document.createElement("div");this.viewElem.className="dragWindow";this.container.appendChild(this.viewElem);this.containerWidget=new a({liveSplitters:!1,design:"sidebar",gutters:!1},this.container);new i({region:"top"},d);this.view=this.viewElem.view=new x(this,this.viewElem,250,this.refSeq,0.005);dojo.connect(this.view,"onFineMove",this,"onFineMove");dojo.connect(this.view,"onCoarseMove",
this,"onCoarseMove");this.browserWidget=new i({region:"center"},this.viewElem);dojo.connect(this.browserWidget,"resize",this,"onResize");dojo.connect(this.browserWidget,"resize",this.view,"onResize");this.afterMilestone("loadRefSeqs",dojo.hitch(this,function(){this.afterMilestone("initTrackMetadata",dojo.hitch(this,function(){this.createTrackList().then(dojo.hitch(this,function(){this.containerWidget.startup();this.onResize();this.view.onResize();f(document.body,"keypress",dojo.hitch(this,"globalKeyHandler"));
this._initEventRouting();c.resolve({success:!0})}))}))}))})};j.prototype.registerTrackType=function(a){var c=this.getTrackTypes(),d=a.type,e=a.defaultForStoreTypes||[];c.knownTrackTypes.push(d);if(a.label)c.trackTypeLabels[d]=a.label;var i={};c.knownTrackTypes=b.filter(c.knownTrackTypes,function(a){var b=i[a];i[a]=!0;return!b});b.forEach(e,function(a){c.trackTypeDefaults[a]=d});this._knownTrackTypes=c};j.prototype.getTrackTypes=function(){if(!this._knownTrackTypes)this._knownTrackTypes={trackTypeDefaults:{"JBrowse/Store/SeqFeature/BAM":"JBrowse/View/Track/Alignments2",
"JBrowse/Store/SeqFeature/NCList":"JBrowse/View/Track/HTMLFeatures","JBrowse/Store/SeqFeature/BigWig":"JBrowse/View/Track/Wiggle/XYPlot","JBrowse/Store/Sequence/StaticChunked":"JBrowse/View/Track/Sequence"},knownTrackTypes:"JBrowse/View/Track/Alignments,JBrowse/View/Track/Alignments2,JBrowse/View/Track/FeatureCoverage,JBrowse/View/Track/SNPCoverage,JBrowse/View/Track/HTMLFeatures,JBrowse/View/Track/Wiggle/XYPlot,JBrowse/View/Track/Wiggle/Density,JBrowse/View/Track/Sequence".split(","),trackTypeLabels:{}};
return this._knownTrackTypes};j.prototype.openFileDialog=function(){(new G({browser:this})).show({openCallback:dojo.hitch(this,function(a){var c=a.trackConfs||[];c.length&&(b.forEach(c,function(a){var b=a.store;if(b&&"object"==typeof b)delete a.store,b=this._addStoreConfig(b.name,b),a.store=b},this),this.publish("/jbrowse/v1/v/tracks/new",c),"openImmediately"==a.trackDisposition&&this.publish("/jbrowse/v1/v/tracks/show",c))})})};j.prototype.addTracks=function(a){this._addTrackConfigs(a)};j.prototype.replaceTracks=
function(a){this._replaceTrackConfigs(a)};j.prototype.deleteTracks=function(a){this._deleteTrackConfigs(a)};j.prototype.makeGlobalMenu=function(a){a=(this._globalMenuItems||{})[a]||[];if(!a.length)return null;var b=new n({leftClickToOpen:!0});dojo.forEach(a,function(a){b.addChild(a)});dojo.addClass(b.domNode,"globalMenu");b.startup();return b};j.prototype.addGlobalMenuItem=function(a,b){if(!this._globalMenuItems)this._globalMenuItems={};this._globalMenuItems[a]||(this._globalMenuItems[a]=[]);this._globalMenuItems[a].push(b)};
j.prototype._initEventRouting=function(){var a=this;a.subscribe("/jbrowse/v1/v/tracks/hide",function(b){a.publish("/jbrowse/v1/c/tracks/hide",b)});a.subscribe("/jbrowse/v1/v/tracks/show",function(b){a.addRecentlyUsedTracks(dojo.map(b,function(a){return a.label}));a.publish("/jbrowse/v1/c/tracks/show",b)});a.subscribe("/jbrowse/v1/v/tracks/new",function(b){a.addTracks(b);a.publish("/jbrowse/v1/c/tracks/new",b)});a.subscribe("/jbrowse/v1/v/tracks/replace",function(b){a.replaceTracks(b);a.publish("/jbrowse/v1/c/tracks/replace",
b)});a.subscribe("/jbrowse/v1/v/tracks/delete",function(b){a.deleteTracks(b);a.publish("/jbrowse/v1/c/tracks/delete",b)})};j.prototype.reportUsageStats=function(){if(!this.config.suppressUsageStatistics){var a=this._calculateClientStats();this._reportGoogleUsageStats(a);this._reportCustomUsageStats(a)}};j.prototype._reportGoogleUsageStats=function(a){g.push.apply(g,[["_setAccount","UA-7115575-2"],["_setDomainName","none"],["_setAllowLinker",!0],["_setCustomVar",1,"tracks-count",a["tracks-count"],
3],["_setCustomVar",2,"refSeqs-count",a["refSeqs-count"],3],["_setCustomVar",3,"refSeqs-avgLen",a["refSeqs-avgLen"],3],["_setCustomVar",4,"jbrowse-version",a.ver,3],["_setCustomVar",5,"loadTime",a.loadTime,3],["_trackPageview"]]);a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)};j.prototype._reportCustomUsageStats=
function(a){dojo.create("img",{style:{display:"none"},src:"http://jbrowse.org/analytics/clientReport?"+dojo.objectToQuery(a)},document.body)};j.prototype.getStore=function(a,b){if(!b)throw"invalid arguments";var c=this._storeCache||{};this._storeCache=c;if(c=c[a])c.refCount++,b(c.store);else{var d=this.config.stores[a];d?(c=d.type)?require([c],dojo.hitch(this,function(c){var e=dojo.mixin(d,{browser:this,refSeq:this.refSeq}),c=new c(e);this._storeCache[a]={refCount:1,store:c};b(c)})):(console.warn("store "+
a+" has no type defined"),b(null)):(console.error("store "+a+" not defined"),b(null))}};var z=0;j.prototype._addStoreConfig=function(a,b){a=a||"addStore"+z++;if(!this.config.stores)this.config.stores={};if(!this._storeCache)this._storeCache={};if(this.config.stores[a]||this._storeCache[a])throw"store "+a+" already exists!";this.config.stores[a]=b;return a};j.prototype.clearStores=function(){this._storeCache={}};j.prototype.releaseStore=function(a){var b=this._storeCache[a];b&&!--b.refCount&&delete this._storeCache[a]};
j.prototype._calculateClientStats=function(){var a=screen||window.screen,b=new Date,c={ver:this.version||"dev","refSeqs-count":this.refSeqOrder.length,"refSeqs-avgLen":!this.refSeqOrder.length?null:F.reduce(dojo.map(this.refSeqOrder,function(a){a=this.allRefs[a];return!a?0:a.end-a.start},this),"+"),"tracks-count":this.config.tracks.length,plugins:F.keys(this.plugins).sort().join(","),"scn-h":a?a.height:null,"scn-w":a?a.width:null,"win-h":document.body.offsetHeight,"win-w":document.body.offsetWidth,
"el-h":this.container.offsetHeight,"el-w":this.container.offsetWidth,t:b.getTime()/1E3,tzoffset:b.getTimezoneOffset(),loadTime:(b.getTime()-this.startTime)/1E3};dojo.forEach(this.config.tracks,function(a){a="track-types-"+a.type||"null";c[a]=(c[a]||0)+1});return c};j.prototype.publish=function(){return d.publish.apply(d,arguments)};j.prototype.subscribe=function(){return d.subscribe.apply(d,arguments)};j.prototype.onResize=function(){if(this.navbox)this.view.locationTrapHeight=dojo.marginBox(this.navbox).h};
j.prototype.getRecentlyUsedTracks=function(){return dojo.fromJson(this.cookie("recentTracks")||"[]")};j.prototype.addRecentlyUsedTracks=function(a){a=r.uniq(dojo.map(a,function(a){return{label:a,time:Math.round(new Date/1E3)}},this).concat(dojo.fromJson(this.cookie("recentTracks"))||[]),function(a){return a.label}).slice(0,this.config.maxRecentTracks||10);this.cookie("recentTracks",a,{expires:365});return a};j.prototype._milestoneFunction=function(a,b){var c=Array.prototype.slice.call(arguments,2),
d=this._getDeferred(a);c.unshift(d);try{b.apply(this,c)}catch(e){console.error(""+e,e.stack),d.resolve({success:!1,error:e})}return d};j.prototype._getDeferred=function(a){if(!this._deferred)this._deferred={};return this._deferred[a]=this._deferred[a]||new h};j.prototype.afterMilestone=function(a,b){return this._getDeferred(a).then(function(){try{b()}catch(a){console.error(""+a,a.stack,a)}})};j.prototype.passMilestone=function(a,b){return this._getDeferred(a).resolve(b)};j.prototype.reachedMilestone=
function(a){return 0<=this._getDeferred(a).fired};j.prototype.loadConfig=function(){return this._milestoneFunction("loadConfig",function(a){(new E({config:this.config,defaults:this._configDefaults(),browser:this})).getFinalConfig(dojo.hitch(this,function(b){this.config=b;var c=b.tracks||[];delete b.tracks;this._addTrackConfigs(c);dojo.forEach(["show_tracklist","show_nav","show_overview"],function(a){this.config[a]=this._coerceBoolean(this.config[a])},this);if(!this.config.tracks)this.config.tracks=
[];a.resolve({success:!0})}))})};j.prototype._addTrackConfigs=function(a){if(!this.config.tracks)this.config.tracks=[];if(!this.trackConfigsByName)this.trackConfigsByName={};b.forEach(a,function(a){this.trackConfigsByName[a.label]=a;this.config.tracks.push(a)},this);return a};j.prototype._replaceTrackConfigs=function(a){if(!this.trackConfigsByName)this.trackConfigsByName={};b.forEach(a,function(a){this.trackConfigsByName[a.label]||console.warn("track with label "+a.label+" does not exist yet.  creating a new one.");
this.trackConfigsByName[a.label]=dojo.mixin(this.trackConfigsByName[a.label]||{},a)},this)};j.prototype._deleteTrackConfigs=function(a){this.config.tracks=b.filter(this.config.tracks||[],function(c){return!b.some(a,function(a){return a.label==c.label})});b.forEach(a,function(a){this.trackConfigsByName[a.label]?delete this.trackConfigsByName[a.label]:console.warn("track "+a.label+" does not exist, cannot delete")},this)};j.prototype._configDefaults=function(){return{tracks:[],show_tracklist:!0,show_nav:!0,
show_overview:!0}};j.prototype._coerceBoolean=function(a){return"string"==typeof a?(a=a.toLowerCase(),"true"==a?!0:"false"==a?!1:parseInt(a)):"boolean"==typeof a?a:"number"==typeof a?!!a:!0};j.prototype.addRefseqs=function(a){this.allRefs=this.allRefs||{};this.refSeqOrder=this.refSeqOrder||[];var b=this.cookie("refseq");dojo.forEach(a,function(a){this.allRefs[a.name]||this.refSeqOrder.push(a.name);this.allRefs[a.name]=a;if(b&&a.name.toLowerCase()==b.toLowerCase())this.refSeq=a},this);this.refSeqOrder=
this.refSeqOrder.sort();this.refSeq=this.refSeq||a[0]};j.prototype.getCurrentRefSeq=function(){return this.refSeq||{}};j.prototype.getRefSeq=function(a,b){"string"!=typeof a&&(a=this.refSeqOrder[0]);b(this.allRefs[a])};j.prototype.onFineMove=function(a,b){if(this.locationTrap){var c=this.view.ref.end-this.view.ref.start,d=Math.round((a-this.view.ref.start)/c*this.view.overviewBox.w+this.view.overviewBox.l),c=Math.round((b-this.view.ref.start)/c*this.view.overviewBox.w+this.view.overviewBox.l);dojo.style(this.locationTrap,
{width:c-d+"px",borderBottomWidth:this.view.locationTrapHeight+"px",borderLeftWidth:d+"px",borderRightWidth:this.view.overviewBox.w-c+"px"})}};j.prototype.initTrackMetadata=function(){return this._milestoneFunction("initTrackMetadata",function(a){var b=dojo.map((this.config.trackMetadata||{}).sources||[],function(a){var b=a.url||"trackMeta.csv",c=a.type||(/\.csv$/i.test(b)?"csv":/\.js(on)?$/i.test(b)?"json":"csv"),a=a["class"]||{csv:"dojox/data/CsvStore",json:"dojox/data/JsonRestStore"}[c];return!a?
(console.error("No store class found for type '"+c+"', cannot load track metadata from URL "+b),null):{class_:a,url:b}});require(Array.prototype.concat.apply(["JBrowse/Store/TrackMetaData"],dojo.map(b,function(a){return a.class_})),dojo.hitch(this,function(c){for(var d=[],e=1;e<arguments.length;e++)d.push(new arguments[e]({url:b[e-1].url}));this.trackMetaDataStore=new c(dojo.mixin(dojo.clone(this.config.trackMetadata||{}),{trackConfigs:this.config.tracks,browser:this,metadataStores:d}));a.resolve({success:!0})}))})};
j.prototype.createTrackList=function(){return this._milestoneFunction("createTrack",function(a){require(["JBrowse/View/TrackList/"+(!this.config.show_tracklist?"Null":(this.config.trackSelector||{}).type?this.config.trackSelector.type:"Simple")],dojo.hitch(this,function(b){this.trackListView=new b(dojo.mixin(dojo.clone(this.config.trackSelector)||{},{trackConfigs:this.config.tracks,browser:this,trackMetaData:this.trackMetaDataStore}));this.setGlobalKeyboardShortcut("t",this.trackListView,"toggle");
this.subscribe("/jbrowse/v1/n/tracks/visibleChanged",dojo.hitch(this,function(){this.cookie("tracks",this.view.visibleTrackNames().join(","),{expires:60})}));this.showTracks(this.config.forceTracks||this.cookie("tracks")||this.config.defaultTracks||"DNA");a.resolve({success:!0})}))})};j.prototype.onVisibleTracksChanged=function(){};j.prototype.showRegion=function(a){var c=Math.round(0.2*(a.end-a.start));this.navigateToLocation({ref:a.ref,start:a.start-c,end:a.end+c});a.tracks&&this.showTracks(b.map(a.tracks,
function(a){return a&&(a.label||a.name)||a}))};j.prototype.navigateTo=function(a){this.afterMilestone("completely initialized",dojo.hitch(this,function(){var b="string"==typeof a?r.parseLocString(a):a;if(b)this.navigateToLocation(b);else if(b=r.matchRefSeqName(a,this.allRefs)){var c;try{c=r.parseLocString(dojo.fromJson(this.cookie("location"))[b.name].l),c.ref=b.name}catch(d){}c?this.navigateToLocation(c):this.navigateToLocation({ref:b.name,start:0.1*b.end,end:0.9*b.end})}else this.searchNames(a)}))};
j.prototype.navigateToLocation=function(a){var b=a.ref?r.matchRefSeqName(a.ref,this.allRefs):this.refSeq;if(b)a.ref=b.name,a.start=Math.max(0,a.start||0),a.end=Math.max(a.start,Math.min(b.end,a.end||b.end)),a.ref==this.refSeq.name?(this.view.setLocation(this.refSeq,a.start,a.end),this._updateLocationCookies(a)):(b=this.view.visibleTrackNames(),this.refSeq=this.allRefs[a.ref],this.clearStores(),this.view.setLocation(this.refSeq,a.start,a.end),this._updateLocationCookies(a),this.showTracks(b))};j.prototype.searchNames=
function(a){var b=this;this.nameStore.query({name:a}).then(function(c){if(c.length){for(var d,e=0;e<c.length;e++)c[e].name==a&&(d=c[e]);if(!d)for(e=0;e<c.length;e++)c[e].name.toLowerCase()==a.toLowerCase()&&(d=c[e]);d||(d=c[0]);d.location?b.showRegion(d.location):d.multipleLocations&&(new I({browser:b,locationChoices:d.multipleLocations,title:"Choose "+d.name+" location",prompt:'"'+d.name+'" is found in multiple locations.  Please choose a location to view.'})).show()}else(new C({title:"Not found",
content:'Not found: <span class="locString">'+a+"</span>",className:"notfound-dialog"})).show()})};j.prototype.showTracks=function(a){this.afterMilestone("completely initialized",dojo.hitch(this,function(){"string"==typeof a&&(a=a.split(","));a&&(this.publish("/jbrowse/v1/c/tracks/show",dojo.filter(dojo.map(a,function(a){return this.trackConfigsByName[a]},this),function(a){return a})),this.publish("/jbrowse/v1/n/tracks/visibleChanged"))}))};j.prototype.makeHelpDialog=function(){var a=this.config.browserRoot||
"",b=document.createElement("div");b.style.display="none";b.className="helpDialog";b.innerHTML='<div class="main" style="float: left; width: 49%;"><dl><dt>Moving</dt><dd><ul>    <li>Move the view by clicking and dragging in the track area, or by clicking <img height="20px" src="'+a+'img/slide-left.png"> or <img height="20px"  src="'+a+'img/slide-right.png"> in the navigation bar.</li>    <li>Center the view at a point by clicking on either the track scale bar or overview bar, or by shift-clicking in the track area.</li></ul></dd><dt>Zooming</dt><dd><ul>    <li>Zoom in and out by clicking <img height="20px" src="'+
a+'img/zoom-in-1.png"> or <img height="20px"  src="'+a+'img/zoom-out-1.png"> in the navigation bar.</li>    <li>Select a region and zoom to it ("rubber-band" zoom) by clicking and dragging in the overview or track scale bar, or shift-clicking and dragging in the track area.</li>    </ul></dd><dt>Selecting Tracks</dt><dd><ul><li>Turn a track on by dragging its track label from the "Available Tracks" area into the genome area.</li>        <li>Turn a track off by dragging its track label from the genome area back into the "Available Tracks" area.</li>    </ul></dd></dl></div><div class="main" style="float: right; width: 49%;"><dl><dt>Searching</dt><dd><ul>    <li>Jump to a feature or reference sequence by typing its name in the search box and pressing Enter.</li>    <li>Jump to a specific region by typing the region into the search box as: <span class="example">ref:start..end</span>.</li>    </ul></dd><dt>Example Searches</dt><dd>    <dl class="searchexample">        <dt>uc0031k.2</dt><dd>jumps to the feature named <span class="example">uc0031k.2</span>.</dd>        <dt>chr4</dt><dd>jumps to chromosome 4</dd>        <dt>chr4:79,500,000..80,000,000</dt><dd>jumps the region on chromosome 4 between 79.5Mb and 80Mb.</dd>    </dl></dd><dt>JBrowse Configuration</dt><dd><ul><li><a target="_blank" href="docs/tutorial/">Quick-start tutorial</a></li>        <li><a target="_blank" href="http://gmod.org/wiki/JBrowse">JBrowse wiki</a></li>        <li><a target="_blank" href="docs/config.html">Configuration reference</a></li>        <li><a target="_blank" href="docs/featureglyphs.html">Feature glyph reference</a></li>    </ul></dd></dl></div>';
this.container.appendChild(b);var c=new C({"class":"help_dialog",refocus:!1,draggable:!1,title:"JBrowse Help"},b),a=new p({className:"help",title:"Help",innerHTML:'<span class="icon"></span> Help',onClick:function(){c.show()}});this.setGlobalKeyboardShortcut("?",c,"show");dojo.connect(document.body,"onkeydown",function(a){a.keyCode!=dojo.keys.SHIFT&&a.keyCode!=dojo.keys.CTRL&&a.keyCode!=dojo.keys.ALT&&c.hide()});return a.domNode};j.prototype.setGlobalKeyboardShortcut=function(a){this.globalKeyboardShortcuts[a]&&
console.warn("WARNING: JBrowse global keyboard shortcut '"+a+"' redefined");var b=dojo.hitch.apply(dojo,Array.prototype.slice.call(arguments,1));this.globalKeyboardShortcuts[a]=b};j.prototype.globalKeyHandler=function(a){if(!Q.curNode){var b=this.globalKeyboardShortcuts[a.keyChar||String.fromCharCode(a.charCode||a.keyCode)];b&&(b.call(this),a.stopPropagation())}};j.prototype.makeShareLink=function(){if("share_link"in this.config&&!this.config.share_link)return null;var a=this,b="#",c=new p({className:"share",
innerHTML:'<span class="icon"></span> Share',title:"share this view",onClick:function(){i.value=b;l.href=b;f.show();var a=dojo.position(c.domNode);dojo.style(f.domNode,{top:a.y+a.h+"px",right:0,left:""});i.focus();i.select();e.style.display="block";return!1}}),d=dojo.create("div",{innerHTML:"Paste this link in <b>email</b> or <b>IM</b>"}),e=dojo.create("div",{className:"copyReminder",innerHTML:"Press CTRL-C to copy"}),i=dojo.create("input",{type:"text",value:b,size:50,readonly:"readonly",onclick:function(){this.select();
e.style.display="block"},onblur:function(){e.style.display="none"}}),l=dojo.create("a",{innerHTML:"Preview",target:"_blank",href:b,style:{display:"block","float":"right"}},d),f=new k({className:"sharePane",title:"Share this view",draggable:!1,content:[d,i,e],autofocus:!1}),d=dojo.hitch(this,function(){b="".concat(window.location.protocol,"//",window.location.host,window.location.pathname,"?",dojo.objectToQuery({loc:a.view.visibleRegionLocString(),tracks:a.view.visibleTrackNames().join(","),data:a.config.queryParams.data}))});
dojo.connect(this,"onCoarseMove",d);this.subscribe("/jbrowse/v1/n/tracks/visibleChanged",d);return c.domNode};j.prototype.makeFullViewLink=function(){var a=dojo.create("a",{className:"topLink",href:window.location.href,target:"_blank",title:"View in full browser",innerHTML:"Full view"}),b=dojo.hitch(this,function(){a.href="".concat(window.location.protocol,"//",window.location.host,window.location.pathname,"?",dojo.objectToQuery({loc:this.view.visibleRegionLocString(),tracks:this.view.visibleTrackNames().join(","),
data:this.config.queryParams.data}))});dojo.connect(this,"onCoarseMove",b);this.subscribe("/jbrowse/v1/n/tracks/visibleChanged",b);return a};j.prototype.onCoarseMove=function(a,b){this._updateLocationThumb();var c={start:a,end:b,ref:this.refSeq.name};this.locationBox&&(this.locationBox.set("value",r.assembleLocStringWithLength(c),!1),this.goButton.set("disabled",!0));this.refSeqSelectBox&&this.refSeqSelectBox.set("value",this.refSeq.name,!1);if(this.reachedMilestone("completely initialized"))this._updateLocationCookies(c),
document.title=r.assembleLocString(c);this.publish("/jbrowse/v1/n/navigate",c)};j.prototype._updateLocationThumb=function(){var a=this.view.minVisible(),b=this.view.maxVisible(),c=this.view.ref.end-this.view.ref.start,a=Math.round((a-this.view.ref.start)/c*this.view.overviewBox.w+this.view.overviewBox.l),b=Math.round((b-this.view.ref.start)/c*this.view.overviewBox.w+this.view.overviewBox.l);this.view.locationThumb.style.cssText="height: "+(this.view.overviewBox.h-4)+"px; left: "+a+"px; width: "+(b-
a)+"px;z-index: 20"};j.prototype._updateLocationCookies=function(a){var a="string"==typeof a?a:r.assembleLocString(a),b=dojo.fromJson(this.cookie("location"))||{_version:1};b._version||(b=this._migrateLocMap(b));b[this.refSeq.name]={l:a,t:Math.round((new Date).getTime()/1E3)-1340211510};b=this._limitLocMap(b,this.config.maxSavedLocations||10);this.cookie("location",dojo.toJson(b),{expires:60});this.cookie("refseq",this.refSeq.name)};j.prototype._migrateLocMap=function(a){var b={_version:1},c;for(c in a)b[c]=
{l:a[c],t:0};return b};j.prototype._limitLocMap=function(a,b){var c=F.keys(a);if(c.length<=b)return a;a=dojo.clone(a);c=c.sort(function(b,c){return a[c].t-a[b].t}).slice(b-1);dojo.forEach(c,function(b){delete a[b]});return a};j.prototype.cookie=function(){arguments[0]=this.config.containerID+"-"+arguments[0];"object"==typeof arguments[1]&&(arguments[1]=dojo.toJson(arguments[1]));var a=this.config.cookieSizeLimit||1200;return arguments[1]&&arguments[1].length>a?(console.warn("not setting cookie '"+
arguments[0]+"', value too big ("+arguments[1].length+" > "+a+")"),dojo.cookie(arguments[0])):dojo.cookie.apply(dojo.cookie,arguments)};j.prototype.createNavBox=function(a){var c=this.config.browserRoot?this.config.browserRoot:"",a=dojo.create("div",{id:"navbox",style:{"text-align":"center"}},a);this.locationTrap=dojo.create("div",{className:"locationTrap"},a);var d=String.fromCharCode(160),d=d+d+d+d;a.appendChild(document.createTextNode(d));var e=document.createElement("input");e.type="image";e.src=
c+"img/slide-left.png";e.id="moveLeft";e.className="icon nav";e.style.height="40px";a.appendChild(e);dojo.connect(e,"click",this,function(a){dojo.stopEvent(a);this.view.slide(0.9)});e=document.createElement("input");e.type="image";e.src=c+"img/slide-right.png";e.id="moveRight";e.className="icon nav";e.style.height="40px";a.appendChild(e);dojo.connect(e,"click",this,function(a){dojo.stopEvent(a);this.view.slide(-0.9)});a.appendChild(document.createTextNode(d));e=document.createElement("input");e.type=
"image";e.src=c+"img/zoom-out-2.png";e.id="bigZoomOut";e.className="icon nav";e.style.height="40px";a.appendChild(e);dojo.connect(e,"click",this,function(a){dojo.stopEvent(a);this.view.zoomOut(void 0,void 0,2)});e=document.createElement("input");e.type="image";e.src=c+"img/zoom-out-1.png";e.id="zoomOut";e.className="icon nav";e.style.height="40px";a.appendChild(e);dojo.connect(e,"click",this,function(a){dojo.stopEvent(a);this.view.zoomOut()});e=document.createElement("input");e.type="image";e.src=
c+"img/zoom-in-1.png";e.id="zoomIn";e.className="icon nav";e.style.height="40px";a.appendChild(e);dojo.connect(e,"click",this,function(a){dojo.stopEvent(a);this.view.zoomIn()});e=document.createElement("input");e.type="image";e.src=c+"img/zoom-in-2.png";e.id="bigZoomIn";e.className="icon nav";e.style.height="40px";a.appendChild(e);dojo.connect(e,"click",this,function(a){dojo.stopEvent(a);this.view.zoomIn(void 0,void 0,2)});a.appendChild(document.createTextNode(d));var i=dojo.create("span",{},a);this.locationBox=
new o({id:"location",name:"location",style:{width:"25ex"},maxLength:400,searchAttr:"name"},dojo.create("input",{},a));this.afterMilestone("loadNames",dojo.hitch(this,function(){this.nameStore&&this.locationBox.set("store",this.nameStore)}));this.locationBox.focusNode.spellcheck=!1;dojo.query("div.dijitArrowButton",this.locationBox.domNode).orphan();dojo.connect(this.locationBox.focusNode,"keydown",this,function(a){a.keyCode==dojo.keys.ENTER?(this.locationBox.closeDropDown(!1),this.navigateTo(this.locationBox.get("value")),
this.goButton.set("disabled",!0),dojo.stopEvent(a)):this.goButton.set("disabled",!1)});dojo.connect(a,"onselectstart",function(a){a.stopPropagation();return!0});(function(){var a=eval(this.locationBox.dropDownClass).prototype,b=a._createOption;a._createOption=function(a){var c=b.apply(this,arguments);a.hitLimit&&dojo.addClass(c,"moreMatches");return c};var c=a.onClick;a.onClick=function(a){return dojo.hasClass(a,"moreMatches")?null:c.apply(this,arguments)}}).call(this);this.goButton=new p({label:"Go",
onClick:dojo.hitch(this,function(a){this.navigateTo(this.locationBox.get("value"));this.goButton.set("disabled",!0);dojo.stopEvent(a)})},dojo.create("button",{},a));this.afterMilestone("loadRefSeqs",dojo.hitch(this,function(){if(this.refSeqOrder.length&&30>this.refSeqOrder.length||this.config.refSeqDropdown)this.refSeqSelectBox=(new l({name:"refseq",value:this.refSeq?this.refSeq.name:null,options:b.map(this.refSeqOrder||[],function(a){return{label:a,value:a}}),onChange:dojo.hitch(this,function(a){this.navigateToLocation({ref:a})})})).placeAt(i);
this.locationBox.domNode.style.width=(this.config.locationBoxLength||function(){if(!this.refSeqOrder.length)return 20;var a=1E3>this.refSeqOrder.length&&function(){var a;b.forEach(this.refSeqOrder,function(b){b=this.allRefs[b];if(!b.length)b.length=b.end-b.start+1;if(!a||a.length<b.length)a=b},this);return a}.call(this)||this.refSeqOrder.length&&this.allRefs[this.refSeqOrder[this.refSeqOrder.length-1]]||20;return r.assembleLocStringWithLength({ref:a.name,start:a.end-1,end:a.end,length:a.length}).length}.call(this)||
20)+"ex"}));return a};return j})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(g,j){j.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var f=j("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],h=f.length,e=function(a,b,c){var d,e=0,i=g.global;if(!c)if(a.length){d=a[e++];try{c=g.scopeMap[d]&&g.scopeMap[d][1]}catch(f){}c=c||(d in i?i[d]:b?i[d]=
{}:void 0)}else return i;for(;c&&(d=a[e++]);)c=d in c?c[d]:b?c[d]={}:void 0;return c},d=Object.prototype.toString,c=function(a,b,c){return(c||[]).concat(Array.prototype.slice.call(a,b||0))},b=/\{([^\}]+)\}/g,i={_extraNames:f,_mixin:function(a,b,c){var d,e,i,n={};for(d in b)if(e=b[d],!(d in a)||a[d]!==e&&(!(d in n)||n[d]!==e))a[d]=c?c(e):e;if(j("bug-for-in-skips-shadowed")&&b)for(i=0;i<h;++i)if(d=f[i],e=b[d],!(d in a)||a[d]!==e&&(!(d in n)||n[d]!==e))a[d]=c?c(e):e;return a},mixin:function(a,b){a||
(a={});for(var c=1,d=arguments.length;c<d;c++)i._mixin(a,arguments[c]);return a},setObject:function(a,b,c){var d=a.split("."),a=d.pop();return(c=e(d,!0,c))&&a?c[a]=b:void 0},getObject:function(a,b,c){return e(a.split("."),b,c)},exists:function(a,b){return void 0!==i.getObject(a,!1,b)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&(a instanceof Array||"array"==typeof a)},isFunction:function(a){return"[object Function]"===d.call(a)},isObject:function(a){return void 0!==
a&&(null===a||"object"==typeof a||i.isArray(a)||i.isFunction(a))},isArrayLike:function(a){return a&&void 0!==a&&!i.isString(a)&&!i.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(i.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!i.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(""+a)},extend:function(a,b){for(var c=1,d=arguments.length;c<d;c++)i._mixin(a.prototype,arguments[c]);return a},_hitchArgs:function(a,b){var c=i._toArray(arguments,2),d=i.isString(b);return function(){var e=
i._toArray(arguments),f=d?(a||g.global)[b]:b;return f&&f.apply(a||this,c.concat(e))}},hitch:function(a,b){if(2<arguments.length)return i._hitchArgs.apply(g,arguments);b||(b=a,a=null);if(i.isString(b)){a=a||g.global;if(!a[b])throw['lang.hitch: scope["',b,'"] is null (scope="',a,'")'].join("");return function(){return a[b].apply(a,arguments||[])}}return!a?b:function(){return b.apply(a,arguments||[])}},delegate:function(){function a(){}return function(b,c){a.prototype=b;var d=new a;a.prototype=null;
c&&i._mixin(d,c);return d}}(),_toArray:j("ie")?function(){function a(a,b,c){c=c||[];for(b=b||0;b<a.length;b++)c.push(a[b]);return c}return function(b){return(b.item?a:c).apply(this,arguments)}}():c,partial:function(a){return i.hitch.apply(g,[null].concat(i._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||i.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);var b,c,
d;if(i.isArray(a)){b=[];for(c=0,d=a.length;c<d;++c)c in a&&b.push(i.clone(a[c]))}else b=a.constructor?new a.constructor:{};return i._mixin(b,a,i.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,c,d){return a.replace(d||b,i.isFunction(c)?c:function(a,b){return i.getObject(b,!1,c)})}};i.mixin(g,i);return i})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(g,j,f,
h){var e,d={},c={},b={config:j,global:this,dijit:d,dojox:c},d={dojo:["dojo",b],dijit:["dijit",d],dojox:["dojox",c]},h=f.map&&f.map[h.id.match(/[^\/]+/)[0]];for(e in h)d[e]?d[e][0]=h[e]:d[e]=[h[e],{}];for(e in d)h=d[e],h[1]._scopeName=h[0],j.noGlobals||(this[h[0]]=h[1]);b.scopeMap=d;b.baseUrl=b.config.baseUrl=f.baseUrl;b.isAsync=f.async;b.locale=j.locale;h="$Rev: 30226 $".match(/\d+/);b.version={major:1,minor:8,patch:3,flag:"",revision:h?+h[0]:NaN,toString:function(){var a=b.version;return a.major+
"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(b);b.exit=function(){};"undefined"!=typeof console||(console={});for(var d="assert,count,debug,dir,dirxml,error,group,groupEnd,info,profile,profileEnd,time,timeEnd,trace,warn,log".split(","),i,h=0;i=d[h++];)console[i]||function(){var a=i+"";console[a]="log"in console?function(){var b=Array.apply({},arguments);b.unshift(a+":");console.log(b.join(" "))}:
function(){};console[a]._fake=!0}();g.add("dojo-debug-messages",!!j.isDebug);b.deprecated=b.experimental=function(){};if(g("dojo-debug-messages"))b.deprecated=function(a,b,c){a="DEPRECATED: "+a;b&&(a+=" "+b);c&&(a+=" -- will be removed in version: "+c);console.warn(a)},b.experimental=function(a,b){var c="EXPERIMENTAL: "+a+" -- APIs subject to change without notice.";b&&(c+=" "+b);console.warn(c)};if(j.modulePaths){b.deprecated("dojo.modulePaths","use paths configuration");g={};for(e in j.modulePaths)g[e.replace(/\./g,
"/")]=j.modulePaths[e];f({paths:g})}b.moduleUrl=function(a,c){b.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var d=null;a&&(d=f.toUrl(a.replace(/\./g,"/")+(c?"/"+c:"")+"/*.*").replace(/\/\*\.\*/,"")+(c?"":"/"));return d};b._hasResource={};return b})},"dojo/has":function(){define(["require","module"],function(g){var j=g.has||function(){};j.add("dom-addeventlistener",!!document.addEventListener);j.add("touch","ontouchstart"in document);j.add("device-width",screen.availWidth||innerWidth);
g=document.createElement("form");j.add("dom-attributes-explicit",0==g.attributes.length);j.add("dom-attributes-specified-flag",0<g.attributes.length&&40>g.attributes.length);j.clearElement=function(f){f.innerHTML="";return f};j.normalize=function(f,h){var e=f.match(/[\?:]|[^:\?]*/g),d=0,c=function(b){var i=e[d++];if(":"==i)return 0;if("?"==e[d++]){if(!b&&j(i))return c();c(!0);return c(b)}return i||0};return(f=c())&&h(f)};j.load=function(f,h,e){f?h([f],e):e()};return j})},"dojo/_base/config":function(){define(["../has",
"require"],function(g,j){var f={},h=j.rawConfig,e;for(e in h)f[e]=h[e];return f})},"dojo/sniff":function(){define(["./has"],function(g){var j=navigator,f=j.userAgent,j=j.appVersion,h=parseFloat(j);g.add("air",0<=f.indexOf("AdobeAIR"));g.add("khtml",0<=j.indexOf("Konqueror")?h:void 0);g.add("webkit",parseFloat(f.split("WebKit/")[1])||void 0);g.add("chrome",parseFloat(f.split("Chrome/")[1])||void 0);g.add("safari",0<=j.indexOf("Safari")&&!g("chrome")?parseFloat(j.split("Version/")[1]):void 0);g.add("mac",
0<=j.indexOf("Macintosh"));g.add("quirks","BackCompat"==document.compatMode);g.add("ios",/iPhone|iPod|iPad/.test(f));g.add("android",parseFloat(f.split("Android ")[1])||void 0);if(!g("webkit")){0<=f.indexOf("Opera")&&g.add("opera",9.8<=h?parseFloat(f.split("Version/")[1])||h:h);0<=f.indexOf("Gecko")&&!g("khtml")&&!g("webkit")&&g.add("mozilla",h);g("mozilla")&&g.add("ff",parseFloat(f.split("Firefox/")[1]||f.split("Minefield/")[1])||void 0);if(document.all&&!g("opera"))f=parseFloat(j.split("MSIE ")[1])||
void 0,(j=document.documentMode)&&5!=j&&Math.floor(f)!=j&&(f=j),g.add("ie",f);g.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return g})},"dojo/on":function(){define("dojo/on",["./has!dom-addeventlistener?:./aspect","./_base/kernel","./has"],function(g,j,f){function h(a,c,d,e,k){if(e=c.match(/(.*):(.*)/))return c=e[2],e=e[1],b.selector(e,c).call(k,a,d);f("touch")&&(i.test(c)&&(d=x(d)),!f("event-orientationchange")&&"orientationchange"==c&&(c="resize",a=window,d=x(d)));l&&(d=l(d));if(a.addEventListener){var m=
c in o,h=m?o[c]:c;a.addEventListener(h,d,m);return{remove:function(){a.removeEventListener(h,d,m)}}}if(r&&a.attachEvent)return r(a,"on"+c,d);throw Error("Target must be an event emitter");}function e(){this.cancelable=!1}function d(){this.bubbles=!1}var c=window.ScriptEngineMajorVersion;f.add("jscript",c&&c()+ScriptEngineMinorVersion()/10);f.add("event-orientationchange",f("touch")&&!f("android"));f.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);
var b=function(a,c,d,e){return"function"==typeof a.on&&"function"!=typeof c?a.on(c,d):b.parse(a,c,d,h,e,this)};b.pausable=function(a,c,d,e){var i,a=b(a,c,function(){if(!i)return d.apply(this,arguments)},e);a.pause=function(){i=!0};a.resume=function(){i=!1};return a};b.once=function(a,c,d){var e=b(a,c,function(){e.remove();return d.apply(this,arguments)});return e};b.parse=function(a,b,c,d,e,i){if(b.call)return b.call(i,a,c);if(-1<b.indexOf(",")){for(var b=b.split(/\s*,\s*/),l=[],k=0,f;f=b[k++];)l.push(d(a,
f,c,e,i));l.remove=function(){for(var a=0;a<l.length;a++)l[a].remove()};return l}return d(a,b,c,e,i)};var i=/^touch/;b.selector=function(a,c,d){return function(e,i){function l(b){for(k=k&&k.matches?k:j.query;!k.matches(b,a,e);)if(b==e||!1===d||!(b=b.parentNode)||1!=b.nodeType)return;return b}var k="function"==typeof a?{matches:a}:this,f=c.bubble;return f?b(e,f(l),i):b(e,c,function(a){var b=l(a.target);return b&&i.call(b,a)})}};var a=[].slice,k=b.emit=function(b,c,i){var l=a.call(arguments,2),k="on"+
c;if("parentNode"in b){var f=l[0]={},m;for(m in i)f[m]=i[m];f.preventDefault=e;f.stopPropagation=d;f.target=b;f.type=c;i=f}do b[k]&&b[k].apply(b,l);while(i&&i.bubbles&&(b=b.parentNode));return i&&i.cancelable&&i},o={};if(!f("event-stopimmediatepropagation"))var p=function(){this.modified=this.immediatelyStopped=!0},l=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=p,a.apply(this,arguments)}};if(f("dom-addeventlistener"))o={focusin:"focus",focusout:"blur"},
b.emit=function(a,c,d){if(a.dispatchEvent&&document.createEvent){var e=a.ownerDocument.createEvent("HTMLEvents");e.initEvent(c,!!d.bubbles,!!d.cancelable);for(var i in d)i in e||(e[i]=d[i]);return a.dispatchEvent(e)&&e}return k.apply(b,arguments)};else{b._fixEvent=function(a,b){if(!a)a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event;if(!a)return a;m&&a.type==m.type&&(a=m);if(!a.target){a.target=a.srcElement;a.currentTarget=b||a.srcElement;if("mouseover"==a.type)a.relatedTarget=a.fromElement;
if("mouseout"==a.type)a.relatedTarget=a.toElement;if(!a.stopPropagation)a.stopPropagation=u,a.preventDefault=s;switch(a.type){case "keypress":var c="charCode"in a?a.charCode:a.keyCode;10==c?(c=0,a.keyCode=13):13==c||27==c?c=0:3==c&&(c=99);a.charCode=c;c=a;c.keyChar=c.charCode?String.fromCharCode(c.charCode):"";c.charOrCode=c.keyChar||c.keyCode}}return a};var m,n=function(a){this.handle=a};n.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var q=function(a){return function(c){var c=
b._fixEvent(c,this),d=a.call(this,c);c.modified&&(m||setTimeout(function(){m=null}),m=c);return d}},r=function(a,b,c){c=q(c);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>f("jscript"))&&!f("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var d=a[b];if(!d||!d.listeners){var e=d,d=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
d.listeners=[];a[b]=d;d.global=this;e&&d.listeners.push(_dojoIEListeners_.push(e)-1)}d.listeners.push(a=d.global._dojoIEListeners_.push(c)-1);return new n(a)}return g.after(a,b,c,!0)},u=function(){this.cancelBubble=!0},s=b._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1}}if(f("touch"))var v=function(){},t=window.orientation,x=function(a){return function(b){var c=b.corrected;if(!c){var d=b.type;try{delete b.type}catch(e){}b.type?
(v.prototype=b,c=new v,c.preventDefault=function(){b.preventDefault()},c.stopPropagation=function(){b.stopPropagation()}):(c=b,c.type=d);b.corrected=c;if("resize"==d){if(t==window.orientation)return null;t=window.orientation;c.type="orientationchange";return a.call(this,c)}if(!("rotation"in c))c.rotation=0,c.scale=1;var d=c.changedTouches[0],i;for(i in d)delete c[i],c[i]=d[i]}return a.call(this,c)}};return b})},"dojo/_base/Deferred":function(){define("./kernel,../Deferred,../promise/Promise,../errors/CancelError,../has,./lang,../when".split(","),
function(g,j,f,h,e,d,c){var b=function(){},i=Object.freeze||function(){},a=g.Deferred=function(c){function o(a){if(m)throw Error("This deferred has already been resolved");l=a;m=!0;p()}function p(){for(var a;!a&&r;){var c=r;r=r.next;if(a=c.progress==b)m=!1;var i=n?c.error:c.resolved;e("config-useDeferredInstrumentation")&&n&&j.instrumentRejected&&j.instrumentRejected(l,!!i);if(i)try{var k=i(l);k&&"function"===typeof k.then?k.then(d.hitch(c.deferred,"resolve"),d.hitch(c.deferred,"reject"),d.hitch(c.deferred,
"progress")):(i=a&&void 0===k,a&&!i&&(n=k instanceof Error),c.deferred[i&&n?"reject":"resolve"](i?l:k))}catch(f){c.deferred.reject(f)}else n?c.deferred.reject(l):c.deferred.resolve(l)}}var l,m,n,q,r,g=this.promise=new f;this.resolve=this.callback=function(a){this.fired=0;this.results=[a,null];o(a)};this.reject=this.errback=function(a){n=!0;this.fired=1;e("config-useDeferredInstrumentation")&&j.instrumentRejected&&j.instrumentRejected(a,!!r);o(a);this.results=[null,a]};this.progress=function(a){for(var b=
r;b;){var c=b.progress;c&&c(a);b=b.next}};this.addCallbacks=function(a,c){this.then(a,c,b);return this};g.then=this.then=function(c,d,e){var i=e==b?this:new a(g.cancel),c={resolved:c,error:d,progress:e,deferred:i};r?q=q.next=c:r=q=c;m&&p();return i.promise};var s=this;g.cancel=this.cancel=function(){if(!m){var a=c&&c(s);if(!m)a instanceof Error||(a=new h(a)),a.log=!1,s.reject(a)}};i(g)};d.extend(a,{addCallback:function(a){return this.addCallbacks(d.hitch.apply(g,arguments))},addErrback:function(a){return this.addCallbacks(null,
d.hitch.apply(g,arguments))},addBoth:function(a){var b=d.hitch.apply(g,arguments);return this.addCallbacks(b,b)},fired:-1});a.when=g.when=c;return a})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(g,j,f,h,e){var d=Object.freeze||function(){},c=function(a,c,d,e,i){2===c&&k.instrumentRejected&&0===a.length&&k.instrumentRejected(d,!1,e,i);for(i=0;i<a.length;i++)b(a[i],c,d,e)},b=function(b,c,d,e){var f=b[c],
h=b.deferred;if(f)try{var r=f(d);if(0===c)"undefined"!==typeof r&&a(h,c,r);else{if(r&&"function"===typeof r.then){b.cancel=r.cancel;r.then(i(h,1),i(h,2),i(h,0));return}a(h,1,r)}}catch(g){a(h,2,g)}else a(h,c,d);2===c&&k.instrumentRejected&&k.instrumentRejected(d,!!f,e,h.promise)},i=function(b,c){return function(d){a(b,c,d)}},a=function(a,b,c){if(!a.isCanceled())switch(b){case 0:a.progress(c);break;case 1:a.resolve(c);break;case 2:a.reject(c)}},k=function(a){var e=this.promise=new h,i=this,m,n,q,r=
!1,g=[];Error.captureStackTrace&&(Error.captureStackTrace(i,k),Error.captureStackTrace(e,k));this.isResolved=e.isResolved=function(){return 1===m};this.isRejected=e.isRejected=function(){return 2===m};this.isFulfilled=e.isFulfilled=function(){return!!m};this.isCanceled=e.isCanceled=function(){return r};this.progress=function(a,b){if(m){if(!0===b)throw Error("This deferred has already been fulfilled.");return e}c(g,0,a,null,i);return e};this.resolve=function(a,b){if(m){if(!0===b)throw Error("This deferred has already been fulfilled.");
return e}c(g,m=1,n=a,null,i);g=null;return e};var j=this.reject=function(a,b){if(m){if(!0===b)throw Error("This deferred has already been fulfilled.");return e}Error.captureStackTrace&&Error.captureStackTrace(q={},j);c(g,m=2,n=a,q,i);g=null;return e};this.then=e.then=function(a,c,d){var i=[d,a,c];i.cancel=e.cancel;i.deferred=new k(function(a){return i.cancel&&i.cancel(a)});m&&!g?b(i,m,n,q):g.push(i);return i.deferred.promise};this.cancel=e.cancel=function(b,c){if(m){if(!0===c)throw Error("This deferred has already been fulfilled.");
}else{if(a)var d=a(b),b="undefined"===typeof d?b:d;r=!0;if(m){if(2===m&&n===b)return b}else return"undefined"===typeof b&&(b=new f),j(b),b}};d(e)};k.prototype.toString=function(){return"[object Deferred]"};e&&e(k);return k})},"dojo/errors/CancelError":function(){define(["./create"],function(g){return g("CancelError",null,null,{dojoType:"cancel"})})},"dojo/errors/create":function(){define(["../_base/lang"],function(g){return function(j,f,h,e){var h=h||Error,d=function(c){if(h===Error){Error.captureStackTrace&&
Error.captureStackTrace(this,d);var b=Error.call(this,c),e;for(e in b)b.hasOwnProperty(e)&&(this[e]=b[e]);this.message=c;this.stack=b.stack}else h.apply(this,arguments);f&&f.apply(this,arguments)};d.prototype=g.delegate(h.prototype,e);d.prototype.name=j;return d.prototype.constructor=d}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(g){function j(){throw new TypeError("abstract");}return g.extend(function(){},{then:function(){j()},cancel:function(){j()},isResolved:function(){j()},
isRejected:function(){j()},isFulfilled:function(){j()},isCanceled:function(){j()},always:function(f){return this.then(f,f)},otherwise:function(f){return this.then(null,f)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(g,j,f,h){function e(a,b,c){var d="";a&&a.stack&&(d+=a.stack);b&&b.stack&&(d+="\n    ----------------------------------------\n    rejected"+
b.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));c&&c.stack&&(d+="\n    ----------------------------------------\n"+c.stack);console.error(a,d)}function d(a,b,c,d){b||e(a,c,d)}function c(c,d,e,f){d?h.some(i,function(a,b){if(a.error===c)return i.splice(b,1),!0}):h.some(i,function(a){return a.error===c})||i.push({error:c,rejection:e,deferred:f,timestamp:(new Date).getTime()});a||(a=setTimeout(b,k))}function b(){var c=(new Date).getTime(),d=c-k;i=h.filter(i,function(a){return a.timestamp<
d?(e(a.error,a.rejection,a.deferred),!1):!0});a=i.length?setTimeout(b,i[0].timestamp+k-c):!1}var i=[],a=!1,k=1E3;return function(a){var b=j("config-useDeferredInstrumentation");if(b){g.on("resolved",f.hitch(console,"log","resolved"));g.on("rejected",f.hitch(console,"log","rejected"));g.on("progress",f.hitch(console,"log","progress"));var e=[];"string"===typeof b&&(e=b.split(","),b=e.shift());if("report-rejections"===b)a.instrumentRejected=d;else if("report-unhandled-rejections"===b||!0===b||1===b)a.instrumentRejected=
c,k=parseInt(e[0],10)||k;else throw Error("Unsupported instrumentation usage <"+b+">");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(g,j,f){function h(c){setTimeout(function(){d.apply(e,c)},0)}var e=new f,d=e.emit;e.emit=null;j.prototype.trace=function(){var c=g._toArray(arguments);this.then(function(b){h(["resolved",b].concat(c))},function(b){h(["rejected",b].concat(c))},function(b){h(["progress",b].concat(c))});return this};j.prototype.traceRejected=
function(){var c=g._toArray(arguments);this.otherwise(function(b){h(["rejected",b].concat(c))});return this};return e})},"dojo/Evented":function(){define(["./aspect","./on"],function(g,j){function f(){}var h=g.after;f.prototype={on:function(e,d){return j.parse(this,e,d,function(c,b){return h(c,"on"+b,d,!0)})},emit:function(e,d){var c=[this];c.push.apply(c,arguments);return j.emit.apply(j,c)}};return f})},"dojo/aspect":function(){define([],function(){function g(b,c,a,d){var e=b[c],f="around"==c,l;
if(f){var m=a(function(){return e.advice(this,arguments)});l={remove:function(){l.cancelled=!0},advice:function(a,b){return l.cancelled?e.advice(a,b):m.apply(a,b)}}}else l={remove:function(){var a=l.previous,d=l.next;if(!d&&!a)delete b[c];else if(a?a.next=d:b[c]=d,d)d.previous=a},id:h++,advice:a,receiveArguments:d};if(e&&!f)if("after"==c){for(;e.next&&(e=e.next););e.next=l;l.previous=e}else{if("before"==c)b[c]=l,l.next=e,e.previous=l}else b[c]=l;return l}function j(b){return function(c,a,d,e){var p=
c[a],l;if(!p||p.target!=c){c[a]=l=function(){for(var a=h,b=arguments,c=l.before;c;)b=c.advice.apply(this,b)||b,c=c.next;if(l.around)var d=l.around.advice(this,b);for(c=l.after;c&&c.id<a;){if(c.receiveArguments)var e=c.advice.apply(this,b),d=e===f?d:e;else d=c.advice.call(this,d,b);c=c.next}return d};if(p)l.around={advice:function(a,b){return p.apply(a,b)}};l.target=c}c=g(l||p,b,d,e);d=null;return c}}var f,h=0,e=j("after"),d=j("before"),c=j("around");return{before:d,around:c,after:e}})},"dojo/_base/array":function(){define(["./kernel",
"../has","./lang"],function(g,j,f){function h(a){return c[a]=new Function("item","index","array",a)}function e(a){var b=!a;return function(d,e,i){var f=0,n=d&&d.length||0,q;n&&"string"==typeof d&&(d=d.split(""));"string"==typeof e&&(e=c[e]||h(e));if(i)for(;f<n;++f){if(q=!e.call(i,d[f],f,d),a^q)return!q}else for(;f<n;++f)if(q=!e(d[f],f,d),a^q)return!q;return b}}function d(a){var c=1,d=0,e=0;a||(c=d=e=-1);return function(l,f,h,q){if(q&&0<c)return i.lastIndexOf(l,f,h);var q=l&&l.length||0,r=a?q+e:d;
h===b?h=a?d:q+e:0>h?(h=q+h,0>h&&(h=d)):h=h>=q?q+e:h;for(q&&"string"==typeof l&&(l=l.split(""));h!=r;h+=c)if(l[h]==f)return h;return-1}}var c={},b,i={every:e(!1),some:e(!0),indexOf:d(!0),lastIndexOf:d(!1),forEach:function(a,b,d){var e=0,i=a&&a.length||0;i&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=c[b]||h(b));if(d)for(;e<i;++e)b.call(d,a[e],e,a);else for(;e<i;++e)b(a[e],e,a)},map:function(a,b,d,e){var i=0,f=a&&a.length||0,e=new (e||Array)(f);f&&"string"==typeof a&&(a=a.split(""));
"string"==typeof b&&(b=c[b]||h(b));if(d)for(;i<f;++i)e[i]=b.call(d,a[i],i,a);else for(;i<f;++i)e[i]=b(a[i],i,a);return e},filter:function(a,b,d){var e=0,i=a&&a.length||0,f=[],n;i&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=c[b]||h(b));if(d)for(;e<i;++e)n=a[e],b.call(d,n,e,a)&&f.push(n);else for(;e<i;++e)n=a[e],b(n,e,a)&&f.push(n);return f},clearCache:function(){c={}}};f.mixin(g,i);return i})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(g,j){return function(f,
h,e,d){var c=f&&"function"===typeof f.then,b=c&&f instanceof j;if(c){if(!b)c=new g(f.cancel),f.then(c.resolve,c.reject,c.progress),f=c.promise}else return h?h(f):(new g).resolve(f);return h||e||d?f.then(h,e,d):f}})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(g,j,f){g.DeferredList=function(h,e,d,c){var b=[];j.call(this);var i=this;0===h.length&&!e&&this.resolve([0,[]]);var a=0;f.forEach(h,function(k,f){function g(c,d){b[f]=[c,d];a++;a===h.length&&
i.resolve(b)}k.then(function(a){e?i.resolve([f,a]):g(!0,a)},function(a){d?i.reject(a):g(!1,a);if(c)return null;throw a;})})};g.DeferredList.prototype=new j;g.DeferredList.prototype.gatherResults=function(h){h=new g.DeferredList(h,!1,!0,!1);h.addCallback(function(e){var d=[];f.forEach(e,function(c){d.push(c[1])});return d});return h};return g.DeferredList})},"dojo/topic":function(){define("dojo/topic",["./Evented"],function(g){var j=new g;return{publish:function(f,h){return j.emit.apply(j,arguments)},
subscribe:function(f,h){return j.on.apply(j,arguments)}}})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel,dojo/_base/lang,../_Widget,../_Container,./_ContentPaneResizeMixin,dojo/string,dojo/html,dojo/i18n!../nls/loading,dojo/_base/array,dojo/_base/declare,dojo/_base/Deferred,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/_base/xhr,dojo/i18n,dojo/when".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n,q){return a("dijit.layout.ContentPane",[f,h,e],{href:"",content:"",extractContent:!1,
parseOnLoad:!0,parserScope:g._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,create:function(a,b){if((!a||!a.template)&&b&&!("href"in
a)&&!("content"in a)){for(var b=o.byId(b),c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);a=j.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=n.getLocalization("dijit","loading",this.lang);this.loadingMessage=d.substitute(this.loadingMessage,a);this.errorMessage=d.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=
this.domNode;this.domNode.title="";p.get(this.domNode,"role")||this.domNode.setAttribute("role","group")},startup:function(){this.inherited(arguments);this._contentSetter&&i.forEach(this._contentSetter.parseResults,function(a){if(!a._started&&!a._destroyed&&j.isFunction(a.startup))a.startup(),a._started=!0},this)},_startChildren:function(){i.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&j.isFunction(a.startup))a.startup(),a._started=!0});this._contentSetter&&i.forEach(this._contentSetter.parseResults,
function(a){if(!a._started&&!a._destroyed&&j.isFunction(a.startup))a.startup(),a._started=!0},this)},setHref:function(a){g.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new k(j.hitch(this,"cancel"));this.onLoadDeferred.then(j.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},
setContent:function(a){g.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href","");this.cancel();this.onLoadDeferred=new k(j.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(j.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&
-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new k(j.hitch(this,"cancel"));this.onLoadDeferred.then(j.hitch(this,
"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};j.isObject(this.ioArgs)&&j.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||m.get)(b),d;c.then(function(b){d=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(c){a._onError("Content",c)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();
delete a._xhrDfd;return d});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;i.forEach(this.getChildren(),
function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(i.forEach(b.parseResults,function(b){if(!b._destroyed)b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0}),delete b.parseResults);a||l.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){this.destroyDescendants();var d=this._contentSetter;if(!(d&&d instanceof c._ContentSetter))d=this._contentSetter=new c._ContentSetter({node:this.containerNode,
_onError:j.hitch(this,this._onError),onContentError:j.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+this.id+" could not change content due to "+b.message,b)}})});var e=j.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),e=d.set(j.isObject(a)&&a.domNode?
a.domNode:a,e),i=this;return q(e&&e.then?e:d.parseDeferred,function(){delete i._contentSetterParams;b||(i._started&&(i._startChildren(),i._scheduleLayout()),i._onLoadHandler(a))})},_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},
"dijit/_Widget":function(){define("dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/query,dojo/ready,./registry,./_WidgetBase,./_OnDijitClickMixin,./_FocusMixin,dojo/uacss,./hccss".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o,p){function l(){}function m(a){return function(b,d,e,i){return b&&"string"==typeof d&&b[d]==l?b.on(d.substring(2).toLowerCase(),c.hitch(e,i)):a.apply(f,arguments)}}g.around(f,"connect",m);d.connect&&g.around(d,
"connect",m);g=h("dijit._Widget",[k,o,p],{onClick:l,onDblClick:l,onKeyDown:l,onKeyPress:l,onKeyUp:l,onMouseDown:l,onMouseMove:l,onMouseOut:l,onMouseOver:l,onMouseLeave:l,onMouseEnter:l,onMouseUp:l,constructor:function(a){this._toConnect={};for(var b in a)this[b]===l&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===
l?f.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){d.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,b)},attr:function(a,b){if(j.isDebug){var c=arguments.callee._ach||(arguments.callee._ach={}),e=(arguments.callee.caller||"unknown caller").toString();c[e]||(d.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+
e,"","2.0"),c[e]=!0)}return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){d.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?b("[widgetId]",this.containerNode).map(a.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});e("dijit-legacy-requires")&&i(0,function(){require(["dijit/_base"])});return g})},
"dojo/_base/connect":function(){define("./kernel,../on,../topic,../aspect,./event,../mouse,./sniff,./lang,../keys".split(","),function(g,j,f,h,e,d,c,b){function i(a,c,e,i,k){i=b.hitch(e,i);if(!a||!a.addEventListener&&!a.attachEvent)return h.after(a||g.global,c,i,!0);"string"==typeof c&&"on"==c.substring(0,2)&&(c=c.substring(2));if(!a)a=g.global;if(!k)switch(c){case "keypress":c=l;break;case "mouseenter":c=d.enter;break;case "mouseleave":c=d.leave}return j(a,c,i,k)}function a(a){a.keyChar=a.charCode?
String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}c.add("events-keypress-typed",function(){var a={charCode:0};try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(b){}return 0==a.charCode&&!c("opera")});var k={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},o=c("mac")?"metaKey":"ctrlKey",p=function(c,d){var e=b.mixin({},c,d);a(e);e.preventDefault=
function(){c.preventDefault()};e.stopPropagation=function(){c.stopPropagation()};return e},l;l=c("events-keypress-typed")?function(a,b){var d=j(a,"keydown",function(a){var d=a.keyCode,e=13!=d&&32!=d&&(27!=d||!c("ie"))&&(48>d||90<d)&&(96>d||111<d)&&(186>d||192<d)&&(219>d||222<d)&&229!=d;if(e||a.ctrlKey){e=e?0:d;if(a.ctrlKey){if(3==d||13==d)return b.call(a.currentTarget,a);e=95<e&&106>e?e-48:!a.shiftKey&&65<=e&&90>=e?e+32:k[e]||e}d=p(a,{type:"keypress",faux:!0,charCode:e});b.call(a.currentTarget,d);
if(c("ie"))try{a.keyCode=d.keyCode}catch(i){}}}),e=j(a,"keypress",function(a){var c=a.charCode,a=p(a,{charCode:32<=c?c:0,faux:!0});return b.call(this,a)});return{remove:function(){d.remove();e.remove()}}}:c("opera")?function(a,b){return j(a,"keypress",function(a){var c=a.which;3==c&&(c=99);c=32>c&&!a.shiftKey?0:c;a.ctrlKey&&!a.shiftKey&&65<=c&&90>=c&&(c+=32);return b.call(this,p(a,{charCode:c}))})}:function(b,c){return j(b,"keypress",function(b){a(b);return c.call(this,b)})};var m={_keypress:l,connect:function(a,
b,c,d,e){var k=arguments,l=[],f=0;l.push("string"==typeof k[0]?null:k[f++],k[f++]);var m=k[f+1];l.push("string"==typeof m||"function"==typeof m?k[f++]:null,k[f++]);for(m=k.length;f<m;f++)l.push(k[f]);return i.apply(this,l)},disconnect:function(a){a&&a.remove()},subscribe:function(a,c,d){return f.subscribe(a,b.hitch(c,d))},publish:function(a,b){return f.publish.apply(f,[a].concat(b))},connectPublisher:function(a,b,c){var d=function(){m.publish(a,arguments)};return c?m.connect(b,c,d):m.connect(b,d)},
isCopyKey:function(a){return a[o]}};m.unsubscribe=m.disconnect;b.mixin(g,m);return m})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(g,j,f,h){if(j._fixEvent){var e=j._fixEvent;j._fixEvent=function(c,b){(c=e(c,b))&&h.normalizeEvent(c);return c}}var d={fix:function(c,b){return j._fixEvent?j._fixEvent(c,b):c},stop:function(c){f("dom-addeventlistener")||c&&c.preventDefault?(c.preventDefault(),c.stopPropagation()):(c=c||window.event,c.cancelBubble=!0,j._preventDefault.call(c))}};
g.fixEvent=d.fix;g.stopEvent=d.stop;return d})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(g,j,f,h){function e(a,b,c,d,e,i){i=i||"px";a=a.style;if(!isNaN(b))a.left=b+i;if(!isNaN(c))a.top=c+i;if(0<=d)a.width=d+i;if(0<=e)a.height=e+i}function d(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function c(a){return"border-box"==b.boxModel||"table"==a.tagName.toLowerCase()||
d(a)}var b={boxModel:"content-box"};if(g("ie"))b.boxModel="BackCompat"==document.compatMode?"border-box":"content-box";b.getPadExtents=function(a,b){var a=f.byId(a),c=b||h.getComputedStyle(a),d=h.toPixelValue,e=d(a,c.paddingLeft),i=d(a,c.paddingTop),n=d(a,c.paddingRight),c=d(a,c.paddingBottom);return{l:e,t:i,r:n,b:c,w:e+n,h:i+c}};b.getBorderExtents=function(a,b){var a=f.byId(a),c=h.toPixelValue,d=b||h.getComputedStyle(a),e="none"!=d.borderLeftStyle?c(a,d.borderLeftWidth):0,i="none"!=d.borderTopStyle?
c(a,d.borderTopWidth):0,n="none"!=d.borderRightStyle?c(a,d.borderRightWidth):0,c="none"!=d.borderBottomStyle?c(a,d.borderBottomWidth):0;return{l:e,t:i,r:n,b:c,w:e+n,h:i+c}};b.getPadBorderExtents=function(a,c){var a=f.byId(a),d=c||h.getComputedStyle(a),e=b.getPadExtents(a,d),d=b.getBorderExtents(a,d);return{l:e.l+d.l,t:e.t+d.t,r:e.r+d.r,b:e.b+d.b,w:e.w+d.w,h:e.h+d.h}};b.getMarginExtents=function(a,b){var a=f.byId(a),c=b||h.getComputedStyle(a),d=h.toPixelValue,e=d(a,c.marginLeft),i=d(a,c.marginTop),
n=d(a,c.marginRight),c=d(a,c.marginBottom);return{l:e,t:i,r:n,b:c,w:e+n,h:i+c}};b.getMarginBox=function(a,c){var a=f.byId(a),d=c||h.getComputedStyle(a),e=b.getMarginExtents(a,d),i=a.offsetLeft-e.l,m=a.offsetTop-e.t,n=a.parentNode,q=h.toPixelValue;if(g("mozilla")){var r=parseFloat(d.left),d=parseFloat(d.top);!isNaN(r)&&!isNaN(d)?(i=r,m=d):n&&n.style&&(n=h.getComputedStyle(n),"visible"!=n.overflow&&(i+="none"!=n.borderLeftStyle?q(a,n.borderLeftWidth):0,m+="none"!=n.borderTopStyle?q(a,n.borderTopWidth):
0))}else if((g("opera")||8==g("ie")&&!g("quirks"))&&n)n=h.getComputedStyle(n),i-="none"!=n.borderLeftStyle?q(a,n.borderLeftWidth):0,m-="none"!=n.borderTopStyle?q(a,n.borderTopWidth):0;return{l:i,t:m,w:a.offsetWidth+e.w,h:a.offsetHeight+e.h}};b.getContentBox=function(a,c){var a=f.byId(a),d=c||h.getComputedStyle(a),e=a.clientWidth,i=b.getPadExtents(a,d),m=b.getBorderExtents(a,d);e?(d=a.clientHeight,m.w=m.h=0):(e=a.offsetWidth,d=a.offsetHeight);g("opera")&&(i.l+=m.l,i.t+=m.t);return{l:i.l,t:i.t,w:e-
i.w-m.w,h:d-i.h-m.h}};b.setContentSize=function(a,d,i){var a=f.byId(a),h=d.w,d=d.h;c(a)&&(i=b.getPadBorderExtents(a,i),0<=h&&(h+=i.w),0<=d&&(d+=i.h));e(a,NaN,NaN,h,d)};var i={l:0,t:0,w:0,h:0};b.setMarginBox=function(a,k,o){var a=f.byId(a),p=o||h.getComputedStyle(a),o=k.w,l=k.h,m=c(a)?i:b.getPadBorderExtents(a,p),p=b.getMarginExtents(a,p);if(g("webkit")&&d(a)){var n=a.style;if(0<=o&&!n.width)n.width="4px";if(0<=l&&!n.height)n.height="4px"}0<=o&&(o=Math.max(o-m.w-p.w,0));0<=l&&(l=Math.max(l-m.h-p.h,
0));e(a,k.l,k.t,o,l)};b.isBodyLtr=function(a){a=a||j.doc;return"ltr"==(j.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};b.docScroll=function(a){var a=a||j.doc,c=j.doc.parentWindow||j.doc.defaultView;return"pageXOffset"in c?{x:c.pageXOffset,y:c.pageYOffset}:(c=g("quirks")?j.body(a):a.documentElement)&&{x:b.fixIeBiDiScrollLeft(c.scrollLeft||0,a),y:c.scrollTop||0}};if(g("ie"))b.getIeDocumentElementOffset=function(a){a=a||j.doc;a=a.documentElement;if(8>g("ie")){var b=a.getBoundingClientRect(),
c=b.left,b=b.top;7>g("ie")&&(c+=a.clientLeft,b+=a.clientTop);return{x:0>c?0:c,y:0>b?0:b}}return{x:0,y:0}};b.fixIeBiDiScrollLeft=function(a,c){var c=c||j.doc,d=g("ie");if(d&&!b.isBodyLtr(c)){var e=g("quirks"),i=e?j.body(c):c.documentElement,f=j.global;6==d&&!e&&f.frameElement&&i.scrollHeight>i.clientHeight&&(a+=i.clientLeft);return 8>d||e?a+i.clientWidth-i.scrollWidth:-a}return a};b.position=function(a,c){var a=f.byId(a),d=j.body(a.ownerDocument),e=a.getBoundingClientRect(),e={x:e.left,y:e.top,w:e.right-
e.left,h:e.bottom-e.top};if(9>g("ie")){var i=b.getIeDocumentElementOffset(a.ownerDocument);e.x-=i.x+(g("quirks")?d.clientLeft+d.offsetLeft:0);e.y-=i.y+(g("quirks")?d.clientTop+d.offsetTop:0)}c&&(d=b.docScroll(a.ownerDocument),e.x+=d.x,e.y+=d.y);return e};b.getMarginSize=function(a,c){var a=f.byId(a),d=b.getMarginExtents(a,c||h.getComputedStyle(a)),e=a.getBoundingClientRect();return{w:e.right-e.left+d.w,h:e.bottom-e.top+d.h}};b.normalizeEvent=function(a){if(!("layerX"in a))a.layerX=a.offsetX,a.layerY=
a.offsetY;if(!g("dom-addeventlistener")){var c=a.target,c=c&&c.ownerDocument||document,d=g("quirks")?c.body:c.documentElement,e=b.getIeDocumentElementOffset(c);a.pageX=a.clientX+b.fixIeBiDiScrollLeft(d.scrollLeft||0,c)-e.x;a.pageY=a.clientY+(d.scrollTop||0)-e.y}};return b})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(g,j,f){var h={global:g.global,doc:this.document||null,body:function(e){e=e||g.doc;return e.body||e.getElementsByTagName("body")[0]},setContext:function(e,
d){g.global=h.global=e;g.doc=h.doc=d},withGlobal:function(e,d,c,b){var i=g.global;try{return g.global=h.global=e,h.withDoc.call(null,e.document,d,c,b)}finally{g.global=h.global=i}},withDoc:function(e,d,c,b){var i=h.doc,a=f("quirks"),k=f("ie"),o,p,l;try{g.doc=h.doc=e;g.isQuirks=f.add("quirks","BackCompat"==g.doc.compatMode,!0,!0);if(f("ie")&&(l=e.parentWindow)&&l.navigator)o=parseFloat(l.navigator.appVersion.split("MSIE ")[1])||void 0,(p=e.documentMode)&&5!=p&&Math.floor(o)!=p&&(o=p),g.isIE=f.add("ie",
o,!0,!0);c&&"string"==typeof d&&(d=c[d]);return d.apply(c,b||[])}finally{g.doc=h.doc=i,g.isQuirks=f.add("quirks",a,!0,!0),g.isIE=f.add("ie",k,!0,!0)}}};j.mixin(g,h);return h})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(g,j){if(7>=g("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(f){}var h={};h.byId=g("ie")?function(d,c){if("string"!=typeof d)return d;var b=c||j.doc,e=d&&b.getElementById(d);if(e&&(e.attributes.id.value==d||e.id==d))return e;b=b.all[d];if(!b||
b.nodeName)b=[b];for(var a=0;e=b[a++];)if(e.attributes&&e.attributes.id&&e.attributes.id.value==d||e.id==d)return e}:function(d,c){return("string"==typeof d?(c||j.doc).getElementById(d):d)||null};h.isDescendant=function(d,c){try{d=h.byId(d);for(c=h.byId(c);d;){if(d==c)return!0;d=d.parentNode}}catch(b){}return!1};g.add("css-user-select",function(d,c,b){if(!b)return!1;var d=b.style,c=["Khtml","O","ms","Moz","Webkit"],b=c.length,e="userSelect";do if("undefined"!==typeof d[e])return e;while(b--&&(e=c[b]+
"UserSelect"));return!1});var e=g("css-user-select");h.setSelectable=e?function(d,c){h.byId(d).style[e]=c?"":"none"}:function(d,c){var d=h.byId(d),b=d.getElementsByTagName("*"),e=b.length;if(c)for(d.removeAttribute("unselectable");e--;)b[e].removeAttribute("unselectable");else for(d.setAttribute("unselectable","on");e--;)b[e].setAttribute("unselectable","on")};return h})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(g,j){function f(b,c,e){c=c.toLowerCase();if(g("ie")){if("auto"==
e){if("height"==c)return b.offsetHeight;if("width"==c)return b.offsetWidth}if("fontweight"==c)switch(e){case 700:return"bold";default:return"normal"}}c in a||(a[c]=k.test(c));return a[c]?d(b,e):e}var h,e={};h=g("webkit")?function(a){var b;if(1==a.nodeType){var c=a.ownerDocument.defaultView;b=c.getComputedStyle(a,null);if(!b&&a.style)a.style.display="",b=c.getComputedStyle(a,null)}return b||{}}:g("ie")&&(9>g("ie")||g("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return 1==
a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};e.getComputedStyle=h;var d;d=g("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var c=a.style,d=a.runtimeStyle,e=c.left,i=d.left;d.left=a.currentStyle.left;try{c.left=b,b=c.pixelLeft}catch(k){b=0}c.left=e;d.left=i;return b}:function(a,b){return parseFloat(b)||0};e.toPixelValue=d;var c=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return b?
{}:null}},b=9>g("ie")||10>g("ie")&&g("quirks")?function(a){try{return c(a).Opacity/100}catch(b){return 1}}:function(a){return h(a).opacity},i=9>g("ie")||10>g("ie")&&g("quirks")?function(a,b){var d=100*b,e=1==b;a.style.zoom=e?"":1;if(c(a))c(a,1).Opacity=d;else{if(e)return b;a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+d+")"}c(a,1).Enabled=!e;if("tr"==a.tagName.toLowerCase())for(d=a.firstChild;d;d=d.nextSibling)"td"==d.tagName.toLowerCase()&&i(d,b);return b}:function(a,b){return a.style.opacity=
b},a={left:!0,top:!0},k=/margin|padding|width|height|max|min|offset/,o=g("ie")?"styleFloat":"cssFloat",p={cssFloat:o,styleFloat:o,"float":o};e.get=function(a,c){var d=j.byId(a),i=arguments.length;if(2==i&&"opacity"==c)return b(d);var c=p[c]||c,k=e.getComputedStyle(d);return 1==i?k:f(d,c,k[c]||d.style[c])};e.set=function(a,b,c){var d=j.byId(a),k=arguments.length,f="opacity"==b,b=p[b]||b;if(3==k)return f?i(d,c):d.style[b]=c;for(var h in b)e.set(a,h,b[h]);return e.getComputedStyle(d)};return e})},"dojo/mouse":function(){define(["./_base/kernel",
"./on","./has","./dom","./_base/window"],function(g,j,f,h,e){function d(c,b){var e=function(a,d){return j(a,c,function(c){if(b)return b(c,d);if(!h.isDescendant(c.relatedTarget,a))return d.call(this,c)})};e.bubble=function(a){return d(c,function(b,c){var d=a(b.target),e=b.relatedTarget;if(d&&d!=(e&&1==e.nodeType&&a(e)))return c.call(d,b)})};return e}f.add("dom-quirks",e.doc&&"BackCompat"==e.doc.compatMode);f.add("events-mouseenter",e.doc&&"onmouseenter"in e.doc.createElement("div"));f.add("events-mousewheel",
e.doc&&"onmousewheel"in e.doc);e=f("dom-quirks")&&f("ie")||!f("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(c,b){return c.button&b},isLeft:function(c){return c.button&1},isMiddle:function(c){return c.button&4},isRight:function(c){return c.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(c,b){return c.button==b},isLeft:function(c){return 0==c.button},isMiddle:function(c){return 1==c.button},isRight:function(c){return 2==c.button}};g.mouseButtons=e;g=f("events-mousewheel")?
"mousewheel":function(c,b){return j(c,"DOMMouseScroll",function(c){c.wheelDelta=-c.detail;b.call(this,c)})};return{_eventHandler:d,enter:d("mouseover"),leave:d("mouseout"),wheel:g,isLeft:e.isLeft,isMiddle:e.isMiddle,isRight:e.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(g,j,f){g._name="browser";j.mixin(g,{isBrowser:!0,isFF:f("ff"),isIE:f("ie"),isKhtml:f("khtml"),isWebKit:f("webkit"),isMozilla:f("mozilla"),isMoz:f("mozilla"),isOpera:f("opera"),isSafari:f("safari"),
isChrome:f("chrome"),isMac:f("mac"),isIos:f("ios"),isAndroid:f("android"),isWii:f("wii"),isQuirks:f("quirks"),isAir:f("air")});g.locale=g.locale||(f("ie")?navigator.userLanguage:navigator.language).toLowerCase();return f})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(g,j){return g.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:j("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,
RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,
RIGHT_DPAD:178,copyKey:j("mac")&&!j("air")?j("safari")?91:224:17}})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(g,j,f){function h(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function e(a,b,c){var d,e,i,k,f,l,m,r=this._inherited=this._inherited||{};"string"==typeof a&&(d=a,a=b,b=c);c=0;k=a.callee;(d=d||k.nom)||h("can't deduce a name to call inherited()",this.declaredClass);f=this.constructor._meta;i=f.bases;m=r.p;if(d!=w){if(r.c!==k&&(m=0,l=i[0],f=l._meta,f.hidden[d]!==
k)){(e=f.chains)&&"string"==typeof e[d]&&h("calling chained method with inherited: "+d,this.declaredClass);do if(f=l._meta,e=l.prototype,f&&(e[d]===k&&e.hasOwnProperty(d)||f.hidden[d]===k))break;while(l=i[++m]);m=l?m:-1}if(l=i[++m])if(e=l.prototype,l._meta&&e.hasOwnProperty(d))c=e[d];else{k=s[d];do if(e=l.prototype,(c=e[d])&&(l._meta?e.hasOwnProperty(d):c!==k))break;while(l=i[++m])}c=l&&c||s[d]}else{if(r.c!==k&&(m=0,(f=i[0]._meta)&&f.ctor!==k)){e=f.chains;for((!e||"manual"!==e.constructor)&&h("calling chained constructor with inherited",
this.declaredClass);(l=i[++m])&&!((f=l._meta)&&f.ctor===k););m=l?m:-1}for(;(l=i[++m])&&!(c=(f=l._meta)?f.ctor:l););c=l&&c}r.c=c;r.p=m;if(c)return!0===b?c:c.apply(this,b||a)}function d(a,b){return"string"==typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function c(a,b,c){var d=this.getInherited(a,b);if(d)return d.apply(this,c||b||a)}function b(a){for(var b=this.constructor._meta.bases,c=0,d=b.length;c<d;++c)if(b[c]===a)return!0;return this instanceof a}function i(a,b){for(var c in b)c!=w&&
b.hasOwnProperty(c)&&(a[c]=b[c]);if(j("bug-for-in-skips-shadowed"))for(var d=f._extraNames,e=d.length;e;)c=d[--e],c!=w&&b.hasOwnProperty(c)&&(a[c]=b[c])}function a(a){r.safeMixin(this.prototype,a);return this}function k(a){return r([this].concat(a))}function o(a,b){return function(){var y;var c=arguments,d=c,e=c[0],i,k;k=a.length;var f;if(!(this instanceof c.callee))return q(c);if(b&&(e&&e.preamble||this.preamble)){f=Array(a.length);f[0]=c;for(i=0;;){if(e=c[0])(e=e.preamble)&&(c=e.apply(this,c)||
c);e=a[i].prototype;(e=e.hasOwnProperty("preamble")&&e.preamble)&&(c=e.apply(this,c)||c);if(++i==k)break;f[i]=c}}for(i=k-1;0<=i;--i)e=a[i],(y=(k=e._meta)?k.ctor:e,e=y)&&e.apply(this,f?f[i]:c);(e=this.postscript)&&e.apply(this,d)}}function p(a,b){return function(){var c=arguments,d=c,e=c[0];if(!(this instanceof c.callee))return q(c);if(b){if(e)(e=e.preamble)&&(d=e.apply(this,d)||d);(e=this.preamble)&&e.apply(this,d)}a&&a.apply(this,c);(e=this.postscript)&&e.apply(this,c)}}function l(a){return function(){var y;
var b=arguments,c=0,d,e;if(!(this instanceof b.callee))return q(b);for(;d=a[c];++c)if(y=(e=d._meta)?e.ctor:d,d=y){d.apply(this,b);break}(d=this.postscript)&&d.apply(this,b)}}function m(a,b,c){return function(){var d,e,i=0,k=1;c&&(i=b.length-1,k=-1);for(;d=b[i];i+=k)e=d._meta,(d=(e?e.hidden:d.prototype)[a])&&d.apply(this,arguments)}}function n(a){t.prototype=a.prototype;a=new t;t.prototype=null;return a}function q(a){var b=a.callee,c=n(b);b.apply(c,a);return c}function r(c,q,t){"string"!=typeof c&&
(t=q,q=c,c="");var t=t||{},g,j,F,z,y,A,D,L=1,J=q;if("[object Array]"==v.call(q)){L=c;F=[];z=[{cls:0,refs:[]}];A={};for(var N=1,T=q.length,H=0,B,V,M,P;H<T;++H){(B=q[H])?"[object Function]"!=v.call(B)&&h("mixin #"+H+" is not a callable constructor.",L):h("mixin #"+H+" is unknown. Did you use dojo.require to pull it in?",L);V=B._meta?B._meta.bases:[B];M=0;for(B=V.length-1;0<=B;--B){P=V[B].prototype;if(!P.hasOwnProperty("declaredClass"))P.declaredClass="uniqName_"+x++;P=P.declaredClass;A.hasOwnProperty(P)||
(A[P]={count:0,refs:[],cls:V[B]},++N);P=A[P];M&&M!==P&&(P.refs.push(M),++M.count);M=P}++M.count;z[0].refs.push(M)}for(;z.length;){M=z.pop();F.push(M.cls);for(--N;j=M.refs,1==j.length;){M=j[0];if(!M||--M.count){M=0;break}F.push(M.cls);--N}if(M)for(H=0,T=j.length;H<T;++H)M=j[H],--M.count||z.push(M)}N&&h("can't build consistent linearization",L);B=q[0];F[0]=B?B._meta&&B===F[F.length-B._meta.bases.length]?B._meta.bases.length:1:0;A=F;F=A[0];L=A.length-F;q=A[L]}else A=[0],q?"[object Function]"==v.call(q)?
(F=q._meta,A=A.concat(F?F.bases:q)):h("base class is not a callable constructor.",c):null!==q&&h("unknown base class. Did you use dojo.require to pull it in?",c);if(q)for(j=L-1;;--j){g=n(q);if(!j)break;F=A[j];(F._meta?i:u)(g,F.prototype);z=new Function;z.superclass=q;z.prototype=g;q=g.constructor=z}else g={};r.safeMixin(g,t);F=t.constructor;if(F!==s.constructor)F.nom=w,g.constructor=F;for(j=L-1;j;--j)(F=A[j]._meta)&&F.chains&&(D=u(D||{},F.chains));g["-chains-"]&&(D=u(D||{},g["-chains-"]));F=!D||!D.hasOwnProperty(w);
A[0]=z=D&&"manual"===D.constructor?l(A):1==A.length?p(t.constructor,F):o(A,F);z._meta={bases:A,hidden:t,chains:D,parents:J,ctor:t.constructor};z.superclass=q&&q.prototype;z.extend=a;z.createSubclass=k;z.prototype=g;g.constructor=z;g.getInherited=d;g.isInstanceOf=b;g.inherited=E;g.__inherited=e;if(c)g.declaredClass=c,f.setObject(c,z);if(D)for(y in D)if(g[y]&&"string"==typeof D[y]&&y!=w)F=g[y]=m(y,A,"after"===D[y]),F.nom=y;return z}var u=f.mixin,s=Object.prototype,v=s.toString,t=new Function,x=0,w=
"constructor",E=g.config.isDebug?c:e;g.safeMixin=r.safeMixin=function(a,b){var c,d;for(c in b)if(d=b[c],(d!==s[c]||!(c in s))&&c!=w){if("[object Function]"==v.call(d))d.nom=c;a[c]=d}if(j("bug-for-in-skips-shadowed"))for(var e=f._extraNames,i=e.length;i;)if(c=e[--i],d=b[c],(d!==s[c]||!(c in s))&&c!=w){if("[object Function]"==v.call(d))d.nom=c;a[c]=d}return a};return g.declare=r})},"dojo/query":function(){define("./_base/kernel,./has,./dom,./on,./_base/array,./_base/lang,./selector/_loader,./selector/_loader!default".split(","),
function(g,j,f,h,e,d,c,b){function i(a,b){var c=function(c,d){if("string"==typeof d&&(d=f.byId(d),!d))return new b([]);var e="string"==typeof c?a(c,d):c?c.orphan?c:[c]:[];return e.orphan?e:new b(e)};c.matches=a.match||function(a,b,d){return 0<c.filter([a],b,d).length};c.filter=a.filter||function(a,b,d){return c(b,d).filter(function(b){return-1<e.indexOf(a,b)})};if("function"!=typeof a)var d=a.search,a=function(a,b){return d(b||document,a)};return c}j.add("array-extensible",function(){return 1==d.delegate([],
{length:1}).length&&!j("bug-for-in-skips-shadowed")});var a=Array.prototype,k=a.slice,o=a.concat,p=e.forEach,l=function(a,b,c){b=[0].concat(k.call(b,0));c=c||g.global;return function(d){b[0]=d;return a.apply(c,b)}},m=function(a){var b=this instanceof n&&j("array-extensible");"number"==typeof a&&(a=Array(a));var c=a&&"length"in a?a:arguments;if(b||!c.sort){for(var e=b?this:[],i=e.length=c.length,k=0;k<i;k++)e[k]=c[k];if(b)return e;c=e}d._mixin(c,q);c._NodeListCtor=function(a){return n(a)};return c},
n=m,q=n.prototype=j("array-extensible")?[]:{};n._wrap=q._wrap=function(a,b,c){a=new (c||this._NodeListCtor||n)(a);return b?a._stash(b):a};n._adaptAsMap=function(a,b){return function(){return this.map(l(a,arguments,b))}};n._adaptAsForEach=function(a,b){return function(){this.forEach(l(a,arguments,b));return this}};n._adaptAsFilter=function(a,b){return function(){return this.filter(l(a,arguments,b))}};n._adaptWithCondition=function(a,b,c){return function(){var d=arguments,e=l(a,d,c);if(b.call(c||g.global,
d))return this.map(e);this.forEach(e);return this}};p(["slice","splice"],function(b){var c=a[b];q[b]=function(){return this._wrap(c.apply(this,arguments),"slice"==b?this:null)}});p(["indexOf","lastIndexOf","every","some"],function(a){var b=e[a];q[a]=function(){return b.apply(g,[this].concat(k.call(arguments,0)))}});d.extend(m,{constructor:n,_NodeListCtor:n,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return h(c,
a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=k.call(this,0),c=e.map(arguments,function(a){return k.call(a,0)});return this._wrap(o.apply(b,c),this)},map:function(a,b){return this._wrap(e.map(this,a,b),this)},forEach:function(a,b){p(this,a,b);return this},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=r._filterResult(this,b[0]);if(1==b.length)return c._stash(this);
d=1}return this._wrap(e.filter(c,b[d],b[d+1]),this)},instantiate:function(a,b){var c=d.isFunction(a)?a:d.getObject(a),b=b||{};return this.forEach(function(a){new c(b,a)})},at:function(){var a=new this._NodeListCtor(0);p(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var r=i(b,m);g.query=i(b,function(a){return m(a)});r.load=function(a,b,d){c.load(a,b,function(a){d(i(a,m))})};g._filterQueryResult=r._filterResult=function(a,b,c){return new m(r.filter(a,
b,c))};g.NodeList=r.NodeList=m;return r})},"dojo/selector/_loader":function(){define(["../has","require"],function(g,j){var f=document.createElement("div");g.add("dom-qsa2.1",!!f.querySelectorAll);g.add("dom-qsa3",function(){try{return f.innerHTML="<p class='TEST'></p>",1==f.querySelectorAll(".TEST:empty").length}catch(e){}});var h;return{load:function(e,d,c){var b=j,e="default"==e?g("config-selectorEngine")||"css3":e,e="css2"==e||"lite"==e?"./lite":"css2.1"==e?g("dom-qsa2.1")?"./lite":"./acme":"css3"==
e?g("dom-qsa3")?"./lite":"./acme":"acme"==e?"./acme":(b=d)&&e;if("?"==e.charAt(e.length-1))var e=e.substring(0,e.length-1),i=!0;if(i&&(g("dom-compliant-qsa")||h))return c(h);b([e],function(a){"./lite"!=e&&(h=a);c(a)})}}})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(g,j,f,h,e){var d=h.trim,c=f.forEach,b="BackCompat"==e.doc.compatMode,i=!1,a=function(){return!0},k=function(a){for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":
a+" ",b=function(b,c){return d(a.slice(b,c))},c=[],e=-1,k=-1,f=-1,l=-1,m=-1,h=-1,r=-1,q,o="",n="",t,g=0,x=a.length,p=null,j=null,u=function(){if(0<=h)p.id=b(h,g).replace(/\\/g,""),h=-1;if(0<=r){var a=r==g?null:b(r,g);p[0>">~+".indexOf(a)?"tag":"oper"]=a;r=-1}0<=m&&(p.classes.push(b(m+1,g).replace(/\\/g,"")),m=-1)};o=n,n=a.charAt(g),g<x;g++)if("\\"!=o)if(p||(t=g,p={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return i?this.otag:this.tag}},r=g),q)n==q&&(q=null);
else if("'"==n||'"'==n)q=n;else if(0<=e)if("]"==n){j.attr?j.matchFor=b(f||e+1,g):j.attr=b(e+1,g);if((e=j.matchFor)&&('"'==e.charAt(0)||"'"==e.charAt(0)))j.matchFor=e.slice(1,-1);if(j.matchFor)j.matchFor=j.matchFor.replace(/\\/g,"");p.attrs.push(j);j=null;e=f=-1}else{if("="==n)f=0<="|~^$*".indexOf(o)?o:"",j.type=f+n,j.attr=b(e+1,g-f.length),f=g+1}else if(0<=k){if(")"==n){if(0<=l)j.value=b(k+1,g);l=k=-1}}else if("#"==n)u(),h=g+1;else if("."==n)u(),m=g;else if(":"==n)u(),l=g;else if("["==n)u(),e=g,j=
{};else if("("==n)0<=l&&(j={name:b(l+1,g),value:null},p.pseudos.push(j)),k=g;else if(" "==n&&o!=n){u();0<=l&&p.pseudos.push({name:b(l+1,g)});p.loops=p.pseudos.length||p.attrs.length||p.classes.length;p.oquery=p.query=b(t,g);p.otag=p.tag=p.oper?null:p.tag||"*";if(p.tag)p.tag=p.tag.toUpperCase();if(c.length&&c[c.length-1].oper)p.infixOper=c.pop(),p.query=p.infixOper.query+" "+p.query;c.push(p);p=null}return c},o=function(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,
arguments)}},p=function(a,b){var c=b||[];a&&c.push(a);return c},l=function(a){return 1==a.nodeType},m=function(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(i?a.getAttribute(b):a.getAttribute(b,2))||""},n={"*=":function(a,b){return function(c){return 0<=m(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==m(c,a).indexOf(b)}},"$=":function(a,b){return function(c){var c=" "+m(c,a),d=c.lastIndexOf(b);return-1<d&&d==c.length-b.length}},
"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+m(b,a)+" ").indexOf(c)}},"|=":function(a,b){var c=b+"-";return function(d){d=m(d,a);return d==b||0==d.indexOf(c)}},"=":function(a,b){return function(c){return m(c,a)==b}}},q="undefined"==typeof e.doc.firstChild.nextElementSibling,r=!q?"nextElementSibling":"nextSibling",u=!q?"previousElementSibling":"previousSibling",s=q?l:a,v=function(a){for(;a=a[u];)if(s(a))return!1;return!0},t=function(a){for(;a=a[r];)if(s(a))return!1;return!0},
x=function(a){var b=a.parentNode,b=7!=b.nodeType?b:b.nextSibling,c=0,d=b.children||b.childNodes,e=a._i||a.getAttribute("_i")||-1,i=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!d)return-1;d=d.length;if(i==d&&0<=e&&0<=i)return e;j("ie")&&"undefined"!==typeof b.setAttribute?b.setAttribute("_l",d):b._l=d;e=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[r])if(s(b))j("ie")?b.setAttribute("_i",++c):b._i=++c,a===b&&(e=c);return e},w=function(a){return!(x(a)%2)},E=function(a){return x(a)%
2},C={checked:function(){return function(a){return!!("checked"in a?a.checked:a.selected)}},disabled:function(){return function(a){return a.disabled}},enabled:function(){return function(a){return!a.disabled}},"first-child":function(){return v},"last-child":function(){return t},"only-child":function(){return function(a){return v(a)&&t(a)}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return!1}return!0}},contains:function(a,
b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=k(b)[0],d={el:1};if("*"!=c.tag)d.tag=1;if(!c.classes.length)d.classes=1;var e=I(c,d);return function(a){return!e(a)}},"nth-child":function(a,b){var c=parseInt;if("odd"==b)return E;if("even"==b)return w;if(-1!=b.indexOf("n")){var d=b.split("n",2),e=d[0]?"-"==d[0]?-1:c(d[0]):1,i=d[1]?c(d[1]):0,k=0,f=-1;0<e?0>i?i=i%e&&e+i%e:0<i&&(i>=e&&(k=i-i%e),i%=e):0>e&&(e*=-1,0<i&&
(f=i,i%=e));if(0<e)return function(a){a=x(a);return a>=k&&(0>f||a<=f)&&a%e==i};b=i}var l=c(b);return function(a){return x(a)==l}}},G=9>j("ie")||9==j("ie")&&j("quirks")?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return i?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},I=function(b,d){if(!b)return a;var d=d||{},e=null;"el"in d||(e=o(e,l));"tag"in d||"*"!=b.tag&&(e=o(e,function(a){return a&&(i?a.tagName:
a.tagName.toUpperCase())==b.getTag()}));"classes"in d||c(b.classes,function(a,b){var c=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");e=o(e,function(a){return c.test(a.className)});e.count=b});"pseudos"in d||c(b.pseudos,function(a){var b=a.name;C[b]&&(e=o(e,C[b](b,a.value)))});"attrs"in d||c(b.attrs,function(a){var b,c=a.attr;a.type&&n[a.type]?b=n[a.type](c,a.matchFor):c.length&&(b=G(c));b&&(e=o(e,b))});"id"in d||b.id&&(e=o(e,function(a){return!!a&&a.id==b.id}));e||"default"in d||(e=a);return e},Q=function(a){return function(b,
c,d){for(;b=b[r];)if(!q||l(b)){(!d||R(b,d))&&a(b)&&c.push(b);break}return c}},K=function(a){return function(b,c,d){for(b=b[r];b;){if(s(b)){if(d&&!R(b,d))break;a(b)&&c.push(b)}b=b[r]}return c}},F=function(b){b=b||a;return function(a,c,d){for(var e=0,i=a.children||a.childNodes;a=i[e++];)s(a)&&(!d||R(a,d))&&b(a,e)&&c.push(a);return c}},z={},y=function(c){var d=z[c.query];if(d)return d;var i=c.infixOper,i=i?i.oper:"",k=I(c,{el:1}),f="*"==c.tag,l=e.doc.getElementsByClassName;if(i){l={el:1};if(f)l.tag=
1;k=I(c,l);"+"==i?d=Q(k):"~"==i?d=K(k):">"==i&&(d=F(k))}else if(c.id)k=!c.loops&&f?a:I(c,{el:1,id:1}),d=function(a,b){var d=g.byId(c.id,a.ownerDocument||a);if(d&&k(d)){if(9==a.nodeType)return p(d,b);for(var e=d.parentNode;e&&!(e==a);)e=e.parentNode;if(e)return p(d,b)}};else if(l&&/\{\s*\[native code\]\s*\}/.test(""+l)&&c.classes.length&&!b)var k=I(c,{el:1,classes:1,id:1}),m=c.classes.join(" "),d=function(a,b,c){for(var b=p(0,b),d,e=0,i=a.getElementsByClassName(m);d=i[e++];)k(d,a)&&R(d,c)&&b.push(d);
return b};else!f&&!c.loops?d=function(a,b,d){for(var b=p(0,b),e=0,i=c.getTag(),i=i?a.getElementsByTagName(i):[];a=i[e++];)R(a,d)&&b.push(a);return b}:(k=I(c,{el:1,tag:1,id:1}),d=function(a,b,d){for(var b=p(0,b),e,i=0,f=(e=c.getTag())?a.getElementsByTagName(e):[];e=f[i++];)k(e,a)&&R(e,d)&&b.push(e);return b});return z[c.query]=d},A={},D={},L=function(a){var b=k(d(a));if(1==b.length){var c=y(b[0]);return function(a){if(a=c(a,[]))a.nozip=!0;return a}}return function(a){for(var a=p(a),c,d,e=b.length,
i,k,f=0;f<e;f++){k=[];c=b[f];d=a.length-1;if(0<d)i={},k.nozip=!0;d=y(c);for(var l=0;c=a[l];l++)d(c,k,i);if(!k.length)break;a=k}return k}},J=j("ie")?"commentStrip":"nozip",N=!!e.doc.querySelectorAll,T=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,H=function(a,b,c,d){return c?(b?b+" ":"")+c+(d?" "+d:""):a},B=/([^[]*)([^\]]*])?/g,V=function(a,b,c){return b.replace(T,H)+(c||"")},M=function(a,c){a=a.replace(B,V);if(N){var d=D[a];if(d&&!c)return d}if(d=A[a])return d;var d=a.charAt(0),e=-1==a.indexOf(" ");0<=
a.indexOf("#")&&e&&(c=!0);if(N&&!c&&-1==">~+".indexOf(d)&&(!j("ie")||-1==a.indexOf(":"))&&!(b&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf(":checked")&&-1==a.indexOf("|=")){var i=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return D[a]=function(b){try{if(!(9==b.nodeType||e))throw"";var c=b.querySelectorAll(i);c[J]=!0;return c}catch(d){return M(a,!0)(b)}}}var k=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return A[a]=2>k.length?L(a):function(a){for(var b=0,c=[],
d;d=k[b++];)c=c.concat(L(d)(a));return c}},P=0,O=j("ie")?function(a){return i?a.getAttribute("_uid")||a.setAttribute("_uid",++P)||P:a.uniqueID}:function(a){return a._uid||(a._uid=++P)},R=function(a,b){if(!b)return 1;var c=O(a);return!b[c]?b[c]=1:0},Z=function(a){if(a&&a.nozip)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);if(2>a.length)return b;P++;var c,d;if(j("ie")&&i){var e=P+"";a[0].setAttribute("_zipIdx",e);for(c=1;d=a[c];c++)a[c].getAttribute("_zipIdx")!=e&&b.push(d),d.setAttribute("_zipIdx",
e)}else if(j("ie")&&a.commentStrip)try{for(c=1;d=a[c];c++)l(d)&&b.push(d)}catch(k){}else{a[0]&&(a[0]._zipIdx=P);for(c=1;d=a[c];c++)a[c]._zipIdx!=P&&b.push(d),d._zipIdx=P}return b},U=function(a,b){b=b||e.doc;i="div"===(b.ownerDocument||b).createElement("div").tagName;var c=M(a)(b);return c&&c.nozip?c:Z(c)};U.filter=function(a,b,c){for(var d=[],e=k(b),e=1==e.length&&!/[^\w#\.]/.test(b)?I(e[0]):function(a){return-1!=f.indexOf(U(b,g.byId(c)),a)},i=0,l;l=a[i];i++)e(l)&&d.push(l);return d};return U})},
"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(g,j,f,h,e){var d=0,c,b=[],i=0,a=function(){if(d&&!i&&b.length){i=1;var e=b.shift();try{e()}finally{i=0}i=0;b.length&&c(a)}};f.on("idle",a);c=function(){f.idle()&&a()};var j=g.ready=g.addOnLoad=function(a,d,i){var k=e._toArray(arguments);"number"!=typeof a?(i=d,d=a,a=1E3):k.shift();i=i?e.hitch.apply(g,k):function(){d()};i.priority=a;for(k=0;k<b.length&&a>=b[k].priority;k++);b.splice(k,0,i);c()},
k=g.config.addOnLoad;if(k)j[e.isArray(k)?"apply":"call"](g,k);h(function(){d=1;g._postLoad=g.config.afterOnLoad=!0;b.length&&c(a)});return j})},"dojo/domReady":function(){define(["./has"],function(g){function j(a){c?a(h):b.push(a)}var f=this,h=document,e={loaded:1,complete:1},d="string"!=typeof h.readyState,c=!!e[h.readyState];if(d)h.readyState="loading";if(!c){var b=[],i=[],a=function(a){a=a||f.event;if(!(c||"readystatechange"==a.type&&!e[h.readyState])){c=1;if(d)h.readyState="complete";for(;b.length;)b.shift()(h)}},
k=function(c,d){c.addEventListener(d,a,!1);b.push(function(){c.removeEventListener(d,a,!1)})};if(!g("dom-addeventlistener")){var k=function(c,d){d="on"+d;c.attachEvent(d,a);b.push(function(){c.detachEvent(d,a)})},o=h.createElement("div");try{o.doScroll&&null===f.frameElement&&i.push(function(){try{return o.doScroll("left"),1}catch(a){}})}catch(p){}}k(h,"DOMContentLoaded");k(f,"load");"onreadystatechange"in h?k(h,"readystatechange"):d||i.push(function(){return e[h.readyState]});if(i.length){var l=
function(){if(!c){for(var b=i.length;b--;)if(i[b]()){a("poller");return}setTimeout(l,30)}};l()}}j.load=function(a,b,c){j(c)};return j})},"dijit/registry":function(){define(["dojo/_base/array","dojo/sniff","dojo/_base/unload","dojo/_base/window","./main"],function(g,j,f,h,e){var d={},c={},b={length:0,add:function(b){if(c[b.id])throw Error("Tried to register widget with id=="+b.id+" but that id is already registered");c[b.id]=b;this.length++},remove:function(b){c[b]&&(delete c[b],this.length--)},byId:function(b){return"string"==
typeof b?c[b]:b},byNode:function(b){return c[b.getAttribute("widgetId")]},toArray:function(){var b=[],a;for(a in c)b.push(c[a]);return b},getUniqueId:function(b){var a;do a=b+"_"+(b in d?++d[b]:d[b]=0);while(c[a]);return"dijit"==e._scopeName?a:e._scopeName+"_"+a},findWidgets:function(b,a){function d(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType){var i=b.getAttribute("widgetId");i?(i=c[i])&&e.push(i):b!==a&&d(b)}}var e=[];d(b);return e},_destroyAll:function(){e._curFocus=null;e._prevFocus=
null;e._activeStack=[];g.forEach(b.findWidgets(h.body()),function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive():b.destroy&&b.destroy())})},getEnclosingWidget:function(b){for(;b;){var a=1==b.nodeType&&b.getAttribute("widgetId");if(a)return c[a];b=b.parentNode}return null},_hash:c};return e.registry=b})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(g,j,f){var h=window,e={addOnWindowUnload:function(d,c){if(!g.windowUnloaded)f(h,"unload",g.windowUnloaded=function(){});
f(h,"unload",j.hitch(d,c))},addOnUnload:function(d,c){f(h,"beforeunload",j.hitch(d,c))}};g.addOnWindowUnload=e.addOnWindowUnload;g.addOnUnload=e.addOnUnload;return e})},"dijit/main":function(){define(["dojo/_base/kernel"],function(g){return g.dijit})},"dijit/_WidgetBase":function(){define("require,dojo/_base/array,dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/ready,dojo/Stateful,dojo/topic,dojo/_base/window,./Destroyable,./registry".split(","),
function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n,q,r,u,s,v,t){function x(a){return function(c){b[c?"set":"remove"](this.domNode,a,c);this._set(a,c)}}p.add("dijit-legacy-requires",!l.isAsync);p("dijit-legacy-requires")&&q(0,function(){g(["dijit/_base/manager"])});var w={};return d("dijit._WidgetBase",[r,v],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:x("lang"),dir:"",_setDirAttr:x("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,
domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:h.blankGif||g.toUrl("dojo/resources/blank.gif"),postscript:function(a,b){this.create(a,b)},create:function(a,b){this.srcNodeRef=c.byId(b);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&"string"==typeof this.srcNodeRef.id)this.id=this.srcNodeRef.id;if(a)this.params=a,m.mixin(this,a);this.postMixInProperties();if(!this.id)this.id=t.getUniqueId(this.declaredClass.replace(/\./g,
"_")),this.params&&delete this.params.id;this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:s.doc);this.ownerDocumentBody=s.body(this.ownerDocument);t.add(this);this.buildRendering();var d;if(this.domNode){this._applyAttributes();var e=this.srcNodeRef;e&&e.parentNode&&this.domNode!==e&&(e.parentNode.replaceChild(this.domNode,e),d=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();d&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a=
this.constructor,b=a._setterAttrs;if(!b){var b=a._setterAttrs=[],c;for(c in this.attributeMap)b.push(c);var a=a.prototype,d;for(d in a)d in this.attributeMap||"_set"+d.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()})+"Attr"in a&&b.push(d)}var e={},i;for(i in this.params||{})e[i]=this[i];j.forEach(b,function(a){a in e||this[a]&&this.set(a,this[a])},this);for(i in e)this.set(i,e[i])},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode)this.domNode=
this.srcNodeRef||this.ownerDocument.createElement("div");if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(j.map(a,function(a){return a+"Rtl"})));i.add(this.domNode,a)}},postCreate:function(){},startup:function(){if(!this._started)this._started=!0,j.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&m.isFunction(a.startup))a.startup(),a._started=!0})},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},
destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();j.forEach(this._connects,m.hitch(this,"disconnect"));j.forEach(this._supportingWidgets,b);this.domNode&&j.forEach(t.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);t.remove(this.id);this._destroyed=!0},destroyRendering:function(c){this.bgIframe&&(this.bgIframe.destroy(c),delete this.bgIframe);this.domNode&&(c?b.remove(this.domNode,
"widgetId"):a.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(c||a.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){j.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;m.isObject(a)?o.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,c,d){d=3<=arguments.length?d:this.attributeMap[a];
j.forEach(m.isArray(d)?d:[d],function(d){var e=this[d.node||d||"domNode"];switch(d.type||"attribute"){case "attribute":m.isFunction(c)&&(c=m.hitch(this,c));d=d.attribute?d.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;e.tagName?b.set(e,d,c):e.set(d,c);break;case "innerText":e.innerHTML="";e.appendChild(this.ownerDocument.createTextNode(c));break;case "innerHTML":e.innerHTML=c;break;case "class":i.replace(e,c,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?
this[b.g]():this[a]},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var d=this[c.s];if(m.isFunction(d))var e=d.apply(this,Array.prototype.slice.call(arguments,1));else{var d=this.focusNode&&!m.isFunction(this.focusNode)?"focusNode":"domNode",i=this[d].tagName,k;if(!(k=w[i])){k=this[d];var f={},l;for(l in k)f[l.toLowerCase()]=!0;k=w[i]=f}l=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:c.l in k&&"function"!=typeof b||
/^aria-|^data-|^role$/.test(a)?d:null;null!=l&&this._attrToDom(a,b,l);this._set(a,b)}return e||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;this._created&&b!==c&&(this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+
a,{detail:{prevValue:c,newValue:b}}))},emit:function(a,b,c){b=b||{};if(void 0===b.bubbles)b.bubbles=!0;if(void 0===b.cancelable)b.cancelable=!0;if(!b.detail)b.detail={};b.detail.widget=this;var d,e=this["on"+a];e&&(d=e.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&n.emit(this.domNode,a.toLowerCase(),b);return d},on:function(a,b){var c=this._onMap(a);return c?f.after(this,c,b,!0):this.own(n(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap=
{},d;for(d in b.prototype)/^on/.test(d)&&(c[d.replace(/^on/,"").toLowerCase()]=d)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?t.findWidgets(this.containerNode):[]},getParent:function(){return t.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(e.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(u.subscribe(a,
m.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:k.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=o.get(this.domNode,"display")},placeAt:function(b,d){var e=!b.tagName&&t.byId(b);e&&e.addChild&&(!d||"number"===typeof d)?e.addChild(this,d):(e=e?e.containerNode&&!/after|before|replace/.test(d||"")?e.containerNode:e.domNode:c.byId(b,this.ownerDocument),a.place(this.domNode,e,d),!this._started&&(this.getParent()||
{})._started&&this.startup());return this},getTextDir:function(a,b){return b},applyTextDir:function(){},defer:function(a,b){var c=setTimeout(m.hitch(this,function(){c=null;this._destroyed||m.hitch(this,a)()}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}})})},"dojo/dom-attr":function(){define("exports,./sniff,./_base/lang,./dom,./dom-style,./dom-prop".split(","),function(g,j,f,h,e,d){function c(a,b){var c=a.getAttributeNode&&a.getAttributeNode(b);return c&&c.specified}
var b={innerHTML:1,className:1,htmlFor:j("ie"),value:1},i={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};g.has=function(a,e){var f=e.toLowerCase();return b[d.names[f]||e]||c(h.byId(a),i[f]||e)};g.get=function(a,e){var a=h.byId(a),o=e.toLowerCase(),g=d.names[o]||e,l=a[g];if(b[g]&&"undefined"!=typeof l||"href"!=g&&("boolean"==typeof l||f.isFunction(l)))return l;o=i[o]||e;return c(a,o)?a.getAttribute(o):null};g.set=function(a,c,o){a=h.byId(a);if(2==arguments.length){for(var p in c)g.set(a,
p,c[p]);return a}p=c.toLowerCase();var l=d.names[p]||c,m=b[l];if("style"==l&&"string"!=typeof o)return e.set(a,o),a;if(m||"boolean"==typeof o||f.isFunction(o))return d.set(a,c,o);a.setAttribute(i[p]||c,o);return a};g.remove=function(a,b){h.byId(a).removeAttribute(i[b.toLowerCase()]||b)};g.getNodeProp=function(a,b){var a=h.byId(a),e=b.toLowerCase(),f=d.names[e]||b;if(f in a&&"href"!=f)return a[f];e=i[e]||b;return c(a,e)?a.getAttribute(e):null}})},"dojo/dom-prop":function(){define("dojo/dom-prop","exports,./_base/kernel,./sniff,./_base/lang,./dom,./dom-style,./dom-construct,./_base/connect".split(","),
function(g,j,f,h,e,d,c,b){var i={},a=0,k=j._scopeName+"attrid";g.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"};g.get=function(a,b){var a=e.byId(a),c=b.toLowerCase();return a[g.names[c]||b]};g.set=function(o,p,l){o=e.byId(o);if(2==arguments.length&&"string"!=typeof p){for(var m in p)g.set(o,m,p[m]);return o}m=p.toLowerCase();m=g.names[m]||p;if("style"==m&&"string"!=typeof l)return d.set(o,
l),o;if("innerHTML"==m)return f("ie")&&o.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(c.empty(o),o.appendChild(c.toDom(l,o.ownerDocument))):o[m]=l,o;if(h.isFunction(l)){var n=o[k];n||(n=a++,o[k]=n);i[n]||(i[n]={});var q=i[n][m];if(q)b.disconnect(q);else try{delete o[m]}catch(r){}l?i[n][m]=b.connect(o,m,l):o[m]=null;return o}o[m]=l;return o}})},"dojo/dom-construct":function(){define("exports,./_base/kernel,./sniff,./_base/window,./dom,./dom-attr,./on".split(","),
function(g,j,f,h,e,d){function c(a,b){var c=b.parentNode;c&&c.insertBefore(a,b)}var b={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},i=/<\s*([\w\:]+)/,a={},k=0,o="__"+j._scopeName+"ToDomId",p;for(p in b)if(b.hasOwnProperty(p))j=b[p],j.pre="option"==p?'<select multiple="multiple">':"<"+j.join("><")+">",j.post="</"+
j.reverse().join("></")+">";g.toDom=function(c,d){var d=d||h.doc,e=d[o];e||(d[o]=e=++k+"",a[e]=d.createElement("div"));var c=c+"",f=c.match(i),l=f?f[1].toLowerCase():"",e=a[e];if(f&&b[l]){f=b[l];e.innerHTML=f.pre+c+f.post;for(f=f.length;f;--f)e=e.firstChild}else e.innerHTML=c;if(1==e.childNodes.length)return e.removeChild(e.firstChild);for(l=d.createDocumentFragment();f=e.firstChild;)l.appendChild(f);return l};g.place=function(a,b,d){b=e.byId(b);"string"==typeof a&&(a=/^\s*</.test(a)?g.toDom(a,b.ownerDocument):
e.byId(a));if("number"==typeof d){var i=b.childNodes;!i.length||i.length<=d?b.appendChild(a):c(a,i[0>d?0:d])}else switch(d){case "before":c(a,b);break;case "after":d=a;(i=b.parentNode)&&(i.lastChild==b?i.appendChild(d):i.insertBefore(d,b.nextSibling));break;case "replace":b.parentNode.replaceChild(a,b);break;case "only":g.empty(b);b.appendChild(a);break;case "first":if(b.firstChild){c(a,b.firstChild);break}default:b.appendChild(a)}return a};g.create=function(a,b,c,i){var k=h.doc;if(c)c=e.byId(c),
k=c.ownerDocument;"string"==typeof a&&(a=k.createElement(a));b&&d.set(a,b);c&&g.place(a,c,i);return a};var l=f("ie")?function(a){try{a.innerHTML=""}catch(b){for(var c;c=a.lastChild;){var d=a;c.firstChild&&l(c);d&&d.removeChild(c)}}}:function(a){a.innerHTML=""};g.empty=function(a){l(e.byId(a))};g.destroy=function(a){if(a=e.byId(a)){var b=a,a=a.parentNode;b.firstChild&&l(b);a&&a.removeChild(b)}}})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(g,j,f){function h(b){if("string"==
typeof b||b instanceof String){if(b&&!d.test(b))return c[0]=b,c;b=b.split(d);b.length&&!b[0]&&b.shift();b.length&&!b[b.length-1]&&b.pop();return b}return!b?[]:j.filter(b,function(a){return a})}var e,d=/\s+/,c=[""],b={};return e={contains:function(b,a){return 0<=(" "+f.byId(b).className+" ").indexOf(" "+a+" ")},add:function(b,a){var b=f.byId(b),a=h(a),c=b.className,d,c=c?" "+c+" ":" ";d=c.length;for(var e=0,l=a.length,m;e<l;++e)(m=a[e])&&0>c.indexOf(" "+m+" ")&&(c+=m+" ");d<c.length&&(b.className=
c.substr(1,c.length-2))},remove:function(b,a){var b=f.byId(b),c;if(void 0!==a){a=h(a);c=" "+b.className+" ";for(var d=0,e=a.length;d<e;++d)c=c.replace(" "+a[d]+" "," ");c=g.trim(c)}else c="";b.className!=c&&(b.className=c)},replace:function(c,a,d){c=f.byId(c);b.className=c.className;e.remove(b,d);e.add(b,a);c.className!==b.className&&(c.className=b.className)},toggle:function(b,a,c){b=f.byId(b);if(void 0===c)for(var a=h(a),d=0,g=a.length,l;d<g;++d)l=a[d],e[e.contains(b,l)?"remove":"add"](b,l);else e[c?
"add":"remove"](b,a);return c}}})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","dojo/when"],function(g,j,f,h){return g("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(e){var d=this._attrPairNames;return d[e]?d[e]:d[e]={s:"_"+e+"Setter",g:"_"+e+"Getter"}},postscript:function(e){e&&this.set(e)},_get:function(e,d){return"function"===typeof this[d.g]?this[d.g]():this[e]},get:function(e){return this._get(e,this._getAttrNames(e))},set:function(e,d){if("object"===
typeof e){for(var c in e)e.hasOwnProperty(c)&&"_watchCallbacks"!=c&&this.set(c,e[c]);return this}c=this._getAttrNames(e);var b=this._get(e,c);c=this[c.s];var i;"function"===typeof c?i=c.apply(this,Array.prototype.slice.call(arguments,1)):this[e]=d;if(this._watchCallbacks){var a=this;h(i,function(){a._watchCallbacks(e,b,d)})}return this},_changeAttrValue:function(e,d){var c=this.get(e);this[e]=d;this._watchCallbacks&&this._watchCallbacks(e,c,d);return this},watch:function(e,d){var c=this._watchCallbacks;
if(!c)var b=this,c=this._watchCallbacks=function(a,d,e,i){var f=function(c){if(c)for(var c=c.slice(),i=0,f=c.length;i<f;i++)c[i].call(b,a,d,e)};f(c["_"+a]);i||f(c["*"])};!d&&"function"===typeof e?(d=e,e="*"):e="_"+e;var i=c[e];"object"!==typeof i&&(i=c[e]=[]);i.push(d);var a={};a.unwatch=a.remove=function(){var a=f.indexOf(i,d);-1<a&&i.splice(a,1)};return a}})})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(g,j,f){return f("dijit.Destroyable",
null,{destroy:function(){this._destroyed=!0},own:function(){g.forEach(arguments,function(f){var e="destroyRecursive"in f?"destroyRecursive":"destroy"in f?"destroy":"remove",d=j.before(this,"destroy",function(b){f[e](b)}),c=j.after(f,e,function(){d.remove();c.remove()},!0)},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/has,dojo/_base/unload,dojo/_base/window,./a11yclick".split(","),function(g,j,f,h,e,d,c,b){g=h("dijit._OnDijitClickMixin",
null,{connect:function(c,a,d){return this.inherited(arguments,[c,"ondijitclick"==a?b:a,d])}});g.a11yclick=b;return g})},"dijit/a11yclick":function(){define("dojo/on,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/has,dojo/_base/unload,dojo/_base/window".split(","),function(g,j,f,h,e,d,c){function b(a){return(a.keyCode===f.ENTER||a.keyCode===f.SPACE)&&!a.ctrlKey&&!a.shiftKey&&!a.altKey&&!a.metaKey}var i=null;e("dom-addeventlistener")?c.doc.addEventListener("keydown",function(a){i=a.target},!0):
function(){var a=function(a){i=a.srcElement};c.doc.attachEvent("onkeydown",a);d.addOnWindowUnload(function(){c.doc.detachEvent("onkeydown",a)})}();return function(a,c){if(/input|button/i.test(a.nodeName))return g(a,"click",c);var d=[g(a,"keydown",function(a){if(b(a))i=a.target,a.preventDefault()}),g(a,"keyup",function(a){b(a)&&a.target==i&&(i=null,g.emit(a.target,"click",{cancelable:!0,bubbles:!0}))}),g(a,"click",function(a){c.call(this,a)})];if(e("touch")){var f;d.push(g(a,"touchend",function(a){var b=
a.target;f=setTimeout(function(){f=null;g.emit(b,"click",{cancelable:!0,bubbles:!0})},600)}),g(a,"click",function(){f&&clearTimeout(f)}))}return{remove:function(){j.forEach(d,function(a){a.remove()});f&&(clearTimeout(f),f=null)}}}})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(g,j,f,h){h.extend(j,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return f("dijit._FocusMixin",
null,{_focusManager:g})})},"dijit/focus":function(){define("dojo/aspect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/Evented,dojo/_base/lang,dojo/on,dojo/ready,dojo/sniff,dojo/Stateful,dojo/_base/unload,dojo/_base/window,dojo/window,./a11y,./registry,./main".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n,q){var r=new (j([k,d],{curNode:null,activeStack:[],constructor:function(){var a=c.hitch(this,function(a){f.isDescendant(this.curNode,a)&&this.set("curNode",null);f.isDescendant(this.prevNode,
a)&&this.set("prevNode",null)});g.before(e,"empty",a);g.before(e,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(b,c){var d=this,e=function(b){d._justMouseDowned=!0;setTimeout(function(){d._justMouseDowned=!1},0);if(!a("ie")||!b||!(b.srcElement&&null==b.srcElement.parentNode))d._onTouchNode(c||b.target||b.srcElement,"mouse")},i=a("ie")?b.document.documentElement:b.document;if(i){if(a("ie")){b.document.body.attachEvent("onmousedown",e);var f=
function(a){var b=a.srcElement.tagName.toLowerCase();"#document"==b||"body"==b||(m.isTabNavigable(a.srcElement)?d._onFocusNode(c||a.srcElement):d._onTouchNode(c||a.srcElement))};i.attachEvent("onfocusin",f);var k=function(a){d._onBlurNode(c||a.srcElement)};i.attachEvent("onfocusout",k);return{remove:function(){b.document.detachEvent("onmousedown",e);i.detachEvent("onfocusin",f);i.detachEvent("onfocusout",k);i=null}}}i.body.addEventListener("mousedown",e,!0);i.body.addEventListener("touchstart",e,
!0);var l=function(a){d._onFocusNode(c||a.target)};i.addEventListener("focus",l,!0);var h=function(a){d._onBlurNode(c||a.target)};i.addEventListener("blur",h,!0);return{remove:function(){i.body.removeEventListener("mousedown",e,!0);i.body.removeEventListener("touchstart",e,!0);i.removeEventListener("focus",l,!0);i.removeEventListener("blur",h,!0);i=null}}}},_onBlurNode:function(){this._clearFocusTimer&&clearTimeout(this._clearFocusTimer);this._clearFocusTimer=setTimeout(c.hitch(this,function(){this.set("prevNode",
this.curNode);this.set("curNode",null)}),0);if(!this._justMouseDowned)this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),this._clearActiveWidgetsTimer=setTimeout(c.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)},_onTouchNode:function(a,b){this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);var c=[];try{for(;a;){var d=h.get(a,"dijitPopupParent");if(d)a=n.byId(d).domNode;else if(a.tagName&&
"body"==a.tagName.toLowerCase()){if(a===p.body())break;a=l.get(a.ownerDocument).frameElement}else{var e=a.getAttribute&&a.getAttribute("widgetId"),i=e&&n.byId(e);i&&!("mouse"==b&&i.get("disabled"))&&c.unshift(e);a=a.parentNode}}}catch(f){}this._setStack(c,b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,
b){var c=this.activeStack;this.set("activeStack",a);for(var d=0;d<Math.min(c.length,a.length)&&!(c[d]!=a[d]);d++);for(var e,i=c.length-1;i>=d;i--)if(e=n.byId(c[i]))e._hasBeenBlurred=!0,e.set("focused",!1),e._focusManager==this&&e._onBlur(b),this.emit("widget-blur",e,b);for(i=d;i<a.length;i++)if(e=n.byId(a[i]))e.set("focused",!0),e._focusManager==this&&e._onFocus(b),this.emit("widget-focus",e,b)},focus:function(a){if(a)try{a.focus()}catch(b){}}}));i(function(){var b=r.registerWin(l.get(p.doc));a("ie")&&
o.addOnWindowUnload(function(){b&&(b.remove(),b=null)})});q.focus=function(a){r.focus(a)};for(var u in r)/^_/.test(u)||(q.focus[u]="function"==typeof r[u]?c.hitch(r,u):r[u]);r.watch(function(a,b,c){q.focus[a]=c});return r})},"dojo/window":function(){define("./_base/lang,./sniff,./_base/window,./dom,./dom-geometry,./dom-style".split(","),function(g,j,f,h,e,d){var c={getBox:function(b){var b=b||f.doc,d="BackCompat"==b.compatMode?f.body(b):b.documentElement,a=e.docScroll(b);if(j("touch"))var k=c.get(b),
b=k.innerWidth||d.clientWidth,d=k.innerHeight||d.clientHeight;else b=d.clientWidth,d=d.clientHeight;return{l:a.x,t:a.y,w:b,h:d}},get:function(b){if(j("ie")&&c!==document.parentWindow){b.parentWindow.execScript("document._parentWindow = window;","Javascript");var d=b._parentWindow;b._parentWindow=null;return d}return b.parentWindow||b.defaultView},scrollIntoView:function(b,c){try{var b=h.byId(b),a=b.ownerDocument||f.doc,k=f.body(a),o=a.documentElement||k.parentNode,g=j("ie"),l=j("webkit");if((!j("mozilla")&&
!g&&!l&&!j("opera")||b==k||b==o)&&"undefined"!=typeof b.scrollIntoView)b.scrollIntoView(!1);else{var m="BackCompat"==a.compatMode,n=9<=g&&"frameElement"in b.ownerDocument.parentWindow?0<o.clientHeight&&0<o.clientWidth&&(0==k.clientHeight||0==k.clientWidth||k.clientHeight>o.clientHeight||k.clientWidth>o.clientWidth)?o:k:m?k:o,l=l?k:n,q=n.clientWidth,r=n.clientHeight,u=!e.isBodyLtr(a),s=c||e.position(b),v=b.parentNode,a=function(a){return 6>=g||g&&m?!1:"fixed"==d.get(a,"position").toLowerCase()};if(!a(b))for(;v;){v==
k&&(v=l);var t=e.position(v),x=a(v);if(v==l){t.w=q;t.h=r;l==o&&g&&u&&(t.x+=l.offsetWidth-t.w);if(0>t.x||!g)t.x=0;if(0>t.y||!g)t.y=0}else{var w=e.getPadBorderExtents(v);t.w-=w.w;t.h-=w.h;t.x+=w.l;t.y+=w.t;var E=v.clientWidth,C=t.w-E;if(0<E&&0<C)t.w=E,t.x+=u&&(g||v.clientLeft>w.l)?C:0;E=v.clientHeight;C=t.h-E;if(0<E&&0<C)t.h=E}if(x){if(0>t.y)t.h+=t.y,t.y=0;if(0>t.x)t.w+=t.x,t.x=0;if(t.y+t.h>r)t.h=r-t.y;if(t.x+t.w>q)t.w=q-t.x}var G=s.x-t.x,I=s.y-Math.max(t.y,0),Q=G+s.w-t.w,K=I+s.h-t.h;if(0<Q*G){var F=
Math[0>G?"max":"min"](G,Q);if(u&&(8==g&&!m||9<=g))F=-F;s.x+=v.scrollLeft;v.scrollLeft+=F;s.x-=v.scrollLeft}0<K*I&&(s.y+=v.scrollTop,v.scrollTop+=Math[0>I?"max":"min"](I,K),s.y-=v.scrollTop);v=v!=l&&!x&&v.parentNode}}}catch(z){console.error("scrollIntoView: "+z),b.scrollIntoView(!1)}}};g.setObject("dojo.window",c);return c})},"dijit/a11y":function(){define("dojo/_base/array,dojo/_base/config,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-style,dojo/sniff,./main".split(","),function(g,j,f,h,e,d,
c,b){var i=b._isElementShown=function(a){var b=d.get(a);return"hidden"!=b.visibility&&"collapsed"!=b.visibility&&"none"!=b.display&&"hidden"!=e.get(a,"type")};b.hasDefaultTabStop=function(a){switch(a.nodeName.toLowerCase()){case "a":return e.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var b;try{var c=a.contentDocument;if("designMode"in c&&"on"==c.designMode)return!0;b=c.body}catch(d){try{b=a.contentWindow.document.body}catch(i){return!1}}return b&&
("true"==b.contentEditable||b.firstChild&&"true"==b.firstChild.contentEditable);default:return"true"==a.contentEditable}};var a=b.isTabNavigable=function(a){return e.get(a,"disabled")?!1:e.has(a,"tabIndex")?0<=e.get(a,"tabIndex"):b.hasDefaultTabStop(a)};b._getTabNavigable=function(b){function d(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}var f,l,h,g,q,r,j={},s=function(b){for(b=b.firstChild;b;b=b.nextSibling)if(!(1!=b.nodeType||
9>=c("ie")&&"HTML"!==b.scopeName||!i(b))){if(a(b)){var k=+e.get(b,"tabIndex");if(!e.has(b,"tabIndex")||0==k)f||(f=b),l=b;else if(0<k){if(!h||k<g)g=k,h=b;if(!q||k>=r)r=k,q=b}k=d(b);e.get(b,"checked")&&k&&(j[k]=b)}"SELECT"!=b.nodeName.toUpperCase()&&s(b)}};i(b)&&s(b);return{first:j[d(f)]||f,last:j[d(l)]||l,lowest:j[d(h)]||h,highest:j[d(q)]||q}};b.getFirstInTabbingOrder=function(a,c){var d=b._getTabNavigable(h.byId(a,c));return d.lowest?d.lowest:d.first};b.getLastInTabbingOrder=function(a,c){var d=b._getTabNavigable(h.byId(a,
c));return d.last?d.last:d.highest};return{hasDefaultTabStop:b.hasDefaultTabStop,isTabNavigable:b.isTabNavigable,_getTabNavigable:b._getTabNavigable,getFirstInTabbingOrder:b.getFirstInTabbingOrder,getLastInTabbingOrder:b.getLastInTabbingOrder}})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./ready","./sniff","./_base/window"],function(g,j,f,h,e){var d=e.doc.documentElement,e=h("ie"),c=h("opera"),b=Math.floor,i=h("ff"),a=g.boxModel.replace(/-/,""),c={dj_quirks:h("quirks"),dj_opera:c,
dj_khtml:h("khtml"),dj_webkit:h("webkit"),dj_safari:h("safari"),dj_chrome:h("chrome"),dj_gecko:h("mozilla")};if(e)c.dj_ie=!0,c["dj_ie"+b(e)]=!0,c.dj_iequirks=h("quirks");i&&(c["dj_ff"+b(i)]=!0);c["dj_"+a]=!0;var k="",o;for(o in c)c[o]&&(k+=o+" ");d.className=j.trim(d.className+" "+k);f(90,function(){if(!g.isBodyLtr()){var a="dj_rtl dijitRtl "+k.replace(/ /g,"-rtl ");d.className=j.trim(d.className+" "+a+"dj_rtl dijitRtl "+k.replace(/ /g,"-rtl "))}});return h})},"dijit/hccss":function(){define(["dojo/dom-class",
"dojo/hccss","dojo/ready","dojo/_base/window"],function(g,j,f,h){f(90,function(){j("highcontrast")&&g.add(h.body(),"dijit_a11y")});return j})},"dojo/hccss":function(){define("require,./_base/config,./dom-class,./dom-style,./has,./ready,./_base/window".split(","),function(g,j,f,h,e,d,c){e.add("highcontrast",function(){var b=c.doc.createElement("div");b.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("+(j.blankGif||g.toUrl("./resources/blank.gif"))+
");";c.body().appendChild(b);var d=h.getComputedStyle(b),a=d.backgroundImage,d=d.borderTopColor==d.borderRightColor||a&&("none"==a||"url(invalid-url:)"==a);8>=e("ie")?b.outerHTML="":c.body().removeChild(b);return d});d(90,function(){e("highcontrast")&&f.add(c.body(),"dj_a11y")});return e})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(g,j,f){return j("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=
this.domNode},addChild:function(h,e){var d=this.containerNode;if(e&&"number"==typeof e){var c=this.getChildren();if(c&&c.length>=e)d=c[e-1].domNode,e="after"}f.place(h.domNode,d,e);this._started&&!h._started&&h.startup()},removeChild:function(f){"number"==typeof f&&(f=this.getChildren()[f]);if(f)(f=f.domNode)&&f.parentNode&&f.parentNode.removeChild(f)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(f,e){var d=this.getChildren(),c=g.indexOf(this.getChildren(),
f);return d[c+e]},getIndexOfChild:function(f){return g.indexOf(this.getChildren(),f)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,dojo/query,dojo/sniff,../registry,../Viewport,./utils".split(","),function(g,j,f,h,e,d,c,b,i,a,k){return j("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var b=this.getParent();this._childOfLayoutWidget=
b&&b.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(a.on("resize",d.hitch(this,"resize")))}},_checkIfSingleChild:function(){var a=[],b=!1;c("> *",this.containerNode).some(function(c){var d=i.byNode(c);d&&d.resize?a.push(d):c.offsetHeight&&(b=!0)});this._singleChild=1==a.length&&!b?a[0]:null;f.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)},resize:function(a,b){this._resizeCalled=
!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(a,b){delete this._needLayout;!this._wasShown&&!1!==this.open&&this._onShow();a&&h.setMarginBox(this.domNode,a);var c=this.containerNode;if(c===this.domNode){var e=b||{};d.mixin(e,a||{});if(!("h"in e)||!("w"in e))e=d.mixin(h.getMarginBox(c),e);this._contentBox=k.marginBox2contentBox(c,e)}else this._contentBox=h.getContentBox(c);
this._layoutChildren()},_layoutChildren:function(){this.doLayout&&this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||h.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else g.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;
return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!f.contains(a,"dijitHidden")&&b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/Viewport":function(){define("dojo/Evented,dojo/on,dojo/ready,dojo/sniff,dojo/_base/window,dojo/window".split(","),function(g,j,f,h,e,d){var c=new g;f(200,function(){var b=d.getBox();c._rlh=j(e.global,"resize",function(){var a=d.getBox();
b.h==a.h&&b.w==a.w||(b=a,c.emit("resize"))});if(8==h("ie")){var i=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=i)i=screen.deviceXDPI,c.emit("resize")},500)}});return c})},"dijit/layout/utils":function(){define("dojo/_base/array,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,../main".split(","),function(g,j,f,h,e,d){function c(b,c){var a=b.resize?b.resize(c):f.setMarginBox(b.domNode,c);a?e.mixin(b,a):(e.mixin(b,f.getMarginBox(b.domNode)),e.mixin(b,c))}d=e.getObject("layout",
!0,d);d.marginBox2contentBox=function(b,c){var a=h.getComputedStyle(b),d=f.getMarginExtents(b,a),e=f.getPadBorderExtents(b,a);return{l:h.toPixelValue(b,a.paddingLeft),t:h.toPixelValue(b,a.paddingTop),w:c.w-(d.w+e.w),h:c.h-(d.h+e.h)}};d.layoutChildren=function(b,d,a,f,h){d=e.mixin({},d);j.add(b,"dijitLayoutContainer");a=g.filter(a,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(g.filter(a,function(a){return"center"==a.region||"client"==a.layoutAlign}));g.forEach(a,function(a){var b=
a.domNode,e=a.region||a.layoutAlign;if(!e)throw Error("No region setting for "+a.id);var g=b.style;g.left=d.l+"px";g.top=d.t+"px";g.position="absolute";j.add(b,"dijitAlign"+(e.substring(0,1).toUpperCase()+e.substring(1)));b={};f&&f==a.id&&(b["top"==a.region||"bottom"==a.region?"h":"w"]=h);"top"==e||"bottom"==e?(b.w=d.w,c(a,b),d.h-=a.h,"top"==e?d.t+=a.h:g.top=d.t+d.h+"px"):"left"==e||"right"==e?(b.h=d.h,c(a,b),d.w-=a.w,"left"==e?d.l+=a.w:g.left=d.l+d.w+"px"):("client"==e||"center"==e)&&c(a,d)})};return{marginBox2contentBox:d.marginBox2contentBox,
layoutChildren:d.layoutChildren}})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(g,j){var f={};j.setObject("dojo.string",f);f.rep=function(f,e){if(0>=e||!f)return"";for(var d=[];;){e&1&&d.push(f);if(!(e>>=1))break;f+=f}return d.join("")};f.pad=function(h,e,d,c){d||(d="0");h=""+h;e=f.rep(d,Math.ceil((e-h.length)/d.length));return c?h+e:e+h};f.substitute=function(f,e,d,c){c=c||g.global;d=d?j.hitch(c,d):function(b){return b};return f.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,
function(b,i,a){b=j.getObject(i,!1,e);a&&(b=j.getObject(a,!1,c).call(c,b,i));return d(b,i).toString()})};f.trim=String.prototype.trim?j.trim:function(f){for(var f=f.replace(/^\s+/,""),e=f.length-1;0<=e;e--)if(/\S/.test(f.charAt(e))){f=f.substring(0,e+1);break}return f};return f})},"dojo/html":function(){define("dojo/html","./_base/kernel,./_base/lang,./_base/array,./_base/declare,./dom,./dom-construct,./parser".split(","),function(g,j,f,h,e,d,c){var b={};j.setObject("dojo.html",b);var i=0;b._secureForInnerHtml=
function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")};b._emptyNode=d.empty;b._setNodeContent=function(a,b){d.empty(a);if(b)if("string"==typeof b&&(b=d.toDom(b,a.ownerDocument)),!b.nodeType&&j.isArrayLike(b))for(var c=b.length,e=0;e<b.length;e=c==b.length?e+1:0)d.place(b[e],a,"last");else d.place(b,a,"last");return a};b._ContentSetter=h("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:g._scopeName,
startup:!0,constructor:function(a,b){j.mixin(this,a||{});b=this.node=e.byId(this.node||b);if(!this.id)this.id=["Setter",b?b.id||b.tagName:"",i++].join("_")},set:function(a,b){if(void 0!==a)this.content=a;b&&this._mixin(b);this.onBegin();this.setContent();var c=this.onEnd();return c&&c.then?c:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=b._setNodeContent(a,this.content)}catch(c){var d=this.onContentError(c);try{a.innerHTML=
d}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e)}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(f.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);d.empty(this.node)},onBegin:function(){var a=this.content;if(j.isString(a)&&(this.cleanContent&&(a=b._secureForInnerHtml(a)),
this.extractContent)){var c=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);c&&(a=c[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},c;for(c in a)c in b||
(this[c]=a[c])},_parse:function(){var a=this.node;try{var b={};f.forEach(["dir","lang","textDir"],function(a){this[a]&&(b[a]=this[a])},this);var d=this;this.parseDeferred=c.parse({rootNode:a,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(a){return d.parseResults=a})}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,c,d){a=this["on"+a+"Error"].call(this,c);d?console.error(d,c):a&&b._setNodeContent(this.node,a,!0)}});b.set=
function(a,c,d){void 0==c&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),c="");return d?(new b._ContentSetter(j.mixin(d,{content:c,node:a}))).set():b._setNodeContent(a,c,!0)};return b})},"dojo/parser":function(){define("require,./_base/kernel,./_base/lang,./_base/array,./_base/config,./_base/html,./_base/window,./_base/url,./_base/json,./aspect,./date/stamp,./Deferred,./has,./query,./on,./ready".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n){function q(a){var b=
a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<u){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=u}return b}function r(a){var b=a.join();if(!s[b]){for(var c=[],d=0,e=a.length;d<e;d++){var i=a[d];c[c.length]=s[i]=s[i]||f.getObject(i)||~i.indexOf("/")&&g(i)}a=c.shift();s[b]=c.length?a.createSubclass?a.createSubclass(c):a.extend.apply(a,c):a}return s[b]}var u=0;a.after(f,"extend",function(){u++},!0);var s={},v={_clearCache:function(){u++;s={}},_functionFromScript:function(a,
b){var c="",d="",e=a.getAttribute(b+"args")||a.getAttribute("args"),i=a.getAttribute("with"),e=(e||"").split(/\s*,\s*/);i&&i.length&&h.forEach(i.split(/\s*,\s*/),function(a){c+="with("+a+"){";d+="}"});return new Function(e,c+a.innerHTML+d)},instantiate:function(a,b,c){var b=b||{},c=c||{},d=(c.scope||j._scopeName)+"Type",e="data-"+(c.scope||j._scopeName)+"-",i=e+"type",f=e+"mixins",k=[];h.forEach(a,function(a){var c=d in b?b[d]:a.getAttribute(i)||a.getAttribute(d);if(c){var e=a.getAttribute(f),c=e?
[c].concat(e.split(/\s*,\s*/)):[c];k.push({node:a,types:c})}});return this._instantiate(k,b,c)},_instantiate:function(a,b,c){a=h.map(a,function(a){var d=a.ctor||r(a.types);if(!d)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(d,a.node,b,c,a.scripts,a.inherited)},this);!b._started&&!c.noStart&&h.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a},construct:function(c,d,e,r,g,n){var t;var o=c&&c.prototype,r=r||{},u={};
r.defaults&&f.mixin(u,r.defaults);n&&f.mixin(u,n);var v;p("dom-attributes-explicit")?v=d.attributes:p("dom-attributes-specified-flag")?v=h.filter(d.attributes,function(a){return a.specified}):(n=(/^input$|^img$/i.test(d.nodeName)?d:d.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),v=h.map(n.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==d.nodeName&&"value"==a||"enctype"==b?d.getAttribute(b):d.getAttributeNode(b).value}}));
var s=r.scope||j._scopeName,n="data-"+s+"-",z={};"dojo"!==s&&(z[n+"props"]="data-dojo-props",z[n+"type"]="data-dojo-type",z[n+"mixins"]="data-dojo-mixins",z[s+"type"]="dojoType",z[n+"id"]="data-dojo-id");for(var s=0,y,A=[],D,L;y=v[s++];){var J=y.name,N=J.toLowerCase();y=y.value;switch(z[N]||N){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":L=y;break;case "data-dojo-id":case "jsid":D=y;break;case "data-dojo-attach-point":case "dojoattachpoint":u.dojoAttachPoint=
y;break;case "data-dojo-attach-event":case "dojoattachevent":u.dojoAttachEvent=y;break;case "class":u["class"]=d.className;break;case "style":u.style=d.style&&d.style.cssText;break;default:if(J in o||(J=q(c)[N]||J),J in o)switch(typeof o[J]){case "string":u[J]=y;break;case "number":u[J]=y.length?Number(y):NaN;break;case "boolean":u[J]="false"!=y.toLowerCase();break;case "function":u[J]=""===y||-1!=y.search(/[^\w\.]+/i)?new Function(y):f.getObject(y,!1)||new Function(y);A.push(J);break;default:N=o[J],
u[J]=N&&"length"in N?y?y.split(/\s*,\s*/):[]:N instanceof Date?""==y?new Date(""):"now"==y?new Date:k.fromISOString(y):N instanceof b?j.baseUrl+y:i.fromJson(y)}else u[J]=y}}for(s=0;s<A.length;s++)v=A[s].toLowerCase(),d.removeAttribute(v),d[v]=null;if(L)try{L=i.fromJson.call(r.propsThis,"{"+L+"}"),f.mixin(u,L)}catch(T){throw Error(T.toString()+" in data-dojo-props='"+L+"'");}f.mixin(u,e);g||(g=c&&(c._noScript||o._noScript)?[]:l("> script[type^='dojo/']",d));e=[];r=[];L=[];A=[];if(g)for(s=0;s<g.length;s++){var H=
g[s];d.removeChild(H);v=H.getAttribute(n+"event")||H.getAttribute("event");z=H.getAttribute(n+"prop");J=H.getAttribute(n+"method");N=H.getAttribute(n+"advice");y=H.getAttribute("type");H=this._functionFromScript(H,n);v?"dojo/connect"==y?e.push({method:v,func:H}):"dojo/on"==y?A.push({event:v,func:H}):u[v]=H:"dojo/aspect"==y?e.push({method:J,advice:N,func:H}):"dojo/watch"==y?L.push({prop:z,func:H}):r.push(H)}t=(g=c.markupFactory||o.markupFactory)?g(u,d,c):new c(u,d),c=t;D&&f.setObject(D,c);for(s=0;s<
e.length;s++)a[e[s].advice||"after"](c,e[s].method,f.hitch(c,e[s].func),!0);for(s=0;s<r.length;s++)r[s].call(c);for(s=0;s<L.length;s++)c.watch(L[s].prop,L[s].func);for(s=0;s<A.length;s++)m(c,A[s].event,A[s].func);return c},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,d=c(a.parent),b={dir:b.getAttribute("dir")||d.dir,lang:b.getAttribute("lang")||d.lang,textDir:b.getAttribute(m)||d.textDir},e;for(e in b)b[e]&&(a.inherited[e]=b[e])}return a.inherited}var d=[],e=[],i=
{},f=(b.scope||j._scopeName)+"Type",k="data-"+(b.scope||j._scopeName)+"-",l=k+"type",m=k+"textdir",k=k+"mixins",q=a.firstChild,n=b.inherited;if(!n){var u=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&u(a.parentNode,b)},n={dir:u(a,"dir"),lang:u(a,"lang"),textDir:u(a,m)},v;for(v in n)n[v]||delete n[v]}for(var n={inherited:n},s,J;;)if(q)if(1!=q.nodeType)q=q.nextSibling;else if(s&&"script"==q.nodeName.toLowerCase())(N=q.getAttribute("type"))&&/^dojo\/\w/i.test(N)&&s.push(q),q=
q.nextSibling;else if(J)q=q.nextSibling;else{var N=q.getAttribute(l)||q.getAttribute(f);v=q.firstChild;if(!N&&(!v||3==v.nodeType&&!v.nextSibling))q=q.nextSibling;else{J=null;if(N){var T=q.getAttribute(k);s=T?[N].concat(T.split(/\s*,\s*/)):[N];try{J=r(s)}catch(H){}J||h.forEach(s,function(a){~a.indexOf("/")&&!i[a]&&(i[a]=!0,e[e.length]=a)});T=J&&!J.prototype._noScript?[]:null;n={types:s,ctor:J,parent:n,node:q,scripts:T};n.inherited=c(n);d.push(n)}else n={node:q,scripts:s,parent:n};q=v;s=T;J=J&&J.prototype.stopParser&&
!b.template}}else{if(!n||!n.node)break;q=n.node.nextSibling;J=!1;n=n.parent;s=n.scripts}var B=new o;e.length?(p("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+e.join(", ")),g(e,function(){B.resolve(h.filter(d,function(a){if(!a.ctor)try{a.ctor=r(a.types)}catch(c){}for(var d=a.parent;d&&!d.types;)d=d.parent;var e=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(e&&e.stopParser&&!b.template);a.instantiate=!d||d.instantiate&&d.instantiateChildren;return a.instantiate}))})):
B.resolve(d);return B.promise},_require:function(a){var a=i.fromJson("{"+a.innerHTML+"}"),b=[],c=[],d=new o,e;for(e in a)b.push(e),c.push(a[e]);g(c,function(){for(var a=0;a<b.length;a++)f.setObject(b[a],arguments[a]);d.resolve(arguments)});return d.promise},_scanAmd:function(a){var b=new o,c=b.promise;b.resolve(!0);var d=this;l("script[type='dojo/require']",a).forEach(function(a){c=c.then(function(){return d._require(a)});a.parentNode.removeChild(a)});return c},parse:function(a,b){var e;!b&&a&&a.rootNode?
(b=a,e=b.rootNode):a&&f.isObject(a)&&!("nodeType"in a)?b=a:e=a;e=e?d.byId(e):c.body();var b=b||{},i=b.template?{template:!0}:{},k=[],l=this,h=this._scanAmd(e,b).then(function(){return l.scan(e,b)}).then(function(a){return k=k.concat(l._instantiate(a,i,b))}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});f.mixin(k,h);return k}};j.parser=v;e.parseOnLoad&&n(100,v,"parse");return v})},"dojo/_base/html":function(){define("./kernel,../dom,../dom-style,../dom-attr,../dom-prop,../dom-class,../dom-construct,../dom-geometry".split(","),
function(g,j,f,h,e,d,c,b){g.byId=j.byId;g.isDescendant=j.isDescendant;g.setSelectable=j.setSelectable;g.getAttr=h.get;g.setAttr=h.set;g.hasAttr=h.has;g.removeAttr=h.remove;g.getNodeProp=h.getNodeProp;g.attr=function(b,a,c){return 2==arguments.length?h["string"==typeof a?"get":"set"](b,a):h.set(b,a,c)};g.hasClass=d.contains;g.addClass=d.add;g.removeClass=d.remove;g.toggleClass=d.toggle;g.replaceClass=d.replace;g._toDom=g.toDom=c.toDom;g.place=c.place;g.create=c.create;g.empty=function(b){c.empty(b)};
g._destroyElement=g.destroy=function(b){c.destroy(b)};g._getPadExtents=g.getPadExtents=b.getPadExtents;g._getBorderExtents=g.getBorderExtents=b.getBorderExtents;g._getPadBorderExtents=g.getPadBorderExtents=b.getPadBorderExtents;g._getMarginExtents=g.getMarginExtents=b.getMarginExtents;g._getMarginSize=g.getMarginSize=b.getMarginSize;g._getMarginBox=g.getMarginBox=b.getMarginBox;g.setMarginBox=b.setMarginBox;g._getContentBox=g.getContentBox=b.getContentBox;g.setContentSize=b.setContentSize;g._isBodyLtr=
g.isBodyLtr=b.isBodyLtr;g._docScroll=g.docScroll=b.docScroll;g._getIeDocumentElementOffset=g.getIeDocumentElementOffset=b.getIeDocumentElementOffset;g._fixIeBiDiScrollLeft=g.fixIeBiDiScrollLeft=b.fixIeBiDiScrollLeft;g.position=b.position;g.marginBox=function(c,a){return a?b.setMarginBox(c,a):b.getMarginBox(c)};g.contentBox=function(c,a){return a?b.setContentSize(c,a):b.getContentBox(c)};g.coords=function(c,a){g.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");var c=j.byId(c),
d=f.getComputedStyle(c),d=b.getMarginBox(c,d),e=b.position(c,a);d.x=e.x;d.y=e.y;return d};g.getProp=e.get;g.setProp=e.set;g.prop=function(b,a,c){return 2==arguments.length?e["string"==typeof a?"get":"set"](b,a):e.set(b,a,c)};g.getStyle=f.get;g.setStyle=f.set;g.getComputedStyle=f.getComputedStyle;g.__toPixelValue=g.toPixelValue=f.toPixelValue;g.style=function(b,a,c){switch(arguments.length){case 1:return f.get(b);case 2:return f["string"==typeof a?"get":"set"](b,a)}return f.set(b,a,c)};return g})},
"dojo/_base/url":function(){define(["./kernel"],function(g){var j=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,f=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,h=function(){for(var e=arguments,d=[e[0]],c=1;c<e.length;c++)if(e[c]){var b=new h(e[c]+""),d=new h(d[0]+"");if(""==b.path&&!b.scheme&&!b.authority&&!b.query){if(null!=b.fragment)d.fragment=b.fragment;b=d}else if(!b.scheme&&(b.scheme=d.scheme,!b.authority&&(b.authority=d.authority,"/"!=b.path.charAt(0)))){for(var d=
(d.path.substring(0,d.path.lastIndexOf("/")+1)+b.path).split("/"),i=0;i<d.length;i++)"."==d[i]?i==d.length-1?d[i]="":(d.splice(i,1),i--):0<i&&!(1==i&&""==d[0])&&".."==d[i]&&".."!=d[i-1]&&(i==d.length-1?(d.splice(i,1),d[i-1]=""):(d.splice(i-1,2),i-=2));b.path=d.join("/")}d=[];b.scheme&&d.push(b.scheme,":");b.authority&&d.push("//",b.authority);d.push(b.path);b.query&&d.push("?",b.query);b.fragment&&d.push("#",b.fragment)}this.uri=d.join("");e=this.uri.match(j);this.scheme=e[2]||(e[1]?"":null);this.authority=
e[4]||(e[3]?"":null);this.path=e[5];this.query=e[7]||(e[6]?"":null);this.fragment=e[9]||(e[8]?"":null);if(null!=this.authority)e=this.authority.match(f),this.user=e[3]||null,this.password=e[4]||null,this.host=e[6]||e[7],this.port=e[9]||null};h.prototype.toString=function(){return this.uri};return g._Url=h})},"dojo/_base/json":function(){define(["./kernel","../json"],function(g,j){g.fromJson=function(f){return eval("("+f+")")};g._escapeString=j.stringify;g.toJsonIndentStr="\t";g.toJson=function(f,
h){return j.stringify(f,function(e,d){if(d){var c=d.__json__||d.json;if("function"==typeof c)return c.call(d)}return d},h&&g.toJsonIndentStr)};return g})},"dojo/json":function(){define(["./has"],function(g){var j="undefined"!=typeof JSON;g.add("json-parse",j);g.add("json-stringify",j&&'{"a":1}'==JSON.stringify({a:0},function(f,e){return e||1}));if(g("json-stringify"))return JSON;var f=function(f){return('"'+f.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,
"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:g("json-parse")?JSON.parse:function(f,e){if(e&&!/^([\s\[\{]*(?:"(?:\\.|[^"])+"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(f))throw new SyntaxError("Invalid characters in JSON");return eval("("+f+")")},stringify:function(h,e,d){function c(i,a,k){e&&(i=e(k,i));var h;h=typeof i;if("number"==h)return isFinite(i)?i+"":"null";if("boolean"==h)return i+"";if(null===i)return"null";if("string"==typeof i)return f(i);
if("function"==h||"undefined"==h)return b;if("function"==typeof i.toJSON)return c(i.toJSON(k),a,k);if(i instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,b,c){a=i["getUTC"+b]()+(c?1:0);return 10>a?"0"+a:a});if(i.valueOf()!==i)return c(i.valueOf(),a,k);var g=d?a+d:"",l=d?" ":"",m=d?"\n":"";if(i instanceof Array){for(var l=i.length,n=[],k=0;k<l;k++)h=c(i[k],g,k),"string"!=typeof h&&(h="null"),n.push(m+g+h);return"["+n.join(",")+m+
a+"]"}n=[];for(k in i){var q;if(i.hasOwnProperty(k)){if("number"==typeof k)q='"'+k+'"';else if("string"==typeof k)q=f(k);else continue;h=c(i[k],g,k);"string"==typeof h&&n.push(m+g+q+":"+l+h)}}return"{"+n.join(",")+m+a+"}"}var b;"string"==typeof e&&(d=e,e=null);return c(h,"","")}}})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(g,j){var f={};g.setObject("dojo.date.stamp",f);f.fromISOString=function(h,e){if(!f._isoRegExp)f._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;
var d=f._isoRegExp.exec(h),c=null;if(d){d.shift();d[1]&&d[1]--;d[6]&&(d[6]*=1E3);e&&(e=new Date(e),j.forEach(j.map("FullYear,Month,Date,Hours,Minutes,Seconds,Milliseconds".split(","),function(a){return e["get"+a]()}),function(a,b){d[b]=d[b]||a}));c=new Date(d[0]||1970,d[1]||0,d[2]||1,d[3]||0,d[4]||0,d[5]||0,d[6]||0);100>d[0]&&c.setFullYear(d[0]||1970);var b=0,i=d[7]&&d[7].charAt(0);"Z"!=i&&(b=60*(d[8]||0)+(Number(d[9])||0),"-"!=i&&(b*=-1));i&&(b-=c.getTimezoneOffset());b&&c.setTime(c.getTime()+6E4*
b)}return c};f.toISOString=function(f,e){var d=function(a){return 10>a?"0"+a:a},e=e||{},c=[],b=e.zulu?"getUTC":"get",i="";"time"!=e.selector&&(i=f[b+"FullYear"](),i=["0000".substr((i+"").length)+i,d(f[b+"Month"]()+1),d(f[b+"Date"]())].join("-"));c.push(i);if("date"!=e.selector){i=[d(f[b+"Hours"]()),d(f[b+"Minutes"]()),d(f[b+"Seconds"]())].join(":");b=f[b+"Milliseconds"]();e.milliseconds&&(i+="."+(100>b?"0":"")+d(b));if(e.zulu)i+="Z";else if("time"!=e.selector)var b=f.getTimezoneOffset(),a=Math.abs(b),
i=i+((0<b?"-":"+")+d(Math.floor(a/60))+":"+d(a%60));c.push(i)}return c.join("T")};return f})},"dojo/i18n":function(){define("./_base/kernel,require,./has,./_base/array,./_base/config,./_base/lang,./_base/xhr,./json,module".split(","),function(g,j,f,h,e,d,c,b,i){f.add("dojo-preload-i18n-Api",1);var c=g.i18n={},a=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,k=function(a,b,c,d){for(var e=[c+d],b=b.split("-"),i="",f=0;f<b.length;f++)i+=(i?"-":"")+b[f],(!a||a[i])&&e.push(c+i+"/"+d);return e},o={},p=function(a,
b,c){c=c?c.toLowerCase():g.locale;a=a.replace(/\./g,"/");b=b.replace(/\./g,"/");return/root/i.test(c)?a+"/nls/"+b:a+"/nls/"+c+"/"+b};g.getL10nName=function(a,b,c){return i.id+"!"+p(a,b,c)};var l=function(a,b,c,e,i,f){a([b],function(l){var h=d.clone(l.root),m=k(!l._v1x&&l,i,c,e);a(m,function(){for(var a=1;a<m.length;a++)h=d.mixin(d.clone(h),arguments[a]);o[b+"/"+i]=h;f()})})},m=function(a){var b=e.extraLocale||[],b=d.isArray(b)?b:[b];b.push(a);return b},n=function(c,e,i){if(f("dojo-preload-i18n-Api")){var k=
c.split("*"),r="preload"==k[1];r&&(o[c]||(o[c]=1,v(k[2],b.parse(k[3]),1,e)),i(1));if(!(k=r))u&&s.push([c,e,i]),k=u;if(k)return}var c=a.exec(c),q=c[1]+"/",n=c[5]||c[4],j=q+n,k=(c=c[5]&&c[4])||g.locale,x=j+"/"+k,c=c?[k]:m(k),p=c.length,w=function(){--p||i(d.delegate(o[x]))};h.forEach(c,function(a){var b=j+"/"+a;f("dojo-preload-i18n-Api")&&t(b);o[b]?w():l(e,j,q,n,a,w)})};if(f("dojo-unit-tests"))var q=c.unitTests=[];f("dojo-preload-i18n-Api");var r=c.normalizeLocale=function(a){a=a?a.toLowerCase():g.locale;
return"root"==a?"ROOT":a},u=0,s=[],v=c._preloadLocalizations=function(a,b,c,d){function e(a,b){d([a],b)}function i(a,b){for(var c=a.split("-");c.length;){if(b(c.join("-")))return;c.pop()}b("ROOT")}function f(c){c=r(c);i(c,function(c){if(0<=h.indexOf(b,c)){var d=a.replace(/\./g,"/")+"_"+c;u++;e(d,function(a){for(var b in a)o[j.toAbsMid(b)+"/"+c]=a[b];for(--u;!u&&s.length;)n.apply(null,s.shift())});return!0}return!1})}d=d||j;f();h.forEach(g.config.extraLocale,f)},t=function(){},x={},w=new Function("__bundle",
"__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},\t   require = function(){define.called = 1;};try{define.called = 0;eval(__bundle);if(define.called==1)return __amdValue;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),t=function(a){for(var b,c=a.split("/"),d=g.global[c[0]],e=1;d&&e<c.length-1;d=d[c[e++]]);
d&&((b=d[c[e]])||(b=d[c[e].replace(/-/g,"_")]),b&&(o[a]=b));return b};c.getLocalization=function(a,b,c){var d,a=p(a,b,c);n(a,j,function(a){d=a});return d};f("dojo-unit-tests")&&q.push(function(a){a.register("tests.i18n.unit",function(a){var b;b=w("{prop:1}",t,"nonsense",x);a.is({prop:1},b);a.is(void 0,b[1]);b=w("({prop:1})",t,"nonsense",x);a.is({prop:1},b);a.is(void 0,b[1]);b=w("{'prop-x':1}",t,"nonsense",x);a.is({"prop-x":1},b);a.is(void 0,b[1]);b=w("({'prop-x':1})",t,"nonsense",x);a.is({"prop-x":1},
b);a.is(void 0,b[1]);b=w("define({'prop-x':1})",t,"nonsense",x);a.is(x,b);a.is({"prop-x":1},x.result);b=w("define('some/module', {'prop-x':1})",t,"nonsense",x);a.is(x,b);a.is({"prop-x":1},x.result);b=w("this is total nonsense and should throw an error",t,"nonsense",x);a.is(b instanceof Error,!0)})});return d.mixin(c,{dynamic:!0,normalize:function(a,b){return/^\./.test(a)?b(a):a},load:n,cache:o})})},"dojo/_base/xhr":function(){define("./kernel,./sniff,require,../io-query,../dom,../dom-form,./Deferred,./config,./json,./lang,./array,../on,../aspect,../request/watch,../request/xhr,../request/util".split(","),
function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n){g._xhrObj=m._create;var q=g.config;g.objectToQuery=h.objectToQuery;g.queryToObject=h.queryToObject;g.fieldToObject=d.fieldToObject;g.formToObject=d.toObject;g.formToQuery=d.toQuery;g.formToJson=d.toJson;g._blockAsync=!1;var r=g._contentHandlers=g.contentHandlers={text:function(a){return a.responseText},json:function(a){return i.fromJson(a.responseText||null)},"json-comment-filtered":function(a){b.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}&&\nUse djConfig.useCommentedJson=true to turn off this message.");
var a=a.responseText,c=a.indexOf("/*"),d=a.lastIndexOf("*/");if(-1==c||-1==d)throw Error("JSON was not comment filtered");return i.fromJson(a.substring(c+2,d))},javascript:function(a){return g.eval(a.responseText)},xml:function(a){var b=a.responseXML;if(j("ie")&&(!b||!b.documentElement)){var c=function(a){return"MSXML"+a+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];k.some(c,function(c){try{var d=new ActiveXObject(c);d.async=!1;d.loadXML(a.responseText);b=d}catch(e){return!1}return!0})}return b},
"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?r["json-comment-filtered"](a):r.json(a)}};g._ioSetArgs=function(b,i,f,l){var k={args:b,url:b.url},m=null;if(b.form){var m=e.byId(b.form),r=m.getAttributeNode("action");k.url=k.url||(r?r.value:null);m=d.toObject(m)}r=[{}];m&&r.push(m);b.content&&r.push(b.content);b.preventCache&&r.push({"dojo.preventCache":(new Date).valueOf()});k.query=h.objectToQuery(a.mixin.apply(null,r));k.handleAs=b.handleAs||"text";
var n=new c(function(a){a.canceled=!0;i&&i(a);var b=a.ioArgs.error;if(!b)b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b;return b});n.addCallback(f);var o=b.load;o&&a.isFunction(o)&&n.addCallback(function(a){return o.call(b,a,k)});var t=b.error;t&&a.isFunction(t)&&n.addErrback(function(a){return t.call(b,a,k)});var j=b.handle;j&&a.isFunction(j)&&n.addBoth(function(a){return j.call(b,a,k)});n.addErrback(function(a){return l(a,n)});q.ioPublish&&g.publish&&!1!==k.args.ioPublish&&(n.addCallbacks(function(a){g.publish("/dojo/io/load",
[n,a]);return a},function(a){g.publish("/dojo/io/error",[n,a]);return a}),n.addBoth(function(a){g.publish("/dojo/io/done",[n,a]);return a}));n.ioArgs=k;return n};var u=function(a){a=r[a.ioArgs.handleAs](a.ioArgs.xhr);return void 0===a?null:a},s=function(a,b){b.ioArgs.args.failOk||console.error(a);return a},v=function(a){0>=t&&(t=0,q.ioPublish&&g.publish&&(!a||a&&!1!==a.ioArgs.args.ioPublish)&&g.publish("/dojo/io/stop"))},t=0;p.after(l,"_onAction",function(){t-=1});p.after(l,"_onInFlight",v);g._ioCancelAll=
l.cancelAll;g._ioNotifyStart=function(a){q.ioPublish&&g.publish&&!1!==a.ioArgs.args.ioPublish&&(t||g.publish("/dojo/io/start"),t+=1,g.publish("/dojo/io/send",[a]))};g._ioWatch=function(b,c,d,e){b.ioArgs.options=b.ioArgs.args;a.mixin(b,{response:b.ioArgs,isValid:function(){return c(b)},isReady:function(){return d(b)},handleResponse:function(){return e(b)}});l(b);v(b)};g._ioAddQueryToUrl=function(a){if(a.query.length)a.url+=(-1==a.url.indexOf("?")?"?":"&")+a.query,a.query=null};g.xhr=function(a,b,c){var d,
e=g._ioSetArgs(b,function(){d&&d.cancel()},u,s),i=e.ioArgs;"postData"in b?i.query=b.postData:"putData"in b?i.query=b.putData:"rawBody"in b?i.query=b.rawBody:(2<arguments.length&&!c||-1==="POST|PUT".indexOf(a.toUpperCase()))&&g._ioAddQueryToUrl(i);var f={method:a,handleAs:"text",timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:i};if("undefined"!==typeof b.headers)f.headers=b.headers;if("undefined"!==typeof b.contentType){if(!f.headers)f.headers={};f.headers["Content-Type"]=b.contentType}if("undefined"!==
typeof i.query)f.data=i.query;if("undefined"!==typeof b.sync)f.sync=b.sync;g._ioNotifyStart(e);try{d=m(i.url,f,!0)}catch(k){return e.cancel(),e}e.ioArgs.xhr=d.response.xhr;d.then(function(){e.resolve(e)}).otherwise(function(a){i.error=a;if(a.response)a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr;e.reject(a)});return e};g.xhrGet=function(a){return g.xhr("GET",a)};g.rawXhrPost=g.xhrPost=function(a){return g.xhr("POST",a,!0)};g.rawXhrPut=g.xhrPut=function(a){return g.xhr("PUT",
a,!0)};g.xhrDelete=function(a){return g.xhr("DELETE",a)};g._isDocumentOk=function(a){return n.checkStatus(a.status)};g._getText=function(a){var b;g.xhrGet({url:a,sync:!0,load:function(a){b=a}});return b};a.mixin(g.xhr,{_xhrObj:g._xhrObj,fieldToObject:d.fieldToObject,formToObject:d.toObject,objectToQuery:h.objectToQuery,formToQuery:d.toQuery,formToJson:d.toJson,queryToObject:h.queryToObject,contentHandlers:r,_ioSetArgs:g._ioSetArgs,_ioCancelAll:g._ioCancelAll,_ioNotifyStart:g._ioNotifyStart,_ioWatch:g._ioWatch,
_ioAddQueryToUrl:g._ioAddQueryToUrl,_isDocumentOk:g._isDocumentOk,_getText:g._getText,get:g.xhrGet,post:g.xhrPost,put:g.xhrPut,del:g.xhrDelete});return g.xhr})},"dojo/io-query":function(){define(["./_base/lang"],function(g){var j={};return{objectToQuery:function(f){var h=encodeURIComponent,e=[],d;for(d in f){var c=f[d];if(c!=j[d]){var b=h(d)+"=";if(g.isArray(c))for(var i=0,a=c.length;i<a;++i)e.push(b+h(c[i]));else e.push(b+h(c))}}return e.join("&")},queryToObject:function(f){for(var h=decodeURIComponent,
f=f.split("&"),e={},d,c,b=0,i=f.length;b<i;++b)if(c=f[b],c.length){var a=c.indexOf("=");0>a?(d=h(c),c=""):(d=h(c.slice(0,a)),c=h(c.slice(a+1)));"string"==typeof e[d]&&(e[d]=[e[d]]);g.isArray(e[d])?e[d].push(c):e[d]=c}return e}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(g,j,f,h){var e={fieldToObject:function(d){var c=null;if(d=j.byId(d)){var b=d.name,e=(d.type||"").toLowerCase();if(b&&e&&!d.disabled)if("radio"==e||"checkbox"==e){if(d.checked)c=d.value}else if(d.multiple){c=
[];for(d=[d.firstChild];d.length;)for(b=d.pop();b;b=b.nextSibling)if(1==b.nodeType&&"option"==b.tagName.toLowerCase())b.selected&&c.push(b.value);else{b.nextSibling&&d.push(b.nextSibling);b.firstChild&&d.push(b.firstChild);break}}else c=d.value}return c},toObject:function(d){for(var c={},d=j.byId(d).elements,b=0,i=d.length;b<i;++b){var a=d[b],f=a.name,h=(a.type||"").toLowerCase();if(f&&h&&0>"file|submit|image|reset|button".indexOf(h)&&!a.disabled){var p=c,l=f,a=e.fieldToObject(a);if(null!==a){var m=
p[l];"string"==typeof m?p[l]=[m,a]:g.isArray(m)?m.push(a):p[l]=a}if("image"==h)c[f+".x"]=c[f+".y"]=c[f].x=c[f].y=0}}return c},toQuery:function(d){return f.objectToQuery(e.toObject(d))},toJson:function(d,c){return h.stringify(e.toObject(d),null,c?4:0)}};return e})},"dojo/request/watch":function(){define("./util,../errors/RequestTimeoutError,../errors/CancelError,../_base/array,../_base/window,../has!host-browser?dom-addeventlistener?:../on:".split(","),function(g,j,f,h,e,d){function c(){for(var c=
+new Date,d=0,e;d<a.length&&(e=a[d]);d++){var f=e.response,h=f.options;if(e.isCanceled&&e.isCanceled()||e.isValid&&!e.isValid(f))a.splice(d--,1),b._onAction&&b._onAction();else if(e.isReady&&e.isReady(f))a.splice(d--,1),e.handleResponse(f),b._onAction&&b._onAction();else if(e.startTime&&e.startTime+(h.timeout||0)<c)a.splice(d--,1),e.cancel(new j("Timeout exceeded",f)),b._onAction&&b._onAction()}b._onInFlight&&b._onInFlight(e);a.length||(clearInterval(i),i=null)}function b(b){if(b.response.options.timeout)b.startTime=
+new Date;b.isFulfilled()||(a.push(b),i||(i=setInterval(c,50)),b.response.options.sync&&c())}var i=null,a=[];b.cancelAll=function(){try{h.forEach(a,function(a){try{a.cancel(new f("All requests canceled."))}catch(b){}})}catch(b){}};e&&d&&e.doc.attachEvent&&d(e.global,"unload",function(){b.cancelAll()});return b})},"dojo/request/util":function(){define("exports,../errors/RequestError,../errors/CancelError,../Deferred,../io-query,../_base/array,../_base/lang".split(","),function(g,j,f,h,e,d,c){function b(a){return i(a)}
g.deepCopy=function(a,b){for(var c in b){var d=a[c],e=b[c];d!==e&&(d&&"object"===typeof d&&e&&"object"===typeof e?g.deepCopy(d,e):a[c]=e)}return a};g.deepCreate=function(a,b){var b=b||{},d=c.delegate(a),e,i;for(e in a)(i=a[e])&&"object"===typeof i&&(d[e]=g.deepCreate(i,b[e]));return g.deepCopy(d,b)};var i=Object.freeze||function(a){return a};g.deferred=function(a,d,e,p,l,m){var n=new h(function(b){d&&d(n,a);return!b||!(b instanceof j)&&!(b instanceof f)?new f("Request canceled",a):b});n.response=
a;n.isValid=e;n.isReady=p;n.handleResponse=l;e=n.then(b).otherwise(function(b){b.response=a;throw b;});g.notify&&e.then(c.hitch(g.notify,"emit","load"),c.hitch(g.notify,"emit","error"));p=e.then(function(a){return a.data||a.text});e=i(c.delegate(p,{response:e}));m&&n.then(function(a){m.call(n,a)},function(b){m.call(n,a,b)});n.promise=e;n.then=e.then;return n};g.addCommonMethods=function(a,b){d.forEach(b||["GET","POST","PUT","DELETE"],function(b){a[("DELETE"===b?"DEL":b).toLowerCase()]=function(d,
e){e=c.delegate(e||{});e.method=b;return a(d,e)}})};g.parseArgs=function(a,b,c){var d=b.data,i=b.query;if(d&&!c&&"object"===typeof d)b.data=e.objectToQuery(d);i?("object"===typeof i&&(i=e.objectToQuery(i)),b.preventCache&&(i+=(i?"&":"")+"request.preventCache="+ +new Date)):b.preventCache&&(i="request.preventCache="+ +new Date);a&&i&&(a+=(~a.indexOf("?")?"&":"?")+i);return{url:a,options:b,getHeader:function(){return null}}};g.checkStatus=function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||
!a}})},"dojo/errors/RequestError":function(){define(["./create"],function(g){return g("RequestError",function(g,f){this.response=f})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(g,j){return g("RequestTimeoutError",null,j,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(g,j,f,h,e){function d(a,b){var c=a.xhr;a.status=a.xhr.status;a.text=c.responseText;if("xml"===
a.options.handleAs)a.data=c.responseXML;if(!b)try{f(a)}catch(d){b=d}b?this.reject(b):h.checkStatus(c.status)?this.resolve(a):(b=new g("Unable to load "+a.url+" status: "+c.status,a),this.reject(b))}function c(f,l,m){var u=h.parseArgs(f,h.deepCreate(p,l),e("native-formdata")&&l&&l.data&&l.data instanceof FormData),f=u.url,l=u.options,s,v=h.deferred(u,k,b,i,d,function(){s&&s()}),t=u.xhr=c._create();if(!t)return v.cancel(new g("XHR was not created")),m?v:v.promise;u.getHeader=function(a){return this.xhr.getResponseHeader(a)};
a&&(s=a(t,v,u));var x=l.data,w=!l.sync,E=l.method;try{t.open(E,f,w,l.user||o,l.password||o);if(l.withCredentials)t.withCredentials=l.withCredentials;var C=l.headers,G;if(C)for(var I in C)"content-type"===I.toLowerCase()?G=C[I]:C[I]&&t.setRequestHeader(I,C[I]);G&&!1!==G&&t.setRequestHeader("Content-Type",G);(!C||!("X-Requested-With"in C))&&t.setRequestHeader("X-Requested-With","XMLHttpRequest");h.notify&&h.notify.emit("send",u,v.promise.cancel);t.send(x)}catch(Q){v.reject(Q)}j(v);t=null;return m?v:
v.promise}e.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});e.add("dojo-force-activex-xhr",function(){return e("activex")&&!document.addEventListener&&"file:"===window.location.protocol});e.add("native-xhr2",function(){if(e("native-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});e.add("native-formdata",function(){return"function"===typeof FormData});var b,i,a,k;e("native-xhr2")?(b=
function(){return!this.isFulfilled()},k=function(a,b){b.xhr.abort()},a=function(a,b,c){function d(){b.handleResponse(c)}function e(a){a=new g("Unable to load "+c.url+" status: "+a.target.status,c);b.handleResponse(c,a)}function i(a){if(a.lengthComputable)c.loaded=a.loaded,c.total=a.total,b.progress(c)}a.addEventListener("load",d,!1);a.addEventListener("error",e,!1);a.addEventListener("progress",i,!1);return function(){a.removeEventListener("load",d,!1);a.removeEventListener("error",e,!1);a.removeEventListener("progress",
i,!1)}}):(b=function(a){return a.xhr.readyState},i=function(a){return 4===a.xhr.readyState},k=function(a,b){var c=b.xhr,d=typeof c.abort;("function"===d||"object"===d||"unknown"===d)&&c.abort()});var o,p={data:null,query:null,sync:!1,method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}};c._create=function(){throw Error("XMLHTTP not available");};if(e("native-xhr")&&!e("dojo-force-activex-xhr"))c._create=function(){return new XMLHttpRequest};else if(e("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),
c._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(l){try{new ActiveXObject("Microsoft.XMLHTTP"),c._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(m){}}h.addCommonMethods(c);return c})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has"],function(g,j,f,h){function e(c){var a=b[c.options.handleAs];c.data=a?a(c):c.data||c.text;return c}h.add("activex","undefined"!==typeof ActiveXObject);var d;if(h("activex")){var c=
["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];d=function(b){var a=b.data;if(!a||!a.documentElement){var d=b.text;f.some(c,function(b){try{var c=new ActiveXObject(b);c.async=!1;c.loadXML(d);a=c}catch(e){return!1}return!0})}return a}}var b={javascript:function(b){return j.eval(b.text||"")},json:function(b){return g.parse(b.text||null)},xml:d};e.register=function(c,a){b[c]=a};return e})},"dijit/layout/BorderContainer":function(){define("dojo/_base/array,dojo/cookie,dojo/_base/declare,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/on,dojo/touch,../_WidgetBase,../_Widget,../_TemplatedMixin,./_LayoutWidget,./utils".split(","),
function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n,q){var r=f("dijit.layout._Splitter",[l,m],{live:!0,templateString:'<div class="dijitSplitter" data-dojo-attach-event="onkeypress:_onKeyPress,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" role="separator"><div class="dijitSplitterThumb"></div></div>',constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?
1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);h.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var a=j(this._cookieName);a&&(this.child.domNode.style[this.horizontal?"height":"width"]=a)}},_computeMaxSize:function(){var a=this.horizontal?"h":"w",b=d.getMarginBox(this.child.domNode)[a],c=g.filter(this.container.getChildren(),function(a){return"center"==a.region})[0],a=d.getMarginBox(c.domNode)[a];
return Math.min(this.child.maxSize,b+a)},_startDrag:function(c){if(!this.cover)this.cover=e.place("<div class=dijitSplitterCover></div>",this.child.domNode,"after");h.add(this.cover,"dijitSplitterCoverActive");this.fake&&e.destroy(this.fake);if(!(this._resize=this.live))(this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),h.add(this.domNode,"dijitSplitterShadow"),e.place(this.fake,this.domNode,"after");h.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");
this.fake&&h.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var i=this._factor,f=this.horizontal,l=f?"pageY":"pageX",m=c[l],r=this.domNode.style,q=d.getMarginBox(this.child.domNode)[f?"h":"w"],g=this._computeMaxSize(),n=this.child.minSize||20,f=this.region,j="top"==f||"bottom"==f?"top":"left",u=parseInt(r[j],10),p=this._resize,z=a.hitch(this.container,"_layoutChildren",this.child.id),f=this.ownerDocument;this._handlers=this._handlers.concat([k(f,o.move,this._drag=
function(a,b){var c=a[l]-m,d=i*c+q,e=Math.max(Math.min(d,g),n);(p||b)&&z(e);r[j]=c+u+i*(e-d)+"px"}),k(f,"dragstart",b.stop),k(this.ownerDocumentBody,"selectstart",b.stop),k(f,o.release,a.hitch(this,"_stopDrag"))]);b.stop(c)},_onMouse:function(a){a="mouseover"==a.type||"mouseenter"==a.type;h.toggle(this.domNode,"dijitSplitterHover",a);h.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",a)},_stopDrag:function(a){try{this.cover&&h.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&
e.destroy(this.fake),h.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),this._drag(a),this._drag(a,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&j(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var a;a=this._handlers.pop();)a.remove()},_onKeyPress:function(a){this._resize=!0;var c=this.horizontal,e=1;switch(a.charOrCode){case c?
i.UP_ARROW:i.LEFT_ARROW:e*=-1;case c?i.DOWN_ARROW:i.RIGHT_ARROW:break;default:return}c=d.getMarginSize(this.child.domNode)[c?"h":"w"]+this._factor*e;this.container._layoutChildren(this.child.id,Math.max(Math.min(c,this._computeMaxSize()),this.child.minSize));b.stop(a)},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),u=f("dijit.layout._Gutter",[l,m],{templateString:'<div class="dijitGutter" role="presentation"></div>',
postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments);h.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}}),f=f("dijit.layout.BorderContainer",n,{design:"headline",gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:r,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},startup:function(){this._started||(g.forEach(this.getChildren(),
this._setupChild,this),this.inherited(arguments))},_setupChild:function(b){var c=b.region;if(c){this.inherited(arguments);h.add(b.domNode,this.baseClass+"Pane");var d=this.isLeftToRight();"leading"==c&&(c=d?"left":"right");"trailing"==c&&(c=d?"right":"left");if("center"!=c&&(b.splitter||this.gutters)&&!b._splitterWidget)d=b.splitter?this._splitterClass:u,a.isString(d)&&(d=a.getObject(d)),d=new d({id:b.id+"_splitter",container:this,child:b,region:c,live:this.liveSplitters}),d.isSplitter=!0,b._splitterWidget=
d,e.place(d.domNode,b.domNode,"after"),d.startup();b.region=c}},layout:function(){this._layoutChildren()},addChild:function(a,b){this.inherited(arguments);this._started&&this.layout()},removeChild:function(a){var b=a.region,d=a._splitterWidget;d&&(d.destroy(),delete a._splitterWidget);this.inherited(arguments);this._started&&this._layoutChildren();h.remove(a.domNode,this.baseClass+"Pane");c.set(a.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});c.set(a.domNode,"top"==
b||"bottom"==b?"width":"height","auto")},getChildren:function(){return g.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(a){return g.filter(this.getChildren(),function(b){return b.region==a})[0]._splitterWidget},resize:function(a,b){if(!this.cs||!this.pe){var e=this.domNode;this.cs=c.getComputedStyle(e);this.pe=d.getPadExtents(e,this.cs);this.pe.r=c.toPixelValue(e,this.cs.paddingRight);this.pe.b=c.toPixelValue(e,this.cs.paddingBottom);c.set(e,"padding","0px")}this.inherited(arguments)},
_layoutChildren:function(a,b){if(this._borderBox&&this._borderBox.h){var c=g.map(this.getChildren(),function(a,b){return{pane:a,weight:["center"==a.region?Infinity:0,a.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(a.region)?1:-1),b]}},this);c.sort(function(a,b){for(var c=a.weight,d=b.weight,e=0;e<c.length;e++)if(c[e]!=d[e])return c[e]-d[e];return 0});var d=[];g.forEach(c,function(a){a=a.pane;d.push(a);a._splitterWidget&&d.push(a._splitterWidget)});q.layoutChildren(this.domNode,{l:this.pe.l,
t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},d,a,b)}},destroyRecursive:function(){g.forEach(this.getChildren(),function(a){var b=a._splitterWidget;b&&b.destroy();delete a._splitterWidget});this.inherited(arguments)}});f.ChildWidgetProperties={region:"",layoutPriority:0,splitter:!1,minSize:0,maxSize:Infinity};a.extend(p,f.ChildWidgetProperties);f._Splitter=r;f._Gutter=u;return f})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(g,j){g.cookie=function(f,
h,e){var d=document.cookie,c;if(1==arguments.length)c=(c=d.match(RegExp("(?:^|; )"+j.escapeString(f)+"=([^;]*)")))?decodeURIComponent(c[1]):void 0;else{e=e||{};d=e.expires;if("number"==typeof d){var b=new Date;b.setTime(b.getTime()+864E5*d);d=e.expires=b}if(d&&d.toUTCString)e.expires=d.toUTCString();var h=encodeURIComponent(h),d=f+"="+h,i;for(i in e)d+="; "+i,b=e[i],!0!==b&&(d+="="+b);document.cookie=d}return c};g.cookie.isSupported=function(){if(!("cookieEnabled"in navigator))this("__djCookieTest__",
"CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1});return navigator.cookieEnabled};return g.cookie})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(g,j){var f={};j.setObject("dojo.regexp",f);f.escapeString=function(f,e){return f.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(d){return e&&-1!=e.indexOf(d)?d:"\\"+d})};f.buildGroupRE=function(h,e,d){if(!(h instanceof Array))return e(h);
for(var c=[],b=0;b<h.length;b++)c.push(e(h[b]));return f.group(c.join("|"),d)};f.group=function(f,e){return"("+(e?"?:":"")+f+")"};return f})},"dojo/touch":function(){define("./_base/kernel,./aspect,./dom,./on,./has,./mouse,./ready,./_base/window".split(","),function(g,j,f,h,e,d,c,b){function i(a){return function(b,c){return h(b,a,c)}}var j=e("touch"),a=!1;e("ios")&&(e=navigator.userAgent.match(/OS ([\d_]+)/)?RegExp.$1:"1",a=5>parseFloat(e.replace(/_/,".").replace(/_/g,"")));var k,o;j&&(c(function(){o=
b.body();b.doc.addEventListener("touchstart",function(a){var b=o;o=a.target;h.emit(b,"dojotouchout",{target:b,relatedTarget:o,bubbles:!0});h.emit(o,"dojotouchover",{target:o,relatedTarget:b,bubbles:!0})},!0);h(b.doc,"touchmove",function(c){if((c=b.doc.elementFromPoint(c.pageX-(a?0:b.global.pageXOffset),c.pageY-(a?0:b.global.pageYOffset)))&&o!==c)h.emit(o,"dojotouchout",{target:o,relatedTarget:c,bubbles:!0}),h.emit(c,"dojotouchover",{target:c,relatedTarget:o,bubbles:!0}),o=c})}),k=function(a,c){return h(b.doc,
"touchmove",function(d){if(a===b.doc||f.isDescendant(o,a))d.target=o,c.call(this,d)})});d={press:i(j?"touchstart":"mousedown"),move:j?k:i("mousemove"),release:i(j?"touchend":"mouseup"),cancel:j?i("touchcancel"):d.leave,over:i(j?"dojotouchover":"mouseover"),out:i(j?"dojotouchout":"mouseout"),enter:d._eventHandler(j?"dojotouchover":"mouseover"),leave:d._eventHandler(j?"dojotouchout":"mouseout")};return g.touch=d})},"dijit/_TemplatedMixin":function(){define("dojo/_base/lang,dojo/touch,./_WidgetBase,dojo/string,dojo/cache,dojo/_base/array,dojo/_base/declare,dojo/dom-construct,dojo/sniff,dojo/_base/unload".split(","),
function(g,j,f,h,e,d,c,b,i,a){var k=c("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:!1,_earlyTemplatedStartup:!1,constructor:function(){this._attachPoints=[];this._attachEvents=[]},_stringRepl:function(a){var b=this.declaredClass,c=this;return h.substitute(a,this,function(a,d){"!"==d.charAt(0)&&(a=g.getObject(d.substr(1),!1,c));if("undefined"==typeof a)throw Error(b+" template:"+d);return null==a?"":"!"==d.charAt(0)?a:a.toString().replace(/"/g,"&quot;")},this)},
buildRendering:function(){if(!this.templateString)this.templateString=e(this.templatePath,{sanitize:!0});var a=k.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),c;if(g.isString(a)){if(c=b.toDom(this._stringRepl(a),this.ownerDocument),1!=c.nodeType)throw Error("Invalid template: "+a);}else c=a.cloneNode(!0);this.domNode=c;this.inherited(arguments);this._attachTemplateNodes(c,function(a,b){return a.getAttribute(b)});this._beforeFillContent();this._fillContent(this.srcNodeRef)},
_beforeFillContent:function(){},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)},_attachTemplateNodes:function(a,b){for(var c=g.isArray(a)?a:a.all||a.getElementsByTagName("*"),d=g.isArray(a)?0:-1;0>d||c[d];d++){var e=-1==d?a:c[d];if(!this.widgetsInTemplate||!b(e,"dojoType")&&!b(e,"data-dojo-type")){var i=b(e,"dojoAttachPoint")||b(e,"data-dojo-attach-point");if(i)for(var f=i.split(/\s*,\s*/);i=f.shift();)g.isArray(this[i])?this[i].push(e):
this[i]=e,this._attachPoints.push(i);if(i=b(e,"dojoAttachEvent")||b(e,"data-dojo-attach-event"))for(var f=i.split(/\s*,\s*/),k=g.trim;i=f.shift();)if(i){var h=null;-1!=i.indexOf(":")?(h=i.split(":"),i=k(h[0]),h=k(h[1])):i=k(i);h||(h=i);this._attachEvents.push(this.connect(e,j[i]||i,h))}}}},destroyRendering:function(){d.forEach(this._attachPoints,function(a){delete this[a]},this);this._attachPoints=[];d.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments)}});
k._templateCache={};k.getCachedTemplate=function(a,c,d){var e=k._templateCache,i=a,f=e[i];if(f){try{if(!f.ownerDocument||f.ownerDocument==(d||document))return f}catch(r){}b.destroy(f)}a=h.trim(a);if(c||a.match(/\$\{([^\}]+)\}/g))return e[i]=a;c=b.toDom(a,d);if(1!=c.nodeType)throw Error("Invalid template: "+a);return e[i]=c};i("ie")&&a.addOnWindowUnload(function(){var a=k._templateCache,c;for(c in a){var d=a[c];"object"==typeof d&&b.destroy(d);delete a[c]}});g.extend(f,{dojoAttachEvent:"",dojoAttachPoint:""});
return k})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(g){return g.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./_base/xhr"],function(g,j,f,h){var e;e=function(a,b,c){h("GET",{url:a,sync:!!b,load:c,headers:g.config.textPluginHeaders||{}})};var d={},c=function(a){if(a){var a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,""),b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},b={},i={};g.cache=
function(a,b,i){var f;"string"==typeof a?/\//.test(a)?(f=a,i=b):f=j.toUrl(a.replace(/\./g,"/")+(b?"/"+b:"")):(f=a+"",i=b);a=void 0!=i&&"string"!=typeof i?i.value:i;i=i&&i.sanitize;if("string"==typeof a)return d[f]=a,i?c(a):a;if(null===a)return delete d[f],null;f in d||e(f,!0,function(a){d[f]=a});return i?c(d[f]):d[f]};return{dynamic:!0,normalize:function(a,b){var c=a.split("!"),d=c[0];return(/^\./.test(d)?b(d):d)+(c[1]?"!"+c[1]:"")},load:function(a,f,h){var a=a.split("!"),g=1<a.length,l=a[0],m=f.toUrl(a[0]),
a="url:"+m,n=b,q=function(a){h(g?c(a):a)};l in d?n=d[l]:a in f.cache?n=f.cache[a]:m in d&&(n=d[m]);if(n===b)if(i[m])i[m].push(q);else{var r=i[m]=[q];e(m,!f.async,function(a){d[l]=d[m]=a;for(var b=0;b<r.length;)r[b++](a);delete i[m]})}else q(n)}}})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang,../_Widget,../_Container,../_Contained,../Viewport,dojo/_base/declare,dojo/dom-class,dojo/dom-geometry,dojo/dom-style".split(","),function(g,j,f,h,e,d,c,b,i){return d("dijit.layout._LayoutWidget",
[j,f,h],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,buildRendering:function(){this.inherited(arguments);c.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var a=this.getParent&&this.getParent();if(!a||!a.isLayoutContainer)this.resize(),this.own(e.on("resize",g.hitch(this,"resize")))}},resize:function(a,c){var d=this.domNode;a&&b.setMarginBox(d,a);var e=c||{};g.mixin(e,a||{});if(!("h"in e)||!("w"in e))e=g.mixin(b.getMarginBox(d),e);var f=
i.getComputedStyle(d),h=b.getMarginExtents(d,f),n=b.getBorderExtents(d,f),e=this._borderBox={w:e.w-(h.w+n.w),h:e.h-(h.h+n.h)},h=b.getPadExtents(d,f);this._contentBox={l:i.toPixelValue(d,f.paddingLeft),t:i.toPixelValue(d,f.paddingTop),w:e.w-h.w,h:e.h-h.h};this.layout()},layout:function(){},_setupChild:function(a){c.add(a.domNode,this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:""))},addChild:function(a,b){this.inherited(arguments);this._started&&this._setupChild(a)},removeChild:function(a){c.remove(a.domNode,
this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:""));this.inherited(arguments)}})})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(g,j){return g("dijit._Contained",null,{_getSibling:function(f){var h=this.domNode;do h=h[f+"Sibling"];while(h&&1!=h.nodeType);return h&&j.byNode(h)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var f=this.getParent();
return!f||!f.getIndexOfChild?-1:f.getIndexOfChild(this)}})})},"dijit/Dialog":function(){define("require,dojo/_base/array,dojo/_base/connect,dojo/_base/declare,dojo/_base/Deferred,dojo/dom,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/_base/fx,dojo/i18n,dojo/keys,dojo/_base/lang,dojo/on,dojo/ready,dojo/sniff,dojo/window,dojo/dnd/Moveable,dojo/dnd/TimedMoveable,./focus,./_base/manager,./_Widget,./_TemplatedMixin,./_CssStateMixin,./form/_FormMixin,./_DialogMixin,./DialogUnderlay,./layout/ContentPane,dojo/text!./templates/Dialog.html,./main,dojo/i18n!./nls/common".split(","),
function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n,q,r,u,s,v,t,x,w,E,C,G,I,Q,K,F){var t=h("dijit._DialogBase",[w,C,G,E],{templateString:K,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],open:!1,duration:t.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,doLayout:!1,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},"aria-describedby":"",maxRatio:0.9,
postMixInProperties:function(){var a=o.getLocalization("dijit","common");l.mixin(this,a);this.inherited(arguments)},postCreate:function(){i.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[]},onLoad:function(){this._position();this.autofocus&&y.isTop(this)&&(this._getFocusItems(this.domNode),v.focus(this._firstFocusItem));
this.inherited(arguments)},_onBlur:function(a){this.inherited(arguments);var b=l.hitch(this,function(){this.open&&!this._destroyed&&y.isTop(this)&&(this._getFocusItems(this.domNode),v.focus(this._firstFocusItem))});if("mouse"==a)m.once(this.ownerDocument,"mouseup",b);else b()},_endDrag:function(){var a=b.position(this.domNode),c=r.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),c.h-a.h);a.x=Math.min(Math.max(a.x,0),c.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==q("ie")?s:u)(a,{handle:this.titleBar}),this.connect(this._moveable,"onMoveStop","_endDrag")):c.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":j.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),ownerDocument:this.ownerDocument}},_size:function(){this._checkIfSingleChild();if(this._singleChild){if("undefined"!=typeof this._singleChildOriginalStyle)this._singleChild.domNode.style.cssText=
this._singleChildOriginalStyle,delete this._singleChildOriginalStyle}else i.set(this.containerNode,{width:"auto",height:"auto"});var a=b.position(this.domNode),c=r.getBox(this.ownerDocument);c.w*=this.maxRatio;c.h*=this.maxRatio;if(a.w>=c.w||a.h>=c.h){var d=b.position(this.containerNode),e=Math.min(a.w,c.w)-(a.w-d.w),a=Math.min(a.h,c.h)-(a.h-d.h);if(this._singleChild&&this._singleChild.resize){if("undefined"==typeof this._singleChildOriginalStyle)this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;
this._singleChild.resize({w:e,h:a})}else i.set(this.containerNode,{width:e+"px",height:a+"px",overflow:"auto",position:"relative"})}else this._singleChild&&this._singleChild.resize&&this._singleChild.resize()},_position:function(){if(!c.contains(this.ownerDocumentBody,"dojoMove")){var a=this.domNode,d=r.getBox(this.ownerDocument),e=this._relativePosition,f=e?null:b.position(a);i.set(a,{left:Math.floor(d.l+(e?e.x:(d.w-f.w)/2))+"px",top:Math.floor(d.t+(e?e.y:(d.h-f.h)/2))+"px"})}},_onKey:function(b){if(b.charOrCode){var d=
b.target;b.charOrCode===p.TAB&&this._getFocusItems(this.domNode);var e=this._firstFocusItem==this._lastFocusItem;if(d==this._firstFocusItem&&b.shiftKey&&b.charOrCode===p.TAB)e||v.focus(this._lastFocusItem),a.stop(b);else if(d==this._lastFocusItem&&b.charOrCode===p.TAB&&!b.shiftKey)e||v.focus(this._firstFocusItem),a.stop(b);else{for(;d;){if(d==this.domNode||c.contains(d,"dijitPopup"))if(b.charOrCode==p.ESCAPE)this.onCancel();else return;d=d.parentNode}if(b.charOrCode!==p.TAB)a.stop(b);else if(!q("opera"))try{this._firstFocusItem.focus()}catch(i){}}}},
show:function(){if(!this.open){this._started||this.startup();if(!this._alreadyInitialized)this._setup(),this._alreadyInitialized=!0;this._fadeOutDeferred&&this._fadeOutDeferred.cancel();var a=r.get(this.ownerDocument);this._modalconnects.push(m(a,"scroll",l.hitch(this,"resize")));this._modalconnects.push(m(this.domNode,f._keypress,l.hitch(this,"_onKey")));i.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this._size();this._position();var b;this._fadeInDeferred=new e(l.hitch(this,
function(){b.stop();delete this._fadeInDeferred}));b=k.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:l.hitch(this,function(){y.show(this,this.underlayAttrs)}),onEnd:l.hitch(this,function(){this.autofocus&&y.isTop(this)&&(this._getFocusItems(this.domNode),v.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return this._fadeInDeferred}},hide:function(){if(this._alreadyInitialized&&this.open){this._fadeInDeferred&&this._fadeInDeferred.cancel();
var a;this._fadeOutDeferred=new e(l.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(l.hitch(this,"onHide"));a=k.fadeOut({node:this.domNode,duration:this.duration,onEnd:l.hitch(this,function(){this.domNode.style.display="none";y.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();if(this._scrollConnected)this._scrollConnected=!1;for(var b;b=this._modalconnects.pop();)b.remove();this._relativePosition&&delete this._relativePosition;
this._set("open",!1);return this._fadeOutDeferred}},resize:function(){"none"!=this.domNode.style.display&&(I._singleton&&I._singleton.layout(),this._position(),this._size())},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();y.hide(this);this.inherited(arguments)}}),z=h("dijit.Dialog",[Q,t],{});z._DialogBase=t;var y=z._DialogLevelManager=
{_beginZIndex:950,show:function(a,b){A[A.length-1].focus=v.curNode;var c=I._singleton;!c||c._destroyed?c=F._underlay=I._singleton=new I(b):c.set(a.underlayAttrs);var d=A[A.length-1].dialog?A[A.length-1].zIndex+2:z._DialogLevelManager._beginZIndex;1==A.length&&c.show();i.set(I._singleton.domNode,"zIndex",d-1);i.set(a.domNode,"zIndex",d);A.push({dialog:a,underlayAttrs:b,zIndex:d})},hide:function(a){if(A[A.length-1].dialog==a){A.pop();var b=A[A.length-1];I._singleton._destroyed||(1==A.length?I._singleton.hide():
(i.set(I._singleton.domNode,"zIndex",b.zIndex-1),I._singleton.set(b.underlayAttrs)));if(a.refocus){a=b.focus;if(b.dialog&&(!a||!d.isDescendant(a,b.dialog.domNode)))b.dialog._getFocusItems(b.dialog.domNode),a=b.dialog._firstFocusItem;if(a)try{a.focus()}catch(c){}}}else b=j.indexOf(j.map(A,function(a){return a.dialog}),a),-1!=b&&A.splice(b,1)},isTop:function(a){return A[A.length-1].dialog==a}},A=z._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];q("dijit-legacy-requires")&&n(0,function(){g(["dijit/TooltipDialog"])});
return z})},"dojo/_base/fx":function(){define("./kernel,./config,./lang,../Evented,./Color,./connect,./sniff,../dom,../dom-style".split(","),function(g,j,f,h,e,d,c,b,i){var a=f.mixin,k={},o=k._Line=function(a,b){this.start=a;this.end=b};o.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var p=k.Animation=function(b){a(this,b);if(f.isArray(this.curve))this.curve=new o(this.curve[0],this.curve[1])};p.prototype=new h;f.extend(p,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,
_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var c=b||[];if(this[a])if(j.debugAtAllCosts)this[a].apply(this,c);else try{this[a].apply(this,c)}catch(d){console.error("exception in animation handler for:",a),console.error(d)}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);var c=a||
this.delay,d=f.hitch(this,"_play",b);if(0<c)return this._delayTimer=setTimeout(d,c),this;d();return this},_play:function(){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;var a=this.curve.getValue(this._getStep());if(!this._percent){if(!this._startRepeatCount)this._startRepeatCount=this.repeat;this._fire("onBegin",[a])}this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&
this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();if(a)this._percent=1;this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},status:function(){return this._active?
this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);if(1>this._percent)this._startTimer();else{this._active=!1;if(0<this.repeat)this.repeat--,this.play(null,!0);else if(-1==this.repeat)this.play(null,!0);else if(this._startRepeatCount)this.repeat=this._startRepeatCount,this._startRepeatCount=
0;this._percent=0;this._fire("onEnd",[this.node]);!this.repeat&&this._stopTimer()}}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var l=0,m=null,n={run:function(){}};f.extend(p,{_startTimer:function(){if(!this._timer)this._timer=d.connect(n,"run",this,"_cycle"),l++;m||(m=setInterval(f.hitch(n,"run"),this.rate))},_stopTimer:function(){if(this._timer)d.disconnect(this._timer),this._timer=null,l--;0>=l&&(clearInterval(m),m=null,l=0)}});var q=c("ie")?function(a){var b=
a.style;if(!b.width.length&&"auto"==i.get(a,"width"))b.width="auto"}:function(){};k._fade=function(c){c.node=b.byId(c.node);var e=a({properties:{}},c),c=e.properties.opacity={};c.start=!("start"in e)?function(){return+i.get(e.node,"opacity")||0}:e.start;c.end=e.end;c=k.animateProperty(e);d.connect(c,"beforeBegin",f.partial(q,e.node));return c};k.fadeIn=function(b){return k._fade(a({end:1},b))};k.fadeOut=function(b){return k._fade(a({end:0},b))};k._defaultEasing=function(a){return 0.5+Math.sin((a+
1.5)*Math.PI)/2};var r=function(a){this._properties=a;for(var b in a){var c=a[b];if(c.start instanceof e)c.tempColor=new e}};r.prototype.getValue=function(a){var b={},c;for(c in this._properties){var d=this._properties[c],i=d.start;i instanceof e?b[c]=e.blendColors(i,d.end,a,d.tempColor).toCss():f.isArray(i)||(b[c]=(d.end-i)*a+i+("opacity"!=c?d.units||"px":0))}return b};k.animateProperty=function(c){var l=c.node=b.byId(c.node);if(!c.easing)c.easing=g._defaultEasing;c=new p(c);d.connect(c,"beforeBegin",
c,function(){var b={},c;for(c in this.properties){if("width"==c||"height"==c)this.node.display="block";var d=this.properties[c];f.isFunction(d)&&(d=d(l));d=b[c]=a({},f.isObject(d)?d:{end:d});if(f.isFunction(d.start))d.start=d.start(l);if(f.isFunction(d.end))d.end=d.end(l);var k=0<=c.toLowerCase().indexOf("color"),h=function(a,b){var c={height:a.offsetHeight,width:a.offsetWidth}[b];if(void 0!==c)return c;c=i.get(a,b);return"opacity"==b?+c:k?c:parseFloat(c)};if("end"in d){if(!("start"in d))d.start=
h(l,c)}else d.end=h(l,c);k?(d.start=new e(d.start),d.end=new e(d.end)):d.start="opacity"==c?+d.start:parseFloat(d.start)}this.curve=new r(b)});d.connect(c,"onAnimate",f.hitch(i,"set",c.node));return c};k.anim=function(a,b,c,d,e,i){return k.animateProperty({node:a,duration:c||p.prototype.duration,properties:b,easing:d,onEnd:e}).play(i||0)};a(g,k);g._Animation=p;return k})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(g,j,f,h){var e=g.Color=function(d){d&&
this.setColor(d)};e.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:h.transparentColor||[0,0,0,0]};j.extend(e,{r:255,g:255,b:255,a:1,_set:function(d,c,b,e){this.r=d;this.g=c;this.b=b;this.a=e},setColor:function(d){j.isString(d)?e.fromString(d,this):j.isArray(d)?
e.fromArray(d,this):(this._set(d.r,d.g,d.b,d.a),d instanceof e||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+f.map(["r","g","b"],function(d){d=this[d].toString(16);return 2>d.length?"0"+d:d},this).join("")},toCss:function(d){var c=this.r+", "+this.g+", "+this.b;return(d?"rgba("+c+", "+this.a:"rgb("+c)+")"},toString:function(){return this.toCss(!0)}});e.blendColors=
g.blendColors=function(d,c,b,i){var a=i||new e;f.forEach(["r","g","b","a"],function(e){a[e]=d[e]+(c[e]-d[e])*b;"a"!=e&&(a[e]=Math.round(a[e]))});return a.sanitize()};e.fromRgb=g.colorFromRgb=function(d,c){var b=d.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return b&&e.fromArray(b[1].split(/\s*,\s*/),c)};e.fromHex=g.colorFromHex=function(d,c){var b=c||new e,i=4==d.length?4:8,a=(1<<i)-1,d=Number("0x"+d.substr(1));if(isNaN(d))return null;f.forEach(["b","g","r"],function(c){var e=d&a;d>>=i;b[c]=4==
i?17*e:e});b.a=1;return b};e.fromArray=g.colorFromArray=function(d,c){var b=c||new e;b._set(Number(d[0]),Number(d[1]),Number(d[2]),Number(d[3]));if(isNaN(b.a))b.a=1;return b.sanitize()};e.fromString=g.colorFromString=function(d,c){var b=e.named[d];return b&&e.fromArray(b,c)||e.fromRgb(d,c)||e.fromHex(d,c)};return e})},"dojo/dnd/Moveable":function(){define("../_base/array,../_base/declare,../_base/event,../_base/lang,../dom,../dom-class,../Evented,../on,../topic,../touch,./common,./Mover,../_base/window".split(","),
function(g,j,f,h,e,d,c,b,i,a,k,o,p){return j("dojo.dnd.Moveable",[c],{handle:"",delay:0,skip:!1,constructor:function(c,d){this.node=e.byId(c);d||(d={});this.handle=d.handle?e.byId(d.handle):null;if(!this.handle)this.handle=this.node;this.delay=0<d.delay?d.delay:0;this.skip=d.skip;this.mover=d.mover?d.mover:o;this.events=[b(this.handle,a.press,h.hitch(this,"onMouseDown")),b(this.handle,"dragstart",h.hitch(this,"onSelectStart")),b(this.handle,"selectstart",h.hitch(this,"onSelectStart"))]},markupFactory:function(a,
b,c){return new c(b,a)},destroy:function(){g.forEach(this.events,function(a){a.remove()});this.events=this.node=this.handle=null},onMouseDown:function(c){if(!this.skip||!k.isFormElement(c)){if(this.delay)this.events.push(b(this.handle,a.move,h.hitch(this,"onMouseMove")),b(this.handle,a.release,h.hitch(this,"onMouseUp"))),this._lastX=c.pageX,this._lastY=c.pageY;else this.onDragDetected(c);f.stop(c)}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>
this.delay)this.onMouseUp(a),this.onDragDetected(a);f.stop(a)},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();f.stop(a)},onSelectStart:function(a){(!this.skip||!k.isFormElement(a))&&f.stop(a)},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){i.publish("/dnd/move/start",a);d.add(p.body(),"dojoMove");d.add(this.node,"dojoMoveItem")},onMoveStop:function(a){i.publish("/dnd/move/stop",a);d.remove(p.body(),"dojoMove");d.remove(this.node,"dojoMoveItem")},
onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../_base/connect","../_base/kernel","../_base/lang","../dom"],function(g,j,f,h){var e=f.getObject("dojo.dnd",!0);e.getCopyKeyState=g.isCopyKey;e._uniqueId=0;e.getUniqueId=function(){var d;do d=j._scopeName+"Unique"+ ++e._uniqueId;while(h.byId(d));return d};e._empty={};e.isFormElement=
function(d){d=d.target;if(3==d.nodeType)d=d.parentNode;return 0<=" button textarea input select option ".indexOf(" "+d.tagName.toLowerCase()+" ")};return e})},"dojo/dnd/Mover":function(){define("../_base/array,../_base/declare,../_base/event,../_base/lang,../sniff,../_base/window,../dom,../dom-geometry,../dom-style,../Evented,../on,../touch,./common,./autoscroll".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o,p,l){return j("dojo.dnd.Mover",[a],{constructor:function(a,b,d){this.node=c.byId(a);this.marginBox=
{l:b.pageX,t:b.pageY};this.mouseButton=b.button;b=this.host=d;a=a.ownerDocument;this.events=[k(a,o.move,h.hitch(this,"onFirstMove")),k(a,o.move,h.hitch(this,"onMouseMove")),k(a,o.release,h.hitch(this,"onMouseUp")),k(a,"dragstart",f.stop),k(a.body,"selectstart",f.stop)];l.autoScrollStart(a);if(b&&b.onMoveStart)b.onMoveStart(this)},onMouseMove:function(a){l.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);f.stop(a)},onMouseUp:function(a){(e("webkit")&&e("mac")&&
2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();f.stop(a)},onFirstMove:function(a){var c=this.node.style,e,f=this.host;switch(c.position){case "relative":case "absolute":e=Math.round(parseFloat(c.left))||0;c=Math.round(parseFloat(c.top))||0;break;default:c.position="absolute";c=b.getMarginBox(this.node);e=d.doc.body;var k=i.getComputedStyle(e),l=b.getMarginBox(e,k),k=b.getContentBox(e,k);e=c.l-(k.l-l.l);c=c.t-(k.t-l.t)}this.marginBox.l=e-this.marginBox.l;this.marginBox.t=
c-this.marginBox.t;if(f&&f.onFirstMove)f.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){g.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang,../sniff,../_base/window,../dom-geometry,../dom-style,../window".split(","),function(g,j,f,h,e,d){var c={};g.setObject("dojo.dnd.autoscroll",c);c.getViewport=d.getBox;c.V_TRIGGER_AUTOSCROLL=32;
c.H_TRIGGER_AUTOSCROLL=32;c.V_AUTOSCROLL_VALUE=16;c.H_AUTOSCROLL_VALUE=16;var b,i=f.doc,a=Infinity,k=Infinity;c.autoScrollStart=function(c){i=c;b=d.getBox(i);c=f.body(i).parentNode;a=Math.max(c.scrollHeight-b.h,0);k=Math.max(c.scrollWidth-b.w,0)};c.autoScroll=function(e){var h=b||d.getBox(i),l=f.body(i).parentNode,m=0,g=0;e.clientX<c.H_TRIGGER_AUTOSCROLL?m=-c.H_AUTOSCROLL_VALUE:e.clientX>h.w-c.H_TRIGGER_AUTOSCROLL&&(m=Math.min(c.H_AUTOSCROLL_VALUE,k-l.scrollLeft));e.clientY<c.V_TRIGGER_AUTOSCROLL?
g=-c.V_AUTOSCROLL_VALUE:e.clientY>h.h-c.V_TRIGGER_AUTOSCROLL&&(g=Math.min(c.V_AUTOSCROLL_VALUE,a-l.scrollTop));window.scrollBy(m,g)};c._validNodes={div:1,p:1,td:1};c._validOverflow={auto:1,scroll:1};c.autoScrollNodes=function(a){for(var b,d,i,k,g,r,u=0,s=0,v=a.target;v;){if(1==v.nodeType&&v.tagName.toLowerCase()in c._validNodes){i=e.getComputedStyle(v);k=i.overflow.toLowerCase()in c._validOverflow;g=i.overflowX.toLowerCase()in c._validOverflow;r=i.overflowY.toLowerCase()in c._validOverflow;if(k||
g||r)b=h.getContentBox(v,i),d=h.position(v,!0);if(k||g){i=Math.min(c.H_TRIGGER_AUTOSCROLL,b.w/2);g=a.pageX-d.x;if(j("webkit")||j("opera"))g+=f.body().scrollLeft;u=0;0<g&&g<b.w&&(g<i?u=-i:g>b.w-i&&(u=i),v.scrollLeft+=u)}if(k||r){k=Math.min(c.V_TRIGGER_AUTOSCROLL,b.h/2);r=a.pageY-d.y;if(j("webkit")||j("opera"))r+=f.body().scrollTop;s=0;0<r&&r<b.h&&(r<k?s=-k:r>b.h-k&&(s=k),v.scrollTop+=s)}if(u||s)return}try{v=v.parentNode}catch(t){v=null}}c.autoScroll(a)};return c})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare",
"./Moveable"],function(g,j){var f=j.prototype.onMove;return g("dojo.dnd.TimedMoveable",j,{timeout:40,constructor:function(f,e){e||(e={});if(e.timeout&&"number"==typeof e.timeout&&0<=e.timeout)this.timeout=e.timeout},onMoveStop:function(h){h._timer&&(clearTimeout(h._timer),f.call(this,h,h._leftTop));j.prototype.onMoveStop.apply(this,arguments)},onMove:function(h,e){h._leftTop=e;if(!h._timer){var d=this;h._timer=setTimeout(function(){h._timer=null;f.call(d,h,h._leftTop)},this.timeout)}}})})},"dijit/_base/manager":function(){define(["dojo/_base/array",
"dojo/_base/config","dojo/_base/lang","../registry","../main"],function(g,j,f,h,e){var d={};g.forEach("byId,getUniqueId,findWidgets,_destroyAll,byNode,getEnclosingWidget".split(","),function(c){d[c]=h[c]});f.mixin(d,{defaultDuration:j.defaultDuration||200});f.mixin(e,d);return e})},"dijit/_CssStateMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/dom-class,dojo/has,dojo/_base/lang,dojo/on,dojo/ready,dojo/_base/window,./registry".split(","),function(g,j,f,h,e,d,c,b,i,a){j=
j("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);g.forEach("disabled,readOnly,checked,selected,focused,state,hovering,active,_opened".split(","),function(a){this.watch(a,d.hitch(this,"_setStateClass"))},this);for(var a in this.cssStateNodes)this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":this._set("active",!0);break;case "mouseup":case "touchend":this._set("active",!1)}},_setStateClass:function(){function a(c){b=b.concat(g.map(b,function(a){return a+c}),"dijit"+c)}var b=this.baseClass.split(" ");this.isLeftToRight()||a("Rtl");var c="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(c);this.state&&a(this.state);
this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");var c=this.stateNode||this.domNode,d={};g.forEach(c.className.split(" "),function(a){d[a]=!0});"_stateClasses"in this&&g.forEach(this._stateClasses,function(a){delete d[a]});g.forEach(b,function(a){d[a]=!0});var e=[],i;for(i in d)e.push(i);c.className=e.join(" ");this._stateClasses=b},_subnodeCssMouseEvent:function(a,
b,c){function d(c){h.toggle(a,b+"Active",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case "mouseover":h.toggle(a,b+"Hover",!0);break;case "mouseout":h.toggle(a,b+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":d(!0);break;case "mouseup":case "touchend":d(!1);break;case "focus":case "focusin":h.toggle(a,b+"Focused",!0);break;case "blur":case "focusout":h.toggle(a,b+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});b(function(){function b(c){if(!f.isDescendant(c.relatedTarget,
c.target))for(var d=c.target;d&&d!=c.relatedTarget;d=d.parentNode)if(d._cssState){var e=a.getEnclosingWidget(d);e&&(d==e.domNode?e._cssMouseEvent(c):e._subnodeCssMouseEvent(d,d._cssState,c))}}function d(a){a.target=a.srcElement;b(a)}var h=i.body(),l=(e("touch")?[]:["mouseover","mouseout"]).concat(["mousedown","touchstart","mouseup","touchend"]);g.forEach(l,function(a){h.addEventListener?h.addEventListener(a,b,!0):h.attachEvent("on"+a,d)});c(h,"focusin, focusout",function(b){var c=b.target;c._cssState&&
!c.getAttribute("widgetId")&&a.getEnclosingWidget(c)._subnodeCssMouseEvent(c,c._cssState,b)})});return j})},"dijit/form/_FormMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/window".split(","),function(g,j,f,h,e,d){return j("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(c){var b=[];g.forEach(c||this.getChildren(),function(c){"value"in c?b.push(c):b=b.concat(this._getDescendantFormWidgets(c.getChildren()))},this);
return b},reset:function(){g.forEach(this._getDescendantFormWidgets(),function(c){c.reset&&c.reset()})},validate:function(){var c=!1;return g.every(g.map(this._getDescendantFormWidgets(),function(b){b._hasBeenBlurred=!0;var e=b.disabled||!b.validate||b.validate();!e&&!c&&(d.scrollIntoView(b.containerNode||b.domNode),b.focus(),c=!0);return e}),function(b){return b})},setValues:function(c){f.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",
c)},_setValueAttr:function(c){var b={};g.forEach(this._getDescendantFormWidgets(),function(a){a.name&&(b[a.name]||(b[a.name]=[])).push(a)});for(var d in b)if(b.hasOwnProperty(d)){var a=b[d],e=h.getObject(d,!1,c);void 0!==e&&(h.isArray(e)||(e=[e]),"boolean"==typeof a[0].checked?g.forEach(a,function(a){a.set("value",-1!=g.indexOf(e,a.value))}):a[0].multiple?a[0].set("value",e):g.forEach(a,function(a,b){a.set("value",e[b])}))}},getValues:function(){f.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.",
"","2.0");return this.get("value")},_getValueAttr:function(){var c={};g.forEach(this._getDescendantFormWidgets(),function(b){var d=b.name;if(d&&!b.disabled){var a=b.get("value");"boolean"==typeof b.checked?/Radio/.test(b.declaredClass)?!1!==a?h.setObject(d,a,c):(a=h.getObject(d,!1,c),void 0===a&&h.setObject(d,null,c)):(b=h.getObject(d,!1,c),b||(b=[],h.setObject(d,b,c)),!1!==a&&b.push(a)):(b=h.getObject(d,!1,c),"undefined"!=typeof b?h.isArray(b)?b.push(a):h.setObject(d,[b,a],c):h.setObject(d,a,c))}});
return c},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var c=g.map(this._descendants,function(b){return b.get("state")||""});return 0<=g.indexOf(c,"Error")?"Error":0<=g.indexOf(c,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(c){this._descendants=this._getDescendantFormWidgets();g.forEach(this._descendants,function(b){b._started||b.startup()});c||this._onChildChange()},_onChildChange:function(c){(!c||"state"==
c||"disabled"==c)&&this._set("state",this._getState());if(!c||"value"==c||"disabled"==c||"checked"==c)this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10)},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var c=this;this.own(e(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",
function(b){b.target!=c.domNode&&c._onChildChange(b.type.replace("attrmodified-",""))}));this.watch("state",function(b,c,a){this.onValidStateChange(""==a)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(g,j){return g("dijit._DialogMixin",null,{execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var f=j._getTabNavigable(this.containerNode);
this._firstFocusItem=f.lowest||f.first||this.closeButtonNode||this.domNode;this._lastFocusItem=f.last||f.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare,dojo/dom-attr,dojo/window,./_Widget,./_TemplatedMixin,./BackgroundIframe".split(","),function(g,j,f,h,e,d){return g("dijit.DialogUnderlay",[h,e],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",
_setDialogIdAttr:function(c){j.set(this.node,"id",c+"_underlay");this._set("dialogId",c)},_setClassAttr:function(c){this.node.className="dijitDialogUnderlay "+c;this._set("class",c)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode)},layout:function(){var c=this.node.style,b=this.domNode.style;b.display="none";var d=f.getBox(this.ownerDocument);b.top=d.t+"px";b.left=d.l+"px";c.width=d.w+"px";c.height=d.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";
this.layout();this.bgIframe=new d(this.domNode)},hide:function(){this.bgIframe.destroy();delete this.bgIframe;this.domNode.style.display="none"}})})},"dijit/BackgroundIframe":function(){define("require,./main,dojo/_base/config,dojo/dom-construct,dojo/dom-style,dojo/_base/lang,dojo/on,dojo/sniff,dojo/_base/window".split(","),function(g,j,f,h,e,d,c,b,i){var a=new function(){var a=[];this.pop=function(){var c;a.length?(c=a.pop(),c.style.display=""):(9>b("ie")?(c="<iframe src='"+(f.dojoBlankHtmlUrl||
g.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>",c=i.doc.createElement(c)):(c=h.create("iframe"),c.src='javascript:""',c.className="dijitBackgroundIframe",c.setAttribute("role","presentation"),e.set(c,"opacity",0.1)),c.tabIndex=-1);return c};this.push=function(b){b.style.display="none";a.push(b)}};j.BackgroundIframe=function(i){if(!i.id)throw Error("no id");if(b("ie")||b("mozilla")){var f=
this.iframe=a.pop();i.appendChild(f);7>b("ie")||b("quirks")?(this.resize(i),this._conn=c(i,"resize",d.hitch(this,function(){this.resize(i)}))):e.set(f,{width:"100%",height:"100%"})}};d.extend(j.BackgroundIframe,{resize:function(a){this.iframe&&e.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){if(this._conn)this._conn.remove(),this._conn=null;this.iframe&&(a.push(this.iframe),delete this.iframe)}});return j.BackgroundIframe})},"url:dijit/templates/Dialog.html":'<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">\n\t<div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">\n\t\t<span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"\n\t\t\t\trole="heading" level="1"></span>\n\t\t<span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabIndex="-1">\n\t\t\t<span data-dojo-attach-point="closeText" class="closeText" title="${buttonCancel}">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent"></div>\n</div>\n',
"dijit/form/ComboBox":function(){define(["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(g,j,f){return g("dijit.form.ComboBox",[j,f],{})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare,dojo/_base/kernel,dojo/i18n,./TextBox,../Tooltip,dojo/text!./templates/ValidationTextBox.html,dojo/i18n!./nls/validate".split(","),function(g,j,f,h,e,d){var c;return c=g("dijit.form.ValidationTextBox",h,{templateString:d,required:!1,promptMessage:"",invalidMessage:"$_unset_$",
missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(b,d){d!=c.prototype[b]&&(j.deprecated("ValidationTextBox id="+this.id+", set('"+b+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",d))},_setRegExpGenAttr:function(b){this._deprecateRegExp("regExpGen",b);this.regExpGen=this._getPatternAttr},_setRegExpAttr:function(b){this._deprecateRegExp("regExp",b)},_setValueAttr:function(){this.inherited(arguments);
this.validate(this.focused)},validator:function(b,c){return RegExp("^(?:"+this._getPatternAttr(c)+")"+(this.required?"":"?")+"$").test(b)&&(!this.required||!this._isEmpty(b))&&(this._isEmpty(b)||void 0!==this.parse(b,c))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.constraints)},_isEmpty:function(b){return(this.trim?/^\s*$/:/^$/).test(b)},getErrorMessage:function(){var b="$_unset_$"==this.invalidMessage?
this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage,c="$_unset_$"==this.missingMessage?this.messages.missingMessage:!this.missingMessage?b:this.missingMessage;return this.required&&this._isEmpty(this.textbox.value)?c:b},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(b){var c="",a=this.disabled||this.isValid(b);if(a)this._maskValidSubsetError=!0;var d=this._isEmpty(this.textbox.value),e=!a&&b&&this._isValidSubset();
this._set("state",a?"":((!this._hasBeenBlurred||b)&&d||e)&&(this._maskValidSubsetError||e&&!this._hasBeenBlurred&&b)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid",a?"false":"true");"Error"==this.state?(this._maskValidSubsetError=b&&e,c=this.getErrorMessage(b)):"Incomplete"==this.state?(c=this.getPromptMessage(b),this._maskValidSubsetError=!this._hasBeenBlurred||b):d&&(c=this.getPromptMessage(b));this.set("message",c);return a},displayMessage:function(b){b&&this.focused?e.show(b,
this.domNode,this.tooltipPosition,!this.isLeftToRight()):e.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(){this.constraints={};this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(b){if(!b.locale&&this.lang)b.locale=this.lang;this._set("constraints",b);this._refreshState()},_setPatternAttr:function(b){this._set("pattern",b)},
_getPatternAttr:function(b){var c=this.pattern;"function"==(typeof c).toLowerCase()&&(c=this.pattern(b||this.constraints));if(c!=this._lastRegExp){var a="";this._lastRegExp=c;".*"!=c&&c.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(b){switch(b.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":a+=b;break;case ")":a+="|$)";break;default:a+="(?:"+b+"|$)"}});try{"".search(a)}catch(d){a=this.pattern,console.warn("RegExp error in "+this.declaredClass+
": "+this.pattern)}this._partialre="^(?:"+a+")$"}return c},postMixInProperties:function(){this.inherited(arguments);this.messages=f.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(b){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(b){this._set("required",b);this.focusNode.setAttribute("aria-required",b);this._refreshState()},_setMessageAttr:function(b){this._set("message",b);this.displayMessage(b)},
reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)}})})},"dijit/form/TextBox":function(){define("dojo/_base/declare,dojo/dom-construct,dojo/dom-style,dojo/_base/kernel,dojo/_base/lang,dojo/sniff,./_FormValueWidget,./_TextBoxMixin,dojo/text!./templates/TextBox.html,../main".split(","),function(g,j,f,h,e,d,c,b,i,a){g=g("dijit.form.TextBox",[c,b],{templateString:i,_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',
_buttonInputDisabled:d("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>d("ie")&&this.defer(function(){try{var a=f.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;
if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(d){}})},_onInput:function(a){this.inherited(arguments);this.intermediateChanges&&this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);if(!this._phspan)this._attachPoints.push("_phspan"),this._phspan=j.create("span",{onmousedown:function(a){a.preventDefault()},className:"dijitPlaceHolder dijitInputField"},this.textbox,
"after");this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_updatePlaceHolder:function(){if(this._phspan)this._phspan.style.display=this.placeHolder&&!this.focused&&!this.textbox.value?"":"none"},_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){h.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},
setDisplayedValue:function(a){h.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",a)},_onBlur:function(a){if(!this.disabled&&(this.inherited(arguments),this._updatePlaceHolder(),d("mozilla")&&this.selectOnClick))this.textbox.selectionStart=this.textbox.selectionEnd=void 0},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.inherited(arguments),this._updatePlaceHolder())}});if(d("ie"))g.prototype._isTextSelected=
function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},a._setSelectionRange=b._setSelectionRange=function(a,b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())};return g})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(g,j,f,h){return g("dijit.form._FormValueWidget",
[f,h],{_layoutHackIE7:function(){if(7==j("ie"))for(var e=this.domNode,d=e.parentNode,c=e.firstChild||e,b=c.style.filter,i=this;d&&0==d.clientHeight;)(function(){var a=i.connect(d,"onscroll",function(){i.disconnect(a);c.style.filter=(new Date).getMilliseconds();i.defer(function(){c.style.filter=b})})})(),d=d.parentNode}})})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare,dojo/has,dojo/_base/kernel,dojo/ready,../_Widget,../_CssStateMixin,../_TemplatedMixin,./_FormWidgetMixin".split(","),
function(g,j,f,h,e,d,c,b){j("dijit-legacy-requires")&&h(0,function(){require(["dijit/form/_FormValueWidget"])});return g("dijit.form._FormWidget",[e,c,d,b],{setDisabled:function(b){f.deprecated("setDisabled("+b+") is deprecated. Use set('disabled',"+b+") instead.","","2.0");this.set("disabled",b)},setValue:function(b){f.deprecated("dijit.form._FormWidget:setValue("+b+") is deprecated.  Use set('value',"+b+") instead.","","2.0");this.set("value",b)},getValue:function(){f.deprecated(this.declaredClass+
"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name?'name="'+this.name.replace(/"/g,"&quot;")+'"':"";this.inherited(arguments)},_setTypeAttr:null})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/dom-style,dojo/_base/lang,dojo/mouse,dojo/sniff,dojo/window,../a11y".split(","),function(g,j,f,h,e,d,c,b,i){return j("dijit.form._FormWidgetMixin",
null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(a){this._set("disabled",a);f.set(this.focusNode,"disabled",a);this.valueNode&&f.set(this.valueNode,"disabled",a);this.focusNode.setAttribute("aria-disabled",a?"true":"false");a?(this._set("hovering",!1),this._set("active",!1),a="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in
this?this._setTabIndexAttr:"focusNode",g.forEach(e.isArray(a)?a:[a],function(a){a=this[a];c("webkit")||i.hasDefaultTabStop(a)?a.setAttribute("tabIndex","-1"):a.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var c=this.connect(this.focusNode,"onfocus",function(){this.disconnect(d);this.disconnect(c)}),d=this.connect(this.ownerDocumentBody,"onmouseup",function(){this.disconnect(d);this.disconnect(c);this.focused&&
this.focus()});this.scrollOnFocus&&this.defer(function(){b.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=h.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){if(void 0==
this._lastValueReported&&(null===b||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);if((this.intermediateChanges||b||void 0===b)&&this._pendingOnChange)if(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive)this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)})},
create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_FormValueMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/sniff","./_FormWidgetMixin"],function(g,j,f,h,e){return g("dijit.form._FormValueMixin",e,{readOnly:!1,_setReadOnlyAttr:function(d){j.set(this.focusNode,"readOnly",d);this._set("readOnly",
d)},postCreate:function(){this.inherited(arguments);h("ie")&&this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);if(void 0===this._resetValue)this._lastValueReported=this._resetValue=this.value},_setValueAttr:function(d,c){this._handleOnChange(d,c)},_handleOnChange:function(d,c){this._set("value",d);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)},_onKeyDown:function(d){if(d.keyCode==
f.ESCAPE&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&(9>h("ie")||h("ie")&&h("quirks"))){d.preventDefault();var c=d.srcElement,b=c.ownerDocument.createEventObject();b.keyCode=f.ESCAPE;b.shiftKey=d.shiftKey;c.fireEvent("onkeypress",b)}}})})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/on,../main".split(","),function(g,j,f,h,e,d,c,b){var i=j("dijit.form._TextBoxMixin",null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,
maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){var d;void 0!==a&&(d=this.filter(a),"string"!=typeof c&&(c=null!==d&&("number"!=typeof d||!isNaN(d))?this.filter(this.format(d,this.constraints)):""));if(null!=c&&("number"!=typeof c||!isNaN(c))&&this.textbox.value!=c)this.textbox.value=c,this._set("displayedValue",this.get("displayedValue"));"auto"==this.textDir&&this.applyTextDir(this.focusNode,
c);this.inherited(arguments,[d,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=typeof a&&(a=""+a);this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"));"auto"==this.textDir&&this.applyTextDir(this.focusNode,a)},format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},
onInput:function(){},__skipInputEvent:!1,_onInput:function(a){"auto"==this.textDir&&this.applyTextDir(this.focusNode,this.focusNode.value);this._processInput(a)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(c(this.textbox,"keydown, keypress, paste, cut, input, compositionend",d.hitch(this,function(a){var b;if("keydown"==a.type){b=a.keyCode;
switch(b){case e.SHIFT:case e.ALT:case e.CTRL:case e.META:case e.CAPS_LOCK:case e.NUM_LOCK:case e.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&!a.altKey){switch(b){case e.NUMPAD_0:case e.NUMPAD_1:case e.NUMPAD_2:case e.NUMPAD_3:case e.NUMPAD_4:case e.NUMPAD_5:case e.NUMPAD_6:case e.NUMPAD_7:case e.NUMPAD_8:case e.NUMPAD_9:case e.NUMPAD_MULTIPLY:case e.NUMPAD_PLUS:case e.NUMPAD_ENTER:case e.NUMPAD_MINUS:case e.NUMPAD_PERIOD:case e.NUMPAD_DIVIDE:return}if(65<=b&&90>=b||48<=b&&57>=b||b==e.SPACE)return;
b=!1;for(var c in e)if(e[c]===a.keyCode){b=!0;break}if(!b)return}}(b=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||(b=65<=a.keyCode&&90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==e.SPACE?String.fromCharCode(a.keyCode):a.keyCode);b||(b=229);if("keypress"==a.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(a.ctrlKey||a.metaKey||a.altKey)return}if("input"==a.type){if(this.__skipInputEvent){this.__skipInputEvent=!1;return}}else this.__skipInputEvent=
!0;var i={faux:!0},f;for(f in a)"layerX"!=f&&"layerY"!=f&&(c=a[f],"function"!=typeof c&&"undefined"!=typeof c&&(i[f]=c));d.mixin(i,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){i._wasConsumed=!0;a.preventDefault()},stopPropagation:function(){a.stopPropagation()}});!1===this.onInput(i)&&(i.preventDefault(),i.stopPropagation());i._wasConsumed||this.defer(function(){this._onInput(i)})})))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;
this.trim&&(a=d.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){if(!this.disabled&&!this.readOnly){if(this.selectOnClick&&
"mouse"==a)this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;this._isTextSelected()||i.selectInputText(this.textbox)}),this.defer(function(){if(this._selectOnClickHandle)this.disconnect(this._selectOnClickHandle),this._selectOnClickHandle=null},500);this.inherited(arguments);this._refreshState()}},reset:function(){this.textbox.value="";this.inherited(arguments)},_setTextDirAttr:function(a){if(!this._created||
this.textDir!=a)this._set("textDir",a),this.applyTextDir(this.focusNode,this.focusNode.value)}});i._setSelectionRange=b._setSelectionRange=function(a,b,c){a.setSelectionRange&&a.setSelectionRange(b,c)};i.selectInputText=b.selectInputText=function(a,b,c){a=f.byId(a);isNaN(b)&&(b=0);isNaN(c)&&(c=a.value?a.value.length:0);try{a.focus(),i._setSelectionRange(a,b,c)}catch(d){}};return i})},"url:dijit/form/templates/TextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n',
"dijit/Tooltip":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/fx,dojo/dom,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,dojo/mouse,dojo/on,dojo/sniff,./_base/manager,./place,./_Widget,./_TemplatedMixin,./BackgroundIframe,dojo/text!./templates/Tooltip.html,./main".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n,q,r){var u=j("dijit._MasterTooltip",[l,m],{duration:o.defaultDuration,templateString:q,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.bgIframe=new n(this.domNode);this.fadeIn=f.fadeIn({node:this.domNode,duration:this.duration,onEnd:b.hitch(this,"_onShow")});this.fadeOut=f.fadeOut({node:this.domNode,duration:this.duration,onEnd:b.hitch(this,"_onHide")})},show:function(a,d,e,i,f){if(!this.aroundNode||!(this.aroundNode===d&&this.containerNode.innerHTML==a))if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;f&&this.set("textDir",f);this.containerNode.align=i?"right":"left";var l=p.around(this.domNode,
d,e&&e.length?e:s.defaultPosition,!i,b.hitch(this,"orient")),k=l.aroundNodePos;"M"==l.corner.charAt(0)&&"M"==l.aroundCorner.charAt(0)?(this.connectorNode.style.top=k.y+(k.h-this.connectorNode.offsetHeight>>1)-l.y+"px",this.connectorNode.style.left=""):"M"==l.corner.charAt(1)&&"M"==l.aroundCorner.charAt(1)?this.connectorNode.style.left=k.x+(k.w-this.connectorNode.offsetWidth>>1)-l.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");c.set(this.domNode,"opacity",0);this.fadeIn.play();
this.isShowingNow=!0;this.aroundNode=d}},orient:function(a,b,c,e,i){this.connectorNode.style.top="";var f=e.h,e=e.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+
"-"+c];this.domNode.style.width="auto";var l=d.position(this.domNode);9==k("ie")&&(l.w+=2);var h=Math.min(Math.max(e,1),l.w);d.setMarginBox(this.domNode,{w:h});"B"==c.charAt(0)&&"B"==b.charAt(0)?(a=d.position(a),b=this.connectorNode.offsetHeight,a.h>f?(this.connectorNode.style.top=f-(i.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(i.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom=
"");return Math.max(0,l.w-e)},_onShow:function(){if(k("ie"))this.domNode.style.filter=""},hide:function(a){if(this._onDeck&&this._onDeck[1]==a)this._onDeck=null;else if(this.aroundNode===a)this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play()},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck)this.show.apply(this,this._onDeck),this._onDeck=null},_setAutoTextDir:function(a){this.applyTextDir(a,k("ie")?a.outerText:a.textContent);
g.forEach(a.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});r.showTooltip=function(a,b,c,d,e){c&&(c=g.map(c,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));if(!s._masterTT)r._masterTT=s._masterTT=new u;return s._masterTT.show(a,b,c,d,e)};r.hideTooltip=function(a){return s._masterTT&&s._masterTT.hide(a)};var s=j("dijit.Tooltip",
l,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(c){g.forEach(this._connections||[],function(a){g.forEach(a,function(a){a.remove()})},this);this._connectIds=g.filter(b.isArrayLike(c)?c:c?[c]:[],function(a){return h.byId(a,this.ownerDocument)},this);this._connections=g.map(this._connectIds,function(c){var c=h.byId(c,this.ownerDocument),d=this.selector,e=d?function(b){return a.selector(d,b)}:function(a){return a},f=this;return[a(c,e(i.enter),function(){f._onHover(this)}),
a(c,e("focusin"),function(){f._onHover(this)}),a(c,e(i.leave),b.hitch(f,"_onUnHover")),a(c,e("focusout"),b.hitch(f,"_onUnHover"))]},this);this._set("connectId",c)},addTarget:function(a){a=a.id||a;-1==g.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=g.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);e.add(this.domNode,"dijitTooltipData")},
startup:function(){this.inherited(arguments);var a=this.connectId;g.forEach(b.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(){return this.label||this.domNode.innerHTML},_onHover:function(a){if(!this._showTimer)this._showTimer=this.defer(function(){this.open(a)},this.showDelay)},_onUnHover:function(){this._showTimer&&(this._showTimer.remove(),delete this._showTimer);this.close()},open:function(a){this._showTimer&&(this._showTimer.remove(),delete this._showTimer);var b=this.getContent(a);
if(b)s.show(b,a,this.position,!this.isLeftToRight(),this.textDir),this._connectNode=a,this.onShow(a,this.position)},close:function(){this._connectNode&&(s.hide(this._connectNode),delete this._connectNode,this.onHide());this._showTimer&&(this._showTimer.remove(),delete this._showTimer)},onShow:function(){},onHide:function(){},destroy:function(){this.close();g.forEach(this._connections||[],function(a){g.forEach(a,function(a){a.remove()})},this);this.inherited(arguments)}});s._MasterTooltip=u;s.show=
r.showTooltip;s.hide=r.hideTooltip;s.defaultPosition=["after-centered","before-centered"];return s})},"dijit/place":function(){define("dojo/_base/array,dojo/dom-geometry,dojo/dom-style,dojo/_base/kernel,dojo/_base/window,dojo/window,./main".split(","),function(g,j,f,h,e,d,c){function b(b,a,c,f){var h=d.getBox(b.ownerDocument);(!b.parentNode||"body"!=(""+b.parentNode.tagName).toLowerCase())&&e.body(b.ownerDocument).appendChild(b);var l=null;g.some(a,function(a){var d=a.corner,e=a.pos,m=0,g={w:{L:h.l+
h.w-e.x,R:e.x-h.l,M:h.w}[d.charAt(1)],h:{T:h.t+h.h-e.y,B:e.y-h.t,M:h.h}[d.charAt(0)]},v=b.style;v.left=v.right="auto";c&&(m=c(b,a.aroundCorner,d,g,f),m="undefined"==typeof m?0:m);var t=b.style,x=t.display,w=t.visibility;if("none"==t.display)t.visibility="hidden",t.display="";v=j.position(b);t.display=x;t.visibility=w;x={L:e.x,R:e.x-v.w,M:Math.max(h.l,Math.min(h.l+h.w,e.x+(v.w>>1))-v.w)}[d.charAt(1)];w={T:e.y,B:e.y-v.h,M:Math.max(h.t,Math.min(h.t+h.h,e.y+(v.h>>1))-v.h)}[d.charAt(0)];e=Math.max(h.l,
x);t=Math.max(h.t,w);x=Math.min(h.l+h.w,x+v.w);w=Math.min(h.t+h.h,w+v.h);x-=e;w-=t;m+=v.w-x+(v.h-w);if(null==l||m<l.overflow)l={corner:d,aroundCorner:a.aroundCorner,x:e,y:t,w:x,h:w,overflow:m,spaceAvailable:g};return!m});l.overflow&&c&&c(b,l.aroundCorner,l.corner,l.spaceAvailable,f);var a=j.isBodyLtr(b.ownerDocument),m=b.style;m.top=l.y+"px";m[a?"left":"right"]=(a?l.x:h.w-l.x-l.w)+"px";m[a?"right":"left"]="auto";return l}return c.place={at:function(c,a,d,e){d=g.map(d,function(b){var c={corner:b,pos:{x:a.x,
y:a.y}};e&&(c.pos.x+="L"==b.charAt(1)?e.x:-e.x,c.pos.y+="T"==b.charAt(0)?e.y:-e.y);return c});return b(c,d)},around:function(c,a,d,e,p){function l(a,b){E.push({aroundCorner:a,corner:b,pos:{x:{L:v,R:v+x,M:v+(x>>1)}[a.charAt(1)],y:{T:t,B:t+w,M:t+(w>>1)}[a.charAt(0)]}})}var m="string"==typeof a||"offsetWidth"in a?j.position(a,!0):a;if(a.parentNode)for(var n="absolute"==f.getComputedStyle(a).position,a=a.parentNode;a&&1==a.nodeType&&"BODY"!=a.nodeName;){var q=j.position(a,!0),r=f.getComputedStyle(a);
/relative|absolute/.test(r.position)&&(n=!1);if(!n&&/hidden|auto|scroll/.test(r.overflow)){var u=Math.min(m.y+m.h,q.y+q.h),s=Math.min(m.x+m.w,q.x+q.w);m.x=Math.max(m.x,q.x);m.y=Math.max(m.y,q.y);m.h=u-m.y;m.w=s-m.x}"absolute"==r.position&&(n=!0);a=a.parentNode}var v=m.x,t=m.y,x="w"in m?m.w:m.w=m.width,w="h"in m?m.h:(h.deprecated("place.around: dijit/place.__Rectangle: { x:"+v+", y:"+t+", height:"+m.height+", width:"+x+" } has been deprecated.  Please use { x:"+v+", y:"+t+", h:"+m.height+", w:"+x+
" }","","2.0"),m.h=m.height),E=[];g.forEach(d,function(a){var b=e;switch(a){case "above-centered":l("TM","BM");break;case "below-centered":l("BM","TM");break;case "after-centered":b=!b;case "before-centered":l(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":l(b?"TL":"TR",b?"TR":"TL");l(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":l(b?"BL":"BR",b?"TL":"TR");l(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":l(b?"TL":"TR",b?"BL":"BR");l(b?"TR":"TL",
b?"BR":"BL");break;default:l(a.aroundCorner,a.corner)}});c=b(c,E,p,{w:x,h:w});c.aroundNodePos=m;return c}}})},"url:dijit/templates/Tooltip.html":'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip"\n\t><div class="dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point="containerNode" role=\'alert\'></div\n\t><div class="dijitTooltipConnector" data-dojo-attach-point="connectorNode"></div\n></div>\n',"url:dijit/form/templates/ValidationTextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n',
"dijit/form/ComboBoxMixin":function(){define("dojo/_base/declare,dojo/_base/Deferred,dojo/_base/kernel,dojo/_base/lang,dojo/store/util/QueryResults,./_AutoCompleterMixin,./_ComboBoxMenu,../_HasDropDown,dojo/text!./templates/DropDownBox.html".split(","),function(g,j,f,h,e,d,c,b,i){return g("dijit.form.ComboBoxMixin",[b,d],{dropDownClass:c,hasDownArrow:!0,templateString:i,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(a){this._set("hasDownArrow",
a);this._buttonNode.style.display=a?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(a){a.get||h.mixin(a,{_oldAPI:!0,get:function(a){var b=new j;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var c=new j(function(){d.abort&&d.abort()});c.total=new j;var d=this.fetch(h.mixin({query:a,onBegin:function(a){c.total.resolve(a)},onComplete:function(a){c.resolve(a)},
onError:function(a){c.reject(a)}},b));return e(c)}});this._set("store",a)},postMixInProperties:function(){var a=this.params.store||this.store;a&&this._setStoreAttr(a);this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var b=this.declaredClass;h.mixin(this.store,{getValue:function(a,c){f.deprecated(b+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return a[c]},getLabel:function(a){f.deprecated(b+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly",
"","2.0");return a.name},fetch:function(a){f.deprecated(b+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],h.hitch(this,function(b){(new b({objectStore:this})).fetch(a)}))}})}}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../_base/Deferred"],function(g,j,f){var h=function(e){function d(c){e[c]||(e[c]=function(){var b=arguments;return f.when(e,function(d){Array.prototype.unshift.call(b,
d);return h(g[c].apply(g,b))})})}if(!e)return e;e.then&&(e=j.delegate(e));d("forEach");d("filter");d("map");if(!e.total)e.total=f.when(e,function(c){return c.length});return e};j.setObject("dojo.store.util.QueryResults",h);return h})},"dijit/form/_AutoCompleterMixin":function(){define("dojo/data/util/filter,dojo/_base/declare,dojo/dom-attr,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/query,dojo/regexp,dojo/sniff,dojo/string,./DataList,../registry,./_TextBoxMixin,./_SearchMixin".split(","),function(g,
j,f,h,e,d,c,b,i,a,k,o,p,l){return j("dijit.form._AutoCompleterMixin",l,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(a){var b=0;if("number"==typeof a.selectionStart)b=a.selectionStart;else if(i("ie")){var c=a.ownerDocument.selection.createRange().duplicate(),a=a.createTextRange();c.move("character",0);a.move("character",0);try{a.setEndPoint("EndToEnd",c),b=(""+a.text).replace(/\r/g,"").length}catch(d){}}return b},
_setCaretPos:function(a,b){b=parseInt(b);p.selectInputText(a,b,b)},_setDisabledAttr:function(a){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",a?"true":"false")},_onKey:function(a){if(!(32<=a.charCode)){var b=a.charCode||a.keyCode;if(!(b==e.ALT||b==e.CTRL||b==e.META||b==e.SHIFT)){var c=this.dropDown,d=null;this._abortQuery();this.inherited(arguments);if(!a.altKey&&!a.ctrlKey&&!a.metaKey)switch(this._opened&&(d=c.getHighlightedOption()),b){case e.PAGE_DOWN:case e.DOWN_ARROW:case e.PAGE_UP:case e.UP_ARROW:this._opened&&
this._announceOption(d);h.stop(a);break;case e.ENTER:if(d){if(d==c.nextButton){this._nextSearch(1);h.stop(a);break}else if(d==c.previousButton){this._nextSearch(-1);h.stop(a);break}h.stop(a)}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case e.TAB:b=this.get("displayedValue");if(c&&(b==c._messages.previousMessage||b==c._messages.nextMessage))break;d&&this._selectOption(d);case e.ESCAPE:if(this._opened)this._lastQuery=null,this.closeDropDown()}}}},_autoCompleteText:function(a){var b=
this.focusNode;p.selectInputText(b,b.value.length);var c=this.ignoreCase?"toLowerCase":"substr";if(0==a[c](0).indexOf(this.focusNode.value[c](0))){if(c=this.autoComplete?this._getCaretPos(b):b.value.length,c+1>b.value.length)b.value=a,p.selectInputText(b,c)}else b.value=a,p.selectInputText(b)},_openResultList:function(a,b,c){var e=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();!a.length&&0==c.start?this.closeDropDown():(this._nextSearch=this.dropDown.onPage=d.hitch(this,function(b){a.nextPage(-1!==
b);this.focus()}),this.dropDown.createOptions(a,c,d.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in c?(c.direction?this.dropDown.highlightFirstOption():c.direction||this.dropDown.highlightLastOption(),e&&this._announceOption(this.dropDown.getHighlightedOption())):this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(b[this.searchAttr].toString())&&this._announceOption(this.dropDown.containerNode.firstChild.nextSibling))},_showResultList:function(){this.closeDropDown(!0);
this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"),this.focusNode.removeAttribute("aria-activedescendant"))},_setBlurValue:function(){var a=this.get("displayedValue"),b=this.dropDown;b&&(a==b._messages.previousMessage||a==b._messages.nextMessage)?this._setValueAttr(this._lastValueReported,
!0):"undefined"==typeof this.item?(this.item=null,this.set("displayedValue",a)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState())},_setItemAttr:function(a,b,c){var d="";a&&(c||(c=this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]),d=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):c);this.set("value",d,b,c,a)},_announceOption:function(a){if(a){var b;if(a==this.dropDown.nextButton||a==this.dropDown.previousButton)b=
a.innerHTML,this.item=void 0,this.value="";else{var c=this.dropDown.items[a.getAttribute("item")];b=(this.store._oldAPI?this.store.getValue(c,this.searchAttr):c[this.searchAttr]).toString();this.set("item",c,!1,b)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",f.get(a,"id"));this._autoCompleteText(b)}},_selectOption:function(a){this.closeDropDown();a&&this._announceOption(a);this._setCaretPos(this.focusNode,this.focusNode.value.length);
this._handleOnChange(this.value,!0)},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0;this.inherited(arguments)},_startSearch:function(a){if(!this.dropDown){var b=this.id+"_popup";this.dropDown=new (d.isString(this.dropDownClass)?d.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:d.hitch(this,this._selectOption),id:b,dir:this.dir,textDir:this.textDir});this.focusNode.removeAttribute("aria-activedescendant");this.textbox.setAttribute("aria-owns",
b)}this._lastInput=a;this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!this.store&&(this.store=new k({},this.srcNodeRef),!("value"in this.params))){var a=this.item=this.store.fetchSelectedItem();if(a){var b=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(a,b):a[b]}}},postCreate:function(){var a=c('label[for="'+this.id+'"]');if(a.length){if(!a[0].id)a[0].id=this.id+"_label";this.domNode.setAttribute("aria-labelledby",
a[0].id)}this.inherited(arguments);this.connect(this,"onSearch","_openResultList")},_getMenuLabelFromItem:function(a){var a=this.labelFunc(a,this.store),b=this.labelType;"none"!=this.highlightMatch&&"text"==this.labelType&&this._lastInput&&(a=this.doHighlight(a,this._lastInput),b="html");return{html:"html"==b,label:a}},doHighlight:function(a,c){var d=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),e=this.queryExpr.indexOf("${0}"),c=b.escapeString(c);return this._escapeHtml(a.replace(RegExp((0==
e?"^":"")+"("+c+")"+(e==this.queryExpr.length-4?"$":""),d),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'<span class="dijitComboBoxHighlightMatch">$1</span>')},_escapeHtml:function(a){return a=(""+a).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(a,b){return(b._oldAPI?b.getValue(a,this.labelAttr||this.searchAttr):a[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(a,
b,c,d){this._set("item",d||null);null==a&&(a="");this.inherited(arguments)},_setTextDirAttr:function(a){this.inherited(arguments);this.dropDown&&this.dropDown._set("textDir",a)}})})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(g){var j={};g.setObject("dojo.data.util.filter",j);j.patternToRegExp=function(f,h){for(var e="^",d=null,c=0;c<f.length;c++)switch(d=f.charAt(c),d){case "\\":e+=d;c++;e+=f.charAt(c);break;case "*":e+=".*";break;case "?":e+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":e+=
"\\";default:e+=d}e+="$";return h?RegExp(e,"mi"):RegExp(e,"m")};return j})},"dijit/form/DataList":function(){define("dojo/_base/declare,dojo/dom,dojo/_base/lang,dojo/query,dojo/store/Memory,../registry".split(","),function(g,j,f,h,e,d){function c(b){return{id:b.value,value:b.value,name:f.trim(b.innerText||b.textContent||"")}}return g("dijit.form.DataList",e,{constructor:function(b,e){this.domNode=j.byId(e);f.mixin(this,b);this.id&&d.add(this);this.domNode.style.display="none";this.inherited(arguments,
[{data:h("option",this.domNode).map(c)}])},destroy:function(){d.remove(this.id)},fetchSelectedItem:function(){var b=h("> option[selected]",this.domNode)[0]||h("> option",this.domNode)[0];return b&&c(b)}})})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(g,j,f){return g("dojo.store.Memory",null,{constructor:function(f){for(var e in f)this[e]=f[e];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:f,get:function(f){return this.data[this.index[f]]},
getIdentity:function(f){return f[this.idProperty]},put:function(f,e){var d=this.data,c=this.index,b=this.idProperty,b=f[b]=e&&"id"in e?e.id:b in f?f[b]:Math.random();if(b in c){if(e&&!1===e.overwrite)throw Error("Object already exists");d[c[b]]=f}else c[b]=d.push(f)-1;return b},add:function(f,e){(e=e||{}).overwrite=!1;return this.put(f,e)},remove:function(f){var e=this.index,d=this.data;if(f in e)return d.splice(e[f],1),this.setData(d),!0},query:function(f,e){return j(this.queryEngine(f,e)(this.data))},
setData:function(f){var a;f.items?(this.idProperty=f.identifier,a=this.data=f.items,f=a):this.data=f;this.index={};for(var e=0,d=f.length;e<d;e++)this.index[f[e][this.idProperty]]=e}})})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(g){return function(j,f){function h(d){var d=g.filter(d,j),c=f&&f.sort;c&&d.sort("function"==typeof c?c:function(b,a){for(var d,e=0;d=c[e];e++){var f=b[d.attribute],l=a[d.attribute];if(f!=l)return!!d.descending==(null==f||f>l)?-1:
1}return 0});if(f&&(f.start||f.count)){var b=d.length,d=d.slice(f.start||0,(f.start||0)+(f.count||Infinity));d.total=b}return d}switch(typeof j){default:throw Error("Can not query with a "+typeof j);case "object":case "undefined":var e=j,j=function(d){for(var c in e){var b=e[c];if(b&&b.test){if(!b.test(d[c],d))return!1}else if(b!=d[c])return!1}return!0};break;case "string":if(!this[j])throw Error("No filter function "+j+" was found in store");j=this[j];case "function":}h.matches=j;return h}})},"dijit/form/_SearchMixin":function(){define("dojo/data/util/filter,dojo/_base/declare,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/query,dojo/sniff,dojo/string,dojo/when,../registry".split(","),
function(g,j,f,h,e,d,c,b,i,a){return j("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_abortQuery:function(){if(this.searchTimer)this.searchTimer=this.searchTimer.remove();if(this._queryDeferHandle)this._queryDeferHandle=this._queryDeferHandle.remove();if(this._fetchHandle){if(this._fetchHandle.abort)this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1;if(this._fetchHandle.cancel)this._cancelingQuery=
!0,this._fetchHandle.cancel(),this._cancelingQuery=!1;this._fetchHandle=null}},_processInput:function(a){if(!this.disabled&&!this.readOnly){var b=a.charOrCode;if(!a.altKey&&!((a.ctrlKey||a.metaKey)&&"x"!=b&&"v"!=b||b==h.SHIFT)){this._prev_key_backspace=a=!1;switch(b){case h.DELETE:case h.BACKSPACE:a=this._maskValidSubsetError=this._prev_key_backspace=!0;break;default:a="string"==typeof b||229==b}if(a)if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}}},onSearch:function(){},
_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"))},_startSearch:function(a){this._abortQuery();var c=this,d=e.clone(this.query),f={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},h=b.substitute(this.queryExpr,[a]),n,q=function(){var a=c._fetchHandle=c.store.query(d,f);!c.disabled&&!(c.readOnly||n!==c._lastQuery)&&i(a,function(b){c._fetchHandle=null;!c.disabled&&!c.readOnly&&n===c._lastQuery&&i(a.total,function(a){b.total=
a;var e=c.pageSize;if(isNaN(e)||e>b.total)e=b.total;b.nextPage=function(a){f.direction=a=!1!==a;f.count=e;if(a){if(f.start+=b.length,f.start>=b.total)f.count=0}else if(f.start-=e,0>f.start)f.count=Math.max(e+f.start,0),f.start=0;0>=f.count?(b.length=0,c.onSearch(b,d,f)):q()};c.onSearch(b,d,f)})},function(a){c._fetchHandle=null;c._cancelingQuery||console.error(c.declaredClass+" "+a.toString())})};e.mixin(f,this.fetchProperties);this.store._oldAPI?n=h:(n=g.patternToRegExp(h,this.ignoreCase),n.toString=
function(){return h});this._lastQuery=d[this.searchAttr]=n;this._queryDeferHandle=this.defer(q,this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var b=this.list;if(b)this.store=a.byId(b)}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare,dojo/dom-class,dojo/dom-style,dojo/keys,../_WidgetBase,../_TemplatedMixin,./_ComboBoxMenuMixin,./_ListMouseMixin".split(","),function(g,j,f,
h,e,d,c,b){return g("dijit.form._ComboBoxMenu",[e,d,b,c],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'><div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div><div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div></div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);
this.isLeftToRight()||(j.add(this.previousButton,"dijitMenuItemRtl"),j.add(this.nextButton,"dijitMenuItemRtl"))},_createMenuItem:function(){var b=this.ownerDocument.createElement("div");b.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");b.setAttribute("role","option");return b},onHover:function(b){j.add(b,"dijitMenuItemHover")},onUnhover:function(b){j.remove(b,"dijitMenuItemHover")},onSelect:function(b){j.add(b,"dijitMenuItemSelected")},onDeselect:function(b){j.remove(b,
"dijitMenuItemSelected")},_page:function(b){var a=0,c=this.domNode.scrollTop,d=f.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();a<d;){var e=this.getHighlightedOption();if(b){if(!e.previousSibling||"none"==e.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!e.nextSibling||"none"==e.nextSibling.style.display)break;this.selectNextNode()}e=this.domNode.scrollTop;a+=(e-c)*(b?-1:1);c=e}},handleKey:function(b){switch(b.keyCode){case h.DOWN_ARROW:return this.selectNextNode(),
!1;case h.PAGE_DOWN:return this._page(!1),!1;case h.UP_ARROW:return this.selectPreviousNode(),!1;case h.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(g,j,f,h){return j("dijit.form._ComboBoxMenuMixin",null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=h.getLocalization("dijit.form","ComboBox",
this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(e){this.value=e;this.onChange(e)},onClick:function(e){if(e==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(e==this.nextButton)this._setSelectedAttr(null),this.onPage(1);else this.onChange(e)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},
_createOption:function(e,d){var c=this._createMenuItem(),b=d(e);b.html?c.innerHTML=b.label:c.appendChild(c.ownerDocument.createTextNode(b.label));if(""==c.innerHTML)c.innerHTML="&#160;";this.applyTextDir(c,c.innerText||c.textContent||"");return c},createOptions:function(e,d,c){this.items=e;this.previousButton.style.display=0==d.start?"none":"";f.set(this.previousButton,"id",this.id+"_prev");g.forEach(e,function(b,a){var d=this._createOption(b,c);d.setAttribute("item",a);f.set(d,"id",this.id+a);this.nextButton.parentNode.insertBefore(d,
this.nextButton)},this);var b=!1;e.total&&!e.total.then&&-1!=e.total?d.start+d.count<e.total?b=!0:d.start+d.count>e.total&&d.count==e.length&&(b=!0):d.count==e.length&&(b=!0);this.nextButton.style.display=b?"":"none";f.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var e=this.containerNode;2<e.childNodes.length;)e.removeChild(e.childNodes[e.childNodes.length-2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},
selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}})})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare","dojo/mouse","dojo/on","dojo/touch","./_ListBase"],function(g,j,f,h,e){return g("dijit.form._ListMouseMixin",e,{postCreate:function(){this.inherited(arguments);
this.own(f(this.domNode,h.press,function(d){d.preventDefault()}));this._listConnect(h.press,"_onMouseDown");this._listConnect(h.release,"_onMouseUp");this._listConnect(j.enter,"_onMouseOver");this._listConnect(j.leave,"_onMouseOut")},_onMouseDown:function(d,c){if(this._hoveredNode)this.onUnhover(this._hoveredNode),this._hoveredNode=null;this._isDragging=!0;this._setSelectedAttr(c)},_onMouseUp:function(d,c){this._isDragging=!1;var b=this.selected,e=this._hoveredNode;if(b&&c==b)this.onClick(b);else e&&
c==e&&(this._setSelectedAttr(e),this.onClick(e))},_onMouseOut:function(){if(this._hoveredNode)this.onUnhover(this._hoveredNode),this._hoveredNode=null;if(this._isDragging)this._cancelDrag=(new Date).getTime()+1E3},_onMouseOver:function(d,c){if(this._cancelDrag){if((new Date).getTime()>this._cancelDrag)this._isDragging=!1;this._cancelDrag=null}this._hoveredNode=c;this.onHover(c);this._isDragging&&this._setSelectedAttr(c)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on",
"dojo/window"],function(g,j,f){return g("dijit.form._ListBase",null,{selected:null,_listConnect:function(f,e){var d=this;return d.own(j(d.containerNode,j.selector(function(c,b,d){return c.parentNode==d},f),function(c){c.preventDefault();d[e](c,this)}))},selectFirstNode:function(){for(var f=this.containerNode.firstChild;f&&"none"==f.style.display;)f=f.nextSibling;this._setSelectedAttr(f)},selectLastNode:function(){for(var f=this.containerNode.lastChild;f&&"none"==f.style.display;)f=f.previousSibling;
this._setSelectedAttr(f)},selectNextNode:function(){var f=this.selected;if(f){for(f=f.nextSibling;f&&"none"==f.style.display;)f=f.nextSibling;f?this._setSelectedAttr(f):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var f=this.selected;if(f){for(f=f.previousSibling;f&&"none"==f.style.display;)f=f.previousSibling;f?this._setSelectedAttr(f):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(h){if(this.selected!=h){var e=this.selected;if(e)this.onDeselect(e),
this.selected=null;if(h)this.selected=h,f.scrollIntoView(h),this.onSelect(h)}else if(h)this.onSelect(h)}})})},"dijit/_HasDropDown":function(){define("dojo/_base/declare,dojo/_base/Deferred,dojo/_base/event,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/has,dojo/keys,dojo/_base/lang,dojo/on,dojo/window,./registry,./focus,./popup,./_FocusMixin".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n,q){return g("dijit._HasDropDown",q,{_buttonNode:null,_arrowWrapperNode:null,
_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){if(!this.disabled&&!this.readOnly)a.preventDefault(),this._docHandler=this.connect(this.ownerDocument,"mouseup","_onDropDownMouseUp"),this.toggleDropDown()},_onDropDownMouseUp:function(a){a&&this._docHandler&&this.disconnect(this._docHandler);var b=this.dropDown,e=!1;if(a&&this._opened){var f=c.position(this._buttonNode,
!0);if(!(a.pageX>=f.x&&a.pageX<=f.x+f.w)||!(a.pageY>=f.y&&a.pageY<=f.y+f.h)){for(f=a.target;f&&!e;)d.contains(f,"dijitPopup")?e=!0:f=f.parentNode;if(e){f=a.target;if(b.onItemClick){for(var k;f&&!(k=l.byNode(f));)f=f.parentNode;if(k&&k.onClick&&k.getParent)k.getParent().onItemClick(k,a)}return}}}if(this._opened){if(b.focus&&!1!==b.autoFocus)this._focusDropDownTimer=this.defer(function(){b.focus();delete this._focusDropDownTimer})}else this.defer("focus");if(i("touch"))this._justGotMouseUp=!0,this.defer(function(){this._justGotMouseUp=
!1})},_onDropDownClick:function(a){i("touch")&&!this._justGotMouseUp&&(this._onDropDownMouseDown(a),this._onDropDownMouseUp(a));this._stopClickEvents&&f.stop(a)},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||
this.dropDownPosition[0]||"Down";d.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(o(this._buttonNode,"mousedown",k.hitch(this,"_onDropDownMouseDown")),o(this._buttonNode,"click",k.hitch(this,"_onDropDownClick")),o(a,"keydown",k.hitch(this,"_onKey")),o(a,"keyup",k.hitch(this,"_onKeyUp")))},destroy:function(){this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);
this.inherited(arguments)},_onKey:function(b){if(!this.disabled&&!this.readOnly){var c=this.dropDown,d=b.target;if(c&&this._opened&&c.handleKey&&!1===c.handleKey(b))f.stop(b);else if(c&&this._opened&&b.keyCode==a.ESCAPE)this.closeDropDown(),f.stop(b);else if(!this._opened&&(b.keyCode==a.DOWN_ARROW||(b.keyCode==a.ENTER||b.keyCode==a.SPACE)&&("input"!==(d.tagName||"").toLowerCase()||d.type&&"text"!==d.type.toLowerCase())))this._toggleOnKeyUp=!0,f.stop(b)}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;
this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(k.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(m.curNode&&this.dropDown&&h.isDescendant(m.curNode,this.dropDown.domNode));this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new j,b=k.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?b():this.loadDropDown(b);return a},toggleDropDown:function(){!this.disabled&&!this.readOnly&&
(this._opened?this.closeDropDown():this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,f=a.domNode,i=this._aroundNode||this.domNode,l=this;if(!this._preparedNode){this._preparedNode=!0;if(f.style.width)this._explicitDDWidth=!0;if(f.style.height)this._explicitDDHeight=!0}if(this.maxHeight||this.forceWidth||this.autoWidth){var h={display:"",visibility:"hidden"};if(!this._explicitDDWidth)h.width="";if(!this._explicitDDHeight)h.height="";b.set(f,h);h=this.maxHeight;if(-1==h)var h=
p.getBox(this.ownerDocument),g=c.position(i,!1),h=Math.floor(Math.max(g.y,h.h-(g.y+g.h)));n.moveOffScreen(a);a.startup&&!a._started&&a.startup();var g=c.getMarginSize(f),m=h&&g.h>h;b.set(f,{overflowX:"visible",overflowY:m?"auto":"visible"});m?(g.h=h,"w"in g&&(g.w+=16)):delete g.h;this.forceWidth?g.w=i.offsetWidth:this.autoWidth?g.w=Math.max(g.w,i.offsetWidth):delete g.w;k.isFunction(a.resize)?a.resize(g):c.setMarginBox(f,g)}a=n.open({parent:this,popup:a,around:i,orient:this.dropDownPosition,onExecute:function(){l.closeDropDown(!0)},
onCancel:function(){l.closeDropDown(!0)},onClose:function(){e.set(l._popupStateNode,"popupActive",!1);d.remove(l._popupStateNode,"dijitHasDropDownOpen");l._set("_opened",!1)}});e.set(this._popupStateNode,"popupActive","true");d.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this.domNode.setAttribute("aria-expanded","true");return a},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);if(this._opened)this.domNode.setAttribute("aria-expanded",
"false"),a&&this.focus(),n.close(this.dropDown),this._opened=!1}})})},"dijit/popup":function(){define("dojo/_base/array,dojo/aspect,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/on,dojo/sniff,./place,./BackgroundIframe,./main".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n,q){function r(){this._popupWrapper&&(c.destroy(this._popupWrapper),delete this._popupWrapper)}h=h(null,{_stack:[],
_beginZIndex:1E3,_idGen:1,_createWrapper:function(a){var b=a._popupWrapper,d=a.domNode;if(!b)b=c.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},a.ownerDocumentBody),b.appendChild(d),d=d.style,d.display="",d.visibility="",d.position="",d.top="0px",a._popupWrapper=b,j.after(a,"destroy",r,!0);return b},moveOffScreen:function(a){a=this._createWrapper(a);i.set(a,{visibility:"hidden",top:"-9999px",display:""})},hide:function(a){a=this._createWrapper(a);i.set(a,"display",
"none")},getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(c){for(var i=this._stack,h=c.popup,g=c.orient||["below","below-alt","above","above-alt"],r=c.parent?c.parent.isLeftToRight():b.isBodyLtr(h.ownerDocument),q=c.around,j=c.around&&c.around.id?c.around.id+"_dropdown":"popup_"+this._idGen++;i.length&&(!c.parent||!e.isDescendant(c.parent.domNode,i[i.length-1].widget.domNode));)this.close(i[i.length-1].widget);var C=this._createWrapper(h);
d.set(C,{id:j,style:{zIndex:this._beginZIndex+i.length},"class":"dijitPopup "+(h.baseClass||h["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:c.parent?c.parent.id:""});if((l("ie")||l("mozilla"))&&!h.bgIframe)h.bgIframe=new n(C);g=q?m.around(C,q,g,r,h.orient?o.hitch(h,"orient"):null):m.at(C,c,"R"==g?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],c.padding);C.style.display="";C.style.visibility="visible";h.domNode.style.visibility="visible";r=[];r.push(p(C,f._keypress,o.hitch(this,function(b){if(b.charOrCode==
k.ESCAPE&&c.onCancel)a.stop(b),c.onCancel();else if(b.charOrCode===k.TAB&&(a.stop(b),(b=this.getTopPopup())&&b.onCancel))b.onCancel()})));h.onCancel&&c.onCancel&&r.push(h.on("cancel",c.onCancel));r.push(h.on(h.onExecute?"execute":"change",o.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));i.push({widget:h,parent:c.parent,onExecute:c.onExecute,onCancel:c.onCancel,onClose:c.onClose,handlers:r});if(h.onOpen)h.onOpen(g);return g},close:function(a){for(var b=this._stack;a&&
g.some(b,function(b){return b.widget==a})||!a&&b.length;){var c=b.pop(),d=c.widget,e=c.onClose;if(d.onClose)d.onClose();for(var f;f=c.handlers.pop();)f.remove();d&&d.domNode&&this.hide(d);e&&e()}}});return q.popup=new h})},"url:dijit/form/templates/DropDownBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}"\n\trole="combobox"\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point="_buttonNode, _popupStateNode" role="presentation"\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="button presentation" aria-hidden="true"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n\t\t\tdata-dojo-attach-point="textbox,focusNode" role="textbox" aria-haspopup="true"\n\t/></div\n></div>\n',
"dijit/form/Button":function(){define("require,dojo/_base/declare,dojo/dom-class,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/ready,./_FormWidget,./_ButtonMixin,dojo/text!./templates/Button.html".split(","),function(g,j,f,h,e,d,c,b,i,a){h("dijit-legacy-requires")&&c(0,function(){g(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});return j("dijit.form.Button",[b,i],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",
templateString:a,_setValueAttr:"valueNode",_onClick:function(a){var b=this.inherited(arguments);b&&this.valueNode&&(this.valueNode.click(),a.preventDefault(),a.stopPropagation());return b},_fillContent:function(a){if(a&&(!this.params||!("label"in this.params)))if(a=d.trim(a.innerHTML))this.label=a},_setShowLabelAttr:function(a){this.containerNode&&f.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){e.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.",
"","2.0");this.set("label",a)},_setLabelAttr:function(a){this.inherited(arguments);if(!this.showLabel&&!("title"in this.params))this.titleNode.title=d.trim(this.containerNode.innerText||this.containerNode.textContent||"")}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(g,j,f,h){return g("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(e){if(this.disabled)return f.stop(e),!1;var d=!1===this.onClick(e);
if(!d&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var c=this.domNode;c.parentNode;c=c.parentNode){var b=h.byNode(c);if(b&&"function"==typeof b._onSubmit){b._onSubmit(e);d=!0;break}}d&&e.preventDefault();return!d},postCreate:function(){this.inherited(arguments);j.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(e){this._set("label",e);(this.containerNode||this.focusNode).innerHTML=e}})})},"url:dijit/form/templates/Button.html":'<span class="dijit dijitReset dijitInline" role="presentation"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event="ondijitclick:_onClick" role="presentation"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\n\t\ttabIndex="-1" role="presentation" data-dojo-attach-point="valueNode"\n/></span>\n',
"dijit/form/Select":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/dom-class,dojo/dom-geometry,dojo/_base/event,dojo/i18n,dojo/_base/lang,dojo/sniff,./_FormSelectWidget,../_HasDropDown,../Menu,../MenuItem,../MenuSeparator,../Tooltip,dojo/text!./templates/Select.html,dojo/i18n!./nls/validate".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n){var q=j("dijit.form._SelectMenu",o,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);var a=this.menuTableNode=this.domNode,
b=this.domNode=this.ownerDocument.createElement("div");b.style.cssText="overflow-x: hidden; overflow-y: scroll";a.parentNode&&a.parentNode.replaceChild(b,a);h.remove(a,"dijitMenuTable");b.className=a.className+" dijitSelectMenu";a.className="dijitReset dijitMenuTable";a.setAttribute("role","listbox");b.setAttribute("role","presentation");b.appendChild(a)},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onselectstart",d.stop)},focus:function(){var a=!1,c=this.parentWidget.value;
b.isArray(c)&&(c=c[c.length-1]);c&&g.forEach(this.parentWidget._getChildren(),function(b){b.option&&c===b.option.value&&(a=!0,this.focusChild(b,!1))},this);a||this.inherited(arguments)},resize:function(a){if(a&&(e.setMarginBox(this.domNode,a),"w"in a))this.menuTableNode.style.width="100%"}}),j=j("dijit.form.Select",[a,k],{baseClass:"dijitSelect dijitValidationTextBox",templateString:n,_buttonInputDisabled:i("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",
_isLoaded:!1,_childrenLoaded:!1,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this.value=this.options[0<=a?a:0].value}this.dropDown=new q({id:this.id+"_menu",parentWidget:this});h.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(a){if(!a.value&&!a.label)return new l({ownerDocument:this.ownerDocument});var c=b.hitch(this,"_setValueAttr",a),a=new p({option:a,
label:a.label||this.emptyLabel,onClick:c,ownerDocument:this.ownerDocument,dir:this.dir,disabled:a.disabled||!1});a.focusNode.setAttribute("role","option");return a},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return!this.dropDown?[]:this.dropDown.getChildren()},_loadChildren:function(a){!0===a?(this.dropDown&&delete this.dropDown.focusedChild,this.options.length?this.inherited(arguments):(g.forEach(this._getChildren(),function(a){a.destroyRecursive()}),
this.dropDown.addChild(new p({ownerDocument:this.ownerDocument,label:this.emptyLabel})))):this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},_setValueAttr:function(a){this.inherited(arguments);f.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setDisabledAttr:function(a){this.inherited(arguments);
this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=a||this.emptyLabel;this.containerNode.innerHTML='<span role="option" class="dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'">'+a+"</span>"},validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":
"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var b=a?"":this._missingMsg;b&&this.focused&&this._hasBeenBlurred?m.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):m.hide(this.domNode);this._set("message",b);return a},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments);m.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=
c.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onselectstart",d.stop);this.domNode.setAttribute("aria-expanded","false");9>i("ie")&&this.defer(function(){try{var a=domStyle.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(d){}})},_setStyleAttr:function(a){this.inherited(arguments);
h.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},closeDropDown:function(){this.inherited(arguments);if(this.dropDown&&this.dropDown.menuTableNode)this.dropDown.menuTableNode.style.width=""},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);this.inherited(arguments)},_onFocus:function(){this.validate(!0);
this.inherited(arguments)},_onBlur:function(){m.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});j._Menu=q;return j})},"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array,dojo/_base/Deferred,dojo/aspect,dojo/data/util/sorter,dojo/_base/declare,dojo/dom,dojo/dom-class,dojo/_base/kernel,dojo/_base/lang,dojo/query,dojo/when,dojo/store/util/QueryResults,./_FormValueWidget".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o,p){return e("dijit.form._FormSelectWidget",p,{multiple:!1,
options:null,store:null,query:null,queryOptions:null,labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,onLoadDeferred:null,getOptions:function(a){var b=a,c=this.options||[],d=c.length;if(void 0===b)return c;if(i.isArray(b))return g.map(b,"return this.getOptions(item);",this);i.isObject(a)&&(g.some(this.options,function(a,c){return a===b||a.value&&a.value===b.value?(b=c,!0):!1})||(b=-1));if("string"==typeof b)for(a=0;a<d;a++)if(c[a].value===b){b=a;break}return"number"==typeof b&&0<=b&&
b<d?this.options[b]:null},addOption:function(a){i.isArray(a)||(a=[a]);g.forEach(a,function(a){a&&i.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(a){i.isArray(a)||(a=[a]);a=this.getOptions(a);g.forEach(a,function(a){if(a)this.options=g.filter(this.options,function(b){return b.value!==a.value||b.label!==a.label}),this._removeOptionItem(a)},this);this._loadChildren()},updateOption:function(a){i.isArray(a)||(a=[a]);g.forEach(a,function(a){var b=this.getOptions(a),
c;if(b)for(c in a)b[c]=a[c]},this);this._loadChildren()},setStore:function(a,b,c){var d=this.store,c=c||{};if(d!==a){for(var e;e=this._notifyConnections.pop();)e.remove();if(!a.get&&(i.mixin(a,{_oldAPI:!0,get:function(a){var b=new j;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var c=new j(function(){d.abort&&d.abort()});c.total=new j;var d=this.fetch(i.mixin({query:a,onBegin:function(a){c.total.resolve(a)},
onComplete:function(a){c.resolve(a)},onError:function(a){c.reject(a)}},b));return new o(c)}}),a.getFeatures()["dojo.data.api.Notification"]))this._notifyConnections=[f.after(a,"onNew",i.hitch(this,"_onNewItem"),!0),f.after(a,"onDelete",i.hitch(this,"_onDeleteItem"),!0),f.after(a,"onSet",i.hitch(this,"_onSetItem"),!0)];this._set("store",a)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();c.query&&(this._set("query",c.query),
this._set("queryOptions",c.queryOptions));if(a)this._loadingStore=!0,this.onLoadDeferred=new j,this._queryRes=a.query(this.query,this.queryOptions),k(this._queryRes,i.hitch(this,function(d){if(this.sortByLabel&&!c.sort&&d.length)if(d[0].getValue)d.sort(h.createSortFunction([{attribute:a.getLabelAttributes(d[0])[0]}],a));else{var e=this.labelAttr;d.sort(function(a,b){return a[e]>b[e]?1:b[e]>a[e]?-1:0})}c.onFetch&&(d=c.onFetch.call(this,d,c));g.forEach(d,function(a){this._addOptionForItem(a)},this);
this._queryRes.observe&&this._queryRes.observe(i.hitch(this,function(a,b,c){b==c?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),-1!=c&&this._onNewItem(a))}),!0);this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:b);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(d):this._loadChildren();this.onLoadDeferred.resolve(!0);this.onSetStore()}),function(a){console.error("dijit.form.Select: "+a.toString());this.onLoadDeferred.reject(a)});return d},
_setValueAttr:function(a,b){this._onChangeActive||(b=null);if(this._loadingStore)this._pendingValue=a;else{var c=this.getOptions()||[];i.isArray(a)||(a=[a]);g.forEach(a,function(b,d){i.isObject(b)||(b+="");"string"===typeof b&&(a[d]=g.filter(c,function(a){return a.value===b})[0]||{value:"",label:""})},this);a=g.filter(a,function(a){return a&&a.value});if(!this.multiple&&(!a[0]||!a[0].value)&&c.length)a[0]=c[0];g.forEach(c,function(b){b.selected=g.some(a,function(a){return a.value===b.value})});var d=
g.map(a,function(a){return a.value}),e=g.map(a,function(a){return a.label});"undefined"==typeof d||"undefined"==typeof d[0]||(this._setDisplay(this.multiple?e:e[0]),this.inherited(arguments,[this.multiple?d:d[0],b]),this._updateSelection())}},_getDisplayedValueAttr:function(){var a=this.get("value");i.isArray(a)||(a=[a]);a=g.map(this.getOptions(a),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?a:a[0]},_loadChildren:function(){this._loadingStore||(g.forEach(this._getChildren(),
function(a){a.destroyRecursive()}),g.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this._set("value",this._getValueFromOpts());var a=this.value;i.isArray(a)||(a=[a]);a&&a[0]&&g.forEach(this._getChildren(),function(b){var d=g.some(a,function(a){return b.option&&a===b.option.value});c.toggle(b.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),d);b.domNode.setAttribute("aria-selected",d?"true":"false")},this)},_getValueFromOpts:function(){var a=
this.getOptions()||[];if(!this.multiple&&a.length){var b=g.filter(a,function(a){return a.selected})[0];if(b&&b.value)return b.value;a[0].selected=!0;return a[0].value}return this.multiple?g.map(g.filter(a,function(a){return a.selected}),function(a){return a.value})||[]:""},_onNewItem:function(a,b){(!b||!b.parent)&&this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption(this.store.getIdentity(a))},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},_getOptionObjForItem:function(a){var b=
this.store,c=this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:b.getLabel(a);return{value:c?b.getIdentity(a):null,label:c,item:a}},_addOptionForItem:function(a){var b=this.store;b.isItemLoaded&&!b.isItemLoaded(a)?b.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},scope:this}):this.addOption(this._getOptionObjForItem(a))},constructor:function(a){this._oValue=(a||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);d.setSelectable(this.focusNode,
!1)},_fillContent:function(){if(!this.options)this.options=this.srcNodeRef?a("> *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+b._scopeName+"-value")||a.getAttribute("value"),label:""+a.innerHTML,selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[];this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",
this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);this.connect(this,"onChange","_updateSelection");var a=this.store;if(a&&(a.getIdentity||a.getFeatures()["dojo.data.api.Identity"]))this.store=null,this.setStore(a,this._oValue)},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this.inherited(arguments)},_addOptionItem:function(){},
_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},_getSelectedOptionsAttr:function(){return this.getOptions(this.get("value"))},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(g){var j={};g.setObject("dojo.data.util.sorter",j);j.basicComparator=function(f,h){var e=-1;null===f&&(f=void 0);null===h&&(h=void 0);if(f==h)e=0;else if(f>h||null==f)e=1;return e};j.createSortFunction=
function(f,h){function e(a,b,c,d){return function(e,f){var i=d.getValue(e,a),h=d.getValue(f,a);return b*c(i,h)}}for(var d=[],c,b=h.comparatorMap,i=j.basicComparator,a=0;a<f.length;a++){c=f[a];var k=c.attribute;if(k){c=c.descending?-1:1;var g=i;b&&("string"!==typeof k&&"toString"in k&&(k=k.toString()),g=b[k]||i);d.push(e(k,c,g,h))}}return function(a,b){for(var c=0;c<d.length;){var e=d[c++](a,b);if(0!==e)return e}return 0}};return j})},"dijit/Menu":function(){define("require,dojo/_base/array,dojo/_base/declare,dojo/_base/event,dojo/dom,dojo/dom-attr,dojo/dom-geometry,dojo/dom-style,dojo/keys,dojo/_base/lang,dojo/on,dojo/sniff,dojo/_base/window,dojo/window,./popup,./DropDownMenu,dojo/ready".split(","),
function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n,q){o("dijit-legacy-requires")&&q(0,function(){g(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return f("dijit.Menu",n,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):j.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return l.get(this._iframeContentDocument(a))||
this._iframeContentDocument(a).__parent__||a.name&&p.doc.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&p.doc.frames[a.name]&&p.doc.frames[a.name].document||null},bindDomNode:function(b){var b=e.byId(b,this.ownerDocument),c;if("iframe"==b.tagName.toLowerCase()){var f=b,l=this._iframeContentWindow(f);c=p.body(l.document)}else c=b==p.body(this.ownerDocument)?this.ownerDocument.documentElement:b;var g={node:b,iframe:f};
d.set(b,"_dijitMenu"+this.id,this._bindings.push(g));var q=a.hitch(this,function(a){var b=this.selector,c=b?function(a){return k.selector(b,a)}:function(a){return a},d=this;return[k(a,c(this.leftClickToOpen?"click":"contextmenu"),function(a){h.stop(a);d._scheduleOpen(this,f,{x:a.pageX,y:a.pageY})}),k(a,c("keydown"),function(a){a.shiftKey&&a.keyCode==i.F10&&(h.stop(a),d._scheduleOpen(this,f))})]});g.connects=c?q(c):[];if(f)g.onloadHandler=a.hitch(this,function(){var a=this._iframeContentWindow(f);
c=p.body(a.document);g.connects=q(c)}),f.addEventListener?f.addEventListener("load",g.onloadHandler,!1):f.attachEvent("onload",g.onloadHandler)},unBindDomNode:function(a){var b;try{b=e.byId(a,this.ownerDocument)}catch(c){return}a="_dijitMenu"+this.id;if(b&&d.has(b,a)){for(var f=d.get(b,a)-1,i=this._bindings[f],h;h=i.connects.pop();)h.remove();(h=i.iframe)&&(h.removeEventListener?h.removeEventListener("load",i.onloadHandler,!1):h.detachEvent("onload",i.onloadHandler));d.remove(b,a);delete this._bindings[f]}},
_scheduleOpen:function(a,b,c){if(!this._openTimer)this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:a,iframe:b,coords:c})},1)},_openMyself:function(a){function d(){q.refocus&&j&&j.focus();m.close(q)}var f=a.target,i=a.iframe,a=a.coords;this.currentTarget=f;if(a){if(i){var f=c.position(i,!0),h=this._iframeContentWindow(i),h=c.docScroll(h.document),l=b.getComputedStyle(i),k=b.toPixelValue,g=(o("ie")&&o("quirks")?0:k(i,l.paddingLeft))+(o("ie")&&o("quirks")?k(i,l.borderLeftWidth):
0),i=(o("ie")&&o("quirks")?0:k(i,l.paddingTop))+(o("ie")&&o("quirks")?k(i,l.borderTopWidth):0);a.x+=f.x+g-h.x;a.y+=f.y+i-h.y}}else a=c.position(f,!0),a.x+=10,a.y+=10;var q=this,i=this._focusManager.get("prevNode"),f=this._focusManager.get("curNode"),j=!f||e.isDescendant(f,this.domNode)?i:f;m.open({popup:this,x:a.x,y:a.y,onExecute:d,onCancel:d,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);m.close(this)}},destroy:function(){j.forEach(this._bindings,
function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/DropDownMenu":function(){define("dojo/_base/declare,dojo/_base/event,dojo/keys,dojo/text!./templates/Menu.html,./_OnDijitClickMixin,./_MenuBase".split(","),function(g,j,f,h,e,d){return g("dijit.DropDownMenu",[d,e],{templateString:h,baseClass:"dijitMenu",postCreate:function(){this.inherited(arguments);var c=this.isLeftToRight();this._openSubMenuKey=c?f.RIGHT_ARROW:f.LEFT_ARROW;this._closeSubMenuKey=c?f.LEFT_ARROW:
f.RIGHT_ARROW;this.connectKeyNavHandlers([f.UP_ARROW],[f.DOWN_ARROW])},_onKeyPress:function(c){if(!c.ctrlKey&&!c.altKey)switch(c.charOrCode){case this._openSubMenuKey:this._moveToPopup(c);j.stop(c);break;case this._closeSubMenuKey:if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else j.stop(c)}}})})},"url:dijit/templates/Menu.html":'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"\n\t   data-dojo-attach-event="onkeypress:_onKeyPress" cellspacing="0">\n\t<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\n</table>\n',
"dijit/_MenuBase":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/_base/lang,dojo/mouse,dojo/on,dojo/window,./a11yclick,./popup,./registry,./_Widget,./_KeyNavContainer,./_TemplatedMixin".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m){return j("dijit._MenuBase",[p,m,l],{parentMenu:null,popupDelay:500,autoFocus:!1,childSelector:function(a){var b=o.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},postCreate:function(){var e=this,f="string"==
typeof this.childSelector?this.childSelector:d.hitch(this,"childSelector");this.own(b(this.containerNode,b.selector(f,c.enter),function(){e.onItemHover(o.byNode(this))}),b(this.containerNode,b.selector(f,c.leave),function(){e.onItemUnhover(o.byNode(this))}),b(this.containerNode,b.selector(f,a),function(a){e.onItemClick(o.byNode(this),a);a.stopPropagation();a.preventDefault()}));this.inherited(arguments)},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&
!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var a=this.currentPopup.parentMenu;a.focusedChild&&a.focusedChild._setSelected(!1);a.focusedChild=this.currentPopup.from_item;a.focusedChild._setSelected(!0);this._stopPendingCloseTimer(this.currentPopup)}},onItemHover:function(a){if(this.isActive&&(this.focusChild(a),this.focusedChild.popup&&
!this.focusedChild.disabled&&!this.hover_timer))this.hover_timer=this.defer("_openPopup",this.popupDelay);this.focusedChild&&this.focusChild(a);this._hoveredChild=a;a._set("hovering",!0)},_onChildBlur:function(a){this._stopPopupTimer();a._setSelected(!1);var b=a.popup;if(b)this._stopPendingCloseTimer(b),b._pendingClose_timer=this.defer(function(){b._pendingClose_timer=null;if(b.parentMenu)b.parentMenu.currentPopup=null;k.close(b)},this.popupDelay)},onItemUnhover:function(a){this.isActive&&this._stopPopupTimer();
if(this._hoveredChild==a)this._hoveredChild=null;a._set("hovering",!1)},_stopPopupTimer:function(){if(this.hover_timer)this.hover_timer=this.hover_timer.remove()},_stopPendingCloseTimer:function(a){if(a._pendingClose_timer)a._pendingClose_timer=a._pendingClose_timer.remove()},_stopFocusTimer:function(){if(this._focus_timer)this._focus_timer=this._focus_timer.remove()},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){"undefined"==typeof this.isShowingNow&&
this._markActive();this.focusChild(a);if(a.disabled)return!1;a.popup?this._openPopup("keypress"==b.type):(this.onExecute(),a._onClick?a._onClick(b):a.onClick(b))},_openPopup:function(a){this._stopPopupTimer();var b=this.focusedChild;if(b){var c=b.popup;if(!c.isShowingNow){this.currentPopup&&(this._stopPendingCloseTimer(this.currentPopup),k.close(this.currentPopup));c.parentMenu=this;c.from_item=b;var e=this;k.open({parent:this,popup:c,around:b.domNode,orient:this._orient||["after","before"],onCancel:function(){e.focusChild(b);
e._cleanUp();b._setSelected(!0);e.focusedChild=b},onExecute:d.hitch(this,"_cleanUp")});this.currentPopup=c;c.connect(c.domNode,"onmouseenter",d.hitch(e,"_onPopupHover"))}if(a&&c.focus)c._focus_timer=this.defer(d.hitch(c,function(){this._focus_timer=null;this.focus()}))}},_markActive:function(){this.isActive=!0;e.replace(this.domNode,"dijitMenuActive","dijitMenuPassive")},onOpen:function(){this.isShowingNow=!0;this._markActive()},_markInactive:function(){this.isActive=!1;e.replace(this.domNode,"dijitMenuPassive",
"dijitMenuActive")},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();if(this.currentPopup)0<=g.indexOf(this._focusManager.activeStack,this.id)&&(h.set(this.focusedChild.focusNode,"tabIndex",this.tabIndex),this.focusedChild.focusNode.focus()),k.close(this.currentPopup),this.currentPopup=null;if(this.focusedChild)this.focusedChild._setSelected(!1),this.onItemUnhover(this.focusedChild),this.focusedChild=
null},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild)},_onBlur:function(){this._cleanUp();this.inherited(arguments)},_cleanUp:function(){this._closeChild();"undefined"==typeof this.isShowingNow&&this._markInactive()}})})},"dijit/_KeyNavContainer":function(){define("dojo/_base/kernel,./_Container,./_FocusMixin,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/_base/event,dojo/dom-attr,dojo/_base/lang".split(","),function(g,j,f,h,e,d,c,b,
i){return d("dijit._KeyNavContainer",[f,j],{tabIndex:"0",connectKeyNavHandlers:function(a,b){var c=this._keyNavCodes={},d=i.hitch(this,"focusPrev"),f=i.hitch(this,"focusNext");h.forEach(a,function(a){c[a]=d});h.forEach(b,function(a){c[a]=f});c[e.HOME]=i.hitch(this,"focusFirstChild");c[e.END]=i.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus")},startupKeyNavChildren:function(){g.deprecated("startupKeyNavChildren() call no longer needed",
"","2.0")},startup:function(){this.inherited(arguments);h.forEach(this.getChildren(),i.hitch(this,"_startupChild"))},addChild:function(a,b){this.inherited(arguments);this._startupChild(a)},focus:function(){this.focusFirstChild()},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,
-1),!0)},focusChild:function(a,b){a&&(this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild),a.set("tabIndex",this.tabIndex),a.focus(b?"end":"start"),this._set("focusedChild",a))},_startupChild:function(a){a.set("tabIndex","-1");this.connect(a,"_onFocus",function(){a.set("tabIndex",this.tabIndex)});this.connect(a,"_onBlur",function(){a.set("tabIndex","-1")})},_onContainerFocus:function(a){a.target!==this.domNode||this.focusedChild||(this.focusFirstChild(),b.set(this.domNode,
"tabIndex","-1"))},_onBlur:function(a){this.tabIndex&&b.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild=null;this.inherited(arguments)},_onContainerKeypress:function(a){if(!a.ctrlKey&&!a.altKey){var b=this._keyNavCodes[a.charOrCode];b&&(b(),c.stop(a))}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},_getNextFocusableChild:function(a,b){a&&(a=this._getSiblingOfChild(a,
b));for(var c=this.getChildren(),d=0;d<c.length;d++){a||(a=c[0<b?0:c.length-1]);if(a.isFocusable())return a;a=this._getSiblingOfChild(a,b)}return null}})})},"dijit/MenuItem":function(){define("dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/_base/kernel,dojo/sniff,./_Widget,./_TemplatedMixin,./_Contained,./_CssStateMixin,dojo/text!./templates/MenuItem.html".split(","),function(g,j,f,h,e,d,c,b,i,a,k){return g("dijit.MenuItem",[c,b,i,a],{templateString:k,baseClass:"dijitMenuItem",label:"",
_setLabelAttr:function(a){this.containerNode.innerHTML=a;this._set("label",a);"auto"===this.textDir&&this.applyTextDir(this.focusNode,this.label)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){a&&!("label"in this.params)&&this.set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);var a=this.id+"_text";f.set(this.containerNode,"id",a);this.accelKeyNode&&(f.set(this.accelKeyNode,"id",this.id+"_accel"),
a+=" "+this.id+"_accel");this.domNode.setAttribute("aria-labelledby",a);j.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==d("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(a){}},_onFocus:function(){this._setSelected(!0);this.getParent()._onItemFocus(this);this.inherited(arguments)},_setSelected:function(a){h.toggle(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){e.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.",
"","2.0");this.set("label",a)},setDisabled:function(a){e.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode.style.display=a?"":"none";this.accelKeyNode.innerHTML=a;f.set(this.containerNode,"colSpan",a?"1":"2");this._set("accelKey",a)},_setTextDirAttr:function(a){if(!this._created||
this.textDir!=a)this._set("textDir",a),this.applyTextDir(this.focusNode,this.label)}})})},"url:dijit/templates/MenuItem.html":'<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"/>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">\n\t\t<div data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\n\t\t\t<img src="${_blankGif}" alt="" class="dijitMenuExpand"/>\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\n\t\t</div>\n\t</td>\n</tr>\n',
"dijit/MenuSeparator":function(){define("dojo/_base/declare,dojo/dom,./_WidgetBase,./_TemplatedMixin,./_Contained,dojo/text!./templates/MenuSeparator.html".split(","),function(g,j,f,h,e,d){return g("dijit.MenuSeparator",[f,h,e],{templateString:d,buildRendering:function(){this.inherited(arguments);j.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"url:dijit/templates/MenuSeparator.html":'<tr class="dijitMenuSeparator">\n\t<td class="dijitMenuSeparatorIconCell">\n\t\t<div class="dijitMenuSeparatorTop"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n\t<td colspan="3" class="dijitMenuSeparatorLabelCell">\n\t\t<div class="dijitMenuSeparatorTop dijitMenuSeparatorLabel"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n</tr>',
"url:dijit/form/templates/Select.html":'<table class="dijit dijitReset dijitInline dijitLeft"\n\tdata-dojo-attach-point="_buttonNode,tableNode,focusNode" cellspacing=\'0\' cellpadding=\'0\'\n\trole="listbox" aria-haspopup="true"\n\t><tbody role="presentation"><tr role="presentation"\n\t\t><td class="dijitReset dijitStretch dijitButtonContents" role="presentation"\n\t\t\t><div class="dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point="containerNode,_popupStateNode" role="presentation"></div\n\t\t\t><div class="dijitReset dijitValidationContainer"\n\t\t\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t/></div\n\t\t\t><input type="hidden" ${!nameAttrSetting} data-dojo-attach-point="valueNode" value="${value}" aria-hidden="true"\n\t\t/></td\n\t\t><td class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\n\t\t\tdata-dojo-attach-point="titleNode" role="presentation"\n\t\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/></td\n\t></tr></tbody\n></table>\n',
"dijit/form/DropDownButton":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/query,../registry,../popup,./Button,../_Container,../_HasDropDown,dojo/text!./templates/DropDownButton.html".split(","),function(g,j,f,h,e,d,c,b,i){return g("dijit.form.DropDownButton",[d,c,b],{baseClass:"dijitDropDownButton",templateString:i,_fillContent:function(){if(this.srcNodeRef){var a=f("*",this.srcNodeRef);this.inherited(arguments,[a[0]]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&
this.dropDownContainer){var a=f("[widgetId]",this.dropDownContainer)[0];this.dropDown=h.byNode(a);delete this.dropDownContainer}this.dropDown&&e.hide(this.dropDown);this.inherited(arguments)}},isLoaded:function(){var a=this.dropDown;return!!a&&(!a.href||a.isLoaded)},loadDropDown:function(a){var b=this.dropDown,c=b.on("load",j.hitch(this,function(){c.remove();a()}));b.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"url:dijit/form/templates/DropDownButton.html":'<span class="dijit dijitReset dijitInline"\n\t><span class=\'dijitReset dijitInline dijitButtonNode\'\n\t\tdata-dojo-attach-event="ondijitclick:_onClick" data-dojo-attach-point="_buttonNode"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode"\n\t\t\trole="button" aria-haspopup="true" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon"\n\t\t\t\tdata-dojo-attach-point="iconNode"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tdata-dojo-attach-point="containerNode,_popupStateNode"\n\t\t\t\tid="${id}_label"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner"></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n\t\tdata-dojo-attach-point="valueNode" role="presentation"\n/></span>\n',
"JBrowse/Util":function(){define(["dojo/_base/array","dojox/lang/functional/object","dojox/lang/functional/fold"],function(g){var j;return j={dojof:dojox.lang.functional,is_ie:0<=navigator.appVersion.indexOf("MSIE"),is_ie6:0<=navigator.appVersion.indexOf("MSIE 6"),addCommas:function(f){for(var h=(f+"").split("."),f=h[0],h=1<h.length?"."+h[1]:"",e=/(\d+)(\d{3})/;e.test(f);)f=f.replace(e,"$1,$2");return f+h},fastDeclare:function(f){var h=f.constructor,e=function(){h.apply(this,arguments)};dojo.mixin(e.prototype,
f);return e},wheel:function(f){var h=0;if(!f)f=window.event;f.wheelDelta?(h=f.wheelDelta/120,window.opera&&(h=-h)):f.detail&&(h=-f.detail/3);return Math.round(h)},isRightButton:function(f){if(!f)f=window.event;return f.which?3==f.which:f.button?2==f.button:!1},getViewportWidth:function(){var f=0;document.documentElement&&document.documentElement.clientWidth?f=document.documentElement.clientWidth:document.body&&document.body.clientWidth?f=document.body.clientWidth:window.innerWidth&&(f=window.innerWidth-
18);return f},getViewportHeight:function(){var f=0;document.documentElement&&document.documentElement.clientHeight?f=document.documentElement.clientHeight:document.body&&document.body.clientHeight?f=document.body.clientHeight:window.innerHeight&&(f=window.innerHeight-18);return f},findNearest:function(f,h){for(var e=0,d=Math.abs(h-f[0]),c=1;c<f.length;c++)Math.abs(h-f[c])<d&&(e=c,d=Math.abs(h-f[c]));return e},fillTemplate:function(f,h){return f.replace(/\{([^}]+)\}/g,function(e,d){var c=h[d];return void 0!==
c?"function"==typeof c?c():c:"{"+d+"}"})},maybeLoad:function(f,h,e,d){h.state?"loaded"==h.state?e(h.data):"error"==h.state?d():"loading"==h.state&&(h.successCallbacks.push(e),d&&h.errorCallbacks.push(d)):(h.state="loading",h.successCallbacks=[e],h.errorCallbacks=[d],f=dojo.clone(f),f.load=function(c){h.state="loaded";h.data=c;for(var b=h.successCallbacks,d=0;d<b.length;d++)b[d](c)},f.error=function(c){console.error(""+c);h.state="error";for(var c=h.errorCallbacks,b=0;b<c.length;b++)c[b]()},dojo.xhrGet(f))},
deepUpdate:function(f,h){for(var e in h)if(e in f&&"object"==typeof h[e]&&"object"==typeof f[e])j.deepUpdate(f[e],h[e]);else if("undefined"==typeof f[e]||"undefined"!=typeof h[e])f[e]=h[e];return f},humanReadableNumber:function(f){var f=parseInt(f),h="";1E12<=f?(f/=1E12,h="T"):1E9<=f?(f/=1E9,h="G"):1E6<=f?(f/=1E6,h="M"):1E3<=f&&(f/=1E3,h="K");return(f.toFixed(2)+" "+h).replace(/0+ /," ").replace(/\. /," ")},resolveUrl:function(f,h){if(h.match(/\w+:\/\//))return h;if("/"==h.charAt(0))return f=f.match(/.*\/\/[^\/]*/),
(f?f[0]:"")+h;f=f.replace(/\?.*$/,"");f=f.substring(0,f.length-f.match(/[^\/]*$/)[0].length);if("."==h)return f;for(;f&&"../"==h.substring(0,3);)f=f.substring(0,f.length-f.match(/[^\/]*\/$/)[0].length),h=h.substring(3);return f+h},parseLocString:function(f){if("string"!=typeof f)return null;var f=dojo.trim(f),h=function(c){c=(c+"").replace(/\D/g,"");c=parseInt(c,10);return"number"==typeof c&&!isNaN(c)?c:null},e={},d;if(-1!=f.indexOf(":"))d=f.split(":",2),e.ref=dojo.trim(d[0]),f=d[1];if(d=f.match(/^\s*([\d,]+)\s*\.\.+\s*([\d,]+)/))e.start=
h(d[1])-1,e.end=h(d[2]);else if(d=f.match(/^\s*([\d,]+)/))e.end=e.start=h(d[1])-1;else return null;return e},basename:function(f,h){if(f&&f.match){var e=f.match(/[\/\\]([^\/\\]+)[\/\/\/]*$/);if((e=e?e[1]||void 0:f)&&h)h instanceof Array||(h=[h]),h=g.map(h,function(d){return d.replace(/([\.\?\+])/g,"\\$1")}),e=e.replace(RegExp(h.join("|")+"$","i"),"");return e}},assembleLocString:function(f){var h="",e={start:"number",end:"number",ref:"string",strand:"number"},d={},c;for(c in e)if(e[c]==typeof f[c]&&
("number"!=e[c]||!isNaN(f[c])))d[c]=f[c];if("ref"in d&&(h+=d.ref,d.start||d.end))h+=":";"start"in d&&(h+=(Math.round(d.start)+1).toFixed(0).toLocaleString(),"end"in d&&(h+=".."));"end"in d&&(h+=Math.round(d.end).toFixed(0).toLocaleString());"strand"in d&&(h+={1:" (+ strand)","-1":" (- strand)","0":" (no strand)"}[d.strand||""]||"");"extra"in f&&(h+=f.extra);return h},complement:function(){var f=/[ACGT]/gi,h={S:"S",w:"w",T:"A",r:"y",a:"t",N:"N",K:"M",x:"x",d:"h",Y:"R",V:"B",y:"r",M:"K",h:"d",k:"m",
C:"G",g:"c",t:"a",A:"T",n:"n",W:"W",X:"X",m:"k",v:"b",B:"V",s:"s",H:"D",c:"g",D:"H",b:"v",R:"Y",G:"C"},e=String.fromCharCode(160),d=function(c){return h[c]||e};return function(c){return c.replace(f,d)}}(),revcom:function(f){return j.complement(f).split("").reverse().join("")},assembleLocStringWithLength:function(f){return j.assembleLocString(f)+" ("+j.humanReadableNumber(f.length||f.end-f.start+1)+"b)"},matchRefSeqName:function(f,h){for(var e in h)if(h.hasOwnProperty(e)){var d=f.toUpperCase(),c=e.toUpperCase();
if(d==c||"CHR"+d==c||d=="CHR"+c)return h[e]}return null},debugHandler:function(f,h){return function(){var e=arguments;window.setTimeout(function(){var d=h;"string"==typeof d&&(d=f[d]);d.apply(f,e)},1)}},ucFirst:function(f){return"string"!=typeof f?void 0:f.charAt(0).toUpperCase()+f.slice(1)},uniq:function(f,h){var h=h||function(c){return""+c},e=[],d={};dojo.forEach(f,function(c){var b=h(c);d[h(c)]||e.push(c);d[b]=!0});return e}}});if(!Array.prototype.reduce)Array.prototype.reduce=function(g){var j=
this.length;if("function"!=typeof g)throw new TypeError;if(0==j&&1==arguments.length)throw new TypeError;var f=0;if(2<=arguments.length)var h=arguments[1];else{do{if(f in this){h=this[f++];break}if(++f>=j)throw new TypeError;}while(1)}for(;f<j;f++)f in this&&(h=g.call(null,h,this[f],f,this));return h};if(!Array.prototype.map)Array.prototype.map=function(g,j){if(void 0===this||null===this)throw new TypeError;var f=Object(this),h=f.length>>>0;if("function"!==typeof g)throw new TypeError;for(var e=Array(h),
d=0;d<h;d++)d in f&&(e[d]=g.call(j,f[d],d,f));return e};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(g){if(void 0===this||null===this)throw new TypeError;var j=Object(this),f=j.length>>>0;if(0===f)return-1;var h=0;0<arguments.length&&(h=Number(arguments[1]),h!==h?h=0:0!==h&&h!==1/0&&h!==-(1/0)&&(h=(0<h||-1)*Math.floor(Math.abs(h))));if(h>=f)return-1;for(h=0<=h?h:Math.max(f-Math.abs(h),0);h<f;h++)if(h in j&&j[h]===g)return h;return-1}},"dojox/lang/functional/object":function(){define(["dojo/_base/kernel",
"dojo/_base/lang","./lambda"],function(g,j,f){var h={};j.mixin(f,{keys:function(e){var d=[],c;for(c in e)c in h||d.push(c);return d},values:function(e){var d=[],c;for(c in e)c in h||d.push(e[c]);return d},filterIn:function(e,d,c){var c=c||g.global,d=f.lambda(d),b={},i,a;for(a in e)a in h||(i=e[a],d.call(c,i,a,e)&&(b[a]=i));return b},forIn:function(e,d,c){var c=c||g.global,d=f.lambda(d),b;for(b in e)b in h||d.call(c,e[b],b,e);return c},mapIn:function(e,d,c){var c=c||g.global,d=f.lambda(d),b={},i;for(i in e)i in
h||(b[i]=d.call(c,e[i],i,e));return b}});return f})},"dojox/lang/functional/lambda":function(){define(["../..","dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(g,j,f,h){var e=f.getObject("lang.functional",!0,g),d={},c=1<"ab".split(/a*/).length?String.prototype.split:function(a){var b=this.split.call(this,a);(a=a.exec(this))&&0==a.index&&b.unshift("");return b},b=function(a){var b=[],d=c.call(a,/\s*->\s*/m);if(1<d.length)for(;d.length;)a=d.pop(),b=d.pop().split(/\s*,\s*|\s+/m),d.length&&
d.push("(function("+b+"){return ("+a+")})");else if(a.match(/\b_\b/))b=["_"];else{var d=a.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),e=a.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(d||e)d&&(b.push("$1"),a="$1"+a),e&&(b.push("$2"),a+="$2");else{var d=a.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,
"").match(/([a-z_$][a-z_$\d]*)/gi)||[],f={};h.forEach(d,function(a){a in f||(b.push(a),f[a]=1)})}}return{args:b,body:a}},i=function(a){return a.length?function(){var b=a.length-1,c=e.lambda(a[b]).apply(this,arguments);for(--b;0<=b;--b)c=e.lambda(a[b]).call(this,c);return c}:function(a){return a}};f.mixin(e,{rawLambda:function(a){return b(a)},buildLambda:function(a){a=b(a);return"function("+a.args.join(",")+"){return ("+a.body+");}"},lambda:function(a){if("function"==typeof a)return a;if(a instanceof
Array)return i(a);if(a in d)return d[a];a=b(a);return d[a]=new Function(a.args,"return ("+a.body+");")},clearLambdaCache:function(){d={}}});return e})},"dojox/main":function(){define(["dojo/_base/kernel"],function(g){return g.dojox})},"dojox/lang/functional/fold":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(g,j,f,h){var e={};g.mixin(h,{foldl:function(d,c,b,i){"string"==typeof d&&(d=d.split(""));var i=i||f.global,c=h.lambda(c),a,k;if(g.isArray(d))for(a=
0,k=d.length;a<k;b=c.call(i,b,d[a],a,d),++a);else if("function"==typeof d.hasNext&&"function"==typeof d.next)for(a=0;d.hasNext();b=c.call(i,b,d.next(),a++,d));else for(a in d)a in e||(b=c.call(i,b,d[a],a,d));return b},foldl1:function(d,c,b){"string"==typeof d&&(d=d.split(""));var b=b||f.global,c=h.lambda(c),i,a,k;if(g.isArray(d)){i=d[0];for(a=1,k=d.length;a<k;i=c.call(b,i,d[a],a,d),++a);}else if("function"==typeof d.hasNext&&"function"==typeof d.next){if(d.hasNext()){i=d.next();for(a=1;d.hasNext();i=
c.call(b,i,d.next(),a++,d));}}else for(a in k=!0,d)a in e||(k?(i=d[a],k=!1):i=c.call(b,i,d[a],a,d));return i},foldr:function(d,c,b,e){"string"==typeof d&&(d=d.split(""));for(var e=e||f.global,c=h.lambda(c),a=d.length;0<a;--a,b=c.call(e,b,d[a],a,d));return b},foldr1:function(d,c,b){"string"==typeof d&&(d=d.split(""));for(var b=b||f.global,c=h.lambda(c),e=d.length,a=d[e-1],e=e-1;0<e;--e,a=c.call(b,a,d[e],e,d));return a},reduce:function(d,c,b){return 3>arguments.length?h.foldl1(d,c):h.foldl(d,c,b)},
reduceRight:function(d,c,b){return 3>arguments.length?h.foldr1(d,c):h.foldr(d,c,b)},unfold:function(d,c,b,e,a){for(var a=a||f.global,c=h.lambda(c),b=h.lambda(b),d=h.lambda(d),k=[];!d.call(a,e);k.push(c.call(a,e)),e=b.call(a,e));return k}})})},"JBrowse/Store/LazyTrie":function(){define(["dojo/_base/declare","JBrowse/Util"],function(g,j){return g("JBrowse.Store.LazyTrie",null,{constructor:function(f,h){this.rootURL=f;this.chunkTempl=h;var e=this;dojo.xhrGet({url:f,handleAs:"json",load:function(d){if(d)e.root=
d,e.extra=d[0],e.deferred&&(e.deferred.callee.apply(e,e.deferred),delete e.deferred)}})},chunkUrl:function(f){f=this.chunkTempl.replace("{Chunk}",f);return j.resolveUrl(this.rootURL,f)},pathToPrefix:function(f){var h=this.root,e="",d=0;a:for(;d<f.length;d++){switch(typeof h[f[d]][0]){case "string":e+=h[f[d]][0];break;case "number":e+=h[f[d]][1];break a}h=h[f[d]]}return e},valuesFromPrefix:function(f,h){var e=this;this.findNode(f,function(d,c){h(e.valuesFromNode(c))})},mappingsFromPrefix:function(f,
h){var e=this;this.findNode(f,function(d,c){h(e.mappingsFromNode(d,c))})},mappingsFromNode:function(f,h){var e=[];null!==h[1]&&e.push([f,h[1]]);for(var d=2;d<h.length;d++)"string"==typeof h[d][0]&&(e=e.concat(this.mappingsFromNode(f+h[d][0],h[d])));return e},valuesFromNode:function(f){var h=[];null!==f[1]&&h.push(f[1]);for(var e=2;e<f.length;e++)h=h.concat(this.valuesFromNode(f[e]));return h},exactMatch:function(f,h,e){this.findNode(f,function(d,c){d.toLowerCase()==f.toLowerCase()&&c[1]&&h(c[1])},
e||function(){})},findNode:function(f,h,e){var d=this;this.findPath(f,function(c){for(var b=d.root,e=0;e<c.length;e++)b=b[c[e]];c=d.pathToPrefix(c);h(c,b)},e||function(){})},findPath:function(f,h,e){e=e||function(){};if(this.root)for(var f=f.toLowerCase(),d=this.root,c=0,b,i=[];;){b=this.binarySearch(d,f.charAt(c));if(0>b){e();break}i.push(b);if("number"==typeof d[b][0]){var a=this;dojo.xhrGet({url:this.chunkUrl(this.pathToPrefix(i)),handleAs:"json",load:function(c){d[b]=c;a.findPath(f,h)}});break}d=
d[b];if(f.substr(c,d[0].length)!=d[0].substr(0,Math.min(d[0].length,f.length-c))){e();break}c+=d[0].length;if(c>=f.length){h(i);break}}else this.deferred=arguments},binarySearch:function(f,h){for(var e=2,d=f.length-1,c,b;e<=d;){c=e+d>>>1;switch(typeof f[c][0]){case "string":b=f[c][0].charAt(0);break;case "number":b=f[c][1].charAt(0)}if(b<h)e=c+1;else if(b>h)d=c-1;else return c}return-(e+1)}})})},"JBrowse/Store/Names/LazyTrieDojoData":function(){define(["dojo/_base/declare","dojo/_base/array","JBrowse/Util",
"JBrowse/Model/Location"],function(g,j,f,h){return g(null,{constructor:function(e){if(!e.namesTrie)throw"must provide a namesTrie argument";this.namesTrie=e.namesTrie;this.resultLimit=e.resultLimit||15;this.tooManyMatchesMessage=e.tooManyMatchesMessage||"(too many matches to display)";var d=this.stopPrefixes={};e.stopPrefixes&&dojo.forEach("string"==typeof e.stopPrefixes?[e.stopPrefixes]:e.stopPrefixes,function(c){for(;c.length;)d[c]=!0,c=c.substr(0,c.length-1)});this.nodeText=function(c){this.nodeText=
"number"==typeof c[1][0][0]?function(b){return b[0]}:function(b){return b[1][0][0]};return this.nodeText(c)}},getFeatures:function(){return{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0}},getIdentity:function(){},fetch:function(e){var d=Math.min(this.resultLimit,Math.max(0,e.count||Infinity)),c=e.scope||dojo.global,b=!1;e.abort=function(){var a=e.abort||function(){};return function(){b=!0;a.call(c,e)}}.call(this);if(!e.store)e.store=this;e.onBegin&&e.onBegin.call(c,0,e);var f=(e.query.name||
"").toString().replace(/\*$/,"");this.stopPrefixes[f]?e.onComplete&&e.onComplete.call(c,[],e):this.namesTrie.mappingsFromPrefix(f,dojo.hitch(this,function(a){var f=[];if(!b){var i=a[0]&&a[0][1]&&a[0][1][0]&&"string"==typeof a[0][1][0][0];dojo.some(a,function(a){if(d--){var b=this.nodeText(a);j.forEach(a[1],function(a){a=new h({ref:a[i?3:2],start:parseInt(a[i?4:3]),end:parseInt(a[i?5:4]),tracks:[this.namesTrie.extra[a[i?1:0]]]});f.push({name:b,location:a})},this)}return 0>d},this);0>d&&f.push({name:this.tooManyMatchesMessage,
hitLimit:!0});e.sort&&f.sort(dojo.data.util.sorter.createSortFunction(e.sort,this));!b&&e.onItem&&dojo.forEach(f,function(a){b||e.onItem.call(c,a,e)});!b&&e.onComplete&&e.onComplete.call(c,f,e)}}));return e},getValue:function(e,d,c){e=e[d];return"undefined"==typeof e?c:e},getValues:function(e,d){var c=[e[d]];return"undefined"==typeof c[0]?[]:c},getAttributes:function(e){return f.dojof.keys(e)},hasAttribute:function(e,d){return e.hasOwnProperty(d)},containsValue:function(e,d,c){return e[d]==c},isItem:function(e){return"object"==
typeof e&&"string"==typeof e.label},isItemLoaded:function(){return!0},loadItem:function(){},close:function(){},getLabel:function(e){return this.getValue(e,"name",void 0)},getLabelAttributes:function(){return["name"]},getIdentity:function(e){return this.getLabel(e)}})})},"JBrowse/Model/Location":function(){define(["JBrowse/Util"],function(g){return g.fastDeclare({constructor:function(g){if(g)this.ref=g.ref,this.start=g.start,this.end=g.end,this.strand=g.strand,this.tracks=g.tracks},toString:function(){return g.assembleLocString(this)},
localeCompare:function(g){return this.toString().localeCompare(g.toString())}})})},"dojo/store/DataStore":function(){define("../_base/lang,../_base/declare,../_base/Deferred,../_base/array,./util/QueryResults,./util/SimpleQueryEngine".split(","),function(g,j,f,h,e,d){return j("dojo.store.DataStore",null,{target:"",constructor:function(c){g.mixin(this,c);if(!1 in c){var b;try{b=this.store.getIdentityAttributes()}catch(d){}this.idProperty=!b||!idAttributes[0]||this.idProperty}c=this.store.getFeatures();
if(!c["dojo.data.api.Read"])this.get=null;if(!c["dojo.data.api.Identity"])this.getIdentity=null;if(!c["dojo.data.api.Write"])this.put=this.add=null},idProperty:"id",store:null,queryEngine:d,_objectConverter:function(c){function b(c){for(var e={},f=d.getAttributes(c),h=0;h<f.length;h++){var g=f[h],j=d.getValues(c,g);if(1<j.length){for(g=0;g<j.length;g++){var q=j[g];"object"==typeof q&&d.isItem(q)&&(j[g]=b(q))}q=j}else q=d.getValue(c,g),"object"==typeof q&&d.isItem(q)&&(q=b(q));e[f[h]]=q}!(a in e)&&
d.getIdentity&&(e[a]=d.getIdentity(c));return e}var d=this.store,a=this.idProperty;return function(a){return c(b(a))}},get:function(c){var b,d,a=new f;this.store.fetchItemByIdentity({identity:c,onItem:this._objectConverter(function(c){a.resolve(b=c)}),onError:function(b){a.reject(d=b)}});if(b)return b;if(d)throw d;return a.promise},put:function(c,b){var d=b&&"undefined"!=typeof b.id||this.getIdentity(c),a=this.store,e=this.idProperty;"undefined"==typeof d?(a.newItem(c),a.save()):a.fetchItemByIdentity({identity:d,
onItem:function(b){if(b)for(var d in c)d!=e&&a.getValue(b,d)!=c[d]&&a.setValue(b,d,c[d]);else a.newItem(c);a.save()}})},remove:function(c){var b=this.store;this.store.fetchItemByIdentity({identity:c,onItem:function(c){b.deleteItem(c);b.save()}})},query:function(c,b){var d,a=new f(function(){d.abort&&d.abort()});a.total=new f;var k=this._objectConverter(function(a){return a});d=this.store.fetch(g.mixin({query:c,onBegin:function(b){a.total.resolve(b)},onComplete:function(b){a.resolve(h.map(b,k))},onError:function(b){a.reject(b)}},
b));return e(a)},getIdentity:function(c){return c[this.idProperty]}})})},"JBrowse/Store/Names/Hash":function(){define("dojo/_base/declare,dojo/_base/array,dojo/store/util/QueryResults,JBrowse/Util,JBrowse/Store/Hash,JBrowse/Model/Location".split(","),function(g,j,f,h,e,d){return g(e,{constructor:function(c){this.tooManyMatchesMessage=c.tooManyMatchesMessage||"(too many matches to display)";var b=this.stopPrefixes={};c.stopPrefixes&&dojo.forEach("string"==typeof c.stopPrefixes?[c.stopPrefixes]:c.stopPrefixes,
function(c){for(;c.length;)b[c]=!0,c=c.substr(0,c.length-1)})},_nameRecordToItem:function(c){if(c.hitLimit)return{name:this.tooManyMatchesMessage,hitLimit:!0};var b={};if("object"==typeof c){b.name=c[0];var e=this._findTrackConfig(((this.meta||{}).track_names||{})[c[1]]);b.location=new d({ref:c[3],start:parseInt(c[4]),end:parseInt(c[5]),tracks:[e]})}else b.name=c;return b},_findTrackConfig:function(c){if(!c)return null;var b=null;j.some(this.browser.config.tracks,function(d){return d.label==c?(b=
d,!0):!1});return b},_makeResults:function(c){var c=j.map(c,dojo.hitch(this,"_nameRecordToItem")).sort(function(a,b){return a.name.localeCompare(b.name)||a.location.localeCompare(b.location)}),b,d,c=j.filter(c,function(a){if(a.hitLimit){d=a;if(!d.label)d.label=d.name||"too many matches";return!1}if(b&&b.name==a.name)return b.label=b.name+' <span class="multipleLocations">multiple locations</span>',b.multipleLocations?b.multipleLocations.push(a.location):(b.multipleLocations=[b.location,a.location],
delete b.location),!1;b=a;b.label=b.name+(b.location?' <span class="locString">'+b.location+"</span>":"");return!0});d&&c.push(d);return f(c)},query:function(c){var b=this,c=(c.name||"").toString();this.meta.lowercase_keys&&(c=c.toLowerCase());var d=/\*$/;return d.test(c)?(c=c.replace(d,""),this._getEntry(c).then(function(a){a=a||{};return b._makeResults((a.exact||[]).concat(a.prefix||[]))})):this._getEntry(c).then(function(a){return b._makeResults((a||{}).exact||[])})},get:function(c){this.meta.lowercase_keys&&
(c=c.toLowerCase());return this._getEntry(c).then(function(b){return(b=(b.exact||[])[0])?this._nameRecordToItem(b):null})},_getEntry:function(c){return this._getBucket(c).then(function(b){return b[c]})}})})},"JBrowse/Store/Hash":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/Deferred,dojo/store/JsonRest,dojo/store/util/QueryResults,JBrowse/Digest/Crc32".split(","),function(g,j,f,h,e,d){return g(null,{constructor:function(c){var b=/\/$/.test(c.url)?c.url:c.url+"/";this.bucketStore=
new h({target:b});this.meta={};this.browser=c.browser;this.ready=this._readMeta()},_readMeta:function(){var c=this;return this.bucketStore.get("meta.json").then(function(b){dojo.mixin(c.meta,b||{});c.meta.hash_hex_characters=Math.ceil(c.meta.hash_bits/4)})},query:function(c){return this.get((c.name||"").toString()).then(function(b){return e((b||{}).exact||[])})},get:function(c){return this._getBucket(c).then(function(b){return b[c]})},_getBucket:function(c){var b=this,d=new f;this.ready.then(function(){var a=
b._hash(c);b.bucketStore.get(b._hexToDirPath(a)).then(function(a){d.resolve(a)})});return d},_hexToDirPath:function(c){for(;8>c.length;)c="0"+c;for(var c=c.substr(8-this.meta.hash_hex_characters),b=[],d=0;d<c.length;d+=3)b.push(c.substring(d,d+3));return b.join("/")+".json"},_hash:function(c){return d.objectFingerprint(c).toString(16).toLowerCase().replace("-","n")},getIdentity:function(c){return c.id}})})},"dojo/store/JsonRest":function(){define(["../_base/xhr","../_base/lang","../json","../_base/declare",
"./util/QueryResults"],function(g,j,f,h,e){return h("dojo.store.JsonRest",null,{constructor:function(d){this.headers={};h.safeMixin(this,d)},headers:{},target:"",idProperty:"id",get:function(d,c){var c=c||{},b=j.mixin({Accept:this.accepts},this.headers,c.headers||c);return g("GET",{url:this.target+d,handleAs:"json",headers:b})},accepts:"application/javascript, application/json",getIdentity:function(d){return d[this.idProperty]},put:function(d,c){var c=c||{},b="id"in c?c.id:this.getIdentity(d),e="undefined"!=
typeof b;return g(e&&!c.incremental?"PUT":"POST",{url:e?this.target+b:this.target,postData:f.stringify(d),handleAs:"json",headers:j.mixin({"Content-Type":"application/json",Accept:this.accepts,"If-Match":!0===c.overwrite?"*":null,"If-None-Match":!1===c.overwrite?"*":null},this.headers,c.headers)})},add:function(d,c){c=c||{};c.overwrite=!1;return this.put(d,c)},remove:function(d,c){c=c||{};return g("DELETE",{url:this.target+d,headers:j.mixin({},this.headers,c.headers)})},query:function(d,c){var c=
c||{},b=j.mixin({Accept:this.accepts},this.headers,c.headers);if(0<=c.start||0<=c.count)b.Range=b["X-Range"]="items="+(c.start||"0")+"-"+("count"in c&&Infinity!=c.count?c.count+(c.start||0)-1:"");var f=-1<this.target.indexOf("?");d&&"object"==typeof d&&(d=(d=g.objectToQuery(d))?(f?"&":"?")+d:"");if(c&&c.sort){for(var a=this.sortParam,d=d+((d||f?"&":"?")+(a?a+"=":"sort(")),f=0;f<c.sort.length;f++)var h=c.sort[f],d=d+((0<f?",":"")+(h.descending?"-":"+")+encodeURIComponent(h.attribute));a||(d+=")")}var o=
g("GET",{url:this.target+(d||""),handleAs:"json",headers:b});o.total=o.then(function(){var a=o.ioArgs.xhr.getResponseHeader("Content-Range");return a&&(a=a.match(/\/(.*)/))&&+a[1]});return e(o)}})})},"JBrowse/Digest/Crc32":function(){define([],function(){var g={crc32Table:"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",
stringToBytes:function(g){for(var f,h,e=[],d=0;d<g.length;d++){f=g.charCodeAt(d);h=[];do h.push(f&255),f>>=8;while(f);e=e.concat(h.reverse())}return e},crc32:function(j,f){var h=g.stringToBytes(j);f==window.undefined&&(f=0);for(var e=0,e=0,d=g.crc32Table,f=f^-1,c=0,b=h.length;c<b;c++)e=(f^h[c])&255,e="0x"+d.substr(9*e,8),f=f>>>8^e;f^=-1;0>f&&(f+=4294967296);return f},objectFingerprint:function(j){var f=0;if("object"==typeof j)for(var h in j)f=g.crc32(""+g.objectFingerprint(h),f),f=g.crc32(""+g.objectFingerprint(j[h]),
f);else f=g.crc32(""+j,f);return f}};return g})},"JBrowse/GenomeView":function(){define("dojo/_base/declare,dojo/_base/array,JBrowse/Util,dojo/dnd/move,dojo/dnd/Source,dijit/focus,JBrowse/View/Track/LocationScale,JBrowse/View/Track/GridLines,JBrowse/BehaviorManager,JBrowse/View/Animation/Zoomer,JBrowse/View/Animation/Slider".split(","),function(g,j,f,h,e,d,c,b,i,a,k){var o=f.dojof,p=g(h.constrainedMoveable,{constructor:function(){this.constraints=function(){var a=dojo.marginBox(this.node.parentNode);
a.t=0;return a}}}),g=function(a,d,f,h,k){this.browser=a;this.elem=d;this.posHeight=this.calculatePositionLabelHeight(d);this.topSpace=1.5*this.posHeight;this.maxPxPerBp=20;this.ref=h;this.pxPerBp=k;this.stripeWidth=f;this.scrollContainer=dojo.create("div",{id:"container",style:{position:"absolute",left:"0px",top:"0px"}},d);this._renderVerticalScrollBar();this.zoomContainer=document.createElement("div");this.zoomContainer.id="zoomContainer";this.zoomContainer.style.cssText="position: absolute; left: 0px; top: 0px; height: 100%;";
this.scrollContainer.appendChild(this.zoomContainer);this.outerTrackContainer=document.createElement("div");this.outerTrackContainer.className="trackContainer outerTrackContainer";this.outerTrackContainer.style.cssText="height: 100%;";this.zoomContainer.appendChild(this.outerTrackContainer);this.trackContainer=document.createElement("div");this.trackContainer.className="trackContainer innerTrackContainer draggable";this.trackContainer.style.cssText="height: 100%;";this.outerTrackContainer.appendChild(this.trackContainer);
this.regularStripe=f;this.fullZoomStripe=f/10*this.maxPxPerBp;this.overview=this.browser.overviewDiv;this.overviewBox=dojo.marginBox(this.overview);this.tracks=[];this.uiTracks=[];this.trackIndices={};this.sizeInit();this.offset=0;this.maxLeft=this.bpToPx(this.ref.end+1)-this.getWidth();this.minLeft=this.bpToPx(this.ref.start);this.trackPadding=20;this.drawMargin=0.2;this.slideTimeMultiple=0.8;this.trackHeights=[];this.trackTops=[];this.waitElems=dojo.filter([dojo.byId("moveLeft"),dojo.byId("moveRight"),
dojo.byId("zoomIn"),dojo.byId("zoomOut"),dojo.byId("bigZoomIn"),dojo.byId("bigZoomOut"),document.body,d],function(a){return a});this.prevCursors=[];this.locationThumb=document.createElement("div");this.locationThumb.className="locationThumb";this.overview.appendChild(this.locationThumb);this.locationThumbMover=new p(this.locationThumb,{area:"margin",within:!0});dojo.isIE?(this.x=-parseInt(this.scrollContainer.style.left),this.y=-parseInt(this.scrollContainer.style.top),this.rawSetX=function(a){this.scrollContainer.style.left=
-a+"px";this.x=a},this.rawSetY=function(a){this.scrollContainer.style.top=-a+"px";this.y=a}):(this.x=this.elem.scrollLeft,this.y=this.elem.scrollTop,this.rawSetX=function(a){this.x=this.elem.scrollLeft=a},this.rawSetY=function(a){this.y=this.elem.scrollTop=a});a=document.createElement("div");a.className="track static_track rubberBandAvailable";a.style.height=this.posHeight+"px";a.id="static_track";this.scaleTrackDiv=a;this.staticTrack=new c({label:"static_track",labelClass:"pos-label",posHeight:this.posHeight});
this.staticTrack.setViewInfo(this,function(){},this.stripeCount,this.scaleTrackDiv,void 0,this.stripePercent,this.stripeWidth,this.pxPerBp,this.trackPadding);this.zoomContainer.appendChild(this.scaleTrackDiv);this.waitElems.push(this.scaleTrackDiv);a=document.createElement("div");a.className="track";a.style.cssText="top: 0px; height: 100%;";a.id="gridtrack";d=new b;d.setViewInfo(this,function(){},this.stripeCount,a,void 0,this.stripePercent,this.stripeWidth,this.pxPerBp,this.trackPadding);this.trackContainer.appendChild(a);
this.uiTracks=[this.staticTrack,d];this.trackDndWidget=new e(this.trackContainer,{accept:["track"],withHandles:!0,creator:dojo.hitch(this,function(a,b){return{data:a,type:["track"],node:"avatar"==b?dojo.create("div",{innerHTML:a.key||a.label,className:"track-label dragging"}):this.renderTrack(a)}})});this.browser.subscribe("/dnd/drop",dojo.hitch(this,function(a,b,c,d){this.updateTrackList();d.node===this.trackContainer&&this.browser.publish("/jbrowse/v1/v/tracks/show",dojo.filter(dojo.map(b,function(a){return a.track&&
a.track.config}),function(a){return a}))}));this.browser.subscribe("/jbrowse/v1/c/tracks/show",dojo.hitch(this,"showTracks"));this.browser.subscribe("/jbrowse/v1/c/tracks/hide",dojo.hitch(this,"hideTracks"));this.browser.subscribe("/jbrowse/v1/c/tracks/replace",dojo.hitch(this,"replaceTracks"));this.browser.subscribe("/jbrowse/v1/c/tracks/delete",dojo.hitch(this,"hideTracks"));dojo.forEach(this.uiTracks,function(a){a.showRange(0,this.stripeCount-1,Math.round(this.pxToBp(this.offset)),Math.round(this.stripeWidth/
this.pxPerBp),this.pxPerBp)},this);this.zoomContainer.style.paddingTop=this.topSpace+"px";this.addOverviewTrack(new c({label:"overview_loc_track",labelClass:"overview-pos",posHeight:this.overviewPosHeight}));this.showFine();this.showCoarse();this.behaviorManager=new i({context:this,behaviors:this._behaviors()});this.behaviorManager.initialize()};g.prototype.visibleRegion=function(){return{ref:this.ref.name,start:this.minVisible(),end:this.maxVisible()}};g.prototype.visibleRegionLocString=function(){return f.assembleLocString(this.visibleRegion())};
g.prototype._renderVerticalScrollBar=function(){var a=dojo.create("div",{className:"vertical_scrollbar",style:{position:"fixed",right:"0px",bottom:"0px",height:"100%",width:"10px",zIndex:1E3}},this.elem),b=dojo.create("div",{className:"vertical_position_marker",style:{position:"absolute",height:"100%"}},a);this.verticalScrollBar={container:a,positionMarker:b}};g.prototype._updateVerticalScrollBar=function(a){if("number"==typeof a.height){this.verticalScrollBar.container.style.height=a.height+(this.staticTrack?
-this.staticTrack.div.offsetHeight:0)+"px";var b=100*(a.height/(this.containerHeight||1));this.verticalScrollBar.positionMarker.style.height=0.5<b?b+"%":"1px";this.verticalScrollBar.container.style.display=0.98<a.height/(this.containerHeight||1)?"none":"block"}if("number"==typeof a.y||"number"==typeof a.height)this.verticalScrollBar.positionMarker.style.top=(100*((a.y||this.getY()||0)/(this.containerHeight||1))||0)+"%"};g.prototype.visibleTracks=function(){return this.tracks};g.prototype.visibleTrackNames=
function(){return dojo.map(this.visibleTracks(),function(a){return a.name})};g.prototype._behaviors=function(){return{always:{apply_on_init:!0,apply:function(){var a=[];a.push(dojo.connect(this.overview,"mousedown",dojo.hitch(this,"startRubberZoom",dojo.hitch(this,"overview_absXtoBp"),this.overview,this.overview)));a.push(dojo.connect(this.scrollContainer,"mousewheel",this,"wheelScroll",!1),dojo.connect(this.scrollContainer,"DOMMouseScroll",this,"wheelScroll",!1),dojo.connect(this.scaleTrackDiv,"mousedown",
dojo.hitch(this,"startRubberZoom",dojo.hitch(this,"absXtoBp"),this.scrollContainer,this.scaleTrackDiv)),dojo.connect(this.outerTrackContainer,"dblclick",this,"doubleClickZoom"),dojo.connect(this.locationThumbMover,"onMoveStop",this,"thumbMoved"),dojo.connect(this.overview,"onclick",this,"overviewClicked"),dojo.connect(this.scaleTrackDiv,"onclick",this,"scaleClicked"),dojo.connect(this.scaleTrackDiv,"mouseover",this,"scaleMouseOver"),dojo.connect(this.scaleTrackDiv,"mouseout",this,"scaleMouseOut"),
dojo.connect(this.scaleTrackDiv,"mousemove",this,"scaleMouseMove"),dojo.connect(document.body,"onmouseleave",this,function(){this.behaviorManager.swapBehaviors("shiftMouse","normalMouse")}),dojo.connect(document.body,"onmouseenter",this,function(a){a.shiftKey&&this.behaviorManager.swapBehaviors("normalMouse","shiftMouse")}),dojo.connect(document.body,"onkeyup",this,function(a){a.keyCode==dojo.keys.SHIFT&&this.behaviorManager.swapBehaviors("shiftMouse","normalMouse")}),dojo.connect(document.body,"onkeydown",
this,function(a){a.keyCode==dojo.keys.SHIFT&&this.behaviorManager.swapBehaviors("normalMouse","shiftMouse")}),dojo.connect(document.body,"onkeypress",this,function(a){if(!d.curNode){var b=this;if(a.keyCode==dojo.keys.LEFT_ARROW||a.keyCode==dojo.keys.RIGHT_ARROW){var c=a.keyCode==dojo.keys.LEFT_ARROW?-40:40;a.shiftKey&&(c*=5);this.setX(this.getX()+c);if(!this._keySlideTimeout)this._keySlideTimeout=window.setTimeout(function(){b.afterSlide();delete b._keySlideTimeout},300)}else if(a.keyCode==dojo.keys.DOWN_ARROW||
a.keyCode==dojo.keys.UP_ARROW)if(a.shiftKey)this[a.keyCode==dojo.keys.UP_ARROW?"zoomIn":"zoomOut"](a,0.5,a.altKey?2:1);else c=a.keyCode==dojo.keys.UP_ARROW?-40:40,this.setY(this.getY()+c)}}),dojo.connect(this.scrollContainer,"onclick",this,function(){d.curNode&&d.curNode.blur()}));return a}},normalMouse:{apply_on_init:!0,apply:function(){return[dojo.connect(this.outerTrackContainer,"mousedown",this,"startMouseDragScroll"),dojo.connect(this.verticalScrollBar.container,"mousedown",this,"startVerticalMouseDragScroll")]}},
shiftMouse:{apply:function(){var a=dojo.hitch(this,function(a){this.rubberbanding||this.drawVerticalPositionLine(this.outerTrackContainer,a)});dojo.removeClass(this.trackContainer,"draggable");dojo.addClass(this.trackContainer,"rubberBandAvailable");return[dojo.connect(this.outerTrackContainer,"mousedown",dojo.hitch(this,"startRubberZoom",dojo.hitch(this,"absXtoBp"),this.scrollContainer,this.scaleTrackDiv)),dojo.connect(this.outerTrackContainer,"onclick",this,"scaleClicked"),dojo.connect(this.outerTrackContainer,
"mouseover",a),dojo.connect(this.outerTrackContainer,"mousemove",a)]},remove:function(a,b){this.clearBasePairLabels();this.clearVerticalPositionLine();dojo.forEach(b,dojo.disconnect,dojo);dojo.removeClass(this.trackContainer,"rubberBandAvailable");dojo.addClass(this.trackContainer,"draggable")}},mouseDragScrolling:{apply:function(){return[dojo.connect(document.body,"mouseup",this,"dragEnd"),dojo.connect(document.body,"mousemove",this,"dragMove"),dojo.connect(document.body,"mouseout",this,"checkDragOut")]}},
verticalMouseDragScrolling:{apply:function(){return[dojo.connect(document.body,"mouseup",this,"dragEnd"),dojo.connect(document.body,"mousemove",this,"verticalDragMove"),dojo.connect(document.body,"mouseout",this,"checkDragOut")]}},mouseRubberBandZooming:{apply:function(){return[dojo.connect(document.body,"mouseup",this,"rubberExecute"),dojo.connect(document.body,"mousemove",this,"rubberMove"),dojo.connect(document.body,"mouseout",this,"rubberCancel"),dojo.connect(window,"onkeydown",this,function(a){a.keyCode!==
dojo.keys.SHIFT&&this.rubberCancel(a)})]}}}};g.prototype.calculatePositionLabelHeight=function(a){var b=document.createElement("div");b.className="pos-label";b.style.visibility="hidden";b.appendChild(document.createTextNode("42"));a.appendChild(b);var c=b.clientHeight;a.removeChild(b);return c};g.prototype.wheelScroll=function(a){this.setY(this.getY()-60*f.wheel(a));this.wheelScrollTimeout&&window.clearTimeout(this.wheelScrollTimeout);this.wheelScrollTimeout=window.setTimeout(dojo.hitch(this,function(){this.showVisibleBlocks(!0);
this.wheelScrollTimeout=null},100));dojo.stopEvent(a)};g.prototype.getX=function(){return this.x||0};g.prototype.getY=function(){return this.y||0};g.prototype.getHeight=function(){return this.elem.offsetHeight};g.prototype.getWidth=function(){return this.elem.offsetWidth};g.prototype.clampX=function(a){return Math.round(Math.max(Math.min(this.maxLeft-this.offset,a||0),this.minLeft-this.offset))};g.prototype.clampY=function(a){return Math.round(Math.min(Math.max(0,a||0),this.containerHeight-this.getHeight()))};
g.prototype.setX=function(a){a=this.clampX(a);this.rawSetX(a);this.updateStaticElements({x:a});this.showFine();return a};g.prototype.setY=function(a){a=this.clampY(a);this.rawSetY(a);this.updateStaticElements({y:a});return a};g.prototype.rawSetPosition=function(a){this.rawSetX(a.x);this.rawSetY(a.y);return a};g.prototype.setPosition=function(a){var b=this.clampX(a.x),a=this.clampY(a.y);this.updateStaticElements({x:b,y:a});this.rawSetX(b);this.rawSetY(a);this.showFine()};g.prototype.getPosition=function(){return{x:this.x,
y:this.y}};g.prototype.zoomCallback=function(){this.zoomUpdate()};g.prototype.afterSlide=function(){this.showCoarse();this.scrollUpdate();this.showVisibleBlocks(!0)};g.prototype.suppressDoubleClick=function(a){this._noDoubleClick&&window.clearTimeout(this._noDoubleClick);var b=this;this._noDoubleClick=window.setTimeout(function(){delete b._noDoubleClick},a||100)};g.prototype.doubleClickZoom=function(a){if(!this._noDoubleClick&&!this.dragging&&!("animation"in this)){this.scaleClickedTimeout&&window.clearTimeout(this.scaleClickedTimeout);
var b=(a.pageX-dojo.position(this.elem,!0).x)/this.getWidth();a.shiftKey?this.zoomOut(a,b,2):this.zoomIn(a,b,2);dojo.stopEvent(a)}};g.prototype._beforeMouseDrag=function(b){if(this.animation){if(this.animation instanceof a)return dojo.stopEvent(b),0;this.animation.stop()}if(f.isRightButton(b))return 0;dojo.stopEvent(b);return 1};g.prototype.startMouseDragScroll=function(a){if(this._beforeMouseDrag(a))this.behaviorManager.applyBehaviors("mouseDragScrolling"),this.dragStartPos={x:a.clientX,y:a.clientY},
this.winStartPos=this.getPosition()};g.prototype.startVerticalMouseDragScroll=function(a){if(this._beforeMouseDrag(a))this.behaviorManager.applyBehaviors("verticalMouseDragScrolling"),this.dragStartPos={x:a.clientX,y:a.clientY},this.winStartPos=this.getPosition()};g.prototype.startRubberZoom=function(a,b,c,d){if(this._beforeMouseDrag(d))this.behaviorManager.applyBehaviors("mouseRubberBandZooming"),this.rubberbanding={absFunc:a,container:b,scaleDiv:c},this.rubberbandStartPos={x:d.clientX,y:d.clientY},
this.winStartPos=this.getPosition(),this.clearVerticalPositionLine(),this.clearBasePairLabels()};g.prototype._rubberStop=function(a){this.behaviorManager.removeBehaviors("mouseRubberBandZooming");this.hideRubberHighlight();this.clearBasePairLabels();dojo.stopEvent(a);delete this.rubberbanding};g.prototype.rubberCancel=function(a){var b=document.body.parentNode,c=document.body;(!a||!a.relatedTarget&&!a.toElement||b===(a.relatedTarget||a.toElement)||c===(a.relatedTarget||a.toElement))&&this._rubberStop(a)};
g.prototype.rubberMove=function(a){this.setRubberHighlight(this.rubberbandStartPos,{x:a.clientX,y:a.clientY})};g.prototype.rubberExecute=function(a){var b=this.rubberbandStartPos,c=a.clientX,d=this.rubberbanding.absFunc(Math.min(b.x,c)),e=this.rubberbanding.absFunc(Math.max(b.x,c));this._rubberStop(a);if(3>Math.abs(b.x-c))return this._rubberStop(a);this.setLocation(this.ref,d,e)};g.prototype.setRubberHighlight=function(a,b){var c=this.rubberbanding.container,d=dojo.position(c,!0),e;if(!(e=this.rubberHighlight)){e=
this.rubberHighlight=document.createElement("div");e.className="rubber-highlight";e.style.position="absolute";e.style.zIndex=20;var f=document.createElement("div");f.appendChild(document.createTextNode("Zoom to region"));e.appendChild(f);f.style.position="relative";f.style.top=50-d.y+"px";c.appendChild(e)}e.style.visibility="visible";e.style.left=Math.min(a.x,b.x)-d.x+"px";e.style.width=Math.abs(b.x-a.x)+"px";this.drawBasePairLabel({name:"rubberLeft",xToBp:this.rubberbanding.absFunc,scaleDiv:this.rubberbanding.scaleDiv,
offset:0,x:Math.min(a.x,b.x),parent:c,className:"rubber"});this.drawBasePairLabel({name:"rubberRight",xToBp:this.rubberbanding.absFunc,scaleDiv:this.rubberbanding.scaleDiv,offset:0,x:Math.max(a.x,b.x)+1,parent:c,className:"rubber"});this.clearVerticalPositionLine()};g.prototype.dragEnd=function(a){this.behaviorManager.removeBehaviors("mouseDragScrolling","verticalMouseDragScrolling");dojo.stopEvent(a);this.showCoarse();this.scrollUpdate();this.showVisibleBlocks(!0);window.setTimeout(dojo.hitch(this,
function(){this.dragging=!1}),100)};g.prototype.checkDragOut=function(a){var b=document.body.parentNode,c=document.body;(!a.relatedTarget&&!a.toElement||b===(a.relatedTarget||a.toElement)||c===(a.relatedTarget||a.toElement))&&this.dragEnd(a)};g.prototype.dragMove=function(a){this.dragging=!0;this.setPosition({x:this.winStartPos.x-(a.clientX-this.dragStartPos.x),y:this.winStartPos.y-(a.clientY-this.dragStartPos.y)});dojo.stopEvent(a)};g.prototype.verticalDragMove=function(a){this.dragging=!0;this.setPosition({x:this.winStartPos.x,
y:this.winStartPos.y+(a.clientY-this.dragStartPos.y)});dojo.stopEvent(a)};g.prototype.hideRubberHighlight=function(){this.rubberHighlight&&(this.rubberHighlight.parentNode.removeChild(this.rubberHighlight),delete this.rubberHighlight)};g.prototype.slide=function(a){this.animation&&this.animation.stop();this.trimVertical();new k(this,this.afterSlide,Math.abs(a)*this.getWidth()*this.slideTimeMultiple+200,a*this.getWidth())};g.prototype.setLocation=function(a,b,d){void 0===b&&(b=this.minVisible());void 0===
d&&(d=this.maxVisible());if(b<a.start||b>a.end)b=a.start;if(d<a.start||d>a.end)d=a.end;if(this.ref!=a)this.ref=a,a=function(a){a.div&&a.div.parentNode&&a.div.parentNode.removeChild(a.div)},dojo.forEach(this.tracks,a),this.tracks=[],this.trackIndices={},this.trackHeights=[],this.trackTops=[],dojo.forEach(this.uiTracks,function(a){a.clear()}),this.overviewTrackIterate(a),this.addOverviewTrack(new c({label:"overview_loc_track",labelClass:"overview-pos",posHeight:this.overviewPosHeight})),this.sizeInit(),
this.setY(0),this.behaviorManager.initialize();this.pxPerBp=Math.min(this.getWidth()/(d-b),this.maxPxPerBp);this.curZoom=f.findNearest(this.zoomLevels,this.pxPerBp);if(0.2>Math.abs(this.pxPerBp-this.zoomLevels[this.zoomLevels.length-1]))this.pxPerBp=this.zoomLevels[this.zoomLevels.length-1];this.stripeWidth=this.stripeWidthForZoom(this.curZoom)/this.zoomLevels[this.curZoom]*this.pxPerBp;this.instantZoomUpdate();this.centerAtBase((b+d)/2,!0)};g.prototype.stripeWidthForZoom=function(a){return this.zoomLevels.length-
1==a?this.fullZoomStripe:0==a?this.minZoomStripe:this.regularStripe};g.prototype.instantZoomUpdate=function(){this.scrollContainer.style.width=this.stripeCount*this.stripeWidth+"px";this.zoomContainer.style.width=this.stripeCount*this.stripeWidth+"px";this.maxOffset=this.bpToPx(this.ref.end)-this.stripeCount*this.stripeWidth;this.maxLeft=this.bpToPx(this.ref.end+1)-this.getWidth();this.minLeft=this.bpToPx(this.ref.start)};g.prototype.centerAtBase=function(a,b){a=Math.min(Math.max(a,this.ref.start),
this.ref.end);if(b){var c=this.bpToPx(a);this.offset=Math.floor((c-this.stripeCount*this.stripeWidth/2)/this.stripeWidth)*this.stripeWidth;this.setX(c-this.offset-this.getWidth()/2);this.trackIterate(function(a){a.clear()});this.showVisibleBlocks(!0);this.showCoarse()}else{var c=this.pxToBp(this.x+this.offset),d=this.getWidth()/this.pxPerBp/2,e=c+d;a>=c-d&&a<=c+d+d+d?(this.animation&&this.animation.stop(),c=(e-a)*this.pxPerBp,this.trimVertical(),new k(this,this.afterSlide,Math.abs(c)*this.slideTimeMultiple+
200,c)):this.centerAtBase(a,!0)}};g.prototype.minVisible=function(){var a=this.pxToBp(this.x+this.offset);return a<this.pxToBp(1)?0:a};g.prototype.maxVisible=function(){var a=this.pxToBp(this.x+this.offset+this.getWidth());return a>this.ref.end-this.pxToBp(1)?this.ref.end:a};g.prototype.showFine=function(){this.onFineMove(this.minVisible(),this.maxVisible())};g.prototype.showCoarse=function(){this.onCoarseMove(this.minVisible(),this.maxVisible())};g.prototype.onFineMove=function(){};g.prototype.onCoarseMove=
function(){};g.prototype.onResize=function(){this.sizeInit();this.showVisibleBlocks();this.showFine();this.showCoarse()};g.prototype.overviewClicked=function(a){this.centerAtBase(this.overview_absXtoBp(a.clientX))};g.prototype.scaleMouseOver=function(a){this.rubberbanding||this.drawVerticalPositionLine(this.scaleTrackDiv,a)};g.prototype.scaleMouseMove=function(a){this.rubberbanding||this.drawVerticalPositionLine(this.scaleTrackDiv,a)};g.prototype.scaleMouseOut=function(){this.clearVerticalPositionLine();
this.clearBasePairLabels()};g.prototype.drawVerticalPositionLine=function(a,b){var c=b.pageX+2;if(!this.verticalPositionLine)this.verticalPositionLine=dojo.create("div",{className:"trackVerticalPositionIndicatorMain"},this.staticTrack.div);var d=this.verticalPositionLine;d.style.display="block";d.style.left=c+"px";var e=dojo.position(this.scaleTrackDiv);d.style.top=e.y+"px";this.drawBasePairLabel({name:"single",offset:0,x:c,parent:a})};g.prototype.drawBasePairLabel=function(a){var b=a.name||0,c=a.offset||
0,d=a.x;this.basePairLabels=this.basePairLabels||{};if(!this.basePairLabels[b]){var e=dojo.position(a.scaleDiv||this.scaleTrackDiv);this.basePairLabels[b]=dojo.create("div",{className:"basePairLabel"+(a.className?" "+a.className:""),style:{top:e.y+e.h-3+"px"}},document.body)}b=this.basePairLabels[b];if("object"==typeof d)d=d.clientX;b.style.display="block";a=a.xToBp||dojo.hitch(this,"absXtoBp");b.innerHTML=f.addCommas(Math.floor(a(d)));b.style.left=window.innerWidth-d>8+b.offsetWidth?d+c+"px":d+1-
c-b.offsetWidth+"px"};g.prototype.clearVerticalPositionLine=function(){if(this.verticalPositionLine)this.verticalPositionLine.style.display="none"};g.prototype.clearBasePairLabels=function(){for(var a in this.basePairLabels){var b=this.basePairLabels[a];b.parentNode&&b.parentNode.removeChild(b)}this.basePairLabels={}};g.prototype.overview_absXtoBp=function(a){var b=dojo.position(this.overview);return(a-b.x)/b.w*(this.ref.end-this.ref.start)+this.ref.start};g.prototype.scaleClicked=function(a){var b=
this.absXtoBp(a.clientX);this.scaleClickedTimeout=window.setTimeout(dojo.hitch(this,function(){this.centerAtBase(b)},100))};g.prototype.thumbMoved=function(){var a=parseInt(this.locationThumb.style.left),b=parseInt(this.locationThumb.style.width);this.centerAtBase((a+b/2)/this.overviewBox.w*(this.ref.end-this.ref.start)+this.ref.start)};g.prototype.checkY=function(a){return Math.min(0>a?0:a,this.containerHeight-this.getHeight())};g.prototype.updateStaticElements=function(a){this.trackIterate(function(b){b.updateStaticElements(a)},
this);this._updateVerticalScrollBar(a);if("number"==typeof a.y)this.staticTrack.div.style.top=a.y+"px"};g.prototype.showWait=function(){for(var a=[],b=0;b<this.waitElems.length;b++)a[b]=this.waitElems[b].style.cursor,this.waitElems[b].style.cursor="wait";this.prevCursors.push(a)};g.prototype.showDone=function(){for(var a=this.prevCursors.pop(),b=0;b<this.waitElems.length;b++)this.waitElems[b].style.cursor=a[b]};g.prototype.pxToBp=function(a){return a/this.pxPerBp};g.prototype.absXtoBp=function(a){return this.pxToBp(this.getPosition().x+
this.offset-dojo.position(this.elem,!0).x+a)};g.prototype.bpToPx=function(a){return a*this.pxPerBp};g.prototype.sizeInit=function(){this.overviewBox=dojo.marginBox(this.overview);var a=[2.0E-6,5.0E-6,1.0E-5,2.0E-5,5.0E-5,1.0E-4,2.0E-4,5.0E-4,0.001,0.002,0.005,0.01,0.02,0.05,0.1,0.2,0.5,1,2,5,10,20];this.zoomLevels=[];for(var b=0;b<a.length;b++){var c=a[b];if(c<this.maxPxPerBp)this.zoomLevels.push(c);else break}for(this.zoomLevels.push(this.maxPxPerBp);(this.ref.end-this.ref.start)*this.zoomLevels[0]<
this.getWidth();)this.zoomLevels.shift();this.zoomLevels.unshift(this.getWidth()/(this.ref.end-this.ref.start));this.minZoomStripe=this.regularStripe*(this.zoomLevels[0]/this.zoomLevels[1]);for(this.curZoom=0;this.pxPerBp>this.zoomLevels[this.curZoom];)this.curZoom++;this.maxLeft=this.bpToPx(this.ref.end+1)-this.getWidth();delete this.stripePercent;a=[20,10,5,4,2,1];for(b=0;b<a.length;b++)if(100/a[b]*0.7*this.regularStripe>3*this.getWidth()+this.regularStripe){this.stripePercent=a[b];break}if(!this.stripePercent)console.warn("stripeWidth too small: "+
this.stripeWidth+", "+this.getWidth()),this.stripePercent=1;(b=this.stripeCount)&&this.getX();this.stripeCount=Math.round(100/this.stripePercent);this.scrollContainer.style.width=this.stripeCount*this.stripeWidth+"px";this.zoomContainer.style.width=this.stripeCount*this.stripeWidth+"px";var d=void 0;b&&b!=this.stripeCount&&(d=Math.floor((b-this.stripeCount)/2),b=d*this.stripeWidth,a=this.getX()-b,this.offset+=b,this.updateStaticElements({x:a}),this.rawSetX(a));this.trackIterate(function(a,b){a.sizeInit(b.stripeCount,
b.stripePercent,d)});b=this.trackHeights&&this.trackHeights.length?Math.max(o.reduce(this.trackHeights,"+")+this.trackPadding*this.trackHeights.length,this.getHeight()):this.getHeight();this.scrollContainer.style.height=b+"px";this.containerHeight=b;b=this.ref.end-this.ref.start;c=document.createElement("div");c.className="overview-pos";c.appendChild(document.createTextNode(f.addCommas(this.ref.end)));c.style.visibility="hidden";this.overview.appendChild(c);a=1.2*c.clientWidth;this.overviewPosHeight=
c.clientHeight;this.overview.removeChild(c);for(c=1;30>c;c++){this.overviewStripeBases=(Math.pow(c%3,2)+1)*Math.pow(10,Math.floor(c/3));this.overviewStripes=Math.ceil(b/this.overviewStripeBases);if(this.overviewBox.w/this.overviewStripes>a)break;if(2>this.overviewStripes)break}var e=100/(b/this.overviewStripeBases);this.overviewTrackIterate(function(a,b){a.clear();a.sizeInit(b.overviewStripes,e);a.showRange(0,b.overviewStripes-1,-1,b.overviewStripeBases,b.overviewBox.w/(b.ref.end-b.ref.start))});
this.updateOverviewHeight();this.updateScroll()};g.prototype.updateScroll=function(){var a={height:this.getHeight()};if(0<this.getY()&&this.containerHeight-this.getY()<a.height)a.y=this.setY(Math.max(0,this.containerHeight-a.height));this.updateStaticElements(a)};g.prototype.overviewTrackIterate=function(a){var b=this.overview.firstChild;do b&&b.track&&a.call(this,b.track,this);while(b&&(b=b.nextSibling))};g.prototype.updateOverviewHeight=function(){var a=0;this.overviewTrackIterate(function(b){a+=
b.height;b.div.style.height=b.height+"px"});this.overview.style.height=a+"px";this.overviewBox=dojo.marginBox(this.overview)};g.prototype.addOverviewTrack=function(a){var b=this.ref.end-this.ref.start,c=100/(b/this.overviewStripeBases),d=document.createElement("div");d.className="track";d.style.height=this.overviewBox.h+"px";d.style.left=-this.ref.start/b*this.overviewBox.w+"px";d.id="overviewtrack_"+a.name;d.track=a;var e=this;a.setViewInfo(this,function(){e.updateOverviewHeight()},this.overviewStripes,
d,void 0,c,this.overviewStripeBases,this.pxPerBp,this.trackPadding);this.overview.appendChild(d);this.updateOverviewHeight();return d};g.prototype.trimVertical=function(a){void 0===a&&(a=this.getY());for(var b,c=this.topSpace,d=a+this.getHeight(),e=0;e<this.tracks.length;e++)this.tracks[e].shown&&(b=c+this.trackHeights[e],b>a&&c<d||this.tracks[e].hideAll(),c=b+this.trackPadding)};g.prototype.redrawTracks=function(){this.trackIterate(function(a){a.hideAll()});this.showVisibleBlocks(!0)};g.prototype.zoomIn=
function(b,c,d){if(!this.animation&&(this._unsetPosBeforeZoom(),void 0===c&&(c=0.5),void 0===d&&(d=1),d=Math.min(d,this.zoomLevels.length-1-this.curZoom),!(0==d&&this.pxPerBp==this.zoomLevels[this.curZoom]))){this.showWait();var e=this.getPosition();this.trimVertical(e.y);var b=this.zoomLevels[this.curZoom+d]/this.pxPerBp,f=this.pxToBp(e.x+this.offset+c*this.getWidth());this.curZoom+=d;this.pxPerBp=this.zoomLevels[this.curZoom];this.maxLeft=this.bpToPx(this.ref.end+1)-this.getWidth();for(d=0;d<this.tracks.length;d++)this.tracks[d].startZoom(this.pxPerBp,
f-c*this.getWidth()/this.pxPerBp,f+(1-c)*this.getWidth()/this.pxPerBp);new a(b,this,function(){this.zoomUpdate(c,f)},700,c)}};g.prototype.zoomToBaseLevel=function(b,c){if(!this.animation){var d=this.zoomLevels.length-1;if(this.curZoom!==d){this._setPosBeforeZoom(this.minVisible(),this.maxVisible(),this.curZoom);this.showWait();this.trimVertical();var e=this.zoomLevels[d]/this.pxPerBp;this.curZoom=d;this.pxPerBp=this.zoomLevels[d];this.maxLeft=this.pxPerBp*this.ref.end-this.getWidth();for(d=0;d<this.tracks.length;d++)this.tracks[d].startZoom(this.pxPerBp,
c-0.5*this.getWidth()/this.pxPerBp,c+0.5*this.getWidth()/this.pxPerBp);new a(e,this,function(){this.zoomUpdate(0.5,c)},700,0.5)}}};g.prototype.zoomOut=function(b,c,d){if(!this.animation&&(this._unsetPosBeforeZoom(),void 0===d&&(d=1),d=Math.min(d,this.curZoom),0!=d)){this.showWait();var e=this.getPosition();this.trimVertical(e.y);void 0===c&&(c=0.5);var b=this.zoomLevels[this.curZoom-d]/this.pxPerBp,f=this.bpToPx(this.ref.end)-(this.offset+e.x+this.getWidth()),c=Math.max(c,1-f*b/(1-b)/this.getWidth()),
f=e.x+this.offset-this.bpToPx(this.ref.start),c=Math.min(c,f*b/(1-b)/this.getWidth()),i=this.pxToBp(e.x+this.offset+c*this.getWidth());this.curZoom-=d;this.pxPerBp=this.zoomLevels[this.curZoom];for(d=0;d<this.tracks.length;d++)this.tracks[d].startZoom(this.pxPerBp,i-c*this.getWidth()/this.pxPerBp,i+(1-c)*this.getWidth()/this.pxPerBp);this.minLeft=this.pxPerBp*this.ref.start;new a(b,this,function(){this.zoomUpdate(c,i)},700,c)}};g.prototype.zoomBackOut=function(){if(!this.animation&&this.isZoomedToBase()){var b=
this.posBeforeZoom.min,c=this.posBeforeZoom.max,d=this.posBeforeZoom.zoomIndex;this.posBeforeZoom=void 0;this.showWait();var e=this.zoomLevels[d]/this.pxPerBp,f=(b+c)/2;this.curZoom=d;this.pxPerBp=this.zoomLevels[d];for(d=0;d<this.tracks.length;d++)this.tracks[d].startZoom(this.pxPerBp,f-0.5*this.getWidth()/this.pxPerBp,f+0.5*this.getWidth()/this.pxPerBp);this.minLeft=this.pxPerBp*this.ref.start;var i=this;new a(e,this,function(){i.setLocation(i.ref,b,c);i.zoomUpdate(0.5,f)},700,0.5)}};g.prototype.isZoomedToBase=
function(){return void 0!==this.posBeforeZoom};g.prototype._setPosBeforeZoom=function(a,b,c){this.posBeforeZoom={min:a,max:b,zoomIndex:c}};g.prototype._unsetPosBeforeZoom=function(){this.posBeforeZoom=void 0};g.prototype.zoomUpdate=function(a,b){var c=this.elem.clientWidth,d=this.bpToPx(b)-a*c+c/2;this.stripeWidth=this.stripeWidthForZoom(this.curZoom);this.scrollContainer.style.width=this.stripeCount*this.stripeWidth+"px";this.zoomContainer.style.width=this.stripeCount*this.stripeWidth+"px";this.offset=
(Math.round(d/this.stripeWidth)-this.stripeCount/2|0)*this.stripeWidth;this.maxOffset=this.bpToPx(this.ref.end+1)-this.stripeCount*this.stripeWidth;this.maxLeft=this.bpToPx(this.ref.end+1)-this.getWidth();this.minLeft=this.bpToPx(this.ref.start);this.zoomContainer.style.left="0px";this.setX(d-this.offset-c/2);dojo.forEach(this.uiTracks,function(a){a.clear()});this.trackIterate(function(a){a.endZoom(this.pxPerBp,Math.round(this.stripeWidth/this.pxPerBp))});this.showVisibleBlocks(!0);this.showDone();
this.showCoarse()};g.prototype.scrollUpdate=function(){var a=this.getX(),b=this.stripeCount*this.stripeWidth,c=this.getWidth(),d=(b/2-(c/2+a))/this.stripeWidth|0;if(0!=d&&(Math.abs(d),b=this.offset-d*this.stripeWidth,this.offset!=b))this.offset=b,this.trackIterate(function(a){a.moveBlocks(d)}),a+=d*this.stripeWidth,this.updateStaticElements({x:a}),this.rawSetX(a)};g.prototype.trackHeightUpdate=function(a,b){var c=this.getY();if(a in this.trackIndices){var d=this.trackIndices[a];if(!(1>Math.abs(b-
this.trackHeights[d]))){this.trackTops[d]+this.trackHeights[d]-c<this.getHeight()/2&&0<c&&this.setY(c+(b-this.trackHeights[d]));this.trackHeights[d]=b;this.tracks[d].div.style.height=b+this.trackPadding+"px";var c=this.trackTops[d],e=0;this.tracks[d].shown&&(c+=b+this.trackPadding);for(d+=1;d<this.tracks.length;d++)this.trackTops[d]=c,this.tracks[d].div.style.top=c+"px",e=c,this.tracks[d].shown&&(c+=this.trackHeights[d]+this.trackPadding);this.containerHeight=Math.max(c||0,Math.min(this.getY(),e)+
this.getHeight());this.scrollContainer.style.height=this.containerHeight+"px";this.setY(this.getY());this.updateStaticElements({height:this.getHeight()})}}};g.prototype.showVisibleBlocks=function(a,b,c,d){void 0===b&&(b=this.getPosition());void 0===c&&(c=b.x-this.drawMargin*this.getWidth());void 0===d&&(d=b.x+(1+this.drawMargin)*this.getWidth());var e=Math.max(0,c/this.stripeWidth|0),f=Math.min(this.stripeCount-1,d/this.stripeWidth|0),i=Math.round(this.stripeWidth/this.pxPerBp),h=Math.round(this.pxToBp(e*
this.stripeWidth+this.offset)),h=h-1,k=Math.round(this.pxToBp(this.offset)),g=Math.round(this.pxToBp(this.offset+this.stripeCount*this.stripeWidth));this.trackIterate(function(a,b){a.showRange(e,f,h,i,b.pxPerBp,k,g)});this.updateStaticElements({height:this.getHeight(),width:this.getWidth(),x:this.getX(),y:this.getY()});this.browser.publish("/jbrowse/v1/n/tracks/redraw")};g.prototype.showTracks=function(a){a=dojo.filter(a,function(a){return 0==this._getTracks([a.label]).length},this);a.length&&(this.trackDndWidget.insertNodes(!1,
a),this.updateTrackList())};g.prototype.replaceTracks=function(a){j.forEach(a,function(a){var b,c;j.forEach(this.trackDndWidget.parent.children,function(d){if(!c){var e=d.track;e&&e.config.label==a.label?(c=1,this.trackDndWidget.delItem(d.id),d&&d.parentNode&&d.parentNode.removeChild(d)):b=d}},this);this.updateTrackList();this.trackDndWidget.insertNodes(!1,[a],!1,b)},this);a.length&&this.updateTrackList()};g.prototype.hideTracks=function(a){a=dojo.filter(a,function(a){return 0!=this._getTracks([a.label]).length},
this);a.length&&(dojo.forEach(a,function(a){this.trackDndWidget.forInItems(function(b,c){if(a.label===b.data.label){this.trackDndWidget.delItem(c);var d=dojo.byId(c);d&&d.parentNode&&d.parentNode.removeChild(d)}},this)},this),this.updateTrackList())};g.prototype._getTracks=function(a){var b=[],c={count:a.length};dojo.forEach(a,function(a){c[a]=1});dojo.some(this.tracks,function(a){c[a.name]&&(b.push(a),c.count--);return!c.count},this);return b};g.prototype.renderTrack=function(a){if(!a)return null;
var b;if(dojo.some(this.tracks,function(c){return c.name==a.label?(b=c,!0):!1}))return b.div;var c=a.label,d=dojo.create("div",{className:["track",("track_"+a.type).replace(/[^A-Za-z_0-9]/g,"_").toLowerCase(),("track_"+c).replace(/[^A-Za-z_0-9]/g,"_").toLowerCase()].join(" "),id:"track_"+c});d.trackName=c;var e,f,i=dojo.hitch(this,function(){var b=new e({refSeq:this.ref,config:a,changeCallback:dojo.hitch(this,"showVisibleBlocks",!0),trackPadding:this.trackPadding,store:f,browser:this.browser});"function"==
typeof f.setTrack&&f.setTrack(b);d.track=b;var i=dojo.hitch(this,"trackHeightUpdate",c);b.setViewInfo(this,i,this.stripeCount,d,this.stripePercent,this.stripeWidth,this.pxPerBp,this.trackPadding);b.updateStaticElements({x:this.getX(),y:this.getY(),height:this.getHeight(),width:this.getWidth()});this.updateTrackList()});a.store||console.warn("configuration for track "+a.label+" has no store set",a);this.browser.getStore(a.store,function(a){f=a;e&&f&&i()});require([a.type],function(a){(e=a)&&f&&i()});
return d};g.prototype.trackIterate=function(a){var b;for(b=0;b<this.uiTracks.length;b++)a.call(this,this.uiTracks[b],this);for(b=0;b<this.tracks.length;b++)a.call(this,this.tracks[b],this)};g.prototype.updateTrackList=function(){var a=[],b=dojo.toJson(this.trackIndices||{}),c=this.trackContainer.firstChild;do c.track&&a.push(c.track);while(c=c.nextSibling);this.tracks=a;for(var d={},e=Array(this.tracks.length),c=0;c<a.length;c++)d[a[c].name]=c,e[c]=a[c].name in this.trackIndices?this.trackHeights[this.trackIndices[a[c].name]]:
0,this.trackIndices[a[c].name]=c;this.trackIndices=d;this.trackHeights=e;a=this.topSpace;for(c=0;c<this.tracks.length;c++)this.trackTops[c]=a,this.tracks[c].div.style.top=a+"px",this.tracks[c].shown&&(a+=this.trackHeights[c]+this.trackPadding);this.containerHeight=Math.max(a||0,this.getHeight());this.scrollContainer.style.height=this.containerHeight+"px";this.updateScroll();if(b!=dojo.toJson(this.trackIndices||{}))this.browser.publish("/jbrowse/v1/n/tracks/visibleChanged",[this.visibleTrackNames()]),
this.showVisibleBlocks()};return g})},"dojo/dnd/move":function(){define("../_base/declare,../dom-geometry,../dom-style,./common,./Mover,./Moveable".split(","),function(g,j,f,h,e,d){h=g("dojo.dnd.move.constrainedMoveable",d,{constraints:function(){},within:!1,constructor:function(c,b){b||(b={});this.constraints=b.constraints;this.within=b.within},onFirstMove:function(c){var b=this.constraintBox=this.constraints.call(this,c);b.r=b.l+b.w;b.b=b.t+b.h;this.within&&(c=j.getMarginSize(c.node),b.r-=c.w,b.b-=
c.h)},onMove:function(c,b){var d=this.constraintBox,a=c.node.style;this.onMoving(c,b);b.l=b.l<d.l?d.l:d.r<b.l?d.r:b.l;b.t=b.t<d.t?d.t:d.b<b.t?d.b:b.t;a.left=b.l+"px";a.top=b.t+"px";this.onMoved(c,b)}});e=g("dojo.dnd.move.boxConstrainedMoveable",h,{box:{},constructor:function(c,b){var d=b&&b.box;this.constraints=function(){return d}}});g=g("dojo.dnd.move.parentConstrainedMoveable",h,{area:"content",constructor:function(c,b){var d=b&&b.area;this.constraints=function(){var a=this.node.parentNode,b=f.getComputedStyle(a),
c=j.getMarginBox(a,b);if("margin"==d)return c;var e=j.getMarginExtents(a,b);c.l+=e.l;c.t+=e.t;c.w-=e.w;c.h-=e.h;if("border"==d)return c;e=j.getBorderExtents(a,b);c.l+=e.l;c.t+=e.t;c.w-=e.w;c.h-=e.h;if("padding"==d)return c;e=j.getPadExtents(a,b);c.l+=e.l;c.t+=e.t;c.w-=e.w;c.h-=e.h;return c}}});return{constrainedMoveable:h,boxConstrainedMoveable:e,parentConstrainedMoveable:g}})},"dojo/dnd/Source":function(){define("../_base/array,../_base/connect,../_base/declare,../_base/kernel,../_base/lang,../dom-class,../dom-geometry,../mouse,../ready,../topic,./common,./Selector,./Manager".split(","),
function(g,j,f,h,e,d,c,b,i,a,k,o,p){h.isAsync||i(0,function(){require(["dojo/dnd/AutoSource","dojo/dnd/Target"])});var l=f("dojo.dnd.Source",o,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(b,c){e.mixin(this,e.mixin({},c));var f=this.accept;if(f.length){this.accept={};for(var i=0;i<f.length;++i)this.accept[f[i]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=
null;this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&d.add(this.node,"dojoDndSource");this.targetState="";this.accept&&d.add(this.node,"dojoDndTarget");this.horizontal&&d.add(this.node,"dojoDndHorizontal");this.topics=[a.subscribe("/dnd/source/over",e.hitch(this,"onDndSourceOver")),a.subscribe("/dnd/start",e.hitch(this,"onDndStart")),a.subscribe("/dnd/drop",e.hitch(this,"onDndDrop")),a.subscribe("/dnd/cancel",e.hitch(this,"onDndCancel"))]},checkAcceptance:function(a,b){if(this==
a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var d=a.getItem(b[c].id).type,e=!1,f=0;f<d.length;++f)if(d[f]in this.accept){e=!0;break}if(!e)return!1}return!0},copyState:function(a,b){if(a)return!0;2>arguments.length&&(b=this==p.manager().target);if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return!1},destroy:function(){l.superclass.destroy.call(this);g.forEach(this.topics,function(a){a.remove()});this.targetAnchor=null},onMouseMove:function(a){if(!(this.isDragging&&
"Disabled"==this.targetState)){l.superclass.onMouseMove.call(this,a);var b=p.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var d=this.getSelectedNodes();d.length&&b.startDrag(this,d,this.copyState(k.getCopyKeyState(a),!0))}if(this.isDragging){d=!1;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current)this.targetBox=c.position(this.current,!0);d=this.horizontal?a.pageX-this.targetBox.x<
this.targetBox.w/2==c.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2}if(this.current!=this.targetAnchor||d!=this.before)this._markTargetAnchor(d),b.canDrop(!this.current||b.source!=this||!(this.current.id in this.selection))}}},onMouseDown:function(a){if(!this.mouseDown&&this._legalMouseDown(a)&&(!this.skipForm||!k.isFormElement(a)))this.mouseDown=!0,this._lastX=a.pageX,this._lastY=a.pageY,l.superclass.onMouseDown.call(this,a)},onMouseUp:function(a){if(this.mouseDown)this.mouseDown=
!1,l.superclass.onMouseUp.call(this,a)},onDndSourceOver:function(a){this!==a?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(a=p.manager(),a.canDrop("Disabled"!=this.targetState&&(!this.current||a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,b,c){this.autoSync&&this.sync();this.isSource&&this._changeState("Source",this==a?c?"Copied":"Moved":"");this._changeState("Target",this.accept&&this.checkAcceptance(a,b)?"":"Disabled");this==
a&&p.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,b,c,d){if(this==d)this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){if(this.targetAnchor)this._unmarkTargetAnchor(),this.targetAnchor=null;this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target","")},onDrop:function(a,b,c){if(this!=a)this.onDropExternal(a,b,c);else this.onDropInternal(b,c)},onDropExternal:function(a,b,c){var d=this._normalizedCreator;this._normalizedCreator=
this.creator?function(b,c){return d.call(this,a.getItem(b.id).data,c)}:c?function(b){var c=a.getItem(b.id),b=b.cloneNode(!0);b.id=k.getUniqueId();return{node:b,data:c.data,type:c.type}}:function(b){var c=a.getItem(b.id);a.delItem(b.id);return{node:b,data:c.data,type:c.type}};this.selectNone();!c&&!this.creator&&a.selectNone();this.insertNodes(!0,b,this.before,this.current);!c&&this.creator&&a.deleteSelectedNodes();this._normalizedCreator=d},onDropInternal:function(a,b){var c=this._normalizedCreator;
if(!(this.current&&this.current.id in this.selection)){if(b)this._normalizedCreator=this.creator?function(a,b){return c.call(this,this.getItem(a.id).data,b)}:function(a){var b=this.getItem(a.id),a=a.cloneNode(!0);a.id=k.getUniqueId();return{node:a,data:b.data,type:b.type}};else{if(!this.current)return;this._normalizedCreator=function(a){var b=this.getItem(a.id);return{node:a,data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,a,this.before,this.current);this._normalizedCreator=c}},
onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){l.superclass.onOverEvent.call(this);p.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},onOutEvent:function(){l.superclass.onOutEvent.call(this);p.manager().outSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOut()},_markTargetAnchor:function(a){if(!(this.current==this.targetAnchor&&this.before==a))this.targetAnchor&&this._removeItemClass(this.targetAnchor,
this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){if(this.targetAnchor)this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetBox=this.targetAnchor=null,this.before=!0},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if("touchstart"!=a.type&&!b.isLeft(a))return!1;
if(!this.withHandles)return!0;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(d.contains(a,"dojoDndHandle"))return!0;if(d.contains(a,"dojoDndItem")||d.contains(a,"dojoDndIgnore"))break}return!1}});return l})},"dojo/dnd/Selector":function(){define("../_base/array,../_base/declare,../_base/event,../_base/kernel,../_base/lang,../dom,../dom-construct,../mouse,../_base/NodeList,../on,../touch,./common,./Container".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o,p){var l=j("dojo.dnd.Selector",p,{constructor:function(b,
c){c||(c={});this.singular=c.singular;this.autoSync=c.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(a(this.node,k.press,e.hitch(this,"onMouseDown")),a(this.node,k.release,e.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var a=new i,b=o._empty,c;for(c in this.selection)c in b||a.push(d.byId(c));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){this.forInItems(function(a,b){this._addItemClass(d.byId(b),
"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=o._empty,b;for(b in this.selection)if(!(b in a)){var e=d.byId(b);this.delItem(b);c.destroy(e)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(a,b){var b=b||h.global,c=this.selection,d=o._empty,e;for(e in c)e in d||a.call(b,this.getItem(e),e,this)},sync:function(){l.superclass.sync.call(this);if(this.anchor&&!this.getItem(this.anchor.id))this.anchor=null;var a=[],b=o._empty,
c;for(c in this.selection)c in b||this.getItem(c)||a.push(c);g.forEach(a,function(a){delete this.selection[a]},this);return this},insertNodes:function(a,b,c,d){var e=this._normalizedCreator;this._normalizedCreator=function(b,c){var d=e.call(this,b,c);a?(this.anchor?this.anchor!=d.node&&(this._removeItemClass(d.node,"Anchor"),this._addItemClass(d.node,"Selected")):(this.anchor=d.node,this._removeItemClass(d.node,"Selected"),this._addItemClass(this.anchor,"Anchor")),this.selection[d.node.id]=1):(this._removeItemClass(d.node,
"Selected"),this._removeItemClass(d.node,"Anchor"));return d};l.superclass.insertNodes.call(this,b,c,d);this._normalizedCreator=e;return this},destroy:function(){l.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!o.getCopyKeyState(a)&&!a.shiftKey&&this.current.id in this.selection)this.simpleSelection=!0,b.isLeft(a)&&f.stop(a);else{if(!this.singular&&a.shiftKey){o.getCopyKeyState(a)||this._removeSelection();
var c=this.getAllNodes();if(c.length){if(!this.anchor)this.anchor=c[0],this._addItemClass(this.anchor,"Anchor");this.selection[this.anchor.id]=1;if(this.anchor!=this.current){for(var d=0,e;d<c.length&&!(e=c[d],e==this.anchor||e==this.current);++d);for(++d;d<c.length;++d){e=c[d];if(e==this.anchor||e==this.current)break;this._addItemClass(e,"Selected");this.selection[e.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}}else if(this.singular)this.anchor==this.current?
o.getCopyKeyState(a)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1);else if(o.getCopyKeyState(a))this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),
this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);else if(!(this.current.id in this.selection))this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1;f.stop(a)}},onMouseUp:function(){if(this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current))this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1},onMouseMove:function(){this.simpleSelection=
!1},onOverEvent:function(){this.onmousemoveEvent=a(this.node,k.move,e.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var a=o._empty,b;for(b in this.selection)if(!(b in a)){var c=d.byId(b);c&&this._removeItemClass(c,"Selected")}this.selection={};return this},_removeAnchor:function(){if(this.anchor)this._removeItemClass(this.anchor,"Anchor"),this.anchor=null;return this}});return l})},
"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(g,j,f){var j=j.NodeList,h=j.prototype;h.connect=j._adaptAsForEach(function(){return g.connect.apply(this,arguments)});h.coords=j._adaptAsMap(g.coords);j.events="blur,focus,change,click,error,keydown,keypress,keyup,load,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,submit".split(",");f.forEach(j.events,function(e){var d="on"+e;h[d]=function(c,b){return this.connect(d,
c,b)}});return g.NodeList=j})},"dojo/NodeList-dom":function(){define("./_base/kernel,./query,./_base/array,./_base/lang,./dom-class,./dom-construct,./dom-geometry,./dom-attr,./dom-style".split(","),function(g,j,f,h,e,d,c,b,i){function a(a){return function(b,c,d){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,d)}}var k=function(a){return 1==a.length&&"string"==typeof a[0]},o=function(a){var b=a.parentNode;b&&b.removeChild(a)},p=j.NodeList,l=p._adaptWithCondition,m=p._adaptAsForEach,
n=p._adaptAsMap;h.extend(p,{_normalize:function(a,b){var c=!0===a.parse;if("string"==typeof a.template)var e=a.templateFunc||g.string&&g.string.substitute,a=e?e(a.template,a):a;e=typeof a;"string"==e||"number"==e?(a=d.toDom(a,b&&b.ownerDocument),a=11==a.nodeType?h._toArray(a.childNodes):[a]):h.isArrayLike(a)?h.isArray(a)||(a=h._toArray(a)):a=[a];if(c)a._runParse=!0;return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,b,c,e){if(!(1!=b.nodeType&&"only"==c))for(var f,i=a.length,
h=i-1;0<=h;h--){var k=e?this._cloneNode(a[h]):a[h];if(a._runParse&&g.parser&&g.parser.parse){f||(f=b.ownerDocument.createElement("div"));f.appendChild(k);g.parser.parse(f);for(k=f.firstChild;f.firstChild;)f.removeChild(f.firstChild)}h==i-1?d.place(k,b,c):b.parentNode.insertBefore(k,b);b=k}},position:n(c.position),attr:l(a(b),k),style:l(a(i),k),addClass:m(e.add),removeClass:m(e.remove),toggleClass:m(e.toggle),replaceClass:m(e.replace),empty:m(d.empty),removeAttr:m(b.remove),marginBox:n(c.getMarginBox),
place:function(a,b){var c=j(a)[0];return this.forEach(function(a){d.place(a,c,b)})},orphan:function(a){return(a?j._filterResult(this,a):this).forEach(o)},adopt:function(a,b){return j(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new p;this.map(function(c){j(a,c).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,c=this,d=0;if("string"==typeof a){c=j._filterResult(this,b[0]);if(1==b.length)return c._stash(this);d=1}return this._wrap(f.filter(c,
b[d],b[d+1]),this)},addContent:function(a,b){for(var a=this._normalize(a,this[0]),c=0,d;d=this[c];c++)this._place(a,d,b,0<c);return this}});return p})},"dojo/dnd/Container":function(){define("../_base/array,../_base/declare,../_base/event,../_base/kernel,../_base/lang,../_base/window,../dom,../dom-class,../dom-construct,../Evented,../has,../on,../query,../ready,../touch,./common".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n){j=j("dojo.dnd.Container",a,{skipForm:!1,allowNested:!1,constructor:function(a,
d){this.node=c.byId(a);d||(d={});this.creator=d.creator||null;this.skipForm=d.skipForm;this.parent=d.dropParent&&c.byId(d.dropParent);this.map={};this.current=null;this.containerState="";b.add(this.node,"dojoDndContainer");(!d||!d._skipStartup)&&this.startup();this.events=[o(this.node,m.over,e.hitch(this,"onMouseOver")),o(this.node,m.out,e.hitch(this,"onMouseOut")),o(this.node,"dragstart",e.hitch(this,"onSelectStart")),o(this.node,"selectstart",e.hitch(this,"onSelectStart"))]},creator:function(){},
getItem:function(a){return this.map[a]},setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(a,b){var b=b||h.global,c=this.map,d=n._empty,e;for(e in c)e in d||a.call(b,c[e],e,this);return b},clearItems:function(){this.map={}},getAllNodes:function(){return p((this.allowNested?"":"> ")+".dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=n.getUniqueId();
var c=b.getAttribute("dndType"),d=b.getAttribute("dndData");a[b.id]={data:d||b.innerHTML,type:c?c.split(/\s*,\s*/):["text"]}},this);this.map=a;return this},insertNodes:function(a,b,c){if(this.parent.firstChild)if(b){if(!c)c=this.parent.firstChild}else{if(c)c=c.nextSibling}else c=null;var d;if(c)for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),c.parentNode.insertBefore(d.node,c);else for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,
{data:d.data,type:d.type}),this.parent.appendChild(d.node);return this},destroy:function(){g.forEach(this.events,function(a){a.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b,c){a._skipStartup=!0;return new c(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var a=this.parent.getElementsByTagName("tbody");if(a&&a.length)this.parent=a[0]}this.defaultCreator=n._defaultCreator(this.parent);this.sync()},
onMouseOver:function(a){for(var b=a.relatedTarget;b&&!(b==this.node);)try{b=b.parentNode}catch(c){b=null}b||(this._changeState("Container","Over"),this.onOverEvent());b=this._getChildByEvent(a);if(this.current!=b)this.current&&this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(b){a=null}}if(this.current)this._removeItemClass(this.current,"Over"),this.current=null;
this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){(!this.skipForm||!n.isFormElement(a))&&f.stop(a)},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,c){var d="dojoDnd"+a,e=a.toLowerCase()+"State";b.replace(this.node,d+c,d+this[e]);this[e]=c},_addItemClass:function(a,c){b.add(a,"dojoDndItem"+c)},_removeItemClass:function(a,c){b.remove(a,"dojoDndItem"+c)},_getChildByEvent:function(a){if(a=a.target)for(var c=a.parentNode;c;a=c,c=a.parentNode)if((c==
this.parent||this.allowNested)&&b.contains(a,"dojoDndItem"))return a;return null},_normalizedCreator:function(a,c){var d=(this.creator||this.defaultCreator).call(this,a,c);if(!e.isArray(d.type))d.type=["text"];if(!d.node.id)d.node.id=n.getUniqueId();b.add(d.node,"dojoDndItem");return d}});n._createNode=function(a){return!a?n._createSpan:function(b){return i.create(a,{innerHTML:b})}};n._createTrTd=function(a){var b=i.create("tr");i.create("td",{innerHTML:a},b);return b};n._createSpan=function(a){return i.create("span",
{innerHTML:a})};n._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};n._defaultCreator=function(a){var a=a.tagName.toLowerCase(),b="tbody"==a||"thead"==a?n._createTrTd:n._createNode(n._defaultCreatorNodes[a]);return function(a,c){var d=a&&e.isObject(a),f,i;d&&a.tagName&&a.nodeType&&a.getAttribute?(f=a.getAttribute("dndData")||a.innerHTML,d=(d=a.getAttribute("dndType"))?d.split(/\s*,\s*/):["text"],i=a):(f=d&&a.data?a.data:a,d=d&&a.type?a.type:["text"],i=("avatar"==c?n._createSpan:b)(""+f));if(!i.id)i.id=
n.getUniqueId();return{node:i,data:f,type:d}}};return j})},"dojo/dnd/Manager":function(){define("../_base/array,../_base/declare,../_base/event,../_base/lang,../_base/window,../dom-class,../Evented,../has,../keys,../on,../topic,../touch,./common,./autoscroll,./Avatar".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m){var n=j("dojo.dnd.Manager",[c],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:b("touch")?
0:16,OFFSET_Y:b("touch")?-64:16,overSource:function(a){if(this.avatar)this.target=a&&"Disabled"!=a.targetState?a:null,this.canDropFlag=Boolean(this.target),this.avatar.update();k.publish("/dnd/source/over",a)},outSource:function(a){if(this.avatar){if(this.target==a)this.target=null,this.canDropFlag=!1,this.avatar.update(),k.publish("/dnd/source/over",null)}else k.publish("/dnd/source/over",null)},startDrag:function(b,c,i){l.autoScrollStart(e.doc);this.source=b;this.nodes=c;this.copy=Boolean(i);this.avatar=
this.makeAvatar();e.body().appendChild(this.avatar.node);k.publish("/dnd/start",b,c,this.copy);this.events=[a(e.doc,o.move,h.hitch(this,"onMouseMove")),a(e.doc,o.release,h.hitch(this,"onMouseUp")),a(e.doc,"keydown",h.hitch(this,"onKeyDown")),a(e.doc,"keyup",h.hitch(this,"onKeyUp")),a(e.doc,"dragstart",f.stop),a(e.body(),"selectstart",f.stop)];d.add(e.body(),"dojoDnd"+(i?"Copy":"Move"))},canDrop:function(a){a=Boolean(this.target&&a);if(this.canDropFlag!=a)this.canDropFlag=a,this.avatar.update()},stopDrag:function(){d.remove(e.body(),
["dojoDndCopy","dojoDndMove"]);g.forEach(this.events,function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new m(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var c=this.avatar;if(c)l.autoScrollNodes(a),c=c.node.style,c.left=a.pageX+this.OFFSET_X+"px",c.top=a.pageY+this.OFFSET_Y+"px",c=Boolean(this.source.copyState(p.getCopyKeyState(a))),this.copy!=c&&this._setCopyStatus(c);
b("touch")&&a.preventDefault()},onMouseUp:function(a){if(this.avatar){if(this.target&&this.canDropFlag){var b=Boolean(this.source.copyState(p.getCopyKeyState(a)));k.publish("/dnd/drop/before",this.source,this.nodes,b,this.target,a);k.publish("/dnd/drop",this.source,this.nodes,b,this.target,a)}else k.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case i.CTRL:a=Boolean(this.source.copyState(!0));this.copy!=a&&this._setCopyStatus(a);break;case i.ESCAPE:k.publish("/dnd/cancel"),
this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==i.CTRL&&(a=Boolean(this.source.copyState(!1)),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();d.replace(e.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});p._manager=null;n.manager=p.manager=function(){if(!p._manager)p._manager=new n;return p._manager};return n})},"dojo/dnd/Avatar":function(){define("../_base/declare,../_base/window,../dom,../dom-attr,../dom-class,../dom-construct,../hccss,../query".split(","),
function(g,j,f,h,e,d,c,b){return g("dojo.dnd.Avatar",null,{constructor:function(b){this.manager=b;this.construct()},construct:function(){var b=d.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),a=this.manager.source,e,f=d.create("tbody",null,b),g=d.create("tr",null,f),l=d.create("td",null,g),j=Math.min(5,this.manager.nodes.length),n=0;c("highcontrast")&&d.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},l);d.create("span",{innerHTML:a.generateText?
this._generateText():""},l);for(h.set(g,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});n<j;++n)a.creator?e=a._normalizedCreator(a.getItem(this.manager.nodes[n].id).data,"avatar").node:(e=this.manager.nodes[n].cloneNode(!0),"tr"==e.tagName.toLowerCase()&&(g=d.create("table"),d.create("tbody",null,g).appendChild(e),e=g)),e.id="",g=d.create("tr",null,f),l=d.create("td",null,g),l.appendChild(e),h.set(g,{"class":"dojoDndAvatarItem",style:{opacity:(9-n)/10}});this.node=b},destroy:function(){d.destroy(this.node);
this.node=!1},update:function(){e.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(c("highcontrast")){var d=f.byId("a11yIcon"),a="+";this.manager.canDropFlag&&!this.manager.copy?a="< ":!this.manager.canDropFlag&&!this.manager.copy?a="o":this.manager.canDropFlag||(a="x");d.innerHTML=a}b("tr.dojoDndAvatarHeader td span"+(c("highcontrast")?" span":""),this.node).forEach(function(a){a.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},
"JBrowse/View/Track/LocationScale":function(){define(["dojo/_base/declare","JBrowse/View/Track/BlockBased","JBrowse/Util"],function(g,j,f){return g(j,{constructor:function(f){this.loaded=!0;this.labelClass=f.labelClass;this.posHeight=f.posHeight;this.height=Math.round(1.2*f.posHeight)},makeTrackLabel:function(){},makeTrackMenu:function(){},fillBlock:function(h){var e=h.blockIndex,d=h.block,c=h.leftBase,b=document.createElement("div"),c=f.addCommas(c+1);b.className=this.labelClass;b.style.left="-"+
Number(c.length)/1.7+"ex";b.appendChild(document.createTextNode(c));d.appendChild(b);this.heightUpdate(Math.round(1.2*this.posHeight),e);h.finishCallback()}})})},"JBrowse/View/Track/BlockBased":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/aspect,dojo/dom-construct,dojo/dom-geometry,JBrowse/View/InfoDialog,dijit/Dialog,dijit/Menu,dijit/PopupMenuItem,dijit/MenuItem,dijit/CheckedMenuItem,dijit/MenuSeparator,JBrowse/Util,JBrowse/Errors,JBrowse/View/TrackConfigEditor,JBrowse/View/ConfirmDialog".split(","),
function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n){return g(null,{constructor:function(a){a=a||{};this.config=a.config||{};this.config=p.deepUpdate(dojo.clone(this._defaultConfig()),this.config);this.refSeq=a.refSeq;this.name=a.label||this.config.label;this.key=a.key||this.config.key||this.name;this._changedCallback=a.changeCallback||function(){};this.height=0;this.shown=!0;this.empty=!1;this.browser=a.browser;this.store=a.store},_defaultConfig:function(){return{}},heightUpdate:function(a,b){this.shown?(void 0!==
b&&(this.blockHeights[b]=a),this.height=Math.max(this.height,a),this.inShowRange||this.heightUpdateCallback(Math.max(this.labelHeight,this.height))):this.heightUpdateCallback(0)},setViewInfo:function(a,b,c,d,e,f){this.genomeView=a;this.heightUpdateCallback=b;this.div=d;this.widthPct=e;this.widthPx=f;this.leftBlank=document.createElement("div");this.leftBlank.className="blank-block";this.rightBlank=document.createElement("div");this.rightBlank.className="blank-block";this.div.appendChild(this.rightBlank);
this.div.appendChild(this.leftBlank);this.sizeInit(c,e);this.labelHTML="";this.labelHeight=0;this.label||this.makeTrackLabel();this.setLabel(this.key)},makeTrackLabel:function(){var a=dojo.create("div",{className:"track-label dojoDndHandle",id:"label_"+this.name,style:{position:"absolute",top:0}},this.div);this.label=a;if((this.config.style||{}).trackLabelCss)a.style.cssText+=";"+trackConfig.style.trackLabelCss;dojo.create("div",{className:"track-close-button",onclick:dojo.hitch(this,function(a){this.browser.view.suppressDoubleClick(100);
this.browser.publish("/jbrowse/v1/v/tracks/hide",[this.config]);a.stopPropagation()})},a);dojo.create("span",{className:"track-label-text"},a);a=dojo.create("div",{className:"track-menu-button"},a);dojo.create("div",{},a);this.labelMenuButton=a;this.makeTrackMenu()},hide:function(){if(this.shown)this.div.style.display="none",this.shown=!1},show:function(){if(!this.shown)this.div.style.display="block",this.shown=!0},initBlocks:function(){this.blocks=Array(this.numBlocks);this.blockHeights=Array(this.numBlocks);
for(var a=0;a<this.numBlocks;a++)this.blockHeights[a]=0;this.lastAttached=this.firstAttached=null;this._adjustBlanks()},clear:function(){if(this.blocks)for(var a=0;a<this.numBlocks;a++)this._hideBlock(a);this.initBlocks();this.makeTrackMenu()},setLabel:function(a){if(!(void 0===this.label||this.labelHTML==a))this.labelHTML=a,dojo.query(".track-label-text",this.label).forEach(function(b){b.innerHTML=a}),this.labelHeight=this.label.offsetHeight},transfer:function(){},startZoom:function(){},endZoom:function(){},
showRange:function(a,b,c,d,e,f,i){if(this.fatalError)this.showFatalError(this.fatalError);else if(void 0!==this.blocks&&this.blocks.length){if(0==this.labelHeight&&this.label)this.labelHeight=this.label.offsetHeight;this.inShowRange=!0;this.height=this.labelHeight;var h=null==this.firstAttached?b+1:this.firstAttached,k=null==this.lastAttached?a-1:this.lastAttached,g,l;for(g=k;g>=a;g--)l=c+d*(g-a),this._showBlock(g,l,l+d,e,f,i);for(g=k+1;g<=b;g++)l=c+d*(g-a),this._showBlock(g,l,l+d,e,f,i);c=this.blocks[a];
for(g=h;g<a;g++)this.transfer(this.blocks[g],c,e,f,i),this.cleanupBlock(this.blocks[g]),this._hideBlock(g);c=this.blocks[b];for(g=k;g>b;g--)this.transfer(this.blocks[g],c,e,f,i),this.cleanupBlock(this.blocks[g]),this._hideBlock(g);this.firstAttached=a;this.lastAttached=b;this._adjustBlanks();this.inShowRange=!1;this.heightUpdate(this.height);this.updateStaticElements(this.genomeView.getPosition())}},cleanupBlock:function(){},_hideBlock:function(a){this.blocks[a]&&(this.div.removeChild(this.blocks[a]),
this.blocks[a]=void 0,this.blockHeights[a]=0)},_adjustBlanks:function(){null===this.firstAttached||null===this.lastAttached?(this.leftBlank.style.left="0px",this.leftBlank.style.width="50%",this.rightBlank.style.left="50%",this.rightBlank.style.width="50%"):(this.leftBlank.style.width=this.firstAttached*this.widthPct+"%",this.rightBlank.style.left=(this.lastAttached+1)*this.widthPct+"%",this.rightBlank.style.width=(this.numBlocks-this.lastAttached-1)*this.widthPct+"%")},hideAll:function(){if(null!=
this.firstAttached){for(var a=this.firstAttached;a<=this.lastAttached;a++)this._hideBlock(a);this.lastAttached=this.firstAttached=null;this._adjustBlanks()}},changed:function(){this.hideAll();this._changedCallback&&this._changedCallback()},_makeLoadingMessage:function(){var a=dojo.create("div",{className:"loading",innerHTML:'<div class="text">Loading</span>',title:"Loading data...",style:{visibility:"hidden"}});window.setTimeout(function(){a.style.visibility="visible"},200);return a},showFatalError:function(a){dojo.query(".block",
this.div).concat(dojo.query(".blank-block",this.div)).concat(dojo.query(".error",this.div)).orphan();this.blocks=[];this.blockHeights=[];this.fatalErrorMessageElement=this._renderErrorMessage(a||this.fatalError,this.div);this.heightUpdate(e.position(this.fatalErrorMessageElement).h);this.updateStaticElements(this.genomeView.getPosition())},_handleError:function(a){console.error(""+a,a.stack,a);var b="object"==typeof a;b&&a instanceof l.TrackBlockTimeout?this.fillBlockTimeout(a.blockIndex,a.block,
a):b&&a instanceof l.TrackBlockError?this.fillBlockError(a.blockIndex,a.block,a):(this.fatalError=a,this.showFatalError(a))},fillBlockError:function(a,b,c){c=c||this.fatalError||this.error;h.empty(b);b=this._renderErrorMessage(c,b);this.heightUpdate(dojo.position(b).h,a)},_renderErrorMessage:function(a,b){return h.create("div",{className:"error",innerHTML:'<h2>Error</h2><div class="text">An error was encountered when displaying this track.</div>'+(a?'<div class="codecaption">Diagnostic message</div><code>'+
a+"</code>":""),title:"An error occurred"},b)},fillTooManyFeaturesMessage:function(a,b,c){this.fillMessage(a,b,"Too much data to show"+(c>=this.browser.view.maxPxPerBp?"":"; zoom in to see detail")+".")},_showBlock:function(a,b,c,d,e,f){if(this.empty||this.fatalError)this.heightUpdate(this.labelHeight);else if(this.blocks[a])this.heightUpdate(this.blockHeights[a],a);else{var i=document.createElement("div");i.className="block";i.style.left=a*this.widthPct+"%";i.style.width=this.widthPct+"%";i.startBase=
b;i.endBase=c;this.blocks[a]=i;this.div.appendChild(i);if(this.fatalError)this.fillBlockError(a,i);else{var h=this._makeLoadingMessage();i.appendChild(h);var k=function(){i&&h.parentNode&&i.removeChild(h)};try{this.fillBlock({blockIndex:a,block:i,leftBlock:this.blocks[a-1],rightBlock:this.blocks[a+1],leftBase:b,rightBase:c,scale:d,stripeWidth:this.widthPx,containerStart:e,containerEnd:f,finishCallback:k})}catch(g){console.error(g,g.stack),this.fillBlockError(a,i,g),k()}}}},moveBlocks:function(a){var b=
Array(this.numBlocks),c=Array(this.numBlocks),d;for(d=0;d<this.numBlocks;d++)c[d]=0;var e;0>this.lastAttached+a||this.firstAttached+a>=this.numBlocks?this.lastAttached=this.firstAttached=null:(this.firstAttached=Math.max(0,Math.min(this.numBlocks-1,this.firstAttached+a)),this.lastAttached=Math.max(0,Math.min(this.numBlocks-1,this.lastAttached+a)),e=0>a?this.blocks[this.firstAttached-a]:this.blocks[this.lastAttached-a]);for(d=0;d<this.blocks.length;d++){var f=d+a;if(0>f||f>=this.numBlocks)e&&this.blocks[d]&&
this.transfer(this.blocks[d],e),this._hideBlock(d);else{b[f]=this.blocks[d];if(b[f])b[f].style.left=f*this.widthPct+"%";c[f]=this.blockHeights[d]}}this.blocks=b;this.blockHeights=c;this._adjustBlanks()},sizeInit:function(a,b,c){this.numBlocks=a;this.widthPct=b;c&&this.moveBlocks(-c);if(this.blocks&&0<this.blocks.length){for(var d=this.blocks[a-1],c=a;c<this.blocks.length;c++)d&&this.blocks[c]&&this.transfer(this.blocks[c],d),this._hideBlock(c);c=this.blocks.length;this.blocks.length=a;for(this.blockHeights.length=
a;c<a;c++)this.blocks[c]=void 0,this.blockHeights[c]=0;this.lastAttached=Math.min(this.lastAttached,a-1);if(this.firstAttached>this.lastAttached)this.lastAttached=this.firstAttached=null;if(this.blocks.length!=a)throw Error("block number mismatch: should be "+a+"; blocks.length: "+this.blocks.length);for(c=0;c<a;c++)if(this.blocks[c])this.blocks[c].style.left=c*b+"%",this.blocks[c].style.width=b+"%"}else this.initBlocks();this.makeTrackMenu()},fillMessage:function(a,b,c,d){b=dojo.create("div",{className:d||
"message",innerHTML:c},b);this.heightUpdate(dojo.position(b).h,a)},updateStaticElements:function(a){this.window_info=dojo.mixin(this.window_info||{},a);this.fatalErrorMessageElement&&dojo.style(this.fatalErrorMessageElement,{left:a.x+0.2*this.window_info.width+"px",width:0.6*this.window_info.width+"px"});if(this.label)this.label.style.left=a.x+"px"},_renderContextMenu:function(c,d,e){e||(e=new b);for(key in c){var f=c[key];try{if(f.children){var h=new b;e.addChild(h);e.addChild(new i({popup:h,label:f.label}));
this._renderContextMenu(f.children,d,h)}else{var g=dojo.clone(f);if(g.action||g.url||g.href)g.onClick=this._makeClickHandler(f,d);if(g.label&&!g.onClick)g.disabled=!0;e.addChild(new ({"dijit/MenuItem":a,"dijit/CheckedMenuItem":k,"dijit/MenuSeparator":o}[f.type]||a)(g))}}catch(l){console.error("failed to render menu item: "+l)}}return e},_makeClickHandler:function(a,b){var c=this;if("function"==typeof a)a={action:a};else if("undefined"==typeof a)return console.error("Undefined click specification, cannot make click handler"),
function(){};var d=function(d){if(!c.genomeView.dragging){var e=b||this,f=c._processMenuSpec(dojo.clone(a),e),i=f.url||f.href;f.url=i;dojo.clone(f.style||{});f.action=f.action||(i?"iframeDialog":f.content?"contentDialog":!1);f.title=f.title||f.label;"string"==typeof f.action?(f.action={iframedialog:"iframeDialog",iframe:"iframeDialog",contentdialog:"contentDialog",content:"contentDialog",baredialog:"bareDialog",bare:"bareDialog",xhrdialog:"xhrDialog",xhr:"xhrDialog",newwindow:"newWindow",_blank:"newWindow"}[(""+
f.action).toLowerCase()],"newWindow"==f.action?window.open(i,"_blank"):f.action in{iframeDialog:1,contentDialog:1,xhrDialog:1,bareDialog:1}&&c._openDialog(f,d,e)):"function"==typeof f.action&&f.action.call(e,d)}};if(a.label)d.label=a.label;return d},_trackDetailsContent:function(){var a='<div class="detail">',b=dojo.hitch(this,"_fmtDetailField"),a=a+b("Name",this.key||this.name),c=dojo.clone(this.getMetadata());delete c.key;delete c.label;"object"==typeof c.conf&&delete c.conf;var d=[],e;for(e in c)d.push(e);
dojo.forEach(d,function(d){a+=b(p.ucFirst(d),c[d])});return a+="</div>"},getMetadata:function(){return this.browser&&this.browser.trackMetaDataStore?this.browser.trackMetaDataStore.getItem(this.name):this.config.metadata?this.config.metadata:{}},_fmtDetailField:function(a,b,c){var d=typeof b;if("boolean"==d)b=b?"yes":"no";else{if("undefined"==d||null===b)return"";j.isArray(b)&&(b=b.join(" "))}c=c||a.replace(/\s+/g,"_").toLowerCase();return'<div class="field_container"><h2 class="field '+c+'">'+a+
'</h2> <div class="value '+c+'">'+b+"</div></div>"},_trackMenuOptions:function(){var a=this;return[{label:"About this track",title:"About track: "+(this.key||this.name),iconClass:"jbrowseIconHelp",action:"contentDialog",content:dojo.hitch(this,"_trackDetailsContent")},{label:"Edit config",title:"edit this track's configuration",iconClass:"dijitIconConfigure",action:function(){(new m(a.config)).show(function(b){a.browser.publish("/jbrowse/v1/v/tracks/replace",[b.conf])})}},{label:"Delete track",title:"delete this track",
iconClass:"dijitIconDelete",action:function(){(new n({title:"Delete track?",message:"Really delete this track?"})).show(function(b){b&&a.browser.publish("/jbrowse/v1/v/tracks/delete",[a.config])})}}]},_processMenuSpec:function(a,b){for(var c in a)a[c]="object"==typeof a[c]?this._processMenuSpec(a[c],b):this.template(b.feature,this._evalConf(b,a[c],c));return a},_evalConf:function(a,b,c){var d={action:1,click:1,content:1};return"function"==typeof b&&!d[c]?b.apply(a,a.callbackArgs||[]):b},_openDialog:function(a,
b,i){var i=i||{},b=a.action,b=b.replace(/Dialog/,""),h=i.feature&&(i.feature.get("name")||i.feature.get("id")),h={"class":"popup-dialog popup-dialog-"+b,title:a.title||a.label||(h?h+" details":"Details"),style:dojo.clone(a.style||{})};a.dialog&&g.safeMixin(h,a.dialog);var k;if("xhr"==b||"content"==b){if("xhr"==b)h.href=a.url;k=new d(h);i.dialog=k;"content"==b&&k.set("content",this._evalConf(i,a.content,null));delete i.dialog}else if("bare"==b)k=new c(h),i.dialog=k,k.set("content",this._evalConf(i,
a.content,null)),delete i.dialog;else if("iframe"==b){dojo.safeMixin(h.style,{width:"90%",height:"90%"});h.draggable=!1;var i=dojo.create("div",{},document.body),l=dojo.create("iframe",{width:"100%",height:"100%",tabindex:"0",style:{border:"none"},src:a.url},i);k=new c(h,i);dojo.create("a",{href:a.url,target:"_blank",className:"dialog-new-window",title:"open in new window",onclick:dojo.hitch(k,"hide"),innerHTML:a.url},k.titleBar);a=function(){var a=e.getMarginBox(k.domNode);l.width=a.w;l.height=a.h-
e.getMarginBox(k.titleBar).h-2};f.after(k,"layout",a);f.after(k,"show",a)}f.after(k,"hide",function(){setTimeout(function(){k.destroyRecursive()},500)});k.show()},template:function(a,b){if("string"!=typeof b||!a)return b;if(b)return b.replace(/\{([^}]+)\}/g,function(b,c){var d=a?a.get(c.toLowerCase()):void 0;return void 0!==d?d:""})},makeTrackMenu:function(){var a=this._trackMenuOptions();if(a&&a.length&&this.label&&this.labelMenuButton)this.trackMenu&&this.trackMenu.destroyRecursive(),a=this._renderContextMenu(a,
{menuButton:this.labelMenuButton,track:this,browser:this.browser,refSeq:this.refSeq}),a.startup(),a.set("leftClickToOpen",!0),a.bindDomNode(this.labelMenuButton),a.set("leftClickToOpen",!1),a.bindDomNode(this.label),this.trackMenu=a},fillBlockTimeout:function(a,b){h.empty(b);dojo.addClass(b,"timed_out");this.fillMessage(a,b,"This region took too long to display, possibly because it contains too much data. Try zooming in to show a smaller region.")}})})},"JBrowse/View/InfoDialog":function(){define(["dojo/_base/declare",
"dijit/focus","dijit/Dialog","dojo/on","dijit/form/Button"],function(g,j,f,h,e){return g(f,{autofocus:!1,onLoad:function(){this.inherited(arguments);this._addActionBar()},_addActionBar:function(){if(this.get("content")&&!this.actionBar){this.actionBar=dojo.create("div",{className:"infoDialogActionBar dijitDialogPaneActionBar"});(new e({className:"OK",label:"OK",onClick:dojo.hitch(this,"hide")})).placeAt(this.actionBar);var d=this.get("content"),c=dojo.create("div",{className:"infoDialogContent"});
"string"==typeof d?c.innerHTML=d:(d.parentNode&&d.parentNode.removeChild(d),c.addChild(d));this.set("content",[c,this.actionBar])}},show:function(){this._addActionBar();this.inherited(arguments);j.focus(this.closeButtonNode);var d=((dijit||{})._underlay||{}).domNode;this._extraEvents=[];d&&this._extraEvents.push(h(d,"click",dojo.hitch(this,"hideIfVisible")));this._extraEvents.push(h(document.body,"keydown",dojo.hitch(this,function(c){0<=[dojo.keys.ESCAPE,dojo.keys.ENTER].indexOf(c.keyCode)&&this.hideIfVisible()})))},
hideIfVisible:function(){this.get("open")&&this.hide()},hide:function(){this.inherited(arguments);dojo.forEach(this._extraEvents||[],function(d){d.remove()})}})})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare,dojo/dom-style,dojo/query,./registry,./MenuItem,./hccss".split(","),function(g,j,f,h,e){return g("dijit.PopupMenuItem",e,{_fillContent:function(){if(this.srcNodeRef){var d=f("*",this.srcNodeRef);this.inherited(arguments,[d[0]]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){this.inherited(arguments);
if(!this.popup){var d=f("[widgetId]",this.dropDownContainer)[0];this.popup=h.byNode(d)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&j.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(d){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(d),delete this.popup);this.inherited(arguments)}})})},"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare",
"dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(g,j,f,h){return g("dijit.CheckedMenuItem",f,{templateString:h,checked:!1,_setCheckedAttr:function(e){j.toggle(this.domNode,"dijitCheckedMenuItemChecked",e);this.domNode.setAttribute("aria-checked",e?"true":"false");this._set("checked",e)},iconClass:"",onChange:function(){},_onClick:function(e){this.disabled||(this.set("checked",!this.checked),this.onChange(this.checked));this.onClick(e)}})})},"url:dijit/templates/CheckedMenuItem.html":'<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="menuitemcheckbox" tabIndex="-1">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point="iconNode"/>\n\t\t<span class="dijitCheckedMenuItemIconChar">&#10003;</span>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,labelNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">&#160;</td>\n</tr>\n',
"JBrowse/Errors":function(){define(["dojo/_base/declare"],function(g){var j=g(Error,{constructor:function(f){dojo.mixin(this,f)}}),f={};f.TrackError=g(j,{toString:function(){return"Error displaying "+this.track.name+" track"+this.message?" "+this.message:"."}});f.TrackBlockError=g(f.TrackError,{});f.TrackBlockTimeout=g(f.TrackBlockError,{constructor:function(f){this.message=f.message||"Timed out"}});return f})},"JBrowse/View/TrackConfigEditor":function(){define("dojo/_base/declare,dojo/aspect,dojo/json,dojo/on,dojo/dom-construct,dijit/Dialog,dijit/form/Button".split(","),
function(g,j,f,h,e,d,c){return g(null,{constructor:function(b){this.trackConfig=b},_makeActionBar:function(b,d){var a=e.create("div",{className:"dijitDialogPaneActionBar"});(new c({iconClass:"dijitIconDelete",label:"Cancel",onClick:dojo.hitch(this,function(){d&&d();this.dialog.hide()})})).placeAt(a);this.applyButton=new c({iconClass:"dijitIconEdit",label:"Apply",onClick:dojo.hitch(this,function(){this.newConfig?b&&b({conf:this.newConfig}):d&&d();this.dialog.hide()})});this.applyButton.placeAt(a);
return{domNode:a}},show:function(b,c){var a=this.dialog=new d({title:"Edit track configuration",className:"trackConfigEditor"}),e=[this._makeEditControls().domNode,this._makeActionBar(b,c).domNode];a.set("content",e);a.show();j.after(a,"hide",dojo.hitch(this,function(){setTimeout(function(){a.destroyRecursive()},500)}))},_makeEditControls:function(){var b=dojo.hitch(this,function(){this.newConfig=this._parseNewConfig(d.value)}),c=e.create("div",{className:"editControls"}),a=this._stringifyConfig(this.trackConfig),
d=e.create("textarea",{rows:Math.min((a||"").match(/\n/g).length+4,20),cols:70,value:a,spellcheck:!1,onchange:b},c),f="",h=this,g=function(){if(h.dialog.get("open")){if(d.value!=f)b(),f=d.value;window.setTimeout(g,700)}};window.setTimeout(g,700);this.errorReportArea=e.create("div",{className:"errors"},c);return{domNode:c}},_stringifyConfig:function(b){b=dojo.mixin({},b);delete b.store;if(!b.style)b.style={};if(!b.metadata)b.metadata={};return f.stringify(b,void 0,2)},_reportError:function(b){this.errorReportArea.innerHTML=
'<div class="error">'+b+"</div>";this.applyButton.set("disabled",!0)},_clearErrors:function(){e.empty(this.errorReportArea);this.applyButton.set("disabled",!1)},_parseNewConfig:function(b){var c;try{c=f.parse(b,!0),this._clearErrors()}catch(a){this._reportError(a)}if(c)c.store=this.trackConfig.store;return c}})})},"JBrowse/View/ConfirmDialog":function(){define(["dojo/_base/declare","dijit/focus","dijit/Dialog","dojo/on","dijit/form/Button"],function(g,j,f,h,e){return g(f,{autofocus:!1,constructor:function(d){this.message=
d.message||"Do you really want to do this?";this.confirmLabel=d.confirmLabel||"Yes";this.denyLabel=d.denyLabel||"No";dojo.connect(this,"onLoad",this,"_addActionBar")},_addActionBar:function(){var d=this;if(this.get("content")&&!this.actionBar){this.actionBar=dojo.create("div",{className:"infoDialogActionBar dijitDialogPaneActionBar"});(new e({className:"yes",label:this.confirmLabel,onClick:function(){d.callback(!0);d.hide()}})).placeAt(this.actionBar);(new e({className:"no",label:this.denyLabel,onClick:function(){d.callback(!1);
d.hide()}})).placeAt(this.actionBar);var c=this.get("content"),b=dojo.create("div",{className:"infoDialogContent"});"string"==typeof c?b.innerHTML=c:(c.parentNode&&c.parentNode.removeChild(c),b.addChild(c));this.set("content",[b,this.actionBar])}},show:function(d){this.callback=d||function(){};this.set("content",this.message);this._addActionBar();this.inherited(arguments);j.focus(this.closeButtonNode)}})})},"JBrowse/View/Track/GridLines":function(){define(["dojo/_base/declare","JBrowse/View/Track/BlockBased"],
function(g,j){return dojo.declare(j,{constructor:function(){this.loaded=!0;this.name="gridlines"},makeTrackLabel:function(){},makeTrackMenu:function(){},fillBlock:function(f){this.renderGridlines(f.block,f.leftBase,f.rightBase);f.finishCallback();this.heightUpdate(100,f.blockIndex)},renderGridlines:function(f,h,e){for(var h=e-h,h=!(h%20)?20:!(h%10)?10:!(h%5)?5:!(h%2)?2:0,e=function(b,c){var a=document.createElement("div");a.style.cssText="left: "+c+"%; width: 0px";a.className="gridline "+b;return a},
d=0;d<h;d++){var c=100/h*d;f.appendChild(e(0==c||20==h&&10==d?"gridline_major":"gridline_minor",c))}}})})},"JBrowse/BehaviorManager":function(){define([],function(){function g(g){this.context=g.context;this.behaviors=g.behaviors}g.prototype.initialize=function(){this.removeAll();for(var g in this.behaviors)this.behaviors[g].apply_on_init&&this.applyBehaviors(g)};g.prototype.applyBehaviors=function(){dojo.forEach(arguments,function(g){g=this._get(g);if(!g.applied)g.handles=g.handles||[],g.handles=
g.apply.call(this.context||this,this,g.handles),g.applied=!0},this)};g.prototype._get=function(g){g=this.behaviors[g];if(!g)throw"no behavior registed with name ''name";return g};g.prototype.swapBehaviors=function(g,f){this.removeBehaviors(g);this.applyBehaviors(f)};g.prototype.removeBehaviors=function(){dojo.forEach(arguments,function(g){g=this._get(g);if(g.applied)(g.remove||function(f,h){dojo.forEach(h,dojo.disconnect,dojo)}).call(this.context||this,this,g.handles),g.applied=!1},this)};g.prototype.removeAll=
function(){for(var g in this.behaviors)this.removeBehaviors(g)};return g})},"JBrowse/View/Animation/Zoomer":function(){define(["JBrowse/View/Animation"],function(g){function j(f,h,e,d,c){g.call(this,h,e,d);this.toZoom=h.zoomContainer;this.initialWidth=e=this.toZoom.clientWidth;this.width0=e*Math.min(1,f);this.distance=e*Math.max(1,f)-this.width0;this.zoomingIn=1<f;this.center=(h.getX()+h.elem.clientWidth*c)/h.scrollContainer.clientWidth;this.initialX=this.subject.getX();this.initialLeft=parseInt(this.toZoom.style.left)}
j.prototype=new g;j.prototype.step=function(f){var f=this.zoomingIn?f:1-f,f=f*f*this.distance+this.width0,h=this.center*this.initialWidth-this.center*f;this.toZoom.style.width=f+"px";this.toZoom.style.left=this.initialLeft+h+"px";this.subject.updateStaticElements&&this.subject.updateStaticElements({x:this.initialX-h})};return j})},"JBrowse/View/Animation":function(){define([],function(){function g(g,f,h){if(void 0!==g){"animation"in g&&g.animation.stop();this.index=0;this.time=h;this.subject=g;this.callback=
f;var e=this;this.animFunction=function(){e.animate()};this.animID=setTimeout(this.animFunction,33);this.frames=0;g.animation=this}}g.prototype.animate=function(){if(this.finished)this.stop();else{var g=33,f=0;"startTime"in this?(f=(new Date).getTime()-this.startTime,g=Math.max(33,f/this.frames)):this.startTime=(new Date).getTime();f<this.time?(this.step(f/this.time),this.frames++):(this.step(1),this.finished=!0);this.animID=setTimeout(this.animFunction,g)}};g.prototype.stop=function(){clearTimeout(this.animID);
delete this.subject.animation;this.callback.call(this.subject,this)};return g})},"JBrowse/View/Animation/Slider":function(){define(["JBrowse/View/Animation"],function(g){function j(f,h,e,d){g.call(this,f,h,e);this.slideStart=f.getX();this.slideDistance=d}j.prototype=new g;j.prototype.step=function(f){f=this.slideStart-this.slideDistance*(-0.5*Math.cos(f*Math.PI)+0.5)|0;f=Math.max(Math.min(this.subject.maxLeft-this.subject.offset,f),this.subject.minLeft-this.subject.offset);this.subject.setX(f)};return j})},
"JBrowse/TouchScreenSupport":function(){define([],function(){var g,j,f;return f={CompareObjPos:function(f,e){for(var d=0,c=0,b=e.pageY,i=0;i<f.length&&!(d=c++,findPos(f[i]).top>b);i++);return d},checkAvatarPosition:function(f){var e=document.getElementById("tracksAvail"),d=document.getElementById("container");return f.pageX<e.offsetLeft+e.offsetWidth?e:d},removeTouchEvents:function(){g=null},touchSimulated:function(h){if(1>=h.touches.length){var e=h.changedTouches[0],d="",c=document.getElementsByClassName("dojoDndAvatar"),
b={},i=f.checkAvatarPosition(e),a=i.getElementsByClassName("dojoDndItem"),d={},k=document.createEvent("MouseEvent"),o=document.createEvent("MouseEvent");switch(h.type){case "touchstart":g=e.pageX;d="mousedown";break;case "touchmove":h.preventDefault();d="mousemove";break;default:return}k.initMouseEvent(d,!0,!0,window,1,e.pageX,e.pageY,e.clientX,e.clientY,!1,!1,!1,!1,0,null);o.initMouseEvent("mouseover",!0,!0,window,1,e.pageX,e.pageY,e.clientX,e.clientY,!1,!1,!1,!1,0,null);switch(h.type){case "touchstart":e.target.dispatchEvent(k);
e.target.dispatchEvent(o);j=i;break;case "touchmove":if(0<c.length){0<a.length&&(d=f.CompareObjPos(a,e),b=a[d]);try{if(j!=i){var p=document.createEvent("MouseEvent");p.initMouseEvent("mouseout",!0,!0,window,1,e.pageX,e.pageY,e.clientX,e.clientY,!1,!1,!1,!1,0,null);j.dispatchEvent(p)}b.dispatchEvent(o);b.dispatchEvent(k)}catch(l){i.dispatchEvent(o),i.dispatchEvent(k)}}}}else f.removeTouchEvents()},touchEnd:function(h){var e=h.changedTouches[0],d=document.getElementsByClassName("dojoDndAvatar"),c={},
b=f.checkAvatarPosition(e),i=b.getElementsByClassName("dojoDndItem"),a={},k=document.createEvent("MouseEvent"),j=document.createEvent("MouseEvent");g!==e.pageX&&h.preventDefault();f.findPos(e.target);k.initMouseEvent("mouseup",!0,!0,window,1,e.pageX,e.pageY,e.clientX,e.clientY,!1,!1,!1,!1,0,null);j.initMouseEvent("mouseover",!0,!0,window,1,e.pageX,e.pageY,e.clientX,e.clientY,!1,!1,!1,!1,0,null);if(0<d.length){0<i.length&&(a=CompareObjPos(i,e),c=i[a]);try{c.dispatchEvent(j),c.dispatchEvent(k)}catch(p){e.target.dispatchEvent(j),
b.dispatchEvent(j)}}else e.target.dispatchEvent(k),e.target.dispatchEvent(j);f.removeTouchEvents()},touchHandle:function(h){dojo.query(".dojoDndItemAnchor").connect("touchstart",f.touchSimulated);dojo.query(".dojoDndItemAnchor").connect("touchmove",f.touchSimulated);dojo.query(".dojoDndItemAnchor").connect("touchend",f.touchEnd);dojo.query(".dojoDndItemAnchor").connect("click",function(){});if(1>=h.touches.length){var e=h.changedTouches[0],d="";switch(h.type){case "touchstart":g=e.pageX;d="mousedown";
break;case "touchmove":h.preventDefault();d="mousemove";break;case "touchend":g!==e.pageX&&h.preventDefault();d="mouseup";break;default:return}h=document.createEvent("MouseEvent");h.initMouseEvent(d,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null);e.target.dispatchEvent(h)}else f.removeTouchEvents()},touchinit:function(){dojo.query(".dojoDndItem").connect("touchstart",f.touchSimulated);dojo.query(".dojoDndItem").connect("touchmove",f.touchSimulated);dojo.query(".dojoDndItem").connect("touchend",
f.touchEnd);dojo.query(".locationThumb").connect("touchstart",f.touchHandle);dojo.query(".locationThumb").connect("touchmove",f.touchHandle);dojo.query(".locationThumb").connect("touchend",f.touchHandle);dojo.query(".dojoDndItem").connect("click",function(){});dojo.query(".dojoDndTarget").connect("touchstart",f.touchHandle);dojo.query(".dojoDndTarget").connect("touchmove",f.touchHandle);dojo.query(".dojoDndTarget").connect("touchend",f.touchHandle);dojo.query(".dijitSplitter").connect("touchstart",
f.touchHandle);dojo.query(".dijitSplitter").connect("touchmove",f.touchHandle);dojo.query(".dijitSplitter").connect("touchend",f.touchHandle)},loadTouch:function(){f.touchinit();document.documentElement.style.webkitTouchCallout="none"},findPos:function(f){var e=0,d={};if(f.offsetParent){do e+=f.offsetTop;while(f=f.offsetParent)}d.top=e;return d}}})},"JBrowse/ConfigManager":function(){define(["dojo/_base/declare","JBrowse/Util"],function(g,j){return g(null,{constructor:function(f){this.config=dojo.clone(f.config||
{});this.defaults=dojo.clone(f.defaults||{});this.browser=f.browser;this.skipValidation=f.skipValidation;this.topLevelIncludes=this.config.include||this.defaults.include;delete this.defaults.include;delete this.config.include},getFinalConfig:function(f){this._loadIncludes({include:this.topLevelIncludes},dojo.hitch(this,function(h){this._mergeConfigs(h,this.config);this.config=h;this.config=this._applyDefaults(this.config,this.defaults);this.skipValidation||this._validateConfig(this.config);f(this.config)}))},
_getConfigAdaptor:function(f,h){var e="JBrowse/ConfigAdaptor/"+f.format;"version"in f&&(e+="_v"+f.version);e.replace(/\W/g,"");return require([e],function(d){h(new d(f))})},_loadIncludes:function(f,h){var f=dojo.clone(f),e=f.include||[];delete f.include;"object"!=typeof e&&(e=[e]);for(var d=0;d<e.length;d++)"string"==typeof e[d]&&(e[d]={url:e[d]});var c=e.length,b=dojo.map(e,function(d){var a={};if(!d)return a;if(!("format"in d))d.format="JB_json";if("JB_json"==d.format&&!("version"in d))d.version=
1;this._getConfigAdaptor(d,dojo.hitch(this,function(e){e?e.load({config:d,baseUrl:f.baseUrl,onSuccess:dojo.hitch(this,function(d){this._loadIncludes(d,dojo.hitch(this,function(d){a.loaded=!0;a.data=d;--c||h(this._mergeIncludes(f,b))}))}),onFailure:dojo.hitch(this,function(d){a.error=d;404!=d.status&&this._fatalError(d);--c||h(this._mergeIncludes(f,b))})}):a.error="Could not load config "+d.url+", no configuration adaptor found for config format "+d.format+" version "+d.version}));return a},this);
b.length||h(f)},_mergeIncludes:function(f,h){dojo.forEach(h,function(e){e.loaded&&e.data&&this._mergeConfigs(f,e.data)},this);return f},_applyDefaults:function(f,h){return j.deepUpdate(dojo.clone(h),f)},_validateConfig:function(f){(!f.tracks||!f.tracks.length)&&this._fatalError("No tracks defined in configuration.");f.baseUrl||this._fatalError("Must provide a <code>baseUrl</code> in configuration");if(this.hasFatalErrors)throw"Errors in configuration, aborting";},_fatalError:function(f){this.hasFatalErrors=
!0;f.url&&(f=f+" when loading "+f.url);this.browser.fatalError(f)},_mergeConfigs:function(f,h){for(var e in h)if("tracks"==e&&e in f)this._mergeTrackConfigs(f[e],h[e]);else if(e in f&&"object"==typeof h[e]&&"object"==typeof f[e])this._mergeConfigs(f[e],h[e]);else if("undefined"==typeof f[e]||"undefined"!=typeof h[e])f[e]=h[e];return f},_mergeTrackConfigs:function(f,h){if(h.length){var e={};dojo.forEach(f,function(d,c){d.index=c;e[d.label]=d});dojo.forEach(h,function(d){var c=e[d.label];c?this._mergeConfigs(c,
d):f.push(d)},this)}}})})},"JBrowse/View/FileDialog":function(){define("dojo/_base/declare,dojo/_base/array,dojo/aspect,dijit/focus,dijit/form/Button,dijit/form/RadioButton,dojo/dom-construct,dijit/Dialog,dojox/form/Uploader,dojox/form/uploader/plugins/IFrame,./FileDialog/ResourceList,./FileDialog/TrackList".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o){return g(null,{constructor:function(a){this.browser=a.browser;this.config=dojo.clone(a.config||{});this.browserSupports={dnd:"draggable"in document.createElement("span")}},
_makeActionBar:function(a,b){var f=c.create("div",{className:"dijitDialogPaneActionBar"}),i=this.trackDispositionChoice=[new d({id:"openImmediately",value:"openImmediately",checked:!0}),new d({id:"addToTrackList",value:"addToTrackList"})],h=c.create("div",{className:"aux"},f);i[0].placeAt(h);c.create("label",{"for":"openImmediately",innerHTML:"Open immediately"},h);i[1].placeAt(h);c.create("label",{"for":"addToTrackList",innerHTML:"Add to tracks"},h);(new e({iconClass:"dijitIconDelete",label:"Cancel",
onClick:dojo.hitch(this,function(){b&&b();this.dialog.hide()})})).placeAt(f);(new e({iconClass:"dijitIconFolderOpen",label:"Open",onClick:dojo.hitch(this,function(){a&&a({trackConfs:this.trackList.getTrackConfigurations(),trackDisposition:this.trackDispositionChoice[0].checked?this.trackDispositionChoice[0].value:this.trackDispositionChoice[1].checked?this.trackDispositionChoice[1].value:void 0});this.dialog.hide()})})).placeAt(f);return{domNode:f}},show:function(a){var d=this.dialog=new b({title:"Open files",
className:"fileDialog"}),e=this._makeLocalFilesControl(),i=this._makeRemoteURLsControl(),g=this._makeResourceListControl(),k=this._makeTrackListControl(),a=this._makeActionBar(a.openCallback,a.cancelCallback);dojo.connect(e.uploader,"onChange",function(){g.addLocalFiles(e.uploader._files)});dojo.connect(i,"onChange",function(a){g.clearURLs();g.addURLs(a)});dojo.connect(g,"onChange",function(a){k.update(a)});i=[c.create("div",{className:"intro",innerHTML:"Add any combination of data files and URLs, and JBrowse will automatically suggest tracks to display their contents."}),
function(a,b){var d=c.create("div",a);j.forEach(b,dojo.hitch(d,"appendChild"));return d}({className:"resourceControls"},[e.domNode,i.domNode]),g.domNode,k.domNode,a.domNode];d.set("content",i);d.show();f.after(d,"hide",dojo.hitch(this,function(){h.curNode&&h.curNode.blur();setTimeout(function(){d.destroyRecursive()},500)}))},_makeLocalFilesControl:function(){var a=c.create("div",{className:"localFilesControl"});c.create("h3",{innerHTML:"Local files"},a);var b=c.create("div",{className:"dragArea"},
a),d=new dojox.form.Uploader({multiple:!0});d.placeAt(b);this.browserSupports.dnd&&(d.addDropTarget(this.dialog.domNode),c.create("div",{className:"dragMessage",innerHTML:"Select or drag files here."},b));c.create("div",{className:"connector",innerHTML:"&nbsp;"},a);return{domNode:a,uploader:d}},_makeRemoteURLsControl:function(){var a=c.create("div",{className:"remoteURLsControl"});c.create("h3",{innerHTML:"Remote URLs - <smaller>one per line</smaller>"},a);var b={domNode:a,onChange:function(){}};
b.input=c.create("textarea",{className:"urlInput",placeHolder:"http://paste.urls.here/example.bam",cols:25,rows:5,spellcheck:!1},a);var d="",e=function(){if(b.input.value.replace(/\s+/g,",")!=d){var a=dojo.trim(b.input.value),a=a.length?a.split(/\s+/):[];b.onChange(a);d=b.input.value.replace(/\s+/g,",")}window.setTimeout(e,900)};window.setTimeout(e,900);c.create("div",{className:"connector",innerHTML:"&nbsp;"},a);return b},_makeResourceListControl:function(){return new k({dialog:this})},_makeTrackListControl:function(){var a=
new o({browser:this.browser});return this.trackList=a}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(g,j,f){return g("dijit.form.RadioButton",[j,f],{baseClass:"dijitRadio"})})},"dijit/form/CheckBox":function(){define("require,dojo/_base/declare,dojo/dom-attr,dojo/has,dojo/query,dojo/ready,./ToggleButton,./_CheckBoxMixin,dojo/text!./templates/CheckBox.html,dojo/NodeList-dom".split(","),function(g,j,f,h,e,d,c,b,i){h("dijit-legacy-requires")&&
d(0,function(){g(["dijit/form/RadioButton"])});return j("dijit.form.CheckBox",[c,b],{templateString:i,baseClass:"dijitCheckBox",_setValueAttr:function(a,b){"string"==typeof a&&(this.inherited(arguments),a=!0);this._created&&this.set("checked",a,b)},_getValueAttr:function(){return this.checked?this.value:!1},_setIconClassAttr:null,postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=this.checked?"checked":""},_fillContent:function(){},_onFocus:function(){this.id&&e("label[for='"+
this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&e("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(g,j,f,h){return g("dijit.form.ToggleButton",[f,h],{baseClass:"dijitToggleButton",setChecked:function(e){j.deprecated("setChecked("+e+") is deprecated. Use set('checked',"+e+") instead.",
"","2.0");this.set("checked",e)}})})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(g,j){return g("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(f){var h=this.checked;this._set("checked",!h);var e=this.inherited(arguments);this.set("checked",e?this.checked:h);return e},_setCheckedAttr:function(f,h){this._set("checked",f);var e=this.focusNode||this.domNode;j.set(e,"checked",!!f);f?e.setAttribute("checked",
""):e.removeAttribute("checked");e.setAttribute(this._aria_attr,""+f);this._handleOnChange(f,h)},reset:function(){this._hasBeenBlurred=!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/_base/event"],function(g,j,f){return g("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(f){this._set("readOnly",f);j.set(this.focusNode,"readOnly",
f)},_setLabelAttr:void 0,_getSubmitValue:function(f){return!f&&0!==f?"on":f},_setValueAttr:function(f){f=this._getSubmitValue(f);this._set("value",f);j.set(this.focusNode,"value",f)},reset:function(){this.inherited(arguments);this._set("value",this.params.value||"on");j.set(this.focusNode,"value",this.value)},_onClick:function(h){return this.readOnly?(f.stop(h),!1):this.inherited(arguments)}})})},"url:dijit/form/templates/CheckBox.html":'<div class="dijit dijitReset dijitInline" role="presentation"\n\t><input\n\t \t${!nameAttrSetting} type="${type}" role="${type}" aria-checked="false" ${checkedAttrSetting}\n\t\tclass="dijitReset dijitCheckBoxInput"\n\t\tdata-dojo-attach-point="focusNode"\n\t \tdata-dojo-attach-event="onclick:_onClick"\n/></div>\n',
"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/_base/event,dojo/_base/lang,dojo/query,../registry".split(","),function(g,j,f,h,e,d,c){return j("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var b=[];d("input[type=radio]",this.focusNode.form||this.ownerDocument).forEach(e.hitch(this,function(d){d.name==this.name&&d.form==this.focusNode.form&&(d=c.getEnclosingWidget(d))&&b.push(d)}));return b},_setCheckedAttr:function(b){this.inherited(arguments);
this._created&&b&&g.forEach(this._getRelatedWidgets(),e.hitch(this,function(b){b!=this&&b.checked&&b.set("checked",!1)}))},_getSubmitValue:function(b){return null===b?"on":b},_onClick:function(b){if(this.checked||this.disabled)return h.stop(b),!1;return this.readOnly?(h.stop(b),g.forEach(this._getRelatedWidgets(),e.hitch(this,function(b){f.set(this.focusNode||this.domNode,"checked",b.checked)})),!1):this.inherited(arguments)}})})},"dojox/form/Uploader":function(){define("dojo/_base/kernel,dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/_base/connect,dojo/_base/window,dojo/dom-style,dojo/dom-geometry,dojo/dom-attr,dojo/dom-construct,dojo/dom-form,dijit,dijit/form/Button,dojox/form/uploader/Base,dojo/i18n!./nls/Uploader,dojo/text!./resources/Uploader.html".split(","),
function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n){g.experimental("dojox.form.Uploader");j("dojox.form.Uploader",[l,p],{uploadOnSelect:!1,tabIndex:0,multiple:!1,label:m.label,url:"",name:"uploadedfile",flashFieldName:"",uploadType:"form",showInput:"",_nameIndex:0,templateString:n,baseClass:"dijitUploader "+p.prototype.baseClass,postMixInProperties:function(){this._inputs=[];this._cons=[];this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);c.set(this.domNode,{overflow:"hidden",position:"relative"});
this._buildDisplay();i.set(this.titleNode,"tabIndex",-1)},_buildDisplay:function(){if(this.showInput)this.displayInput=dojo.create("input",{"class":"dijitUploadDisplayInput",tabIndex:-1,autocomplete:"off"},this.containerNode,this.showInput),this._attachPoints.push("displayInput"),this.connect(this,"onChange",function(a){for(var b=0,c,d=[];c=a[b++];)c&&c.name&&d.push(c.name);this.displayInput.value=d.join(", ")}),this.connect(this,"reset",function(){this.displayInput.value=""})},startup:function(){if(!this._buildInitialized)this._buildInitialized=
!0,this._getButtonStyle(this.domNode),this._setButtonStyle(),this.inherited(arguments)},onChange:function(){},onBegin:function(){},onProgress:function(){},onComplete:function(){this.reset()},onCancel:function(){},onAbort:function(){},onError:function(){},upload:function(){},submit:function(a){a=a?a.tagName?a:this.getForm():this.getForm();this.upload(k.toObject(a))},reset:function(){delete this._files;this._disconnectButton();h.forEach(this._inputs,a.destroy,dojo);this._inputs=[];this._nameIndex=0;
this._createInput()},getFileList:function(){var a=[];this.supports("multiple")?h.forEach(this._files,function(b,c){a.push({index:c,name:b.name,size:b.size,type:b.type})},this):h.forEach(this._inputs,function(b,c){b.value&&a.push({index:c,name:b.value.substring(b.value.lastIndexOf("\\")+1),size:0,type:b.value.substring(b.value.lastIndexOf(".")+1)})},this);return a},_getValueAttr:function(){return this.getFileList()},_setValueAttr:function(){console.error("Uploader value is read only")},_setDisabledAttr:function(a){this.disabled!=
a&&this.inputNode&&(this.inherited(arguments),c.set(this.inputNode,"display",a?"none":""))},_getButtonStyle:function(a){this.btnSize={w:c.get(a,"width"),h:c.get(a,"height")}},_setButtonStyle:function(){this.inputNodeFontSize=Math.max(2,Math.max(Math.ceil(this.btnSize.w/60),Math.ceil(this.btnSize.h/15)));this._createInput()},_getFileFieldName:function(){return this.multiple&&this.supports("multiple")?this.name+"s[]":this.name+(this.multiple?this._nameIndex:"")},_createInput:function(){this._inputs.length&&
(c.set(this.inputNode,{top:"500px"}),this._disconnectButton(),this._nameIndex++);var b=this._getFileFieldName();this.focusNode=this.inputNode=a.create("input",{type:"file",name:b},this.domNode,"first");this.supports("multiple")&&this.multiple&&i.set(this.inputNode,"multiple",!0);this._inputs.push(this.inputNode);c.set(this.inputNode,{position:"absolute",fontSize:this.inputNodeFontSize+"em",top:"-3px",right:"-3px",opacity:0});this._connectButton()},_connectButton:function(){this._cons.push(e.connect(this.inputNode,
"change",this,function(a){this._files=this.inputNode.files;this.onChange(this.getFileList(a));!this.supports("multiple")&&this.multiple&&this._createInput()}));if(-1<this.tabIndex)this.inputNode.tabIndex=this.tabIndex,this._cons.push(e.connect(this.inputNode,"focus",this,function(){this.titleNode.style.outline="1px dashed #ccc"})),this._cons.push(e.connect(this.inputNode,"blur",this,function(){this.titleNode.style.outline=""}))},_disconnectButton:function(){h.forEach(this._cons,e.disconnect);this._cons.splice(0,
this._cons.length)}});dojox.form.UploaderOrg=dojox.form.Uploader;var q=[dojox.form.UploaderOrg];dojox.form.addUploaderPlugin=function(a){q.push(a);j("dojox.form.Uploader",q,{})};return dojox.form.Uploader})},"dojox/form/uploader/Base":function(){define("dojo/dom-form,dojo/dom-style,dojo/dom-construct,dojo/dom-attr,dojo/has,dojo/_base/declare,dojo/_base/event,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin".split(","),function(g,j,f,h,e,d,c,b,i,a){e.add("FormData",function(){return!!window.FormData});
e.add("xhr-sendAsBinary",function(){var a=window.XMLHttpRequest&&new window.XMLHttpRequest;return a&&!!a.sendAsBinary});e.add("file-multiple",function(){return!!{"true":1,"false":1}[h.get(document.createElement("input",{type:"file"}),"multiple")]});return d("dojox.form.uploader.Base",[b,i,a],{getForm:function(){if(!this.form)for(var a=this.domNode;a&&a.tagName&&a!==document.body;){if("form"==a.tagName.toLowerCase()){this.form=a;break}a=a.parentNode}return this.form},getUrl:function(){if(this.uploadUrl)this.url=
this.uploadUrl;if(this.url)return this.url;if(this.getForm())this.url=this.form.action;return this.url},connectForm:function(){this.url=this.getUrl();if(!this._fcon&&this.getForm())this._fcon=!0,this.connect(this.form,"onsubmit",function(a){c.stop(a);this.submit(this.form)})},supports:function(a){switch(a){case "multiple":if("flash"==this.force||"iframe"==this.force)break;return e("file-multiple");case "FormData":return e(a);case "sendAsBinary":return e("xhr-sendAsBinary")}return!1},getMimeType:function(){return"application/octet-stream"},
getFileType:function(a){return a.substring(a.lastIndexOf(".")+1).toUpperCase()},convertBytes:function(a){var b=Math.round(1E5*(a/1024))/1E5,c=Math.round(1E5*(a/1048576))/1E5,d=Math.round(1E5*(a/1073741824))/1E5,e=a;1<b&&(e=b.toFixed(1)+" kb");1<c&&(e=c.toFixed(1)+" mb");1<d&&(e=d.toFixed(1)+" gb");return{kb:b,mb:c,gb:d,bytes:a,value:e}}})})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/parser"],function(g,j,f){return j("dijit._WidgetsInTemplateMixin",
null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,_beforeFillContent:function(){if(this.widgetsInTemplate){var h=this._startupWidgets=f.parse(this.domNode,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,scope:"dojo"});if(!h.isFulfilled())throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
this._attachTemplateNodes(h,function(e,d){return e[d]})}},startup:function(){g.forEach(this._startupWidgets,function(f){f&&!f._started&&f.startup&&f.startup()});this.inherited(arguments)}})})},"url:dojox/form/resources/Uploader.html":'<span class="dijit dijitReset dijitInline"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdojoAttachEvent="ondijitclick:_onClick"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdojoAttachPoint="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" dojoAttachPoint="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdojoAttachPoint="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><\!--no need to have this for Uploader \n\t<input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n\t\tdojoAttachPoint="valueNode"\n/--\></span>\n',
"dojox/form/uploader/plugins/IFrame":function(){define("dojo/dom-construct,dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/io/iframe,dojox/form/uploader/plugins/HTML5".split(","),function(g,j,f,h,e){j=j("dojox.form.uploader.plugins.IFrame",[],{force:"",postMixInProperties:function(){this.inherited(arguments);if(!this.supports("multiple")||"iframe"==this.force)this.uploadType="iframe",this.upload=this.uploadIFrame},uploadIFrame:function(d){var c,b=!1;this.getForm()?c=this.form:(c=g.place('<form enctype="multipart/form-data" method="post"></form>',
this.domNode),h.forEach(this._inputs,function(a){a.value&&c.appendChild(a)},this),b=!0);var i=this.getUrl();e.send({url:i,form:c,handleAs:"json",content:d,method:"POST",error:f.hitch(this,function(a){b&&g.destroy(c);this.onError(a)}),load:f.hitch(this,function(a){b&&g.destroy(c);if(a.ERROR||a.error)this.onError(a);else this.onComplete(a)})})}});dojox.form.addUploaderPlugin(j);return j})},"dojo/io/iframe":function(){define("../_base/config,../_base/json,../_base/kernel,../_base/lang,../_base/xhr,../sniff,../_base/window,../dom,../dom-construct,../query,require,../aspect,../request/iframe".split(","),
function(g,j,f,h,e,d,c,b,i,a,k,o,p){f.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var d=p._iframeName,d=d.substring(0,d.lastIndexOf("_")),l=h.delegate(p,{create:function(){return l._frame=p.create.apply(p,arguments)},get:null,post:null,send:function(a){var c,d=e._ioSetArgs(a,function(){c&&c.cancel()},function(a){var b=null,a=a.ioArgs;try{var d=a.handleAs;"xml"===d||"html"===d?b=c.response.data:(b=c.response.text,"json"===d?b=j.fromJson(b):"javascript"===d&&(b=f.eval(b)))}catch(e){b=
e}return b},function(a,b){b.ioArgs._hasError=!0;return a}),i=d.ioArgs,h="GET",k=b.byId(a.form);a.method&&"POST"===a.method.toUpperCase()&&k&&(h="POST");a={method:h,handleAs:"json"===a.handleAs||"javascript"===a.handleAs?"text":a.handleAs,form:a.form,query:k?null:a.content,data:k?a.content:null,timeout:a.timeout,ioArgs:i};if(a.method)a.method=a.method.toUpperCase();if(g.ioPublish&&f.publish&&!1!==i.args.ioPublish)var l=o.after(p,"_notifyStart",function(a){a.options.ioArgs===i&&(l.remove(),e._ioNotifyStart(d))},
!0);c=p(i.url,a,!0);i._callNext=c._callNext;c.then(function(){d.resolve(d)}).otherwise(function(a){d.ioArgs.error=a;d.reject(a)});return d},_iframeOnload:c.global[d+"_onload"]});h.setObject("dojo.io.iframe",l);return l})},"dojo/request/iframe":function(){define("module,require,./watch,./util,./handlers,../_base/lang,../io-query,../query,../has,../dom,../dom-construct,../_base/window".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o){function p(){return!this.isFulfilled()}function l(){return!!this._finished}
function m(a,c){if(!c)try{var f=a.options,i=q.doc(q._frame),h=f.handleAs;if("html"!==h){if("xml"===h)if("html"===i.documentElement.tagName.toLowerCase()){b("a",i.documentElement).orphan();var g=i.documentElement.innerText,g=g.replace(/>\s+</g,"><");a.text=d.trim(g)}else a.data=i;else a.text=i.getElementsByTagName("textarea")[0].value;e(a)}else a.data=i}catch(k){c=k}c?this.reject(c):this._finished?this.resolve(a):this.reject(Error("Invalid dojo/request/iframe request state"))}function n(){this._callNext()}
function q(a,b,c){var d=h.parseArgs(a,h.deepCreate(s,b),!0),a=d.url,b=d.options;if("GET"!==b.method&&"POST"!==b.method)throw Error(b.method+" not supported by dojo/request/iframe");if(!q._frame)q._frame=q.create(q._iframeName,u+"();");a=h.deferred(d,null,p,l,m,n);a._callNext=function(){if(!this._calledNext)this._calledNext=!0,q._currentDfd=null,q._fireNextRequest()};a._legacy=c;q._dfdQueue.push(a);q._fireNextRequest();f(a);return c?a:a.promise}var r=g.id.replace(/[\/\.\-]/g,"_"),u=r+"_onload";o.global[u]||
(o.global[u]=function(){var b=q._currentDfd;if(b){var c=a.byId(b.response.options.form)||b._tmpForm;if(c){for(var d=b._contentToClean,e=0;e<d.length;e++)for(var f=d[e],i=0;i<c.childNodes.length;i++){var h=c.childNodes[i];if(h.name===f){k.destroy(h);break}}b._originalAction&&c.setAttribute("action",b._originalAction);if(b._originalMethod)c.setAttribute("method",b._originalMethod),c.method=b._originalMethod;if(b._originalTarget)c.setAttribute("target",b._originalTarget),c.target=b._originalTarget}b._tmpForm&&
(k.destroy(b._tmpForm),delete b._tmpForm);b._finished=!0}else q._fireNextRequest()});var s={method:"POST"};q.create=function(a,b,c){if(o.global[a])return o.global[a];if(o.global.frames[a])return o.global.frames[a];c||(i("config-useXDomain")&&!i("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),c=i("config-dojoBlankHtmlUrl")||
j.toUrl("dojo/resources/blank.html"));b=k.place('<iframe id="'+a+'" name="'+a+'" src="'+c+'" onload="'+b+'" style="position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden">',o.body());return o.global[a]=b};q.doc=function(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var c=o.doc.getElementsByTagName("iframe");if(a.document&&c[b].contentWindow&&c[b].contentWindow.document)return c[b].contentWindow.document;if(o.doc.frames[b]&&o.doc.frames[b].document)return o.doc.frames[b].document}return null};
q.setSrc=function(a,b,c){a=o.global.frames[a.name];if(a.contentWindow)a=a.contentWindow;try{c?a.location.replace(b):a.location=b}catch(d){}};q._iframeName=r+"_IoIframe";q._notifyStart=function(){};q._dfdQueue=[];q._currentDfd=null;q._fireNextRequest=function(){var b;try{if(!q._currentDfd&&q._dfdQueue.length){do b=q._currentDfd=q._dfdQueue.shift();while(b&&(b.canceled||b.isCanceled&&b.isCanceled())&&q._dfdQueue.length);if(!b||b.canceled||b.isCanceled&&b.isCanceled())q._currentDfd=null;else{var e=b.response,
f=e.options,i=b._contentToClean=[],g=a.byId(f.form),l=h.notify,j=f.data||null,m;!b._legacy&&"POST"===f.method&&!g?g=b._tmpForm=k.create("form",{name:r+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},o.body()):"GET"===f.method&&g&&-1<e.url.indexOf("?")&&(m=e.url.slice(e.url.indexOf("?")+1),j=d.mixin(c.queryToObject(m),j));if(g){if(!b._legacy){var n=g;do n=n.parentNode;while(n!==o.doc.documentElement);if(!n)g.style.position="absolute",g.style.left="-1000px",g.style.top="-1000px",o.body().appendChild(g);
if(!g.name)g.name=r+"_form"}if(j){var n=function(a,b){k.create("input",{type:"hidden",name:a,value:b},g);i.push(a)},p;for(p in j){var u=j[p];if(d.isArray(u)&&1<u.length)for(m=0;m<u.length;m++)n(p,u[m]);else g[p]?g[p].value=u:n(p,u)}}var s=g.getAttributeNode("action"),y=g.getAttributeNode("method"),A=g.getAttributeNode("target");if(e.url)b._originalAction=s?s.value:null,s?s.value=e.url:g.setAttribute("action",e.url);if(b._legacy){if(!y||!y.value)mthdNode?mthdNode.value=f.method:fn.setAttribute("method",
f.method)}else b._originalMethod=y?y.value:null,y?y.value=f.method:g.setAttribute("method",f.method);b._originalTarget=A?A.value:null;A?A.value=q._iframeName:g.setAttribute("target",q._iframeName);g.target=q._iframeName;l&&l.emit("send",e,b.promise.cancel);q._notifyStart(e);g.submit()}else{f="";if(e.options.data)f=e.options.data,"string"!==typeof f&&(f=c.objectToQuery(f));n=e.url+(-1<e.url.indexOf("?")?"&":"?")+f;l&&l.emit("send",e,b.promise.cancel);q._notifyStart(e);q.setSrc(q._frame,n,!0)}}}}catch(D){b.reject(D)}};
h.addCommonMethods(q,["GET","POST"]);return q})},"dojox/form/uploader/plugins/HTML5":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo"],function(g,j,f,h){g=g("dojox.form.uploader.plugins.HTML5",[],{errMsg:"Error uploading files. Try checking permissions",uploadType:"html5",postCreate:function(){this.connectForm();this.inherited(arguments);this.uploadOnSelect&&this.connect(this,"onChange",function(e){this.upload(e[0])})},_drop:function(e){h.stopEvent(e);this._files=
e.dataTransfer.files;this.onChange(this.getFileList())},upload:function(e){this.onBegin(this.getFileList());this.supports("FormData")?this.uploadWithFormData(e):this.supports("sendAsBinary")&&this.sendAsBinary(e)},addDropTarget:function(e,d){d||(this.connect(e,"dragenter",h.stopEvent),this.connect(e,"dragover",h.stopEvent),this.connect(e,"dragleave",h.stopEvent));this.connect(e,"drop","_drop")},sendAsBinary:function(e){if(this.getUrl()){var d="---------------------------"+(new Date).getTime(),c=this.createXhr();
c.setRequestHeader("Content-Type","multipart/form-data; boundary="+d);if(e=this._buildRequestBody(e,d))c.sendAsBinary(e);else this.onError(this.errMsg)}else console.error("No upload url found.",this)},uploadWithFormData:function(e){if(this.getUrl()){var d=new FormData,c=this._getFileFieldName();f.forEach(this._files,function(b){d.append(c,b)},this);if(e)for(var b in e)d.append(b,e[b]);this.createXhr().send(d)}else console.error("No upload url found.",this)},_xhrProgress:function(e){if(e.lengthComputable){var d=
{bytesLoaded:e.loaded,bytesTotal:e.total,type:e.type,timeStamp:e.timeStamp};"load"==e.type?(d.percent="100%",d.decimal=1):(d.decimal=e.loaded/e.total,d.percent=Math.ceil(100*(e.loaded/e.total))+"%");this.onProgress(d)}},createXhr:function(){var e=new XMLHttpRequest,d;e.upload.addEventListener("progress",j.hitch(this,"_xhrProgress"),!1);e.addEventListener("load",j.hitch(this,"_xhrProgress"),!1);e.addEventListener("error",j.hitch(this,function(c){this.onError(c);clearInterval(d)}),!1);e.addEventListener("abort",
j.hitch(this,function(c){this.onAbort(c);clearInterval(d)}),!1);e.onreadystatechange=j.hitch(this,function(){4===e.readyState&&(clearInterval(d),this.onComplete(JSON.parse(e.responseText.replace(/^\{\}&&/,""))))});e.open("POST",this.getUrl());d=setInterval(j.hitch(this,function(){}),250);return e},_buildRequestBody:function(e,d){var c="",d="--"+d,b=[],i=this._files,a=this._getFileFieldName();f.forEach(i,function(e,f){var i=e.fileName,h;try{h=e.getAsBinary()+"\r\n",c+=d+"\r\n",c+="Content-Disposition: form-data; ",
c+='name="'+a+'"; ',c+='filename="'+i+'"\r\n',c+="Content-Type: "+this.getMimeType()+"\r\n\r\n",c+=h}catch(g){b.push({index:f,name:i})}},this);b.length&&b.length>=i.length&&(this.onError({message:this.errMsg,filesInError:b}),c=!1);if(!c)return!1;if(e)for(var h in e)c+=d+"\r\n",c+="Content-Disposition: form-data; ",c+='name="'+h+'"\r\n\r\n',c+=e[h]+"\r\n";return c+=d+"--\r\n"}});dojox.form.addUploaderPlugin(g);return g})},"dojo/main":function(){define("./_base/kernel,./has,require,./sniff,./_base/lang,./_base/array,./_base/config,./ready,./_base/declare,./_base/connect,./_base/Deferred,./_base/json,./_base/Color,./has!dojo-firebug?./_firebug/firebug,./_base/browser,require".split(","),
function(g,j,f,h,e,d,c,b){c.isDebug&&f(["./_firebug/firebug"]);var i=c.require;i&&(i=d.map(e.isArray(i)?i:[i],function(a){return a.replace(/\./g,"/")}),g.isAsync?f(i):b(1,function(){f(i)}));return g})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready,./kernel,./connect,./unload,./window,./event,./html,./NodeList,../query,./xhr,./fx".split(","),function(g){return g})},"JBrowse/View/FileDialog/ResourceList":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/dom-construct","dijit/form/Select"],function(g,j,f,h){return g(null,{constructor:function(e){this.dialog=e.dialog;this.domNode=f.create("div",{className:"resourceList"});this._updateView()},clearLocalFiles:function(){this._resources=j.filter(this._resources||[],function(e){return!e.file});this._notifyChange()},_notifyChange:function(){this.onChange(j.map(this._resources||[],function(e){var d={};if(e.file)d.file=e.file;if(e.url)d.url=e.url;d.type=e.type.get("value");return d}))},
_addResources:function(e){var d={},e=(this._resources||[]).concat(e);this._resources=j.filter(e.reverse(),function(c){c=c.file&&c.file.name||c.url;return d[c]?!1:d[c]=!0}).reverse();this._updateView();this._notifyChange()},addLocalFiles:function(e){this._addResources(j.map(e,function(d){return{file:d}}))},clearURLs:function(){this._resources=j.filter(this._resources||[],function(e){return!e.url});this._notifyChange()},addURLs:function(e){this._addResources(j.map(e,function(d){return{url:d}}))},onChange:function(){},
_updateView:function(){var e=this.domNode;f.empty(e);f.create("h3",{innerHTML:"Files and URLs"},e);if((this._resources||[]).length){var d=f.create("table",{},e);j.forEach(this._resources,function(c){var b=this,e=f.create("tr",{},d),a=c.url||c.file.name,g=new h({options:[{label:'<span class="ghosted">file type?</span>',value:null},{label:"GFF3",value:"gff3"},{label:"BigWig",value:"bigwig"},{label:"BAM",value:"bam"},{label:"BAI",value:"bai"}],value:this.guessType(a),onChange:function(){b._rememberedTypes=
b._rememberedTypes||{};b._rememberedTypes[a]=this.get("value");b._notifyChange()}});g.placeAt(dojo.create("td",{width:"4%"},e));c.type=g;dojo.create("td",{width:"1%",innerHTML:'<div class="'+(c.file?"dijitIconFile":"jbrowseIconLink")+'"></div>'},e);dojo.create("td",{innerHTML:a},e);dojo.create("td",{width:"1%",innerHTML:'<div class="dijitIconDelete"></div>',onclick:function(a){a.preventDefault&&a.preventDefault();b.deleteResource(c)}},e)},this)}else f.create("div",{className:"emptyMessage",innerHTML:"Add files and URLs using the controls above."},
e);f.create("div",{className:"connector",innerHTML:"&nbsp;"},e)},deleteResource:function(e){this._resources=j.filter(this._resources||[],function(d){return d!==e});this._updateView();this._notifyChange()},guessType:function(e){return(this._rememberedTypes||{})[e]||(/\.bam$/i.test(e)?"bam":/\.bai$/i.test(e)?"bai":/\.gff3?$/i.test(e)?"gff3":/\.(bw|bigwig)$/i.test(e)?"bigwig":null)}})})},"JBrowse/View/FileDialog/TrackList":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-construct,JBrowse/Util,dijit/form/TextBox,dijit/form/Select,dijit/form/Button,./TrackList/BAMDriver,./TrackList/BigWigDriver,./TrackList/GFF3Driver,JBrowse/View/TrackConfigEditor".split(","),
function(g,j,f,h,e,d,c,b,i,a,k){return g(null,{constructor:function(c){this.browser=c.browser;this.fileDialog=c.dialog;this.domNode=f.create("div",{className:"trackList",innerHTML:"track list!"});this.types=[b,i,a];this._updateDisplay()},getTrackConfigurations:function(){return h.dojof.values(this.trackConfs||{})},update:function(a){this.storeConfs={};this.trackConfs={};this._makeStoreConfs(a);this._makeTrackConfs();this._updateDisplay()},_makeStoreConfs:function(a){this.storeConfs=this.storeConfs||
{};for(var b=0;a.length&&a.length!=b;)a=j.filter(a,function(a){return!j.some(this.types,function(b){return b.tryResource(this.storeConfs,a)},this)},this),b=a.length;j.forEach(this.types,function(a){a.finalizeConfiguration(this.storeConfs)},this);a.length&&console.warn("Not all resources could be assigned to tracks.  Unused resources:",a)},_makeTrackConfs:function(){var a=this.browser.getTrackTypes().trackTypeDefaults,b;for(b in this.storeConfs){var c=a[this.storeConfs[b].type]||"JBrowse/View/Track/HTMLFeatures";
this.trackConfs=this.trackConfs||{};this.trackConfs[b]={store:this.storeConfs[b],label:b,key:b.replace(/_\d+$/,"").replace(/_/g," "),type:c}}},_delete:function(a){delete (this.trackConfs||{})[a];this._updateDisplay()},_updateDisplay:function(){var a=this;f.empty(this.domNode);f.create("h3",{innerHTML:"New Tracks"},this.domNode);if(h.dojof.keys(this.trackConfs||{}).length){var b=f.create("table",{innerHTML:'<tr class="head"><th>Name</th><th>Display</th><th></th></tr>'},this.domNode),i=this.browser.getTrackTypes(),
g;for(g in this.trackConfs){var n=this.trackConfs[g],q=f.create("tr",{},b);(new e({value:n.key,onChange:function(){n.key=this.get("value")}})).placeAt(f.create("td",{className:"name"},q));(new d({options:j.map(i.knownTrackTypes,function(a){return{label:i.trackTypeLabels[a]||a.replace("JBrowse/View/Track/","").replace(/\//g," "),value:a}}),value:n.type,onChange:function(){n.type=this.get("value")}})).placeAt(f.create("td",{className:"type"},q));(new c({className:"edit",title:"edit configuration",innerHTML:"Edit Configuration",
onClick:function(){(new k(n)).show(function(b){dojo.mixin(n,b.conf);a._updateDisplay()})}})).placeAt(f.create("td",{className:"edit"},q));dojo.create("td",{width:"1%",innerHTML:'<div class="dijitIconDelete"></div>',onclick:function(b){b.preventDefault&&b.preventDefault();a._delete(g)}},q);f.create("td",{className:"type"},q)}}else f.create("div",{className:"emptyMessage",innerHTML:"None"},this.domNode)}})})},"JBrowse/View/FileDialog/TrackList/BAMDriver":function(){define(["JBrowse/Util","JBrowse/Model/FileBlob",
"JBrowse/Model/XHRBlob"],function(g,j,f){var h=0;return{storeType:"JBrowse/Store/SeqFeature/BAM",tryResource:function(e,d){if("bam"==d.type){var c=g.basename(d.file?d.file.name:d.url?d.url:"");if(!c)return!1;for(var b in e){var f=e[b];if(g.basename(f.bai?f.bai.url||f.bai.blob.name:f.baiUrlTemplate,".bai")==c)return f.bam=this._makeBlob(d),!0}c=g.basename(c,".bam");for(b in e)if(f=e[b],g.basename(f.bai?f.bai.url||f.bai.blob.name:f.baiUrlTemplate,".bai")==c)return f.bam=this._makeBlob(d),!0;c="BAM_"+
c+"_"+h++;e[c]={type:this.storeType,bam:this._makeBlob(d),name:c};return!0}if("bai"==d.type){c=g.basename(d.file?d.file.name:d.url?d.url:"",".bai");if(!c)return!1;for(b in e)if(f=e[b],g.basename(f.bam?f.bam.url||f.bam.blob.name:f.urlTemplate)==c)return f.bai=this._makeBlob(d),!0;for(b in e)if(f=e[b],g.basename(f.bam?f.bam.url||f.bam.blob.name:f.urlTemplate,".bam")==c)return f.bai=this._makeBlob(d),!0;c="BAM_"+g.basename(c,".bam")+"_"+h++;e[c]={bai:this._makeBlob(d),name:c,type:this.storeType};return!0}return!1},
finalizeConfiguration:function(e){var d={},c=0,b={},f=0,a;for(a in e){var h=e[a];if((h.bai||h.baiUrlTemplate)&&!h.bam&&!h.urlTemplate)c++,d[a]=h;else if((h.bam||h.urlTemplate)&&!h.bai&&!h.baiUrlTemplate)f++,b[a]=h}if(1==f&&1==c)for(var g in d)for(var j in b){if(d[g].baiUrlTemplate)b[j].baiUrlTemplate=d[g].baiUrlTemplate;if(d[g].bai)b[j].bai=d[g].bai;delete e[g]}for(g in d)delete e[g];for(j in b)e[j].urlTemplate||delete e[j]},_makeBlob:function(e){e=e.file?new j(e.file):e.url?new f(e.url):null;if(!e)throw"unknown resource type";
return e},confIsValid:function(e){return(e.bam||e.urlTemplate)&&(e.bai||e.baiUrlTemplate||e.urlTemplate)}}})},"JBrowse/Model/FileBlob":function(){define(["dojo/_base/declare","dojo/has"],function(g){var j=g(null,{constructor:function(f){this.blob=f;this.totalSize=this.size=f.size},slice:function(f,h){var e=this.blob.mozSlice||this.blob.slice||this.blob.webkitSlice;return new j(h?e.call(this.blob,f,f+h):e.call(this.blob,f))},read:function(f,h,e,d){this.slice(f,h).fetch(e,d)},fetch:function(f){var h=
this,e=new FileReader;e.onloadend=function(){f(h._stringToBuffer(e.result))};e.readAsBinaryString(this.blob)},_stringToBuffer:function(f){if(!f||"function"!=typeof Uint8Array)return null;for(var h=new Uint8Array(f.length),e=0;e<h.length;e++)h[e]=f.charCodeAt(e);return h.buffer}});return j})},"JBrowse/Model/XHRBlob":function(){define(["dojo/_base/declare","JBrowse/Model/FileBlob","JBrowse/Store/RemoteBinaryFile"],function(g,j,f){var h=new f({name:"XHRBlob"}),e=g(j,{constructor:function(d,c,b,e){e||
("object"===typeof c?(e=c,c=void 0):e={});this.url=d;this.start=c||0;if(b)this.end=b;this.opts=e},slice:function(d,c){var b=this.start,f=this.end,b=b&&d?b+d:d||b;return new e(this.url,b,c&&b?b+c-1:f||c-1,this.opts)},fetch:function(d,c){h.get({url:this.url,start:this.start,end:this.end,success:d,failure:c||function(){}})},read:function(d,c,b,e){d=this.start+d;h.get({url:this.url,start:d,end:d+c,success:b,failure:e||function(){}})}});return e})},"JBrowse/Store/RemoteBinaryFile":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/has","JBrowse/Store/LRUCache","jszlib/arrayCopy"],function(g,j,f,h,e){return g(null,{constructor:function(d){this.name=d.name;this._arrayCopyCount=this._fetchCount=0;this.minChunkSize="minChunkSize"in d?d.minChunkSize:32768;this.chunkCache=new h({name:d.name+" chunk cache",fillCallback:dojo.hitch(this,"_fetch"),maxSize:d.maxSize||2E7});this.totalSizes={}},_escapeRegExp:function(d){return d.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},_relevantExistingChunks:function(d,
c,b){if(!b)return[];c=c||0;d=this.chunkCache.query(RegExp("^"+this._escapeRegExp(d+" (bytes")));j.forEach(d,function(b){if(b.size){if(!b.key.start)b.key.start=0;if(!b.key.end)b.key.end=b.key.start+(b.size||b.value.byteLength)}});d=d.sort(function(b,a){return b.key.start-a.key.start||a.key.end-a.key.start-(b.key.end-b.key.start)});return j.filter(d,function(d){return!(d.key.start>b||d.key.end<c)},this)},_fetchChunks:function(d,c,b,e,a){c=c||0;"number"!=typeof b&&this.totalSizes[d]?b=this.totalSizes[d]-
1:b>=this.totalSizes[d]&&(b=this.totalSizes[d]-1);var f=this._relevantExistingChunks(d,c,b);this._log("existing",f);var h=function(){return this.url+" (bytes "+this.start+".."+this.end+")"},g=[];if("number"!=typeof b)g.push({key:{url:d,start:0,end:void 0,toString:h}});else for(;c<=b;c=g[g.length-1].key.end+1)f[0]&&f[0].key.start<=c?g.push(f.shift()):g.push({key:{url:d,start:c,end:f[0]?f[0].key.start-1:b,toString:h}});j.forEach(g,function(a){if(!a.value&&(a=a.key,a.start=Math.floor(a.start/this.minChunkSize)*
this.minChunkSize,a.end))a.end=Math.ceil((a.end+1)/this.minChunkSize)*this.minChunkSize-1},this);var g=this._optimizeGoldenPath(g),l=j.filter(g,function(a){return!a.value});this._log("needed",l);if(l.length){var m=0;j.forEach(l,function(b){this.chunkCache.get(b.key,function(c,d){b.value=c;d?a(d):++m==l.length&&e(g)})},this)}else e(g)},_optimizeGoldenPath:function(d){for(var c=[d[0]],b=1;b<d.length;b++){var e=d[b],a=c[c.length-1];e.value?e.key.end>a.key.end&&c.push(e):a.value?c.push(e):a.key.end=e.key.end}return c},
_fetch:function(d,c,b,e){this._log("fetch",d.url,d.start,d.end);this._fetchCount++;var b=b||1,a=new XMLHttpRequest,h,g=d.url;f("safari")&&d.end&&(g=g+(-1<g.indexOf("?")?"&":"?")+"safari_range="+d.start+"-"+d.end);a.open("GET",g,!0);a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined");d.end&&(a.setRequestHeader("Range","bytes="+d.start+"-"+d.end),h=d.end-d.start+1);a.responseType="arraybuffer";var j=function(a){if(a){if(!d.start)d.start=0;if(!d.end)d.end=d.start+a.byteLength}c(a)};
a.onreadystatechange=dojo.hitch(this,function(){if(4==a.readyState)if(200==a.status||206==a.status){this.totalSizes[d.url]=function(){var b=a.getResponseHeader("Content-Range");if(b)return(b=b.match(/\/(\d+)$/))?parseInt(b[1]):void 0}();var f=a.response||a.mozResponseArrayBuffer||function(){try{var f=a.responseText;h&&h!=f.length&&(!e||f.length!=e)?3==b?c(null,a.status+" ("+a.statusText+") when attempting to fetch "+g):this._fetch(d,c,b+1,f.length):j(this._stringToBuffer(a.responseText))}catch(l){console.error(""+
l,l.stack,l),j(new ArrayBuffer)}}.call(this);f&&c(f)}else if(3==b)c(null,a.status+" ("+a.statusText+") when attempting to fetch "+g);else return this._fetch(d,c,b+1);return null});a.send("")},get:function(d){this._log("get",d.url,d.start,d.end);var c=d.start||0,b=d.end;if(c&&!b)throw"cannot specify a fetch start without a fetch end";this._fetchChunks(d.url,c,b,dojo.hitch(this,function(e){var a=this.totalSizes[d.url];this._assembleChunks(c,b,function(b){if("number"==typeof a)b.fileSize=a;try{d.success.call(this,
b)}catch(c){console.error(""+c,c.stack,c),d.failure&&d.failure(c)}},d.failure,e)}),d.failure)},_assembleChunks:function(d,c,b,f,a){this._log("golden path",a);var h;if(Uint8Array){if(1==a.length&&a[0].key.start==d&&(!c||a[0].key.end==c))h=a[0].value;else{f=Math.max.apply(Math,j.map(a,function(a){return a.key.start+((a.value||{}).byteLength||0)-1}));c&&(f=Math.min(f,c));var g=f-d+1;h=new Uint8Array(g);var p=0;j.forEach(a,function(a){if(a.value&&a.value.byteLength){var b=new Uint8Array(a.value),a=d+
p-a.key.start;0>a&&this._error("chunking error");var c=Math.min(b.byteLength-a,g-p);this._log("arrayCopy",b,a,h,p,c);e(b,a,h,p,c);this._arrayCopyCount++;p+=c}},this);h=h.buffer}b(h)}else f("Browser does not support typed arrays")},_stringToBuffer:function(d){if(!d||"function"!=typeof Uint8Array)return null;for(var c=new Uint8Array(d.length),b=0;b<c.length;b++)c[b]=d.charCodeAt(b);return c.buffer},_log:function(){},_warn:function(){console.warn.apply(console,this._logf.apply(this,arguments))},_error:function(){console.error.apply(console,
this._logf.apply(this,arguments));throw"file error";},_logf:function(){arguments[0]=this.name+" "+arguments[0];if("string"==typeof arguments[0])for(;15>arguments[0].length;)arguments[0]+=" ";return arguments}})})},"JBrowse/Store/LRUCache":function(){define(["dojo/_base/declare","dojo/_base/array","JBrowse/Util","JBrowse/Digest/Crc32"],function(g,j,f,h){return g(null,{constructor:function(e){this.fill=e.fillCallback;this.maxSize=e.maxSize||1E6;this.name=e.name||"cache";this._size=e.sizeFunction||this._size;
this._keyString=e.keyFunction||this._keyString;this.size=this.itemCount=0;this._cacheByKey={};this._cacheNewest=this._cacheOldest=null;this._inProgressFills={}},get:function(e,d){var c=this._keyString(e),b=this._cacheByKey[c];b?(this._log("hit",c),this._touch(b),window.setTimeout(function(){d(b.value)},1)):(this._log("miss",c),this._attemptFill(e,c,d))},query:function(e){var d=[],c=this._cacheByKey,b;for(b in c)e.test(b)&&c.hasOwnProperty(b)&&d.push(c[b]);return d},touch:function(e){this._touch(this._cacheByKey[this._keyString(e)])},
_touch:function(e){e&&this._cacheNewest!==e&&(this._llRemove(e),this._llPush(e))},_llRemove:function(e){if(e.prev)e.prev.next=e.next;if(e.next)e.next.prev=e.prev;if(this._cacheNewest===e)this._cacheNewest=e.prev;if(this._cacheOldest===e)this._cacheOldest=e.next;e.prev=null;e.next=null},_llPush:function(e){if(this._cacheNewest)this._cacheNewest.next=e,e.prev=this._cacheNewest;this._cacheNewest=e;if(!this._cacheOldest)this._cacheOldest=e},_attemptFill:function(e,d,c){if(this.fill){var b=this._inProgressFills[d]||
{callbacks:[],running:!1};b.callbacks.push(c);if(!b.running)b.running=!0,this.fill(e,dojo.hitch(this,function(a,b,c,d,e){delete this._inProgressFills[a];c.running=!1;d&&(this._log("fill",a),this.set(b,d));j.forEach(c.callbacks,function(a){try{a.call(this,d,e)}catch(b){console.error(""+b,b.stack,b)}},this)},d,e,b));this._inProgressFills[d]=b}else try{c(void 0)}catch(f){console.error(f)}},set:function(e,d){var c=this._keyString(e);if(!this._cacheByKey[c]){var b={value:d,key:e,keyString:c,size:this._size(d)};
b.size>this.maxSize?this._warn("cannot fit",c,"("+f.addCommas(b.size)+" > "+f.addCommas(this.maxSize)+")"):(this._log("set",c,b,this.size),this._prune(b.size),this._cacheByKey[c]=b,this._llPush(b),this.size+=b.size,this.itemCount++)}},_keyString:function(e){return"object"==typeof e&&"function"==typeof e.toString?e.toString():h.objectFingerprint(e)},_size:function(e){var d=typeof e;if("object"==d){d=typeof e.size;if("number"==d)return d;if("function"==d)return e.size();if(e.byteLength)return e.byteLength;
var d=0,c;for(c in e)e.hasOwnProperty(c)&&(d+=this._size(e[c]));return d}return"string"==d?e.length:1},_prune:function(e){for(;this.size+(e||0)>this.maxSize;){var d=this._cacheOldest;if(d)this._log("evict",d),this._llRemove(d),delete this._cacheByKey[d.keyString],delete d.next,delete d.prev,this.itemCount--,this.size-=d.size;else{this._error("eviction error",this.size,e,this);break}}},_log:function(){},_warn:function(){console.warn.apply(console,this._logf.apply(this,arguments))},_error:function(){console.error.apply(console,
this._logf.apply(this,arguments))},_logf:function(){arguments[0]=this.name+" "+arguments[0];if("string"==typeof arguments[0])for(;15>arguments[0].length;)arguments[0]+=" ";return arguments}})})},"jszlib/arrayCopy":function(){define([],function(){var g;try{g=new Uint8Array(1)}catch(j){}var f=g&&"function"===typeof g.subarray;return function(h,e,d,c,b){if(0!=b){if(h){if(!d)throw"Undef dest";}else throw"Undef src";if(0==e&&b==h.length)d.set(h,c);else if(f)h=h.subarray(e,e+b),d.set(h,c);else if(1==h.BYTES_PER_ELEMENT&&
100<b)h=new Uint8Array(h.buffer,h.byteOffset+e,b),d.set(h,c);else for(var i=0;i<b;++i)d[c+i]=h[e+i]}}})},"JBrowse/View/FileDialog/TrackList/BigWigDriver":function(){define(["JBrowse/Util","JBrowse/Model/FileBlob","JBrowse/Model/XHRBlob"],function(g,j,f){var h=0;return{storeType:"JBrowse/Store/SeqFeature/BigWig",tryResource:function(e,d){if("bigwig"==d.type){var c=g.basename(d.file?d.file.name:d.url?d.url:"");if(!c)return!1;c="BigWig_"+c+"_"+h++;e[c]={type:this.storeType,blob:this._makeBlob(d),name:c};
return!0}return!1},finalizeConfiguration:function(){},_makeBlob:function(e){e=e.file?new j(e.file):e.url?new f(e.url):null;if(!e)throw"unknown resource type";return e},confIsValid:function(e){return e.blob||e.urlTemplate}}})},"JBrowse/View/FileDialog/TrackList/GFF3Driver":function(){define(["JBrowse/Util","JBrowse/Model/FileBlob","JBrowse/Model/XHRBlob"],function(g,j,f){var h=0;return{storeType:"JBrowse/Store/SeqFeature/GFF3",tryResource:function(e,d){if("gff3"==d.type){var c=g.basename(d.file?d.file.name:
d.url?d.url:"");if(!c)return!1;c="GFF3_"+c+"_"+h++;e[c]={type:this.storeType,blob:this._makeBlob(d),name:c};return!0}return!1},finalizeConfiguration:function(){},_makeBlob:function(e){e=e.file?new j(e.file):e.url?new f(e.url):null;if(!e)throw"unknown resource type";return e},confIsValid:function(e){return e.blob||e.urlTemplate}}})},"JBrowse/View/LocationChoiceDialog":function(){define("dojo/_base/declare,dojo/dom-construct,dojo/aspect,dijit/Dialog,dijit/form/Button,dijit/focus,JBrowse/View/LocationList".split(","),
function(g,j,f,h,e,d,c){return g(null,{constructor:function(b){this.browser=b.browser;this.config=dojo.clone(b.config||{});this.locationChoices=b.locationChoices||[];this.title=b.title||"Choose location";this.prompt=b.prompt;this.goCallback=b.goCallback;this.showCallback=b.showCallback},show:function(){var b=this.dialog=new h({title:this.title,className:"locationChoiceDialog",style:{width:"70%"}}),i=j.create("div",{});this.prompt&&j.create("div",{className:"prompt",innerHTML:this.prompt},i);var a=
this.browser;this.locationListView=new c({browser:a,locations:this.locationChoices,buttons:[{className:"show",innerHTML:"Show",onClick:this.showCallback||function(b){a.showRegion(b)}},{className:"go",innerHTML:"Go",onClick:this.goCallback||function(c){b.hide();a.showRegion(c)}}]},j.create("div",{className:"locationList",style:{maxHeight:0.5*this.browser.container.offsetHeight+"px"}},i));this.actionBar=dojo.create("div",{className:"infoDialogActionBar dijitDialogPaneActionBar"});(new e({iconClass:"dijitIconDelete",
label:"Cancel",onClick:dojo.hitch(b,"hide")})).placeAt(this.actionBar);b.set("content",[i,this.actionBar]);b.show();f.after(b,"hide",dojo.hitch(this,function(){d.curNode&&d.curNode.blur();setTimeout(function(){b.destroyRecursive()},500)}))}})})},"JBrowse/View/LocationList":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-construct,dijit/form/Button,dgrid/Grid,dgrid/extensions/DijitRegistry".split(","),function(g,j,f,h,e,d){var c=g([e,d]);return g(null,{constructor:function(b,d){this.browser=
b.browser;var a=[{label:"Reference",field:"ref"},{label:"Start",field:"start"},{label:"End",field:"end"}];b.locations&&b.locations.length&&b.locations[0].tracks&&a.push({label:"Track",field:"tracks",formatter:function(a){return j.map(j.filter(a,function(a){return a}),function(a){return a.key||a.name||a.label||a}).join(", ")}});j.some(b.locations||[],function(a){return a.label})&&a.unshift({label:"Name",field:"label"});b.buttons&&a.push({label:"",className:"goButtonColumn",renderCell:function(a,c,
d,e){var i=f.create("div");j.forEach(b.buttons,function(b){var f=dojo.mixin({},b);f.onClick=function(){b.onClick(a,c,d,e)};(new h(f)).placeAt(i)});return i}});this.grid=new c({columns:a},d);this.grid.renderArray(b.locations)}})})},"dgrid/Grid":function(){define("dojo/_base/kernel,dojo/_base/declare,dojo/on,dojo/has,put-selector/put,./List,dojo/_base/sniff".split(","),function(g,j,f,h,e,d){function c(a,b){b&&b.nodeType&&a.appendChild(b)}var b=8>h("ie")&&!h("quirks"),i=/[^\._a-zA-Z0-9-]/g,j=j(d,{columns:null,
cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(a){return"string"==typeof a?this.columns[a]:this.cell(a).column},listType:"grid",cell:function(a,b){if(a.row&&a.row instanceof this._Row)return a;if(a.target&&a.target.nodeType)a=a.target;var c;if(a.nodeType){do{if(this._rowIdToObject[a.id])break;var d=a.columnId;if(d){b=d;c=a;break}a=a.parentNode}while(a&&a!=this.domNode)}if(!c&&"undefined"!=typeof b){var e=this.row(a);if(d=e.element)for(var d=d.getElementsByTagName("td"),f=0;f<d.length;f++)if(d[f].columnId==
b){c=d[f];break}}if(null!=a)return{row:e||this.row(a),column:b&&this.column(b),element:c}},_columnsCss:function(a){a.fullSelector=function(){return this.parent.fullSelector()+" .dgrid-cell"};for(var b=0;b<a.children.length;b++){var c=a.children[b];c.field=c.className=c.selector.substring(1)}return a.children},createRowCells:function(a,c,d){var f=e("table.dgrid-row-table[role=presentation]"),g=9>h("ie")||h("quirks")?e(f,"tbody"):f,j,n,q,r,u,s,v,t,x,w,d=d||this.subRows;for(n=0,q=d.length;n<q;n++){s=
d[n];j=1==q&&!h("ie")?g:e(g,"tr");s.className&&e(j,"."+s.className);for(r=0,u=s.length;r<u;r++){v=s[r];t=v.id;x=v.className||v.field&&"field-"+v.field;x=e(a+(".dgrid-cell.dgrid-cell-padding"+(t?".dgrid-column-"+t:"")+(x?"."+x:"")).replace(i,"-")+"[role="+("th"===a?"columnheader":"gridcell")+"]");x.columnId=t;b?(t=e(x,"!dgrid-cell-padding div.dgrid-cell-padding"),x.contents=t):t=x;if(w=v.colSpan)x.colSpan=w;if(w=v.rowSpan)x.rowSpan=w;c(t,v);j.appendChild(x)}}return f},left:function(a,b){return this.cell(this._move(a,
-(b||1),"dgrid-cell"))},right:function(a,b){return this.cell(this._move(a,b||1,"dgrid-cell"))},renderRow:function(a,b){var d=this.createRowCells("td",function(d,e){var f=a;e.get?f=e.get(a):"field"in e&&"_item"!=e.field&&(f=f[e.field]);e.formatter?d.innerHTML=e.formatter(f):e.renderCell?c(d,e.renderCell(a,f,d,b)):null!=f&&d.appendChild(document.createTextNode(f))},b&&b.subRows);return e("div[role=row]>",d)},renderHeader:function(){var a=this,d=this.headerNode,i=d.childNodes.length;for(d.setAttribute("role",
"row");i--;)e(d.childNodes[i],"!");i=this.createRowCells("th",function(a,d){var e=d.headerNode=a;if(b)a=a.parentNode;var f=d.field;if(f)a.field=f;if(d.renderHeaderCell)c(e,d.renderHeaderCell(e));else if(d.label||d.field)e.appendChild(document.createTextNode(d.label||d.field));if(!1!==d.sortable&&f&&"_item"!=f)a.sortable=!0,a.className+=" dgrid-sortable"},this.subRows&&this.subRows.headerRows);this._rowIdToObject[i.id=this.id+"-header"]=this.columns;d.appendChild(i);f(i,"click,keydown",function(b){if("click"==
b.type||32==b.keyCode||!h("opera")&&13==b.keyCode){var b=b.target,c,e;do if(b.sortable)return a._sortNode=b,b=b.field||b.columnId,c=(e=a._sort[0])&&e.attribute==b&&!e.descending,a.set("sort",b,c);while((b=b.parentNode)&&b!=d)}})},resize:function(){var a=this.headerNode.firstChild,b=this.contentNode,c;this.inherited(arguments);if(!h("ie")||7<h("ie")&&!h("quirks"))if(b.style.width="",b&&a&&(c=a.offsetWidth)!=b.offsetWidth)b.style.width=c+"px"},destroy:function(){this._destroyColumns();this.inherited(arguments)},
_setSort:function(a,b){this.inherited(arguments);this._lastSortedArrow&&(e(this._lastSortedArrow,"<!dgrid-sort-up!dgrid-sort-down"),e(this._lastSortedArrow,"!"),delete this._lastSortedArrow);if(this._sort[0]){var c=this._sort[0].attribute,d=this._sort[0].descending,f=this._sortNode,i,h,g;delete this._sortNode;if(!f)for(g in i=this.columns,i)if(h=i[g],h.field==c){f=h.headerNode;break}if(f)f=f.contents||f,this._lastSortedArrow=e(f.firstChild,"-div.dgrid-sort-arrow.ui-icon[role=presentation]"),this._lastSortedArrow.innerHTML=
"&nbsp;",e(f,d?".dgrid-sort-down":".dgrid-sort-up"),this.resize()}},styleColumn:function(a,b){return this.addCssRule("#"+this.domNode.id+" .dgrid-column-"+a,b)},_configColumns:function(a,b){var c=[],d=b instanceof Array,e,f;for(e in b){f=b[e];"string"==typeof f&&(b[e]=f={label:f});if(!d&&!f.field)f.field=e;e=f.id=f.id||(isNaN(e)?e:a+e);a&&(this.columns[e]=f);this._configColumn&&this._configColumn(f,e,b,a);f.grid=this;"function"===typeof f.init&&f.init();c.push(f)}return d?b:c},_destroyColumns:function(){var a=
this.subRows.length,b,c,d,e;this.cleanup();for(b=0;b<a;b++)for(c=0,e=this.subRows[b].length;c<e;c++)d=this.subRows[b][c],"function"===typeof d.destroy&&d.destroy()},configStructure:function(){var a=this.subRows;if(a){this.columns={};for(var b=0;b<a.length;b++)a[b]=this._configColumns(b+"-",a[b])}else this.subRows=[this._configColumns("",this.columns)]},_setColumns:function(a){this._destroyColumns();this.subRows=null;this.columns=a;this._updateColumns()},_setSubRows:function(a){this._destroyColumns();
this.subRows=a;this._updateColumns()},setColumns:function(a){g.deprecated("setColumns(...)",'use set("columns", ...) instead',"dgrid 1.0");this.set("columns",a)},setSubRows:function(a){g.deprecated("setSubRows(...)",'use set("subRows", ...) instead',"dgrid 1.0");this.set("subRows",a)},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this.resize()}});j.appendIfNode=c;j.defaultRenderCell=function(a,b,c){null!=
b&&c.appendChild(document.createTextNode(b))};return j})},"put-selector/put":function(){(function(g){var j,f=/[-+,> ]/;g([],j=function(h,e){function d(e){function a(){m&&l&&m!=l&&(l==e&&(g||(g=f.test(u)&&h.createDocumentFragment()))||l).insertBefore(m,p||null)}for(var g,j,p,l,m,n=arguments,q=n[0],r=0;r<n.length;r++){var u=n[r];if("object"==typeof u){j=!1;if(u instanceof Array){m=h.createDocumentFragment();for(var s=0;s<u.length;s++)m.appendChild(d(u[s]));u=m}if(u.nodeType)m=u,a(),l=u,p=0;else for(s in u)m[s]=
u[s]}else if(j)j=!1,m.appendChild(h.createTextNode(u));else{1>r&&(e=null);j=!0;if(q=u.replace(c,function(c,f,g,k,j,o){if(f){a();if("-"==f||"+"==f){if(l=(p=m||l).parentNode,m=null,"+"==f)p=p.nextSibling}else"<"==f?l=m=(m||l).parentNode:(","==f?l=e:m&&(l=m),m=null),p=0;m&&(l=m)}if((c=!g&&k)||!m&&(g||j))"$"==c?(c=n[++r],l.appendChild(h.createTextNode(c))):(c=c||d.defaultTag,(f=b&&n[r+1]&&n[r+1].name)&&(c="<"+c+' name="'+f+'">'),m=h.createElement(c));if(g)if("$"==k&&(k=n[++r]),"#"==g)m.id=k;else if(f=
(c=m.className)&&(" "+c+" ").replace(" "+k+" "," "),"."==g)m.className=c?(f+k).substring(1):k;else if("!"==u)d("div",m,"<").innerHTML="";else if(f=f.substring(1,f.length-1),f!=c)m.className=f;if(j)if("$"==o&&(o=n[++r]),"style"==j)m.style.cssText=o;else m["!"==j.charAt(0)?(j=j.substring(1))&&"removeAttribute":"setAttribute"](j,""===o?j:o);return""}))throw new SyntaxError("Unexpected char "+q+" in "+u);a();l=q=m||l}}e&&g&&e.appendChild(g);return q}f=e||f;var c=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,
h=h||document,b="object"==typeof h.createElement;d.defaultTag="div";d.forDocument=j;return d})})("undefined"==typeof define?function(g,j){"undefined"==typeof window?require("./node-html")(module,j):put=j()}:define)},"dgrid/List":function(){define("dojo/_base/array,dojo/_base/kernel,dojo/_base/declare,dojo/on,dojo/has,./util/misc,dojo/has!touch?./TouchScroll,xstyle/has-class,put-selector/put,dojo/_base/sniff,xstyle/css!./css/dgrid.css".split(","),function(g,j,f,h,e,d,c,b,i){function a(a){var b=a?"."+
a.replace(n,"."):"";this._class&&(b="!"+this._class.replace(n,"!")+b);i(this.domNode,b);this._class=a}function k(){return this._class}b("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var o,p=i(document.getElementsByTagName("head")[0],"style"),l=[],p=p.sheet||p.styleSheet,m=0,n=/ +/g,q=7>e("ie")&&!e("quirks")?function(){var a,b,c;if(this._started&&(a=document.documentElement,b=a.clientWidth,a=a.clientHeight,c=this._prevWinDims||[],c[0]!==b||c[1]!==a))this.resize(),this._prevWinDims=
[b,a]}:function(){this._started&&this.resize()};return f(c?c:null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,postscript:function(a,b){var c=this;(this._Row=function(a,b,c){this.id=a;this.data=b;this.element=c}).prototype.remove=function(){c.removeRow(this.element)};if(b)this.srcNodeRef=b=b.nodeType?b:document.getElementById(b);this.create(a,b)},listType:"list",create:function(b,c){var d=this.domNode=c||i("div"),e;b?(this.params=b,f.safeMixin(this,b),e=b["class"]||b.className||
d.className,this._sort=b.sort||[],delete this.sort):this._sort=[];this.observers=[];this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=d.id=d.id||this.id||"dgrid_"+m++;this.buildRendering();e&&a.call(this,e);this.postCreate&&this.postCreate();delete this.srcNodeRef;this.domNode.offsetHeight&&this.startup()},buildRendering:function(){var a=this.domNode,b=this,c,f,g,k;k=this.isRTL="rtl"==(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase();
a.className="";i(a,"[role=grid].ui-widget.dgrid.dgrid-"+this.listType);c=this.headerNode=i(a,"div.dgrid-header.dgrid-header-row.ui-widget-header"+(this.showHeader?"":".dgrid-header-hidden"));(e("quirks")||8>e("ie"))&&i(a,"div.dgrid-spacer");f=this.bodyNode=i(a,"div.dgrid-scroller");f.tabIndex=-1;this.headerScrollNode=i(a,"div.dgrid-header-scroll.dgrid-scrollbar-width.ui-widget-header");g=this.footerNode=i("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden"));i(a,g);k&&(a.className+=" dgrid-rtl"+
(e("webkit")?"":" dgrid-rtl-nonwebkit"));h(f,"scroll",function(d){if(b.showHeader)c.scrollLeft=d.scrollLeft||f.scrollLeft;d.stopPropagation();h.emit(a,"scroll",{scrollTarget:f})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=i(this.bodyNode,"div.dgrid-content.ui-widget-content");this._listeners.push(this._resizeHandle=h(window,"resize",d.throttleDelayed(q,this)))},startup:function(){this.inherited(arguments);if(!this._started)this._started=!0,this.resize(),this.set("sort",
this._sort)},configStructure:function(){},resize:function(){var a=this.bodyNode,b=this.headerNode,c=this.footerNode,d=b.offsetHeight,f=this.showFooter?c.offsetHeight:0,h=e("quirks")||7>e("ie");this.headerScrollNode.style.height=a.style.marginTop=d+"px";a.style.marginBottom=f+"px";if(h&&(a.style.height="",a.style.height=Math.max(this.domNode.offsetHeight-d-f,0)+"px",f))c.style.bottom="1px",setTimeout(function(){c.style.bottom=""},0);o||(d=i(document.body,"div.dgrid-scrollbar-measure"),o=d.offsetWidth-
d.clientWidth,i(d,"!"),7===e("ie")&&o++,this.addCssRule(".dgrid-scrollbar-width","width: "+o+"px"),this.addCssRule(".dgrid-scrollbar-height","height: "+o+"px"),17!=o&&!h&&(this.addCssRule(".dgrid-header","right: "+o+"px"),this.addCssRule(".dgrid-rtl-nonwebkit .dgrid-header","left: "+o+"px")));if(h)b.style.width=a.clientWidth+"px",setTimeout(function(){b.scrollLeft=a.scrollLeft},0)},addCssRule:function(a,b){var c=l.length;l[c]=(p.cssRules||p.rules).length;p.addRule?p.addRule(a,b):p.insertRule(a+"{"+
b+"}",l[c]);return{remove:function(){var a=l[c],b,d=l.length;if(void 0!==a){p.deleteRule?p.deleteRule(a):p.removeRule(a);l[c]=void 0;for(b=c;b<d;b++)l[b]>a&&l[b]--}}}},on:function(a,b){var c=h(this.domNode,a,b);e("dom-addeventlistener")||this._listeners.push(c);return c},cleanup:function(){var a=this.observers,b;for(b in this._rowIdToObject)if(this._rowIdToObject[b]!=this.columns){var c=document.getElementById(b);c&&this.removeRow(c,!0)}for(b=0;b<a.length;b++)(c=a[b])&&c.cancel();this.observers=[];
this.preload=null},destroy:function(){if(this._listeners){for(var a=this._listeners.length;a--;)this._listeners[a].remove();delete this._listeners}this.cleanup();i(this.domNode,"!")},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},newRow:function(a,b,c,d){if(!b||b.parentNode){var e=this.insertRow(a,b?b.parentNode:this.contentNode,b,d.start+c,d);i(e,".ui-state-highlight");setTimeout(function(){i(e,"!ui-state-highlight")},
250);return e}},adjustRowIndices:function(a){if(this.maintainOddEven){var b=a.rowIndex;if(-1<b){do if(-1<a.rowIndex)-1<(a.className+" ").indexOf("dgrid-row ")&&i(a,"."+(1==b%2?"dgrid-row-odd":"dgrid-row-even")+"!"+(0==b%2?"dgrid-row-odd":"dgrid-row-even")),a.rowIndex=b++;while((a=a.nextSibling)&&a.rowIndex!=b)}}},renderArray:function(a,b,c){function d(a){o=f.insertRow(a,l,null,i++,c);o.observerIndex=j;return o}function e(a){if(k=b?b.parentNode:f.contentNode)k.insertBefore(l,b||null),(o=a[a.length-
1])&&f.adjustRowIndices(o);return g=a}var c=c||{},f=this,i=c.start||0,h,g,k;if(!b)this._lastCollection=a;if(a.observe)var j=this.observers.push(a.observe(function(a,b,d){var e,i;if(-1<b&&g[b]){h=g.splice(b,1)[0];if(h.parentNode==k)(e=h.nextSibling)&&b!=d&&e.rowIndex--,f.removeRow(h);f._processScroll&&f._processScroll()}if(-1<d){i=g[d];if(!i&&(i=g[d-1]))i=(i.connected||i).nextSibling;if(h=f.newRow(a,i,d,c))if(h.observerIndex=j,g.splice(d,0,h),!e||d<b)a=h.previousSibling,e=!a||a.rowIndex+1==h.rowIndex||
0==h.rowIndex?h:a;c.count++}b!=d&&e&&f.adjustRowIndices(e)},!0))-1;var l=document.createDocumentFragment();if(a.map){if(g=a.map(d,console.error),g.then)return g.then(e)}else{g=[];for(var n=0,m=a.length;n<m;n++)g[n]=d(a[n])}var o;return e(g)},renderHeader:function(){},_autoId:0,insertRow:function(a,b,c,d,e){var f=e.parentId,f=this.id+"-row-"+(f?f+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(a):this._autoId++),i=document.getElementById(f),h=i&&i.previousSibling;if(!i||c&&i.parentNode!=
c.parentNode)i&&this.removeRow(i),i=this.renderRow(a,e),i.className=(i.className||"")+" ui-state-default dgrid-row "+(1==d%2?"dgrid-row-odd":"dgrid-row-even"),this._rowIdToObject[i.id=f]=a;b.insertBefore(i,c||null);h&&this.adjustRowIndices(h);i.rowIndex=d;return i},renderRow:function(a){return i("div",""+a)},removeRow:function(a,b){a=a.element||a;delete this._rowIdToObject[a.id];b||i(a,"!")},row:function(a){var b;if(a instanceof this._Row)return a;if(a.target&&a.target.nodeType)a=a.target;if(a.nodeType){do{var c=
a.id;if(b=this._rowIdToObject[c])return new this._Row(c.substring(this.id.length+5),b,a);a=a.parentNode}while(a&&a!=this.domNode)}else return"object"==typeof a?b=this.store.getIdentity(a):(b=a,a=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,a,document.getElementById(this.id+"-row-"+b))},cell:function(a){return{row:this.row(a)}},_move:function(a,b,c,d){var e,f;f=e=a.element;b=b||1;do if(a=e[0>b?"previousSibling":"nextSibling"]){do if((e=a)&&-1<(e.className+" ").indexOf(c+" ")){f=e;b+=0>b?
1:-1;break}while(a=(!d||!e.hidden)&&e[0>b?"lastChild":"firstChild"])}else if(e=e.parentNode,e===this.bodyNode||e===this.headerNode)break;while(b);return f},up:function(a,b,c){return this.row(this._move(a,-(b||1),"dgrid-row",c))},down:function(a,b,c){return this.row(this._move(a,b||1,"dgrid-row",c))},scrollTo:e("touch")?function(){return this.inherited(arguments)}:function(a){if("undefined"!==typeof a.x)this.bodyNode.scrollLeft=a.x;if("undefined"!==typeof a.y)this.bodyNode.scrollTop=a.y},getScrollPosition:e("touch")?
function(){return this.inherited(arguments)}:function(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}},get:function(a){var b="_get"+a.charAt(0).toUpperCase()+a.slice(1);return"function"===typeof this[b]?this[b].apply(this,[].slice.call(arguments,1)):this[a]},set:function(a,b){if("object"===typeof a)for(var c in a)this.set(c,a[c]);else c="_set"+a.charAt(0).toUpperCase()+a.slice(1),"function"===typeof this[c]?this[c].apply(this,[].slice.call(arguments,1)):this[a]=b;return this},_getClass:k,
_setClass:a,_getClassName:k,_setClassName:a,_setSort:function(a,b){this._sort="string"!=typeof a?a:[{attribute:a,descending:b}];this.refresh();if(this._lastCollection){if(a.length){if("string"!=typeof a)b=a[0].descending,a=a[0].attribute;this._lastCollection.sort(function(c,d){var e=c[a],f=d[a];void 0===e&&(e="");void 0===f&&(f="");return e==f?0:e>f==!b?1:-1})}this.renderArray(this._lastCollection)}},sort:function(a,b){j.deprecated("sort(...)",'use set("sort", ...) instead',"dgrid 1.0");this.set("sort",
a,b)},_getSort:function(){return this._sort},_setShowHeader:function(a){var b=this.headerNode;this.showHeader=a;i(b,(a?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();if(a)b.scrollLeft=this.getScrollPosition().x},setShowHeader:function(a){j.deprecated("setShowHeader(...)",'use set("showHeader", ...) instead',"dgrid 1.0");this.set("showHeader",a)},_setShowFooter:function(a){this.showFooter=a;i(this.footerNode,(a?"!":".")+"dgrid-footer-hidden");this.resize()}})})},"dgrid/util/misc":function(){define([],
function(){var g={defaultDelay:15,throttle:function(j,f,h){var e=!1,h=h||g.defaultDelay;return function(){e||(e=!0,j.apply(f,arguments),setTimeout(function(){e=!1},h))}},throttleDelayed:function(j,f,h){var e=!1,h=h||g.defaultDelay;return function(){if(!e){e=!0;var d=arguments;setTimeout(function(){e=!1;j.apply(f,d)},h)}}},debounce:function(j,f,h){var e,h=h||g.defaultDelay;return function(){e&&(clearTimeout(e),e=null);var d=arguments;e=setTimeout(function(){j.apply(f,d)},h)}}};return g})},"xstyle/has-class":function(){define(["dojo/has"],
function(g){var j={};return function(){for(var f,h=arguments,e=0;e<h.length;e++)if(f=h[e],!j[f]){j[f]=!0;var d=f.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),c=g(d[2]),b=-d[4];if((0<b?b<=c&&(-d[5]||b)>=c:!!c)==!d[1])document.documentElement.className+=" has-"+f}}})},"xstyle/css":function(){define(["require"],function(g){var j=window.cssCache||(window.cssCache={});return{load:function(f,h,e){var d=h.toUrl(f);if(j[d])return createStyleSheet(j[d]);var c=document.documentElement,b=c.insertBefore(document.createElement("div"),
c.firstChild);b.id=h.toAbsMid(f).replace(/\//g,"-").replace(/\..*/,"")+"-loaded";f=(b.currentStyle||getComputedStyle(b,null)).display;c.removeChild(b);if("none"==f)return e();g(["./load-css"],function(b){b(d,e)})},pluginBuilder:"xstyle/css-builder"}})},"dgrid/extensions/DijitRegistry":function(){define(["dojo/_base/declare","dijit/registry"],function(g,j){return g(null,{buildRendering:function(){j.add(this);this.inherited(arguments);this.domNode.setAttribute("widgetId",this.id)},startup:function(){if(!this._started){this.inherited(arguments);
var f=j.getEnclosingWidget(this.domNode.parentNode);f&&f.isLayoutContainer&&this._resizeHandle.remove()}},destroyRecursive:function(){this.destroy()},destroy:function(){this.inherited(arguments);j.remove(this.id)},getChildren:function(){return[]}})})},"lazyload/lazyload":function(){define([],function(){return function(g){function j(a,b){var c=g.createElement(a),d;for(d in b)b.hasOwnProperty(d)&&c.setAttribute(d,b[d]);return c}function f(b){var c=a[b],d,f;if(c)d=c.callback,f=c.urls,f.shift(),k=0,f.length||
(d&&d.call(c.context,c.obj),a[b]=null,o[b].length&&e(b))}function h(){var a=navigator.userAgent;b={async:!0===g.createElement("script").async};(b.webkit=/AppleWebKit\//.test(a))||(b.ie=/MSIE/.test(a))||(b.opera=/Opera/.test(a))||(b.gecko=/Gecko\//.test(a))||(b.unknown=!0)}function e(e,k,n,p,r){var u=function(){f(e)},s="css"===e,v=[],t,x,w,E;b||h();if(k)if(k="string"===typeof k?[k]:k.concat(),s||b.async||b.gecko||b.opera)o[e].push({urls:k,callback:n,obj:p,context:r});else for(t=0,x=k.length;t<x;++t)o[e].push({urls:[k[t]],
callback:t===x-1?n:null,obj:p,context:r});if(!a[e]&&(E=a[e]=o[e].shift())){i||(i=g.head||g.getElementsByTagName("head")[0]);k=E.urls;for(t=0,x=k.length;t<x;++t)n=k[t],s?w=b.gecko?j("style"):j("link",{href:n,rel:"stylesheet"}):(w=j("script",{src:n}),w.async=!1),w.className="lazyload",w.setAttribute("charset","utf-8"),b.ie&&!s?w.onreadystatechange=function(){if(/loaded|complete/.test(w.readyState))w.onreadystatechange=null,u()}:s&&(b.gecko||b.webkit)?b.webkit?(E.urls[t]=w.href,c()):(w.innerHTML='@import "'+
n+'";',d(w)):w.onload=w.onerror=u,v.push(w);for(t=0,x=v.length;t<x;++t)i.appendChild(v[t])}}function d(a){var b;try{b=!!a.sheet.cssRules}catch(c){k+=1;200>k?setTimeout(function(){d(a)},50):b&&f("css");return}f("css")}function c(){var b=a.css,d;if(b){for(d=p.length;0<=--d;)if(p[d].href===b.urls[0]){f("css");break}k+=1;b&&(200>k?setTimeout(c,50):f("css"))}}var b,i,a={},k=0,o={css:[],js:[]},p=g.styleSheets;return{css:function(a,b,c,d){e("css",a,b,c,d)},js:function(a,b,c,d){e("js",a,b,c,d)}}}(this.document)})},
"JBrowse/ConfigAdaptor/JB_json_v1":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/json,JBrowse/Util,JBrowse/Digest/Crc32,JBrowse/ConfigAdaptor/AdaptorUtil".split(","),function(g,j,f,h,e,d){var c=h.dojof;return g("JBrowse.ConfigAdaptor.JB_json_v1",null,{constructor:function(){},load:function(b){var c=this;if(b.config.url){var a=h.resolveUrl(b.baseUrl||window.location.href,b.config.url),d=function(c){c.url=a;b.onFailure&&b.onFailure.call(b.context||this,c)};dojo.xhrGet({url:a,handleAs:"text",
load:function(e){try{e=c.parse_conf(e,b)||{},e.sourceUrl=a,e=c.regularize_conf(e,b),b.onSuccess.call(b.context||c,e)}catch(f){d(f)}},error:d})}else if(b.config.data){var e=this.regularize_conf(b.config.data,b);b.onSuccess.call(b.context||this,e)}},parse_conf:function(b){return f.fromJson(b)},regularize_conf:function(b,e){b.sourceUrl=b.sourceUrl||e.config.url;b.baseUrl=b.baseUrl||h.resolveUrl(b.sourceUrl,".");b.baseUrl.length&&!/\/$/.test(b.baseUrl)&&(b.baseUrl+="/");if(b.sourceUrl){var a=[].concat(b.tracks||
[]).concat(c.values(b.stores||{}));b.names&&a.push(b.names);dojo.forEach(a,function(a){if(!a.baseUrl)a.baseUrl=b.baseUrl||"/"},this)}b=d.evalHooks(b);return b=this._regularizeTrackConfigs(b)},_regularizeTrackConfigs:function(b){b.stores=b.stores||{};j.forEach(b.tracks||[],function(c){if(c.config){var a=c.config;delete c.config;for(var d in a)!(d in c)&&a.hasOwnProperty(d)&&(c[d]=a[d])}if(!c.store)d=this._regularizeClass("JBrowse/View/Track",{FeatureTrack:"JBrowse/View/Track/HTMLFeatures",ImageTrack:"JBrowse/View/Track/FixedImage",
"ImageTrack.Wiggle":"JBrowse/View/Track/FixedImage/Wiggle",SequenceTrack:"JBrowse/View/Track/Sequence"}[c.type]||c.type),c.type=d,(a=this._regularizeClass("JBrowse/Store",c.storeClass?c.storeClass:/\/HTMLFeatures$/.test(d)?"JBrowse/Store/SeqFeature/NCList"+(0==c.backendVersion?"_v0":""):/\/FixedImage/.test(d)?"JBrowse/Store/TiledImage/Fixed"+(0==c.backendVersion?"_v0":""):/\/Sequence$/.test(d)?"JBrowse/Store/Sequence/StaticChunked":null))?(d={urlTemplate:c.urlTemplate,compress:c.compress,baseUrl:c.baseUrl,
type:a,subfeatures:c.subfeatures},d.name="JBrowse/Store/Sequence/StaticChunked"==a&&!b.stores.refseqs?"refseqs":"store"+e.objectFingerprint(d),b.stores[d.name]=d,c.store=d.name):console.error("Unable to determine an appropriate data store to use with a "+d+" track, please explicitly specify a storeClass in the configuration.")},this);return b},_regularizeClass:function(b,c){/\//.test(c)||(c=b+"/"+c);return c=c.replace(/^\//)}})})},"JBrowse/ConfigAdaptor/AdaptorUtil":function(){define(["dojox/lang/functional/object",
"dojox/lang/functional/fold"],function(){return{evalHooks:function(g){for(var j in g)if("object"==typeof g[j])g[j]=this.evalHooks(g[j]);else if("string"==typeof g[j]){var f=g[j];/^\s*function\s*\(/.test(f)&&/\}[\s;]*$/.test(f)&&(g[j]=this.evalHook(f))}return g},evalHook:function(g){if("string"!=typeof g)return g;try{eval("arguments[0]="+g+";")}catch(j){console.error("eval failed for callback '"+g+"': "+j)}return g}}})},"JBrowse/View/TrackList/Simple":function(){define(["dojo/_base/declare","dojo/_base/array",
"dijit/layout/ContentPane","dojo/dnd/Source","dojo/fx/easing"],function(g,j,f,h,e){return g("JBrowse.View.TrackList.Simple",null,{constructor:function(d){this.browser=d.browser;this.createTrackList(d.browser.container);this.inactiveTrackNodes={};this.trackListWidget.insertNodes(!1,d.trackConfigs);this.browser.subscribe("/dnd/drop",dojo.hitch(this,function(c,b,d,a){if(a===this.trackListWidget&&(c=dojo.filter(dojo.map(b,function(a){return a.track&&a.track.config}),function(a){return a}),c.length))this.dndDrop=
!0,this.browser.publish("/jbrowse/v1/v/tracks/hide",c),this.dndDrop=!1}));this.browser.subscribe("/jbrowse/v1/c/tracks/show",dojo.hitch(this,"setTracksActive"));this.browser.subscribe("/jbrowse/v1/c/tracks/hide",dojo.hitch(this,"setTracksInactive"));this.browser.subscribe("/jbrowse/v1/c/tracks/new",dojo.hitch(this,"addTracks"));this.browser.subscribe("/jbrowse/v1/c/tracks/replace",dojo.hitch(this,"replaceTracks"));this.browser.subscribe("/jbrowse/v1/c/tracks/delete",dojo.hitch(this,"deleteTracks"))},
addTracks:function(d){this.trackListWidget.insertNodes(!1,d);this._blinkTracks(d)},replaceTracks:function(d){j.forEach(d,function(c){var b=this.inactiveTrackNodes[c.label];b&&(delete this.inactiveTrackNodes[c.label],this.trackListWidget.delItem(b.id),b.parentNode&&b.parentNode.removeChild(b),this.trackListWidget.insertNodes(!1,[c],!1,b.previousSibling))},this)},createTrackList:function(d){d=dojo.create("div",{id:"trackPane",style:{width:"10em"}},d);new f({region:"left",splitter:!0},d);d=dojo.create("div",
{id:"tracksAvail",className:"container handles",style:{width:"100%",height:"100%",overflowX:"hidden",overflowY:"auto"},innerHTML:"<h2>Available Tracks</h2>",onclick:dojo.hitch(this,function(){this.trackListWidget.selectNone()})},d);this.trackListWidget=new h(d,{accept:["track"],withHandles:!1,creator:dojo.hitch(this,function(c,b){var d=dojo.create("div",{className:"tracklist-label",title:"drag or double-click to activate",innerHTML:c.key||c.name||c.label});if("avatar"!=b){dojo.connect(d,"dblclick",
dojo.hitch(this,function(){this.browser.publish("/jbrowse/v1/v/tracks/show",[c])}));var a=dojo.create("div",{className:"tracklist-container"});a.appendChild(d);d=a}d.id=dojo.dnd.getUniqueId();this.inactiveTrackNodes[c.label]=d;return{node:d,data:c,type:["track"]}})});return d},setTracksActive:function(d){this.deleteTracks(d)},deleteTracks:function(d){j.forEach(d||[],function(c){var b=this.inactiveTrackNodes[c.label];b&&(delete this.inactiveTrackNodes[c.label],b.parentNode&&b.parentNode.removeChild(b),
this.trackListWidget.delItem(b.id))},this)},setTracksInactive:function(d){this.dndDrop||(this.trackListWidget.insertNodes(!1,d),this._blinkTracks(d))},_blinkTracks:function(d){this.trackListWidget.node.scrollTop=this.trackListWidget.node.scrollHeight;j.forEach(d,function(c){var b=this.inactiveTrackNodes[c.label].firstChild;b&&dojo.animateProperty({node:b,duration:400,properties:{backgroundColor:{start:"#DEDEDE",end:"#FFDE2B"}},easing:e.sine,repeat:2,onEnd:function(){b.style.backgroundColor=null}}).play()},
this)},show:function(){},hide:function(){},toggle:function(){}})})},"dojo/fx/easing":function(){define(["../_base/lang"],function(g){var j={linear:function(f){return f},quadIn:function(f){return Math.pow(f,2)},quadOut:function(f){return-1*f*(f-2)},quadInOut:function(f){f*=2;return 1>f?Math.pow(f,2)/2:-1*(--f*(f-2)-1)/2},cubicIn:function(f){return Math.pow(f,3)},cubicOut:function(f){return Math.pow(f-1,3)+1},cubicInOut:function(f){f*=2;return 1>f?Math.pow(f,3)/2:(Math.pow(f-2,3)+2)/2},quartIn:function(f){return Math.pow(f,
4)},quartOut:function(f){return-1*(Math.pow(f-1,4)-1)},quartInOut:function(f){f*=2;return 1>f?Math.pow(f,4)/2:-0.5*(Math.pow(f-2,4)-2)},quintIn:function(f){return Math.pow(f,5)},quintOut:function(f){return Math.pow(f-1,5)+1},quintInOut:function(f){f*=2;return 1>f?Math.pow(f,5)/2:(Math.pow(f-2,5)+2)/2},sineIn:function(f){return-1*Math.cos(f*(Math.PI/2))+1},sineOut:function(f){return Math.sin(f*(Math.PI/2))},sineInOut:function(f){return-1*(Math.cos(Math.PI*f)-1)/2},expoIn:function(f){return 0==f?0:
Math.pow(2,10*(f-1))},expoOut:function(f){return 1==f?1:-1*Math.pow(2,-10*f)+1},expoInOut:function(f){if(0==f)return 0;if(1==f)return 1;f*=2;if(1>f)return Math.pow(2,10*(f-1))/2;--f;return(-1*Math.pow(2,-10*f)+2)/2},circIn:function(f){return-1*(Math.sqrt(1-Math.pow(f,2))-1)},circOut:function(f){return Math.sqrt(1-Math.pow(f-1,2))},circInOut:function(f){f*=2;return 1>f?-0.5*(Math.sqrt(1-Math.pow(f,2))-1):0.5*(Math.sqrt(1-Math.pow(f-2,2))+1)},backIn:function(f){return Math.pow(f,2)*(2.70158*f-1.70158)},
backOut:function(f){f-=1;return Math.pow(f,2)*(2.70158*f+1.70158)+1},backInOut:function(f){f*=2;if(1>f)return Math.pow(f,2)*(3.5949095*f-2.5949095)/2;f-=2;return(Math.pow(f,2)*(3.5949095*f+2.5949095)+2)/2},elasticIn:function(f){if(0==f||1==f)return f;f-=1;return-1*Math.pow(2,10*f)*Math.sin((f-0.075)*2*Math.PI/0.3)},elasticOut:function(f){return 0==f||1==f?f:Math.pow(2,-10*f)*Math.sin((f-0.075)*2*Math.PI/0.3)+1},elasticInOut:function(f){if(0==f)return 0;f*=2;if(2==f)return 1;var h=0.3*1.5,e=h/4;if(1>
f)return f-=1,-0.5*Math.pow(2,10*f)*Math.sin((f-e)*2*Math.PI/h);f-=1;return 0.5*Math.pow(2,-10*f)*Math.sin((f-e)*2*Math.PI/h)+1},bounceIn:function(f){return 1-j.bounceOut(1-f)},bounceOut:function(f){return f=f<1/2.75?7.5625*Math.pow(f,2):f<2/2.75?7.5625*Math.pow(f-1.5/2.75,2)+0.75:f<2.5/2.75?7.5625*Math.pow(f-2.25/2.75,2)+0.9375:7.5625*Math.pow(f-2.625/2.75,2)+0.984375},bounceInOut:function(f){return 0.5>f?j.bounceIn(2*f)/2:j.bounceOut(2*f-1)/2+0.5}};g.setObject("dojo.fx.easing",j);return j})},"JBrowse/Store/Sequence/StaticChunked":function(){define(["dojo/_base/declare",
"JBrowse/Store/SeqFeature","JBrowse/Util","JBrowse/Digest/Crc32"],function(g,j,f,h){var e=f.fastDeclare({constructor:function(d){this.start=d.start;this.end=d.end;this.seq=d.seq;this.seq_id=d.seq_id},get:function(d){return this[d]},tags:function(){return["seq_id","start","end","seq"]}});return g(j,{constructor:function(d){this.chunkCache={};this.compress=d.compress;this.urlTemplate=d.urlTemplate;if(!this.urlTemplate)throw"no urlTemplate provided, cannot open sequence store";this.baseUrl=d.baseUrl;
this.seqChunkSize=d.seqChunkSize},getFeatures:function(d,c,b,i){var i=i||function(a){console.error(a)},a=d.start,g=d.end,j=d.ref,p=d.seqChunkSize||this.refSeq.name==d.ref&&this.refSeq.seqChunkSize||this.seqChunkSize,l=Math.floor(Math.max(0,a)/p),m=Math.floor((g-1)/p),c=function(){var a=[],f=m-l+1,i=c;return function(c,h,g,k){a[k]=g;0==--f&&(i(new e({seq_id:d.ref,start:c,end:h,seq:a.join("")})),b&&b())}}(),n={start:a,end:g,success:c,error:i};this.chunkCache[j]||(this.chunkCache[j]=[]);for(var j=this.chunkCache[j],
q=l;q<=m;q++){var r=j[q];r?r.loaded?c(a,g,r.sequence.substring(a-q*p,g-q*p),q):r.error?i(r.error):r.callbacks.push(n):(j[q]={loaded:!1,num:q,callbacks:[n]},r=f.resolveUrl(this.baseUrl,f.fillTemplate(this.urlTemplate,{refseq:d.ref,refseq_dirpath:function(){for(var a=h.crc32(d.ref).toString(16).toLowerCase().replace("-","n");8>a.length;)a="0"+a;for(var b=[],c=0;c<a.length;c+=3)b.push(a.substring(c,c+3));return b.join("/")}})),dojo.xhrGet({url:r+q+".txt"+(this.compress?"z":""),load:dojo.hitch(this,function(a,
b){a.sequence=b;a.loaded=!0;dojo.forEach(a.callbacks,function(c){c.success(c.start,c.end,b.substring(c.start-a.num*p,c.end-a.num*p),q)});delete a.callbacks},j[q]),error:dojo.hitch(this,function(a,b){a.error=b;dojo.forEach(a.callbacks,function(a){a.error(b)});delete a.callbacks},j[q])}))}}})})},"JBrowse/Store/SeqFeature":function(){define(["dojo/_base/declare","JBrowse/Store"],function(g,j){return g(j,{constructor:function(f){this.globalStats={};this.config=f||{}},getGlobalStats:function(f){f(this.globalStats||
{})},getRegionStats:function(f,h,e){return this._getRegionStats.apply(this,arguments)},_getRegionStats:function(f,h,e){return this.getGlobalStats(h,e)},getFeatures:function(f,h,e){e()}})})},"JBrowse/Store":function(){define(["dojo/_base/declare"],function(g){return g(null,{constructor:function(g){this.refSeq=dojo.clone(g.refSeq);this.changeCallback=g.changeCallback||function(){};this.browser=g.browser},notifyChanged:function(g){this.changeCallback(g)},_failAllDeferred:function(g){var f=this._deferred||
{},h;for(h in f)f.hasOwnProperty(h)&&f[h].reject(g)}})})},"JBrowse/Store/SeqFeature/NCList":function(){define("dojo/_base/declare,JBrowse/Store/SeqFeature,JBrowse/Store/DeferredFeaturesMixin,JBrowse/Store/DeferredStatsMixin,JBrowse/Util,JBrowse/Model/ArrayRepr,JBrowse/Store/NCList,JBrowse/Store/LazyArray".split(","),function(g,j,f,h,e,d,c,b){var i=function(){return this._uniqueID},a=function(){return this._parent},k=function(){return this.get("subfeatures")};return g([j,f,h],{constructor:function(a){this.args=
a;this.nclist=this.makeNCList();this.baseUrl=a.baseUrl;this.urlTemplates={tracklist:a.urlTemplate};this.refSeq=a.refSeq;this._load()},makeNCList:function(){return new c},_load:function(){var a=e.resolveUrl(this.baseUrl,e.fillTemplate(this.urlTemplates.tracklist,{refseq:this.refSeq.name}));dojo.xhrGet({url:a,handleAs:"json",failOk:!0,load:e.debugHandler(this,function(b){this.loadSuccess(b,a)}),error:dojo.hitch(this,"loadFail")})},loadSuccess:function(a,c){this.globalStats.featureCount=a.featureCount;
this.globalStats.featureDensity=a.featureCount/this.refSeq.length;this.loadNCList(a,c);if(a.histograms&&a.histograms.meta){this.histograms=a.histograms;for(var d=0;d<this.histograms.meta.length;d++)this.histograms.meta[d].lazyArray=new b(this.histograms.meta[d].arrayParams,c)}this._deferred.stats.resolve({success:!0});this._deferred.features.resolve({success:!0})},loadNCList:function(a,b){this.attrs=new d(a.intervals.classes);this.nclist.importExisting(a.intervals.nclist,this.attrs,b,a.intervals.urlTemplate,
a.intervals.lazyClass)},loadFail:function(a){404!=a.status&&console.error(""+a);this.empty=!0;this._deferred.stats.resolve({success:!1});this._deferred.features.resolve({success:!1})},histogram:function(){return this.nclist.histogram.apply(this.nclist,arguments)},_getFeatures:function(a,b,c,d){if(this.empty)c();else{var e=this,f=a.start,a=a.end,i=this.attrs.accessors();return this.nclist.iterate.call(this.nclist,f,a,function(a,c){if(!a.decorated){var d=c.join(",");e._decorate_feature(i,a,d)}return b(a)},
c,d)}},_decorate_feature:function(b,c,d,e){c.get=b.get;c.tags=b.tags;c._uniqueID=d;c.id=i;c._parent=e;c.parent=a;c.children=k;dojo.forEach(c.get("subfeatures"),function(a,e){this._decorate_feature(b,a,d+"-"+e,c)},this);c.decorated=!0}})})},"JBrowse/Store/DeferredFeaturesMixin":function(){define(["dojo/_base/declare","dojo/_base/Deferred"],function(g,j){return g(null,{constructor:function(){this._deferFeatures()},_deferFeatures:function(){if(!this._deferred)this._deferred={};this._deferred.features=
new j},getFeatures:function(f,h,e,d){this._deferred.features.then(dojo.hitch(this,"_getFeatures",f,h,e,d),d)}})})},"JBrowse/Store/DeferredStatsMixin":function(){define(["dojo/_base/declare","dojo/_base/Deferred","JBrowse/Util"],function(g,j){return g(null,{constructor:function(){this._deferGlobalStats()},_deferGlobalStats:function(){if(!this._deferred)this._deferred={};this._deferred.stats=new j},getGlobalStats:function(f,h){this._deferred.stats.then(dojo.hitch(this,"_getGlobalStats",f,h),h)},_getGlobalStats:function(f){f(this.globalStats||
{})},getRegionStats:function(f,h,e){this._deferred.stats.then(dojo.hitch(this,"_getRegionStats",f,h,e),e)}})})},"JBrowse/Model/ArrayRepr":function(){define([],function(){function g(g){this.classes=g;this.fields=[];for(var f=0;f<g.length;f++){this.fields[f]={};for(var h=0;h<g[f].attributes.length;h++)this.fields[f][g[f].attributes[h]]=h+1;if(void 0===g[f].proto)g[f].proto={};if(void 0===g[f].isArrayAttr)g[f].isArrayAttr={}}}g.prototype.attrIndices=function(g){return this.classes.map(function(f){f=
f.attributes.indexOf(g);return 0<=f?f+1:void 0})};g.prototype.get=function(g,f){if(f in this.fields[g[0]])return g[this.fields[g[0]][f]];var h=this.classes[g[0]].attributes.length+1;if(h>=g.length||!(f in g[h])){if(f in this.classes[g[0]].proto)return this.classes[g[0]].proto[f]}else return g[h][f]};g.prototype.set=function(g,f,h){if(f in this.fields[g[0]])g[this.fields[g[0]][f]]=h;else{var e=this.classes[g[0]].attributes.length+1;e>=g.length&&(g[e]={});g[e][f]=h}};g.prototype.makeSetter=function(g){var f=
this;return function(h,e){f.set(h,g,e)}};g.prototype.makeGetter=function(g){var f=this;return function(h){return f.get(h,g)}};g.prototype.makeFastSetter=function(g){var f=this.attrIndices(g);return function(g,e){void 0!==f[g[0]]&&(g[f[g[0]]]=e)}};g.prototype.makeFastGetter=function(g){var f=this.attrIndices(g);return function(g){if(void 0!==f[g[0]])return g[f[g[0]]]}};g.prototype.construct=function(g,f,h){var g=Array(g.classes[h].length),e;for(e in f)this.set(g,e,f[e]);return g};g.prototype.accessors=
function(){return this._accessors=this._accessors||this._makeAccessors()};g.prototype._makeAccessors=function(){var g={},f,h={get:function(d){if(d=this.get.field_accessors[d])return d.call(this)},set:function(d,c){var b=this.set.field_accessors[d];if(b)return b.call(this,c)},tags:function(){return f[this[0]]||[]}};h.get.field_accessors={};h.set.field_accessors={};dojo.forEach(this.classes,function(d,c){dojo.forEach(d.attributes||[],function(b,d){g[b]=g[b]||[];g[b][c]=d+1;b=b.toLowerCase();g[b]=g[b]||
[];g[b][c]=d+1})});f=dojo.map(this.classes,function(d){return d.attributes});for(var e in g)g.hasOwnProperty(e)&&(h.get.field_accessors[e]=function(){var d=g[e];return!d?function(){}:function(){return this[d[this[0]]]}}(),h.set.field_accessors[e]=function(){var d=g[e];return!d?function(){}:function(c){return this[d[this[0]]]=c}}());return h};return g})},"JBrowse/Store/NCList":function(){define(["JBrowse/Finisher","JBrowse/Util"],function(g,j){function f(){this.topList=[]}f.prototype.importExisting=
function(f,e,d,c,b){this.topList=f;this.attrs=e;this.start=e.makeFastGetter("Start");this.end=e.makeFastGetter("End");this.lazyClass=b;this.baseURL=d;this.lazyUrlTemplate=c;this.lazyChunks={}};f.prototype.fill=function(f,e){if(0==f.length)this.topList=[];else{this.attrs=e;this.start=e.makeFastGetter("Start");this.end=e.makeFastGetter("End");var d=e.makeSetter("Sublist"),c=this.start,b=this.end;f.sort(function(a,d){return c(a)!=c(d)?c(a)-c(d):b(d)-b(a)});var i=[],a=[];this.topList=a;a.push(f[0]);if(1!=
f.length)for(var g,j,p=1,l=f.length;p<l;p++)if(g=f[p],b(g)<b(f[p-1]))i.push(a),a=Array(g),d(f[p-1],a);else for(;;)if(0==i.length){a.push(g);break}else if(j=i[i.length-1],b(j[j.length-1])>b(g)){a.push(g);break}else a=i.pop()}};f.prototype.binarySearch=function(f,e,d){for(var c=-1,b=f.length,i;1<b-c;)i=c+b>>>1,d(f[i])>=e?b=i:c=i;return d===this.end?b:c};f.prototype.iterHelper=function(f,e,d,c,b,i,a,g,o){for(var p=f.length,l=this.binarySearch(f,e,a),m=this.attrs.makeGetter("Chunk"),n=this.attrs.makeGetter("Sublist");l<
p&&0<=l&&i*g(f[l])<i*d;){if(f[l][0]==this.lazyClass){var q=this,r=m(f[l]);r in this.lazyChunks||(this.lazyChunks[r]={});var u=this.lazyChunks[r];b.inc();j.maybeLoad({url:j.resolveUrl(this.baseURL,this.lazyUrlTemplate.replace(/\{Chunk\}/ig,r)),handleAs:"json"},u,function(f){return function(h){q.iterHelper(h,e,d,c,b,i,a,g,[f]);b.dec()}}(r),function(){b.dec()})}else c(f[l],o.concat(l));(r=n(f[l]))&&this.iterHelper(r,e,d,c,b,i,a,g,o.concat(l));l+=i}};f.prototype.iterate=function(f,e,d,c){var b=f>e?-1:
1,i=f>e?this.start:this.end,a=f>e?this.end:this.start,c=new g(c);0<this.topList.length&&this.iterHelper(this.topList,f,e,d,c,b,i,a,[0]);c.finish()};f.prototype.histogram=function(f,e,d,c){for(var b=Array(d),i=(e-f)/d,a=this.start,g=this.end,j=0;j<d;j++)b[j]=0;this.iterate(f,e,function(c){for(var e=Math.max(0,(a(c)-f)/i|0),c=Math.min(d,(g(c)-f)/i|0);e<=c;e++)b[e]++},function(){c(b)})};return f})},"JBrowse/Finisher":function(){define(["dojo/_base/declare"],function(g){return g(null,{constructor:function(g){this.fun=
g;this.count=0;this.finished=!1},inc:function(){this.count++},dec:function(){this.count--;this.finish()},finish:function(){if(0>=this.count&&!this.finished)this.fun(),this.finished=!0}})})},"JBrowse/Store/LazyArray":function(){define(["JBrowse/Util","JBrowse/Finisher","dojo/_base/xhr"],function(g,j){var f=function(f,e){this.urlTemplate=f.urlTemplate;this.chunkSize=f.chunkSize;this.length=f.length;this.baseUrl=void 0===e?"":e;this.chunks=[];this.toProcess={}};f.prototype.index=function(f,e,d){this.range(f,
f,e,void 0,d)};f.prototype.range=function(f,e,d,c,b){var f=Math.max(0,f),e=Math.min(e,this.length-1),i=Math.floor(f/this.chunkSize),a=Math.floor(e/this.chunkSize);void 0===c&&(c=function(){});for(var k=new j(c),c=i;c<=a;c++)this.chunks[c]?this._processChunk(f,e,c,d,b):(i={start:f,end:e,callback:d,param:b,finish:k},k.inc(),this.toProcess[c]?this.toProcess[c].push(i):(this.toProcess[c]=[i],i=this.urlTemplate.replace(/\{Chunk\}/gi,c),dojo.xhrGet({url:this.baseUrl?g.resolveUrl(this.baseUrl,i):i,handleAs:"json",
load:this._makeLoadFun(c),error:function(){k.dec()}})));k.finish()};f.prototype._makeLoadFun=function(f){var e=this;return function(d){e.chunks[f]=d;d=e.toProcess[f];delete e.toProcess[f];for(var c=0;c<d.length;c++)e._processChunk(d[c].start,d[c].end,f,d[c].callback,d[c].param),d[c].finish.dec()}};f.prototype._processChunk=function(f,e,d,c,b){for(var i=d*this.chunkSize,e=e-i,f=Math.max(0,f-i),e=Math.min(e,this.chunkSize-1);f<=e;f++)c(f+i,this.chunks[d][f],b)};return f})},"JBrowse/Store/TiledImage/Fixed":function(){define(["dojo/_base/declare",
"dojo/_base/Deferred","JBrowse/Store","JBrowse/Store/DeferredStatsMixin","JBrowse/Util"],function(g,j,f,h,e){return g([f,h],{constructor:function(d){this.tileToImage={};this.zoomCache={};this.baseUrl=d.baseUrl;this.url=e.resolveUrl(this.baseUrl,e.fillTemplate(d.urlTemplate,{refseq:this.refSeq.name}));this._deferred.images=new j;dojo.xhrGet({url:this.url,handleAs:"json",failOk:!0,load:dojo.hitch(this,function(c){this.loadSuccess(c)}),error:dojo.hitch(this,"_failAllDeferred")})},loadSuccess:function(d){this.globalStats=
d.stats||{};if(!("scoreMin"in this.globalStats))this.globalStats.scoreMin=this.globalStats.global_min;if(!("scoreMax"in this.globalStats))this.globalStats.scoreMax=this.globalStats.global_max;this.tileWidth=d.tileWidth;this.align=d.align;this.zoomLevels=d.zoomLevels;this._deferred.stats.resolve({success:!0});this._deferred.images.resolve({success:!0})},_getZoom:function(d){var c=this.zoomCache[d];if(c)return c;for(var c=this.zoomLevels[0],b=this.tileWidth/d,e=1;e<this.zoomLevels.length;e++)Math.abs(this.zoomLevels[e].basesPerTile-
b)<Math.abs(c.basesPerTile-b)&&(c=this.zoomLevels[e]);return this.zoomCache[d]=c},getImages:function(d,c,b){this._deferred.images.then(dojo.hitch(this,function(e){e.success?this._getImages(d,c,b):(this.error=e.error,b(e.error||e))}))},_getImages:function(d,c){for(var b=d.start,e=d.end,a=this._getZoom(d.scale||1),f=Math.max(b/a.basesPerTile,0)|0,e=e/a.basesPerTile|0,b=[],g=f;g<=e;g++)f=document.createElement("img"),dojo.connect(f,"onerror",this.handleImageError),f.src=this._imageSource(a,g),f.startBase=
g*a.basesPerTile,f.baseWidth=a.basesPerTile,f.tileNum=g,b.push(f);c(b)},_imageSource:function(d,c){return e.resolveUrl(this.url,d.urlPrefix+c+".png")}})})},"JBrowse/View/Track/Sequence":function(){define(["dojo/_base/declare","JBrowse/View/Track/BlockBased","JBrowse/View/Track/ExportMixin","JBrowse/Util"],function(g,j,f,h){return g([j,f],{constructor:function(){},_defaultConfig:function(){return{maxExportSpan:5E5,showReverseStrand:!0}},_exportFormats:function(){return["FASTA"]},endZoom:function(){this.clear()},
setViewInfo:function(e,d,c,b,f,a,g){this.inherited(arguments);this.show()},nbsp:String.fromCharCode(160),fillBlock:function(e){var d=e.blockIndex,c=e.block,b=e.leftBase,f=e.rightBase,a=e.scale,g=this.getCharacterMeasurements();1<=a?(this.store.getFeatures({ref:this.refSeq.name,seqChunkSize:this.refSeq.seqChunkSize,start:b,end:f},dojo.hitch(this,"_fillSequenceBlock",c,a),function(){}),this.heightUpdate(2*g.h,d)):(b=Math.max(1,Math.round(4*a/g.w)),c=dojo.create("div",{className:"sequence_blur",style:{borderStyle:"solid",
borderTopWidth:b+"px",borderBottomWidth:b+"px"}},c),this.heightUpdate(c.offsetHeight+2*c.offsetTop,d));e.finishCallback()},_fillSequenceBlock:function(e,d,c){var b=c.get("seq"),f=c.get("start"),a=c.get("end");if(f<this.refSeq.start)for(;b.length<a-f;)b=this.nbsp+b;else if(a>this.refSeq.end)for(;b.length<a-f;)b+=this.nbsp;c=document.createElement("div");c.className="sequence";c.style.width="100%";e.appendChild(c);c.appendChild(this._renderSeqDiv(f,a,b,d));if(this.config.showReverseStrand)e=this._renderSeqDiv(f,
a,h.complement(b),d),e.className="revcom",c.appendChild(e)},_renderSeqDiv:function(e,d,c,b){for(var f=this.getCharacterMeasurements(),a=document.createElement("div"),e=100/(d-e)+"%",d=b>=f.w,b=b>f.w+4,f=0;f<c.length;f++){var g=document.createElement("span");g.className="base base_"+c[f].toLowerCase();g.style.width=e;if(d)b&&(g.className+=" big"),g.innerHTML=c[f];a.appendChild(g)}return a},getCharacterMeasurements:function(){if(!this._measurements)this._measurements=this._measureSequenceCharacterSize(this.div);
return this._measurements},_measureSequenceCharacterSize:function(e){var d=document.createElement("div");d.className="sequence";d.style.visibility="hidden";d.appendChild(document.createTextNode("12345678901234567890123456789012345678901234567890"));e.appendChild(d);var c={w:d.clientWidth/50,h:d.clientHeight};e.removeChild(d);return c}})})},"JBrowse/View/Track/ExportMixin":function(){define("dojo/_base/declare,dojo/_base/array,dojo/aspect,dojo/has,dojo/window,dojo/dom-construct,JBrowse/Util,dijit/form/Button,dijit/form/RadioButton,dijit/Dialog".split(","),
function(g,j,f,h,e,d,c,b,i,a){return g(null,{_canExport:function(){if(this.config.noExport)return!1;var a={ref:this.refSeq.name,start:this.refSeq.start,end:this.refSeq.end},b=this._canExportRegion(this.browser.view.visibleRegion()),a=this._canExportRegion(a);return b||a},_possibleExportRegions:function(){var a=dojo.clone(this.browser.view.visibleRegion());a.description="Visible region";a.name="visible";return[a,{ref:this.refSeq.name,start:this.refSeq.start,end:this.refSeq.end,description:"Whole reference sequence",
name:"wholeref"}]},_exportDialogContent:function(){var i=this.track._possibleExportRegions();j.forEach(i,function(a){a.length=Math.round(a.end-a.start+1);a.canExport=this._canExportRegion(a)},this.track);var g=d.create("form",{onSubmit:function(){return!1}});g.innerHTML=' <fieldset class="region">   <legend>Region to save</legend>'+function(){var a="",b=0;j.forEach(i,function(d){var e=c.assembleLocString(d);a+=" <input "+(d.canExport?b++?"":' checked="checked"':' disabled="disabled"')+'     type="radio" data-dojo-type="dijit.form.RadioButton" name="region" id="region_'+
d.name+'"     value="'+e+'" />   <label '+(d.canExport?"":' class="ghosted"')+' for="region_'+d.name+'">'+d.description+' - <span class="locString">'+e+"</span> ("+c.humanReadableNumber(d.length)+(d.canExport?"b":"b, too large")+")</label>   <br>"});return a}.call(this)+' </fieldset>  <fieldset class="format">   <legend>Format</legend>'+function(){var a="",b=0;j.forEach(this.track._exportFormats(),function(c){c.name||(c={name:c,label:c});a+=' <input type="radio" '+(b++?"":'checked="checked" ')+'      data-dojo-type="dijit.form.RadioButton" name="format" id="format'+
c.name+'" value="'+c.name+'" />   <label for="format'+c.name+'">'+c.label+"</label>   <br>"},this);return a}.call(this)+" </fieldset>";var p=d.create("div",{className:"dijitDialogPaneActionBar"}),l=this.dialog;(new b({iconClass:"dijitIconDelete",onClick:dojo.hitch(l,"hide"),label:"Cancel"})).placeAt(p);var m=(new b({iconClass:"dijitIconTask",label:"View",disabled:!j.some(i,function(a){return a.canExport}),onClick:dojo.hitch(this.track,function(){var i=this;m.set("disabled",!0);m.set("iconClass","jbrowseIconBusy");
var k=this._readRadio(g.elements.region),j=this._readRadio(g.elements.format);this.exportRegion(k,j,function(g){l.hide();var n=d.create("textarea",{rows:Math.round(0.5*(e.getBox().h/12)),wrap:"soft",cols:80,readonly:!0});n.value=g;var t=d.create("div",{className:"dijitDialogPaneActionBar"}),m=new a({className:"export-view-dialog",title:j+' export - <span class="locString">'+k+"</span> ("+c.humanReadableNumber(g.length)+"b)",content:[n,t]});(new b({iconClass:"dijitIconDelete",label:"Close",onClick:dojo.hitch(m,
"hide")})).placeAt(t);10>h("ie")||(new b({iconClass:"dijitIconSave",label:"Save",onClick:function(){m.hide();i._fileDownload({format:j,data:g})}})).placeAt(t);f.after(m,"hide",function(){n.parentNode.removeChild(n);n=null;setTimeout(function(){m.destroyRecursive()},500)});m.show()})})})).placeAt(p);if(!(10>h("ie")))var n=(new b({iconClass:"dijitIconSave",label:"Save",disabled:!j.some(i,function(a){return a.canExport}),onClick:dojo.hitch(this.track,function(){var a=this._readRadio(g.elements.format),
b=this._readRadio(g.elements.region);n.set("disabled",!0);n.set("iconClass","jbrowseIconBusy");this.exportRegion(b,a,dojo.hitch(this,function(b){l.hide();this._fileDownload({format:a,data:b})}))})})).placeAt(p);return[g,p]},_fileDownload:function(a){d.create("iframe",{style:{display:"none"}},this.div).src="data:"+(a.format?"application/x-"+a.format.toLowerCase():"text/plain")+","+escape(a.data||"")},_readRadio:function(a){if(a.length)for(var b=0;b<a.length;b++)if(a[b].checked)return a[b].value;return a.value},
exportRegion:function(a,b,d){"string"==typeof a&&(a=c.parseLocString(a));a.ref!=this.refSeq.name?console.error("cannot export data for ref seq "+a.ref+", exporting is currently only supported for the currently-visible reference sequence"):require(["JBrowse/View/Export/"+b],dojo.hitch(this,function(b){(new b({refSeq:this.refSeq,track:this,store:this.store})).exportRegion(a,d)}))},_trackMenuOptions:function(){var a=this.inherited(arguments);this.config.noExport||a.push({label:"Save track data",iconClass:"dijitIconSave",
disabled:!this._canExport(),action:"bareDialog",content:this._exportDialogContent,dialog:{id:"exportDialog",className:"export-dialog"}});return a},_canExportRegion:function(a){if(!a)return!1;if("number"==typeof this.config.maxExportSpan||"string"==typeof this.config.maxExportSpan)return a.end-a.start+1<=this.config.maxExportSpan;var b={};this.store.getGlobalStats(function(a){b=a});return b.featureDensity?b.featureDensity*(a.end-a.start)<=(this.config.maxExportFeatures||5E3):!0}})})},"JBrowse/View/Track/HTMLFeatures":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/dom-construct,dojo/dom-geometry,dojo/on,dojo/has,dijit/Dialog,dijit/form/Select,dijit/form/RadioButton,dijit/form/Button,JBrowse/View/Track/BlockBased,JBrowse/View/Track/YScaleMixin,JBrowse/View/Track/ExportMixin,JBrowse/View/Track/FeatureDetailMixin,JBrowse/Util,JBrowse/View/GranularRectLayout".split(","),
function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n,q){return g([o,p,l,m],{constructor:function(a){this.numBins=25;this.histLabel=!1;this.padding=this.defaultPadding=5;this.glyphHeightPad=1;this.levelHeightPad=2;this.labelPad=1;this.minFeatWidth=0.1;this.trackPadding=a.trackPadding;this.heightCache={};this.showLabels=this.config.style.showLabels;this._setupEventHandlers()},_defaultConfig:function(){return{description:"note, description",maxFeatureScreenDensity:0.5,blockDisplayTimeout:5E3,style:{arrowheadClass:"arrowhead",
className:"feature2",_defaultHistScale:4,_defaultLabelScale:30,_defaultDescriptionScale:170,minSubfeatureWidth:6,maxDescriptionLength:70,showLabels:!0,centerChildrenVertically:!0},hooks:{create:function(){return document.createElement("div")}},events:{},menuTemplate:[{label:"View details",title:"{type} {name}",action:"contentDialog",iconClass:"dijitIconTask",content:dojo.hitch(this,"defaultFeatureDetail")}]}},wrapHandler:function(a){var b=this;return function(c){c=c||window.event;if(!c.shiftKey){var d=
c.currentTarget||c.srcElement;if(!d.feature)d=d.parentElement;d.feature&&a(b,d,d.feature,c)}}},_histDimensions:function(a){for(var a=a/this.numBins,b=2,c=!1,d=this.store.histograms.stats,e,f=0;f<d.length;f++)if(d[f].basesPerBin>=a){c=0.01>d[f].mean/d[f].max;b=100/(c?Math.log(d[f].max):d[f].max);e=d[f];break}return{bpPerBin:a,pxPerCount:b,logScale:c,stats:e}},fillHist:function(a){for(var b=a.blockIndex,c=a.block,d=a.leftBase,e=a.rightBase,f=a.stripeWidth,i=this._histDimensions(Math.abs(e-d)),g=this,
h=function(a){for(var h=0,k=0;k<g.numBins;k++)"number"==typeof a[k]&&isFinite(a[k])&&(h=Math.max(h,a[k]));for(var j,k=0;k<g.numBins;k++)if("number"==typeof a[k]&&isFinite(a[k]))j=document.createElement("div"),j.className="hist feature-hist "+g.config.style.className+"-hist",j.style.cssText="left: "+100*(k/g.numBins)+"%; height: "+i.pxPerCount*(i.logScale?Math.log(a[k]):a[k])+"px;bottom: "+g.trackPadding+"px;width: "+(100/g.numBins-100/f)+"%;"+(g.config.style.histCss?g.config.style.histCss:""),j.setAttribute("value",
a[k]),n.is_ie6&&j.appendChild(document.createComment()),c.appendChild(j);g.heightUpdate(i.pxPerCount*(i.logScale?Math.log(h):h),b);g.makeHistogramYScale(Math.abs(e-d))},k=this.store.histograms.meta[0],j=0;j<this.store.histograms.meta.length;j++)i.bpPerBin>=this.store.histograms.meta[j].basesPerBin&&(k=this.store.histograms.meta[j]);var l=i.bpPerBin/k.basesPerBin;if(0.9<l&&1.0E-4>Math.abs(l-Math.round(l))){for(var m=Math.floor(d/k.basesPerBin),l=Math.round(l),o=[],j=0;j<this.numBins;j++)o[j]=0;k.lazyArray.range(m,
m+l*this.numBins,function(a,b){o[Math.floor((a-m)/l)]+=b},function(){h(o)})}else this.store.histogram(d,e,this.numBins,h);a.finishCallback()},endZoom:function(){this.clear()},updateStaticElements:function(a){this.inherited(arguments);this.updateYScaleFromViewDimensions(a);this.updateFeatureLabelPositions(a)},updateFeatureLabelPositions:function(a){!1 in a||dojo.query(".block",this.div).forEach(function(a){if(this.label){var b=100*(this.label.offsetLeft+this.label.offsetWidth-a.offsetLeft)/a.offsetWidth+
2;if(b){var c=a.endBase-a.startBase;dojo.query(".feature",a).forEach(function(d){if(d.label){var e=d.label,f=d.feature,d=parseInt(f.get("start")),d=100*(d-a.startBase)/c,f=parseInt(f.get("end")),f=100*((f-a.startBase)/c-e.offsetWidth/a.offsetWidth);e.style.left=Math.max(d,Math.min(b,f))+"%"}},this)}}},this)},fillBlock:function(a){var b=a.blockIndex,c=a.block,d=a.leftBase,e=a.rightBase,f=a.scale;this.store.getRegionStats({ref:this.refSeq.name,start:d,end:e},dojo.hitch(this,function(i){var g=i.featureDensity,
h=this.config.style.histScale||g*this.config.style._defaultHistScale,g=this.config.style.featureScale||g/this.config.maxFeatureScreenDensity,k=Math.abs(d-e);if(this._updatedLabelForBlockSize!=k)this.store.histogram&&f<h?this.setLabel(this.key+' <span class="feature-density">per '+n.addCommas(Math.round(k/this.numBins))+" bp</span>"):this.setLabel(this.key),this._updatedLabelForBlockSize=k;this.store.histograms&&f<h?this.fillHist(a):f<g?(this.fillTooManyFeaturesMessage(b,c,f),a.finishCallback()):(this._removeYScale(),
this.fillFeatures(dojo.mixin({stats:i},a)))}))},makeHistogramYScale:function(a){var b=this._histDimensions(a);if(b.logScale)console.error("Log histogram scale axis labels not yet implemented.");else{var c=this.height/b.pxPerCount,c=b.logScale?log(c):c;if(!this.yscale||!this.yscale_params||!(this.yscale_params.maxval==c&&this.yscale_params.height==this.height&&this.yscale_params.blockbp==a))this._removeYScale(),this.makeYScale({min:0,max:c}),this.yscale_params={height:this.height,blockbp:a,maxval:c}}},
_removeYScale:function(){this.yscale?(this.yscale.parentNode.removeChild(this.yscale),delete this.yscale_params,delete this.yscale):dojo.query(".ruler",this.div).orphan()},cleanupBlock:function(a){a&&this.layout&&this.layout.discardRange(a.startBase,a.endBase)},transfer:function(a,b,c,d,e){if(a&&b)for(var f=b.startBase,i=b.endBase,g,h=a.startBase<b.startBase?a.rightOverlaps:a.leftOverlaps,h=h||[],k=0;k<h.length;k++)(g=a.featureNodes[h[k]])&&"label"in g&&g.label.parentNode.removeChild(g.label),g&&
g.feature&&g.layoutEnd>f&&g.feature.get("start")<i&&(g.parentNode.removeChild(g),delete a.featureNodes[h[k]],this.addFeatureToBlock(g.feature,h[k],b,c,g._labelScale,g._descriptionScale,d,e))},fillFeatures:function(a){var b=a.blockIndex,c=a.block,d=a.leftBase,e=a.rightBase,f=a.scale,i=a.stats,g=a.containerStart,h=a.containerEnd,k=a.finishCallback;this.scale=f;c.featureNodes={};if(!this.haveMeasurements)this.measureStyles(),this.haveMeasurements=!0;var j=this.config.style.labelScale||i.featureDensity*
this.config.style._defaultLabelScale,l=this.config.style.descriptionScale||i.featureDensity*this.config.style._defaultDescriptionScale,n=this,m=!1,o={toString:function(){return"Timed out trying to display "+n.name+" block "+b}};this.config.blockDisplayTimeout&&window.setTimeout(function(){m=!0},this.config.blockDisplayTimeout);a=dojo.hitch(this,function(a){if(m)throw o;var b=a.id();this._featureIsRendered(b)||this.addFeatureToBlock(a,b,c,f,j,l,g,h)});this.store.getFeatures({ref:this.refSeq.name,start:d,
end:e},a,function(){n.heightUpdate(n._getLayout(f).getTotalHeight(),b);k()},function(a){a===o?n.fillBlockTimeout(b,c,a):(console.error(a,a.stack),n.fillBlockError(b,c,a));k()})},addFeatureToBlock:function(a,b,c,d,e,f,i,g){a=this.renderFeature(a,b,c,d,e,f,i,g);c.appendChild(a);this.config.style.centerChildrenVertically&&this._centerChildrenVertically(a);return a},_featureIsRendered:function(a){for(var b=this.blocks,c=0;c<b.length;c++)if(b[c]&&b[c].featureNodes&&b[c].featureNodes[a])return!0;return!1},
measureStyles:function(){var a=document.createElement("div");a.className="feature-label";a.style.height="auto";a.style.visibility="hidden";a.appendChild(document.createTextNode("1234567890"));document.body.appendChild(a);this.labelHeight=a.clientHeight;this.labelWidth=a.clientWidth/10;document.body.removeChild(a);var b,a=document.createElement("div");a.className="feature "+this.config.style.className+" plus-"+this.config.style.className+" plus-"+this.config.style.className+"1";if(this.config.style.featureCss)a.style.cssText=
this.config.style.featureCss;a.style.visibility="hidden";n.is_ie6&&a.appendChild(document.createComment("foo"));document.body.appendChild(a);b=e.getMarginBox(a);this.glyphHeight=Math.round(b.h);this.padding=this.defaultPadding+b.w;document.body.removeChild(a);if(this.config.style.arrowheadClass)a=document.createElement("div"),a.className="plus-"+this.config.style.arrowheadClass,n.is_ie6&&a.appendChild(document.createComment("foo")),document.body.appendChild(a),b=e.position(a),this.plusArrowWidth=
b.w,this.plusArrowHeight=b.h,a.className="minus-"+this.config.style.arrowheadClass,b=e.position(a),this.minusArrowWidth=b.w,this.minusArrowHeight=b.h,document.body.removeChild(a)},getFeatDiv:function(a){a=this.getId(a);if(!a)return null;for(var b=0;b<this.blocks.length;b++){var c=this.blocks[b];if(c&&c.featureNodes&&(c=c.featureNodes[a]))return c}return null},getId:function(a){return a.id()},renderFeature:function(a,b,c,d,e,f,i,g){var h=a.get("end"),k=a.get("start");"string"==typeof h&&(h=parseInt(h));
"string"==typeof k&&(k=parseInt(k));var j=k,l=h;if(this.config.style.arrowheadClass)switch(a.get("strand")){case 1:case "+":l+=this.plusArrowWidth/d;break;case -1:case "-":j-=this.minusArrowWidth/d}var n=this.glyphHeight+this.glyphHeightPad,m=a.get("name")||a.get("ID"),o=this.config.description&&d>f&&this._getDescription(a);o&&o.length>this.config.style.maxDescriptionLength&&(o=o.substr(0,this.config.style.maxDescriptionLength+1).replace(/(\s+\S+|\s*)$/,"")+String.fromCharCode(8230));this.showLabels&&
d>=e&&(m&&(l=Math.max(l,j+(""+m).length*this.labelWidth/d),n+=this.labelHeight+this.labelPad),o&&(l=Math.max(l,j+(""+o).length*this.labelWidth/d),n+=this.labelHeight+this.labelPad));var l=l+Math.max(1,this.padding/d),p=this._getLayout(d).addRect(b,j,l,n),n=this.config.hooks.create(this,a);this._connectFeatDivHandlers(n);n.track=this;n.feature=a;n.layoutEnd=l;n.callbackArgs=[this,n.feature,n];n._labelScale=e;n._descriptionScale=f;c.featureNodes[b]=n;if(j<c.startBase){if(!c.leftOverlaps)c.leftOverlaps=
[];c.leftOverlaps.push(b)}if(l>c.endBase){if(!c.rightOverlaps)c.rightOverlaps=[];c.rightOverlaps.push(b)}dojo.addClass(n,"feature");f=this.config.style.className;"{type}"==f&&(f=a.get("type"));b=a.get("strand");switch(b){case 1:case "+":dojo.addClass(n,"plus-"+f);break;case -1:case "-":dojo.addClass(n,"minus-"+f);break;default:dojo.addClass(n,f)}l=a.get("phase");null!==l&&void 0!==l&&dojo.addClass(n,f+"_phase"+l);i=Math.max(k,i);g=Math.min(h,g);k=c.endBase-c.startBase;h=Math.max(this.minFeatWidth,
100*((g-i)/k));n.style.cssText="left:"+100*(i-c.startBase)/k+"%;top:"+p+"px; width:"+h+"%;"+(this.config.style.featureCss?this.config.style.featureCss:"");if(this.config.style.arrowheadClass)switch(f=document.createElement("div"),b){case 1:case "+":f.className="plus-"+this.config.style.arrowheadClass;f.style.cssText="left: 100%;";n.appendChild(f);break;case -1:case "-":f.className="minus-"+this.config.style.arrowheadClass,f.style.cssText="left: "+-this.minusArrowWidth+"px;",n.appendChild(f)}if(m&&
this.showLabels&&d>=e)d=dojo.create("div",{className:"feature-label",innerHTML:'<div class="feature-name">'+m+"</div>"+(o?' <div class="feature-description">'+o+"</div>":""),style:{top:p+this.glyphHeight+2+"px",left:100*(j-c.startBase)/k+"%"}},c),this._connectFeatDivHandlers(d),n.label=d,n.labelDiv=d,d.feature=a,d.track=this,d.callbackArgs=[this,n.feature,n];h>this.config.style.minSubfeatureWidth&&this.handleSubFeatures(a,n,i,g,c);this.config.menuTemplate&&window.setTimeout(dojo.hitch(this,"_connectMenus",
n),50+150*Math.random());"function"==typeof this.config.hooks.modify&&this.config.hooks.modify(this,a,n);return n},_getDescription:function(a){var b;if(!(b=this.descriptionFields))(b=this.config.description)?(j.isArray(b)?b=b.join(","):"string"!=typeof b&&(console.warn('invalid `description` setting for "'+this.name+'" track, falling back to "note,description"'),b="note,description"),b=b.toLowerCase().split(/\s*\,\s*/)):b=[],this.descriptionFields=b;for(var c=0;c<b.length;c++){var d=a.get(b[c]);if(d)return d}return null},
handleSubFeatures:function(a,b,c,d,e){var f=a.get("subfeatures");if(f)for(var i=0;i<f.length;i++)this.renderSubfeature(a,b,f[i],c,d,e)},_getHeight:function(a){if(this.config.disableHeightCache)return a.offsetHeight||0;var b=this.heightCache[a.className];if(b)return b;b=a.offsetHeight||0;return this.heightCache[a.className]=b},_centerChildrenVertically:function(a){if(0<a.childNodes.length)for(var b=this._getHeight(a),c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];if(d.style){var e=this._getHeight(d);
dojo.style(d,{marginTop:"0",top:(b-e)/2+"px"});0<d.childNodes.length&&this._centerChildrenVertically(d)}}},_connectFeatDivHandlers:function(a){for(var b in this.eventHandlers)d(a,b,this.eventHandlers[b]);this.eventHandlers.click&&this.eventHandlers.click.label&&a.setAttribute("title",this.eventHandlers.click.label)},_connectMenus:function(a){var b=j.hitch(this,"_refreshMenu",a);d(a,"mouseover",b);a.labelDiv&&d(a.labelDiv,"mouseover",b)},_refreshMenu:function(a){if(!a.contextMenu)a.contextMenu=this._makeFeatureContextMenu(a,
this.config.menuTemplate);a.contextMenuTimeout&&window.clearTimeout(a.contextMenuTimeout);a.contextMenuTimeout=window.setTimeout(function(){a.contextMenu&&(a.contextMenu.destroyRecursive(),delete a.contextMenu);delete a.contextMenuTimeout},3E4)},_makeFeatureContextMenu:function(a,b){var b=this._processMenuSpec(dojo.clone(b),a),c=this._renderContextMenu(b,a);c.startup();c.bindDomNode(a);a.labelDiv&&c.bindDomNode(a.labelDiv);return c},renderSubfeature:function(a,b,c,d,e,f){var a=c.get("start"),i=c.get("end"),
g=e-d,h=c.get("type"),k;if(this.config.style.subfeatureClasses)if(k=this.config.style.subfeatureClasses[h],void 0===k)k=h;else{if(null===k)return null}else k=h;if("hidden"==k)return null;h=document.createElement("div");dojo.addClass(h,"subfeature");if(k)switch(c.get("strand")){case 1:case "+":dojo.addClass(h,"plus-"+k);break;case -1:case "-":dojo.addClass(h,"minus-"+k);break;default:dojo.addClass(h,k)}if(i<=d||a>=e)return null;n.is_ie6&&h.appendChild(document.createComment());h.style.cssText="left: "+
100*((a-d)/g)+"%;width: "+100*((i-a)/g)+"%;";b.appendChild(h);return f.featureNodes[c.id()]=h},_getLayout:function(a){if(!this.haveMeasurements)this.measureStyles(),this.haveMeasurements=!0;if((!this.layout||this.layout.pitchX!=4/a)&&a)this.layout=new q({pitchX:4/a,pitchY:this.config.layoutPitchY||this.glyphHeight+this.glyphHeightPad});return this.layout},_clearLayout:function(){delete this.layout},changed:function(){this._clearLayout();this.inherited(arguments)},_exportFormats:function(){return["GFF3",
"BED",{name:"SequinTable",label:"Sequin Table"}]},_trackMenuOptions:function(){var a=this.inherited(arguments),b=this;a.push.apply(a,[{type:"dijit/MenuSeparator"},{label:"Show labels",type:"dijit/CheckedMenuItem",checked:!!("showLabels"in this?this.showLabels:this.config.style.showLabels),onClick:function(){b.showLabels=this.checked;b.changed()}}]);return a}})})},"JBrowse/View/Track/YScaleMixin":function(){define(["dojo/_base/declare","JBrowse/View/Ruler"],function(g,j){return g(null,{makeYScale:function(f){var f=
f||{},g="number"==typeof f.min?f.min:this.minDisplayed,e="number"==typeof f.max?f.max:this.maxDisplayed;this.yscale&&this.yscale.parentNode.removeChild(this.yscale);var d=dojo.create("div",{className:"ruler vertical_ruler",style:{height:this.height+"px",width:"10px",position:"absolute",zIndex:17}},this.div);this.yscale=d;if(this.window_info&&"x"in this.window_info)d.style.left=this.window_info.x+(this.window_info.width||0)/2+"px";dojo.style(d,"top"==this.config.align?{bottom:0}:{top:0});f=new j({min:g,
max:e,direction:"up",fixBounds:f.fixBounds||!1});f.render_to(d);this.ruler=f},updateYScaleFromViewDimensions:function(f){if(("number"==typeof f.x||"number"==typeof f.width)&&this.yscale)this.yscale.style.left=this.window_info.x+(this.window_info.width||0)/2+"px"}})})},"JBrowse/View/Ruler":function(){define("dojo/query,dojox/charting/Chart,dojox/charting/axis2d/Default,dojox/charting/plot2d/Bubble,dojo/NodeList-dom,dojo/number".split(","),function(g,j){function f(f){dojo.mixin(this,f)}f.prototype.render_to=
function(f){"string"==typeof f&&(f=dojo.byId(f));var e=dojo.position(f);Math.log(this.max+1);Math.log(10);e=dojo.create("div",{style:{position:"absolute",left:"-9px",bottom:"-9px",width:"10px",height:e.h+18+"px"}},f);try{var d=new j(e,{fill:"transparent"});d.addAxis("y",{vertical:!0,fill:"transparent",min:this.min,max:this.max,fixLower:this.fixBounds?"major":"none",fixUpper:this.fixBounds?"major":"none"});d.addPlot("default",{type:"Bubble",fill:"transparent"});d.render();g("svg rect",d.domNode).orphan();
this.scaler=d.axes.y.scaler}catch(c){console.error(c+""),console.error("Failed to draw Ruler with SVG, your browser may not support the necessary technology."),f.removeChild(e)}};return f})},"dojox/charting/Chart":function(){define("../main,dojo/_base/lang,dojo/_base/array,dojo/_base/declare,dojo/dom-style,dojo/dom,dojo/dom-geometry,dojo/dom-construct,dojo/_base/Color,dojo/_base/sniff,./Element,./SimpleTheme,./Series,./axis2d/common,dojox/gfx/shape,dojox/gfx,dojox/lang/functional,dojox/lang/functional/fold,dojox/lang/functional/reversed".split(","),
function(g,j,f,h,e,d,c,b,i,a,k,o,p,l,m,n,q){function r(a,b){if(a&&b)a.min=Math.min(a.min,b.min),a.max=Math.max(a.max,b.max);return a||b}function u(a,b){var c={},d={};f.forEach(a,function(a){var b=c[a.name]=a.getSeriesStats();a.hAxis&&(d[a.hAxis]=r(d[a.hAxis],{min:b.hmin,max:b.hmax}));a.vAxis&&(d[a.vAxis]=r(d[a.vAxis],{min:b.vmin,max:b.vmax}))});f.forEach(a,function(a){var e=c[a.name];if(a.hAxis){var f=d[a.hAxis];e.hmin=f.min;e.hmax=f.max}if(a.vAxis)f=d[a.vAxis],e.vmin=f.min,e.vmax=f.max;a.initializeScalers(b,
e)})}var s=j.getObject("charting",!0,g),v=q.lambda("item.clear()"),t=q.lambda("item.purgeGroup()"),x=q.lambda("item.destroy()"),w=q.lambda("item.dirty = false"),E=q.lambda("item.dirty = true"),C=q.lambda("item.name");return h("dojox.charting.Chart",null,{constructor:function(a,b){b||(b={});this.margins=b.margins?b.margins:{l:10,t:10,r:10,b:10};this.stroke=b.stroke;this.fill=b.fill;this.delayInMs=b.delayInMs||200;this.title=b.title;this.titleGap=b.titleGap;this.titlePos=b.titlePos;this.titleFont=b.titleFont;
this.titleFontColor=b.titleFontColor;this.theme=this.chartTitle=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=!0;this.node=d.byId(a);var e=c.getMarginBox(a);this.surface=n.createSurface(this.node,e.w||400,e.h||300);if(-1==this.surface.declaredClass.indexOf("vml"))this.plotGroup=this.surface.createGroup()},destroy:function(){f.forEach(this.series,x);f.forEach(this.stack,x);q.forIn(this.axes,x);this.surface.destroy();this.chartTitle&&this.chartTitle.tagName&&b.destroy(this.chartTitle)},
getCoords:function(){var a=this.node,b=e.getComputedStyle(a),b=c.getMarginBox(a,b),a=c.position(a,!0);b.x=a.x;b.y=a.y;return b},setTheme:function(a){this.theme=a.clone();this.dirty=!0;return this},addAxis:function(a,b){var c;c=b&&b.type||"Default";if("string"==typeof c){if(!s.axis2d||!s.axis2d[c])throw Error("Can't find axis: "+c+" - Check require() dependencies.");c=new s.axis2d[c](this,b)}else c=new c(this,b);c.name=a;c.dirty=!0;a in this.axes&&this.axes[a].destroy();this.axes[a]=c;this.dirty=!0;
return this},getAxis:function(a){return this.axes[a]},removeAxis:function(a){if(a in this.axes)this.axes[a].destroy(),delete this.axes[a],this.dirty=!0;return this},addPlot:function(a,b){var c;c=b&&b.type||"Default";if("string"==typeof c){if(!s.plot2d||!s.plot2d[c])throw Error("Can't find plot: "+c+" - didn't you forget to dojo.require() it?");c=new s.plot2d[c](this,b)}else c=new c(this,b);c.name=a;c.dirty=!0;a in this.plots?(this.stack[this.plots[a]].destroy(),this.stack[this.plots[a]]=c):(this.plots[a]=
this.stack.length,this.stack.push(c));this.dirty=!0;return this},getPlot:function(a){return this.stack[this.plots[a]]},removePlot:function(a){if(a in this.plots){var b=this.plots[a];delete this.plots[a];this.stack[b].destroy();this.stack.splice(b,1);q.forIn(this.plots,function(a,c,d){a>b&&(d[c]=a-1)});var c=f.filter(this.series,function(b){return b.plot!=a});if(c.length<this.series.length)f.forEach(this.series,function(b){b.plot==a&&b.destroy()}),this.runs={},f.forEach(c,function(a,b){this.runs[a.plot]=
b},this),this.series=c;this.dirty=!0}return this},getPlotOrder:function(){return q.map(this.stack,C)},setPlotOrder:function(a){var b={},c=q.filter(a,function(a){if(!(a in this.plots)||a in b)return!1;b[a]=1;return!0},this);c.length<this.stack.length&&q.forEach(this.stack,function(a){a=a.name;a in b||c.push(a)});a=q.map(c,function(a){return this.stack[this.plots[a]]},this);q.forEach(a,function(a,b){this.plots[a.name]=b},this);this.stack=a;this.dirty=!0;return this},movePlotToFront:function(a){if(a in
this.plots){var b=this.plots[a];if(b){var c=this.getPlotOrder();c.splice(b,1);c.unshift(a);return this.setPlotOrder(c)}}return this},movePlotToBack:function(a){if(a in this.plots){var b=this.plots[a];if(b<this.stack.length-1){var c=this.getPlotOrder();c.splice(b,1);c.push(a);return this.setPlotOrder(c)}}return this},addSeries:function(a,b,c){b=new p(this,b,c);b.name=a;a in this.runs?(this.series[this.runs[a]].destroy(),this.series[this.runs[a]]=b):(this.runs[a]=this.series.length,this.series.push(b));
this.dirty=!0;if(!("ymin"in b)&&"min"in b)b.ymin=b.min;if(!("ymax"in b)&&"max"in b)b.ymax=b.max;return this},getSeries:function(a){return this.series[this.runs[a]]},removeSeries:function(a){if(a in this.runs){var b=this.runs[a];delete this.runs[a];this.series[b].destroy();this.series.splice(b,1);q.forIn(this.runs,function(a,c,d){a>b&&(d[c]=a-1)});this.dirty=!0}return this},updateSeries:function(a,b,c){if(a in this.runs)a=this.series[this.runs[a]],a.update(b),c?this.dirty=!0:(this._invalidateDependentPlots(a.plot,
!1),this._invalidateDependentPlots(a.plot,!0));return this},getSeriesOrder:function(a){return q.map(q.filter(this.series,function(b){return b.plot==a}),C)},setSeriesOrder:function(a){var b,c={},d=q.filter(a,function(a){if(!(a in this.runs)||a in c)return!1;var d=this.series[this.runs[a]];if(b){if(d.plot!=b)return!1}else b=d.plot;c[a]=1;return!0},this);q.forEach(this.series,function(a){var e=a.name;!(e in c)&&a.plot==b&&d.push(e)});this.series=q.map(d,function(a){return this.series[this.runs[a]]},
this).concat(q.filter(this.series,function(a){return a.plot!=b}));q.forEach(this.series,function(a,b){this.runs[a.name]=b},this);this.dirty=!0;return this},moveSeriesToFront:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[0])return c.splice(b,1),c.unshift(a),this.setSeriesOrder(c)}return this},moveSeriesToBack:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[c.length-1])return c.splice(b,1),c.push(a),
this.setSeriesOrder(c)}return this},resize:function(a,b){var d;switch(arguments.length){case 1:d=j.mixin({},a);c.setMarginBox(this.node,d);break;case 2:d={w:a,h:b},c.setMarginBox(this.node,d)}d=c.getMarginBox(this.node);var e=this.surface.getDimensions();return e.width!=d.w||e.height!=d.h?(this.surface.setDimensions(d.w,d.h),this.dirty=!0,this.render()):this},getGeometry:function(){var a={};q.forIn(this.axes,function(b){b.initialized()&&(a[b.name]={name:b.name,vertical:b.vertical,scaler:b.scaler,
ticks:b.ticks})});return a},setAxisWindow:function(a,b,c,d){var e=this.axes[a];e&&(e.setWindow(b,c),f.forEach(this.stack,function(b){if(b.hAxis==a||b.vAxis==a)b.zoom=d}));return this},setWindow:function(a,b,c,d,e){"plotArea"in this||this.calculateGeometry();q.forIn(this.axes,function(e){var f,i;f=e.getScaler().bounds;i=f.span/(f.upper-f.lower);e.vertical?(f=b,i=d/i/f):(f=a,i=c/i/f);e.setWindow(f,i)});f.forEach(this.stack,function(a){a.zoom=e});return this},zoomIn:function(a,b,c){var d=this.axes[a];
if(d){var d=d.getScaler().bounds,e=Math.min(b[0],b[1]),f=Math.max(b[0],b[1]),e=b[0]<d.lower?d.lower:e,f=b[1]>d.upper?d.upper:f;this.setAxisWindow(a,(d.upper-d.lower)/(f-e),e-d.lower);c?this.delayedRender():this.render()}},calculateGeometry:function(){if(this.dirty)return this.fullGeometry();var a=f.filter(this.stack,function(a){return a.dirty||a.hAxis&&this.axes[a.hAxis].dirty||a.vAxis&&this.axes[a.vAxis].dirty},this);u(a,this.plotArea);return this},fullGeometry:function(){this._makeDirty();f.forEach(this.stack,
v);this.theme||this.setTheme(new o);f.forEach(this.series,function(a){if(!(a.plot in this.plots)){if(!s.plot2d||!s.plot2d.Default)throw Error("Can't find plot: Default - didn't you forget to dojo.require() it?");var b=new s.plot2d.Default(this,{});b.name=a.plot;this.plots[a.plot]=this.stack.length;this.stack.push(b)}this.stack[this.plots[a.plot]].addSeries(a)},this);f.forEach(this.stack,function(a){a.assignAxes&&a.assignAxes(this.axes)},this);var a=this.dim=this.surface.getDimensions();a.width=n.normalizedLength(a.width);
a.height=n.normalizedLength(a.height);q.forIn(this.axes,v);u(this.stack,a);var b=this.offsets={l:0,r:0,t:0,b:0};q.forIn(this.axes,function(a){q.forIn(a.getOffsets(),function(a,c){b[c]=Math.max(a,b[c])})});if(this.title){this.titleGap=0==this.titleGap?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";var c=
n.normalizedLength(n.splitFontString(this.titleFont).size);b["top"==this.titlePos?"t":"b"]+=c+this.titleGap}q.forIn(this.margins,function(a,c){b[c]+=a});this.plotArea={width:a.width-b.l-b.r,height:a.height-b.t-b.b};q.forIn(this.axes,v);u(this.stack,this.plotArea);return this},render:function(){if(this._delayedRenderHandle)clearTimeout(this._delayedRenderHandle),this._delayedRenderHandle=null;this.theme&&this.theme.clear();if(this.dirty)return this.fullRender();this.calculateGeometry();q.forEachRev(this.stack,
function(a){a.render(this.dim,this.offsets)},this);q.forIn(this.axes,function(a){a.render(this.dim,this.offsets)},this);this._makeClean();return this},fullRender:function(){this.fullGeometry();var c=this.offsets,d=this.dim,e=Math.max(0,d.width-c.l-c.r),i=Math.max(0,d.height-c.t-c.b);f.forEach(this.series,t);q.forIn(this.axes,t);f.forEach(this.stack,t);for(var g=this.surface.children,h=0;h<g.length;++h)m.dispose(g[h]);this.chartTitle&&this.chartTitle.tagName&&b.destroy(this.chartTitle);this.plotGroup&&
this.plotGroup.clear();this.surface.clear();this.chartTitle=null;this.plotGroup?(this._renderChartBackground(d,c),this._renderPlotBackground(d,c,e,i),this.surface.add(this.plotGroup),this.plotGroup.setClip({x:c.l,y:c.t,width:e,height:i})):this._renderPlotBackground(d,c,e,i);q.foldr(this.stack,function(a,b){return b.render(d,c),0},0);this.plotGroup||this._renderChartBackground(d,c);if(this.title)e="canvas"==n.renderer||!a("ie")&&!a("opera")?"html":"gfx",i=n.normalizedLength(n.splitFontString(this.titleFont).size),
this.chartTitle=l.createText[e](this,this.surface,d.width/2,"top"==this.titlePos?i+this.margins.t:d.height-this.margins.b,"middle",this.title,this.titleFont,this.titleFontColor);q.forIn(this.axes,function(a){a.render(d,c)});this._makeClean();return this},_renderChartBackground:function(a,b){var c=this.theme,d,f=void 0!==this.fill?this.fill:c.chart&&c.chart.fill,c=void 0!==this.stroke?this.stroke:c.chart&&c.chart.stroke;if("inherit"==f){d=this.node;for(f=new i(e.get(d,"backgroundColor"));0==f.a&&d!=
document.documentElement;)f=new i(e.get(d,"backgroundColor")),d=d.parentNode}f&&(this.plotGroup?(f=k.prototype._shapeFill(k.prototype._plotFill(f,a),{x:0,y:0,width:a.width+1,height:a.height+1}),this.surface.createRect({width:a.width+1,height:a.height+1}).setFill(f)):(f=k.prototype._plotFill(f,a,b),b.l&&(d={x:0,y:0,width:b.l,height:a.height+1},this.surface.createRect(d).setFill(k.prototype._shapeFill(f,d))),b.r&&(d={x:a.width-b.r,y:0,width:b.r+1,height:a.height+2},this.surface.createRect(d).setFill(k.prototype._shapeFill(f,
d))),b.t&&(d={x:0,y:0,width:a.width+1,height:b.t},this.surface.createRect(d).setFill(k.prototype._shapeFill(f,d))),b.b&&(d={x:0,y:a.height-b.b,width:a.width+1,height:b.b+2},this.surface.createRect(d).setFill(k.prototype._shapeFill(f,d)))));c&&this.surface.createRect({width:a.width-1,height:a.height-1}).setStroke(c)},_renderPlotBackground:function(a,b,c,d){var e=this.theme,f=e.plotarea&&e.plotarea.fill,e=e.plotarea&&e.plotarea.stroke,i={x:b.l-1,y:b.t-1,width:c+2,height:d+2};f&&(f=k.prototype._shapeFill(k.prototype._plotFill(f,
a,b),i),this.surface.createRect(i).setFill(f));e&&this.surface.createRect({x:b.l,y:b.t,width:c+1,height:d+1}).setStroke(e)},delayedRender:function(){if(!this._delayedRenderHandle)this._delayedRenderHandle=setTimeout(j.hitch(this,function(){this.render()}),this.delayInMs);return this},connectToPlot:function(a,b,c){return a in this.plots?this.stack[this.plots[a]].connect(b,c):null},fireEvent:function(a,b,c){if(a in this.runs){var d=this.series[this.runs[a]].plot;d in this.plots&&(d=this.stack[this.plots[d]])&&
d.fireEvent(a,b,c)}return this},_makeClean:function(){f.forEach(this.axes,w);f.forEach(this.stack,w);f.forEach(this.series,w);this.dirty=!1},_makeDirty:function(){f.forEach(this.axes,E);f.forEach(this.stack,E);f.forEach(this.series,E);this.dirty=!0},_invalidateDependentPlots:function(a,b){if(a in this.plots){var c=this.stack[this.plots[a]],d,e=b?"vAxis":"hAxis";if(c[e]){if((d=this.axes[c[e]])&&d.dependOnData())d.dirty=!0,f.forEach(this.stack,function(a){if(a[e]&&a[e]==c[e])a.dirty=!0})}else c.dirty=
!0}}})})},"dojox/charting/Element":function(){define("dojo/_base/lang,dojo/_base/array,dojo/dom-construct,dojo/_base/declare,dojox/gfx,dojox/gfx/shape".split(","),function(g,j,f,h,e,d){return h("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:!0,constructor:function(c){this.chart=c;this.group=null;this.htmlElements=[];this.dirty=!0;this.trailingSymbol="...";this._events=[]},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.group.removeShape();for(var c=
this.group.children,b=0;b<c.length;++b)d.dispose(c[b],!0);this.group.clear();d.dispose(this.group,!0);this.group=null}this.dirty=!0;if(this._events.length)j.forEach(this._events,function(b){b.shape.disconnect(b.handle)}),this._events=[];return this},cleanGroup:function(c){this.destroyHtmlElements();if(!c)c=this.chart.surface;if(this.group){for(var c=this.group.children,b=0;b<c.length;++b)d.dispose(c[b],!0);this.group.clear()}else this.group=c.createGroup();this.dirty=!0;return this},destroyHtmlElements:function(){if(this.htmlElements.length)j.forEach(this.htmlElements,
f.destroy),this.htmlElements=[]},destroy:function(){this.purgeGroup()},getTextWidth:function(c,b){return e._base._getTextBox(c,{font:b}).w||0},getTextWithLimitLength:function(c,b,d,a){if(!c||0>=c.length)return{text:"",truncated:a||!1};if(!d||0>=d)return{text:c,truncated:a||!1};var e=c.substring(0,1)+this.trailingSymbol,f=this.getTextWidth(e,b);if(d<=f)return{text:e,truncated:!0};if(this.getTextWidth(c,b)<=d)return{text:c,truncated:a||!1};a=0;for(e=c.length;a<e;){if(2>=e-a){for(;this.getTextWidth(c.substring(0,
a)+this.trailingSymbol,b)>d;)a-=1;return{text:c.substring(0,a)+this.trailingSymbol,truncated:!0}}f=a+Math.round(0.618*(e-a));this.getTextWidth(c.substring(0,f),b)<d?a=f:e=f}},getTextWithLimitCharCount:function(c,b,d,a){return!c||0>=c.length?{text:"",truncated:a||!1}:!d||0>=d||c.length<=d?{text:c,truncated:a||!1}:{text:c.substring(0,d)+this.trailingSymbol,truncated:!0}},_plotFill:function(c,b,d){if(!c||!c.type||!c.space)return c;var a=c.space,f;switch(c.type){case "linear":if("plot"===a||"shapeX"===
a||"shapeY"===a){c=e.makeParameters(e.defaultLinearGradient,c);c.space=a;if("plot"===a||"shapeX"===a)f=b.height-d.t-d.b,c.y1=d.t+f*c.y1/100,c.y2=d.t+f*c.y2/100;if("plot"===a||"shapeY"===a)f=b.width-d.l-d.r,c.x1=d.l+f*c.x1/100,c.x2=d.l+f*c.x2/100}break;case "radial":if("plot"===a)c=e.makeParameters(e.defaultRadialGradient,c),c.space=a,a=b.width-d.l-d.r,b=b.height-d.t-d.b,c.cx=d.l+a*c.cx/100,c.cy=d.t+b*c.cy/100,c.r=c.r*Math.sqrt(a*a+b*b)/200;break;case "pattern":if("plot"===a||"shapeX"===a||"shapeY"===
a){c=e.makeParameters(e.defaultPattern,c);c.space=a;if("plot"===a||"shapeX"===a)f=b.height-d.t-d.b,c.y=d.t+f*c.y/100,c.height=f*c.height/100;if("plot"===a||"shapeY"===a)f=b.width-d.l-d.r,c.x=d.l+f*c.x/100,c.width=f*c.width/100}}return c},_shapeFill:function(c,b){if(!c||!c.space)return c;var d=c.space,a;switch(c.type){case "linear":if("shape"===d||"shapeX"===d||"shapeY"===d){c=e.makeParameters(e.defaultLinearGradient,c);c.space=d;if("shape"===d||"shapeX"===d)a=b.width,c.x1=b.x+a*c.x1/100,c.x2=b.x+
a*c.x2/100;if("shape"===d||"shapeY"===d)a=b.height,c.y1=b.y+a*c.y1/100,c.y2=b.y+a*c.y2/100}break;case "radial":if("shape"===d)c=e.makeParameters(e.defaultRadialGradient,c),c.space=d,c.cx=b.x+b.width/2,c.cy=b.y+b.height/2,c.r=c.r*b.width/200;break;case "pattern":if("shape"===d||"shapeX"===d||"shapeY"===d){c=e.makeParameters(e.defaultPattern,c);c.space=d;if("shape"===d||"shapeX"===d)a=b.width,c.x=b.x+a*c.x/100,c.width=a*c.width/100;if("shape"===d||"shapeY"===d)a=b.height,c.y=b.y+a*c.y/100,c.height=
a*c.height/100}}return c},_pseudoRadialFill:function(c,b,d,a,f){if(!c||"radial"!==c.type||"shape"!==c.space)return c;var g=c.space,c=e.makeParameters(e.defaultRadialGradient,c);c.space=g;if(4>arguments.length)return c.cx=b.x,c.cy=b.y,c.r=c.r*d/100,c;g=5>arguments.length?a:(f+a)/2;return{type:"linear",x1:b.x,y1:b.y,x2:b.x+c.r*d*Math.cos(g)/100,y2:b.y+c.r*d*Math.sin(g)/100,colors:c.colors}}})})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(g,j,f){j.switchTo(f);
return j})},"dojox/gfx/_base":function(){define("dojo/_base/kernel,dojo/_base/lang,dojo/_base/Color,dojo/_base/sniff,dojo/_base/window,dojo/_base/array,dojo/dom,dojo/dom-construct,dojo/dom-geometry".split(","),function(g,j,f,h,e,d,c,b,i){var a=j.getObject("dojox.gfx",!0),k=a._base={};a._hasClass=function(a,b){var c=a.getAttribute("className");return c&&0<=(" "+c+" ").indexOf(" "+b+" ")};a._addClass=function(a,b){var c=a.getAttribute("className")||"";if(!c||0>(" "+c+" ").indexOf(" "+b+" "))a.setAttribute("className",
c+(c?" ":"")+b)};a._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};k._getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},c;if(h("ie"))e.doc.documentElement.style.fontSize="100%";var d=b.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",
padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},e.body());for(c in a)d.style.fontSize=c,a[c]=16*Math.round(12*d.offsetHeight/16)/12/1E3;e.body().removeChild(d);return a};var o=null;k._getCachedFontMeasurements=function(a){if(a||!o)o=k._getFontMeasurements();return o};var p=null,l={};k._getTextBox=function(a,c,d){var f,g,h=arguments.length,k;p||(p=b.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},e.body()));f=p;f.className="";g=f.style;g.borderWidth="0";g.margin="0";
g.padding="0";g.outline="0";if(1<h&&c)for(k in c)k in l||(g[k]=c[k]);if(2<h&&d)f.className=d;f.innerHTML=a;return f.getBoundingClientRect?(f=f.getBoundingClientRect(),{l:f.left,t:f.top,w:f.width||f.right-f.left,h:f.height||f.bottom-f.top}):i.getMarginBox(f)};var m=0;k._getUniqueId=function(){var a;do a=g._scopeName+"xUnique"+ ++m;while(c.byId(a));return a};j.mixin(a,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,
r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",
x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var b={};return function(c){var d=b[c];if(d)return new d;d=b[c]=new Function;d.prototype=a["default"+c];return new d}}(),
normalizeColor:function(a){return a instanceof f?a:new f(a)},normalizeParameters:function(a,b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return j.delegate(a);var d={};for(c in a)c in d||(d[c]=j.clone(c in b?b[c]:a[c]));return d},formatNumber:function(a,b){var c=a.toString();if(0<=c.indexOf("e"))c=a.toFixed(4);else{var d=c.indexOf(".");0<=d&&5<c.length-d&&(c=a.toFixed(4))}return 0>a?c:b?" "+c:c},makeFontString:function(a){return a.style+
" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(b){var c=a.getDefault("Font"),b=b.split(/\s+/);if(!(5>b.length)){c.style=b[0];c.variant=b[1];c.weight=b[2];var d=b[3].indexOf("/");c.size=0>d?b[3]:b[3].substring(0,d);var e=4;0>d&&("/"==b[4]?e=6:"/"==b[4].charAt(0)&&(e=5));if(e<b.length)c.family=b.slice(e).join(" ")}return c},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return a._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(b){return b*a.px_in_pt()},
px2pt:function(b){return b/a.px_in_pt()},normalizedLength:function(b){if(0===b.length)return 0;if(2<b.length){var c=a.px_in_pt(),d=parseFloat(b);switch(b.slice(-2)){case "px":return d;case "pt":return d*c;case "in":return 72*d*c;case "pc":return 12*d*c;case "mm":return d*a.mm_in_pt*c;case "cm":return d*a.cm_in_pt*c}}return parseFloat(b)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,
b){return a&&b&&a===b},switchTo:function(b){var c="string"==typeof b?a[b]:b;c&&d.forEach("Group,Rect,Ellipse,Circle,Line,Polyline,Image,Text,Path,TextPath,Surface,createSurface,fixTarget".split(","),function(b){a[b]=c[b]})}});return a})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(g,j,f,h,e){var d=null;return{load:function(c,b,i){function a(){b(["dojox/gfx/"+k],function(a){g.renderer=k;d=a;i(a)})}if(d&&"force"!=
c)i(d);else{for(var k=e.forceGfxRenderer,c=!k&&(j.isString(e.gfxRenderer)?e.gfxRenderer:"svg,vml,canvas,silverlight").split(","),o,p;!k&&c.length;)switch(c.shift()){case "svg":"SVGAngle"in h.global&&(k="svg");break;case "vml":f("ie")&&(k="vml");break;case "silverlight":try{f("ie")?(o=new ActiveXObject("AgControl.AgControl"))&&o.IsVersionSupported("1.0")&&(p=!0):navigator.plugins["Silverlight Plug-In"]&&(p=!0)}catch(l){p=!1}finally{o=null}p&&(k="silverlight");break;case "canvas":h.global.CanvasRenderingContext2D&&
(k="canvas")}"canvas"===k&&!1!==e.canvasEvents&&(k="canvasWithEvents");"svg"==k&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(a):a()}}}})},"dojox/gfx/shape":function(){define("./_base,dojo/_base/lang,dojo/_base/declare,dojo/_base/kernel,dojo/_base/sniff,dojo/_base/connect,dojo/_base/array,dojo/dom-construct,dojo/_base/Color,./matrix".split(","),function(g,j,f,h,e,d,c,b,i,a){var k=g.shape={},o={},p={};k.register=function(a){var b=a.declaredClass.split(".").pop(),c=b in o?++o[b]:o[b]=0,
b=b+c;p[b]=a;return b};k.byId=function(a){return p[a]};k.dispose=function(a,b){if(b&&a.children)for(var c=0;c<a.children.length;++c)k.dispose(a.children[c],!0);delete p[a.getUID()]};k.Shape=f("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;var a=k.register(this);this.getUID=function(){return a}},destroy:function(){k.dispose(this)},getNode:function(){return this.rawNode},getShape:function(){return this.shape},
getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b)return null;var c=this._getRealMatrix();return[a.multiplyPoint(c,b.x,b.y),a.multiplyPoint(c,b.x+b.width,b.y),a.multiplyPoint(c,b.x+b.width,b.y+b.height),a.multiplyPoint(c,b.x,b.y+b.height)]},getEventSource:function(){return this.rawNode},
setClip:function(a){this.clip=a},getClip:function(){return this.clip},setShape:function(a){this.shape=g.makeParameters(this.shape,a);this.bbox=null;return this},setFill:function(a){if(!a)return this.fillStyle=null,this;var b=null;if("object"==typeof a&&"type"in a)switch(a.type){case "linear":b=g.makeParameters(g.defaultLinearGradient,a);break;case "radial":b=g.makeParameters(g.defaultRadialGradient,a);break;case "pattern":b=g.makeParameters(g.defaultPattern,a)}else b=g.normalizeColor(a);this.fillStyle=
b;return this},setStroke:function(a){if(!a)return this.strokeStyle=null,this;if("string"==typeof a||j.isArray(a)||a instanceof i)a={color:a};a=this.strokeStyle=g.makeParameters(g.defaultStroke,a);a.color=g.normalizeColor(a.color);return this},setTransform:function(b){this.matrix=a.clone(b?a.normalize(b):a.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var a=
this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&this.parent.remove(this,a);return this},_setParent:function(a,b){this.parent=a;return this._updateParentMatrix(b)},
_updateParentMatrix:function(b){this.parentMatrix=b?a.clone(b):null;return this._applyTransform()},_getRealMatrix:function(){for(var b=this.matrix,c=this.parent;c;)c.matrix&&(b=a.multiply(c.matrix,b)),c=c.parent;return b}});k._eventsProcessing={connect:function(a,b,c){return d.connect(this.getEventSource(),a,k.fixCallback(this,g.fixTarget,b,c))},disconnect:function(a){d.disconnect(a)}};k.fixCallback=function(a,b,c,d){d||(d=c,c=null);if(j.isString(d)){c=c||h.global;if(!c[d])throw['dojox.gfx.shape.fixCallback: scope["',
d,'"] is null (scope="',c,'")'].join("");return function(e){return b(e,a)?c[d].apply(c,arguments||[]):void 0}}return!c?function(e){return b(e,a)?d.apply(c,arguments):void 0}:function(e){return b(e,a)?d.apply(c,arguments||[]):void 0}};j.extend(k.Shape,k._eventsProcessing);k.Container={_init:function(){this.children=[]},openBatch:function(){},closeBatch:function(){},add:function(a){var b=a.getParent();b&&b.remove(a,!0);this.children.push(a);return a._setParent(this,this._getRealMatrix())},remove:function(a,
b){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){if(!b)a.parent=null,a.parentMatrix=null;this.children.splice(c,1);break}return this},clear:function(a){for(var b,c=0;c<this.children.length;++c)b=this.children[c],b.parent=null,b.parentMatrix=null,a&&b.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var b=null;c.forEach(this.children,function(c){var d=c.getBoundingBox();if(d)(c=c.getTransform())&&(d=a.multiplyRectangle(c,d)),b?(b.x=Math.min(b.x,d.x),
b.y=Math.min(b.y,d.y),b.endX=Math.max(b.endX,d.x+d.width),b.endY=Math.max(b.endY,d.y+d.height)):b={x:d.x,y:d.y,endX:d.x+d.width,endY:d.y+d.height}});if(b)b.width=b.endX-b.x,b.height=b.endY-b.y;return b}return null},_moveChildToFront:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==a){this.children.splice(b,1);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==a){this.children.splice(b,1);this.children.unshift(a);
break}return this}};k.Surface=f("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){c.forEach(this._nodes,b.destroy);this._nodes=[];c.forEach(this._events,d.disconnect);this._events=[];this.rawNode=null;if(e("ie"))for(;this._parent.lastChild;)b.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,
onLoad:function(){},whenLoaded:function(a,b){var c=j.hitch(a,b);if(this.isLoaded)c(this);else var e=d.connect(this,"onLoad",function(a){d.disconnect(e);c(a)})}});j.extend(k.Surface,k._eventsProcessing);k.Rect=f("dojox.gfx.shape.Rect",k.Shape,{constructor:function(a){this.shape=g.getDefault("Rect");this.rawNode=a},getBoundingBox:function(){return this.shape}});k.Ellipse=f("dojox.gfx.shape.Ellipse",k.Shape,{constructor:function(a){this.shape=g.getDefault("Ellipse");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=
this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});k.Circle=f("dojox.gfx.shape.Circle",k.Shape,{constructor:function(a){this.shape=g.getDefault("Circle");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});k.Line=f("dojox.gfx.shape.Line",k.Shape,{constructor:function(a){this.shape=g.getDefault("Line");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=
this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});k.Polyline=f("dojox.gfx.shape.Polyline",k.Shape,{constructor:function(a){this.shape=g.getDefault("Polyline");this.rawNode=a},setShape:function(a,b){a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[a]);return this},_normalizePoints:function(){var a=
this.shape.points,b=a&&a.length;if(b&&"number"==typeof a[0]){for(var c=[],d=0;d<b;d+=2)c.push({x:a[d],y:a[d+1]});this.shape.points=c}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,b=a.length,c=a[0],d=c.x,e=c.y,f=c.x,i=c.y,g=1;g<b;++g){c=a[g];if(d>c.x)d=c.x;if(f<c.x)f=c.x;if(e>c.y)e=c.y;if(i<c.y)i=c.y}this.bbox={x:d,y:e,width:f-d,height:i-e}}return this.bbox}});k.Image=f("dojox.gfx.shape.Image",k.Shape,{constructor:function(a){this.shape=g.getDefault("Image");
this.rawNode=a},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});k.Text=f(k.Shape,{constructor:function(a){this.fontStyle=null;this.shape=g.getDefault("Text");this.rawNode=a},getFont:function(){return this.fontStyle},setFont:function(a){this.fontStyle="string"==typeof a?g.splitFontString(a):g.makeParameters(g.defaultFont,a);this._setFont();return this}});k.Creator={createShape:function(a){switch(a.type){case g.defaultPath.type:return this.createPath(a);
case g.defaultRect.type:return this.createRect(a);case g.defaultCircle.type:return this.createCircle(a);case g.defaultEllipse.type:return this.createEllipse(a);case g.defaultLine.type:return this.createLine(a);case g.defaultPolyline.type:return this.createPolyline(a);case g.defaultImage.type:return this.createImage(a);case g.defaultText.type:return this.createText(a);case g.defaultTextPath.type:return this.createTextPath(a)}return null},createGroup:function(){return this.createObject(g.Group)},createRect:function(a){return this.createObject(g.Rect,
a)},createEllipse:function(a){return this.createObject(g.Ellipse,a)},createCircle:function(a){return this.createObject(g.Circle,a)},createLine:function(a){return this.createObject(g.Line,a)},createPolyline:function(a){return this.createObject(g.Polyline,a)},createImage:function(a){return this.createObject(g.Image,a)},createText:function(a){return this.createObject(g.Text,a)},createPath:function(a){return this.createObject(g.Path,a)},createTextPath:function(a){return this.createObject(g.TextPath,{}).setText(a)},
createObject:function(){return null}};return k})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(g,j){var f=g.matrix={},h={};f._degToRad=function(e){return h[e]||(h[e]=Math.PI*e/180)};f._radToDeg=function(e){return 180*(e/Math.PI)};f.Matrix2D=function(e){if(e)if("number"==typeof e)this.xx=this.yy=e;else if(e instanceof Array){if(0<e.length){for(var d=f.normalize(e[0]),c=1;c<e.length;++c){var b=d,i=f.normalize(e[c]),d=new f.Matrix2D;d.xx=b.xx*i.xx+b.xy*i.yx;d.xy=b.xx*i.xy+
b.xy*i.yy;d.yx=b.yx*i.xx+b.yy*i.yx;d.yy=b.yx*i.xy+b.yy*i.yy;d.dx=b.xx*i.dx+b.xy*i.dy+b.dx;d.dy=b.yx*i.dx+b.yy*i.dy+b.dy}j.mixin(this,d)}}else j.mixin(this,e)};j.extend(f.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});j.mixin(f,{identity:new f.Matrix2D,flipX:new f.Matrix2D({xx:-1}),flipY:new f.Matrix2D({yy:-1}),flipXY:new f.Matrix2D({xx:-1,yy:-1}),translate:function(e,d){return 1<arguments.length?new f.Matrix2D({dx:e,dy:d}):new f.Matrix2D({dx:e.x,dy:e.y})},scale:function(e,d){return 1<arguments.length?
new f.Matrix2D({xx:e,yy:d}):"number"==typeof e?new f.Matrix2D({xx:e,yy:e}):new f.Matrix2D({xx:e.x,yy:e.y})},rotate:function(e){var d=Math.cos(e),e=Math.sin(e);return new f.Matrix2D({xx:d,xy:-e,yx:e,yy:d})},rotateg:function(e){return f.rotate(f._degToRad(e))},skewX:function(e){return new f.Matrix2D({xy:Math.tan(e)})},skewXg:function(e){return f.skewX(f._degToRad(e))},skewY:function(e){return new f.Matrix2D({yx:Math.tan(e)})},skewYg:function(e){return f.skewY(f._degToRad(e))},reflect:function(e,d){if(1==
arguments.length)d=e.y,e=e.x;var c=e*e,b=d*d,i=c+b,a=2*e*d/i;return new f.Matrix2D({xx:2*c/i-1,xy:a,yx:a,yy:2*b/i-1})},project:function(e,d){if(1==arguments.length)d=e.y,e=e.x;var c=e*e,b=d*d,i=c+b,a=e*d/i;return new f.Matrix2D({xx:c/i,xy:a,yx:a,yy:b/i})},normalize:function(e){return e instanceof f.Matrix2D?e:new f.Matrix2D(e)},isIdentity:function(e){return 1==e.xx&&0==e.xy&&0==e.yx&&1==e.yy&&0==e.dx&&0==e.dy},clone:function(e){var d=new f.Matrix2D,c;for(c in e)"number"==typeof e[c]&&"number"==typeof d[c]&&
d[c]!=e[c]&&(d[c]=e[c]);return d},invert:function(e){var e=f.normalize(e),d=e.xx*e.yy-e.xy*e.yx;return e=new f.Matrix2D({xx:e.yy/d,xy:-e.xy/d,yx:-e.yx/d,yy:e.xx/d,dx:(e.xy*e.dy-e.yy*e.dx)/d,dy:(e.yx*e.dx-e.xx*e.dy)/d})},_multiplyPoint:function(e,d,c){return{x:e.xx*d+e.xy*c+e.dx,y:e.yx*d+e.yy*c+e.dy}},multiplyPoint:function(e,d,c){e=f.normalize(e);return"number"==typeof d&&"number"==typeof c?f._multiplyPoint(e,d,c):f._multiplyPoint(e,d.x,d.y)},multiplyRectangle:function(e,d){var c=f.normalize(e),d=
d||{x:0,y:0,width:0,height:0};if(f.isIdentity(c))return{x:d.x,y:d.y,width:d.width,height:d.height};var b=f.multiplyPoint(c,d.x,d.y),i=f.multiplyPoint(c,d.x,d.y+d.height),a=f.multiplyPoint(c,d.x+d.width,d.y),g=f.multiplyPoint(c,d.x+d.width,d.y+d.height),c=Math.min(b.x,i.x,a.x,g.x),h=Math.min(b.y,i.y,a.y,g.y),j=Math.max(b.x,i.x,a.x,g.x),b=Math.max(b.y,i.y,a.y,g.y);return{x:c,y:h,width:j-c,height:b-h}},multiply:function(e){for(var d=f.normalize(e),c=1;c<arguments.length;++c){var b=d,i=f.normalize(arguments[c]),
d=new f.Matrix2D;d.xx=b.xx*i.xx+b.xy*i.yx;d.xy=b.xx*i.xy+b.xy*i.yy;d.yx=b.yx*i.xx+b.yy*i.yx;d.yy=b.yx*i.xy+b.yy*i.yy;d.dx=b.xx*i.dx+b.xy*i.dy+b.dx;d.dy=b.yx*i.dx+b.yy*i.dy+b.dy}return d},_sandwich:function(e,d,c){return f.multiply(f.translate(d,c),e,f.translate(-d,-c))},scaleAt:function(e,d,c,b){switch(arguments.length){case 4:return f._sandwich(f.scale(e,d),c,b);case 3:return"number"==typeof c?f._sandwich(f.scale(e),d,c):f._sandwich(f.scale(e,d),c.x,c.y)}return f._sandwich(f.scale(e),d.x,d.y)},rotateAt:function(e,
d,c){return 2<arguments.length?f._sandwich(f.rotate(e),d,c):f._sandwich(f.rotate(e),d.x,d.y)},rotategAt:function(e,d,c){return 2<arguments.length?f._sandwich(f.rotateg(e),d,c):f._sandwich(f.rotateg(e),d.x,d.y)},skewXAt:function(e,d,c){return 2<arguments.length?f._sandwich(f.skewX(e),d,c):f._sandwich(f.skewX(e),d.x,d.y)},skewXgAt:function(e,d,c){return 2<arguments.length?f._sandwich(f.skewXg(e),d,c):f._sandwich(f.skewXg(e),d.x,d.y)},skewYAt:function(e,d,c){return 2<arguments.length?f._sandwich(f.skewY(e),
d,c):f._sandwich(f.skewY(e),d.x,d.y)},skewYgAt:function(e,d,c){return 2<arguments.length?f._sandwich(f.skewYg(e),d,c):f._sandwich(f.skewYg(e),d.x,d.y)}});g.Matrix2D=f.Matrix2D;return f})},"dojox/charting/SimpleTheme":function(){define("dojo/_base/lang,dojo/_base/array,dojo/_base/declare,dojo/_base/Color,dojox/lang/utils,dojox/gfx/gradutils".split(","),function(g,j,f,h,e,d){var c=f("dojox.charting.SimpleTheme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(b){var b=b||{},d=c.defaultTheme;
j.forEach("chart,plotarea,axis,grid,series,marker,indicator".split(","),function(a){this[a]=g.delegate(d[a],b[a])},this);b.seriesThemes&&b.seriesThemes.length?(this.colors=null,this.seriesThemes=b.seriesThemes.slice(0)):(this.seriesThemes=null,this.colors=(b.colors||c.defaultColors).slice(0));this.markerThemes=null;if(b.markerThemes&&b.markerThemes.length)this.markerThemes=b.markerThemes.slice(0);this.markers=b.markers?g.clone(b.markers):g.delegate(c.defaultMarkers);this.noGradConv=b.noGradConv;this.noRadialConv=
b.noRadialConv;b.reverseFills&&this.reverseFills();this._current=0;this._buildMarkerArray()},clone:function(){var b=new this.constructor({chart:this.chart,plotarea:this.plotarea,axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv});j.forEach("clone,clear,next,skip,addMixin,post,getTick".split(","),function(c){this.hasOwnProperty(c)&&
(b[c]=this[c])},this);return b},clear:function(){this._current=0},next:function(b,c,a){var d=e.merge,f;if(this.colors){f=g.delegate(this.series);var d=g.delegate(this.marker),j=new h(this.colors[this._current%this.colors.length]),l;f.stroke&&f.stroke.color?(f.stroke=g.delegate(f.stroke),l=new h(f.stroke.color),f.stroke.color=new h(j),f.stroke.color.a=l.a):f.stroke={color:j};d.stroke&&d.stroke.color?(d.stroke=g.delegate(d.stroke),l=new h(d.stroke.color),d.stroke.color=new h(j),d.stroke.color.a=l.a):
d.stroke={color:j};!f.fill||f.fill.type?f.fill=j:(l=new h(f.fill),f.fill=new h(j),f.fill.a=l.a);!d.fill||d.fill.type?d.fill=j:(l=new h(d.fill),d.fill=new h(j),d.fill.a=l.a)}else f=this.seriesThemes?d(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,d=this.markerThemes?d(this.marker,this.markerThemes[this._current%this.markerThemes.length]):f;f={series:f,marker:d,symbol:d&&d.symbol||this._markers[this._current%this._markers.length]};++this._current;c&&(f=this.addMixin(f,
b,c));a&&(f=this.post(f,b));return f},skip:function(){++this._current},addMixin:function(b,c,a,d){if(g.isArray(a))j.forEach(a,function(a){b=this.addMixin(b,c,a)},this);else{var f={};"color"in a&&("line"==c||"area"==c?(g.setObject("series.stroke.color",a.color,f),g.setObject("marker.stroke.color",a.color,f)):g.setObject("series.fill",a.color,f));j.forEach("stroke,outline,shadow,fill,font,fontColor,labelWiring".split(","),function(b){var c="marker"+b.charAt(0).toUpperCase()+b.substr(1),d=c in a;b in
a&&(g.setObject("series."+b,a[b],f),d||g.setObject("marker."+b,a[b],f));d&&g.setObject("marker."+b,a[c],f)});if("marker"in a)f.symbol=a.marker,f.symbol=a.marker;b=e.merge(b,f)}d&&(b=this.post(b,c));return b},post:function(b,c){var a=b.series.fill,d;if(!this.noGradConv&&this.shapeSpaces[a.space]&&"linear"==a.type){if("bar"==c)d={x1:a.y1,y1:a.x1,x2:a.y2,y2:a.x2};else if(!this.noRadialConv&&"shape"==a.space&&("slice"==c||"circle"==c))d={type:"radial",cx:0,cy:0,r:100};if(d)return e.merge(b,{series:{fill:d}})}return b},
getTick:function(b,c){var a=this.axis.tick,d=b+"Tick",f=e.merge;a?this.axis[d]&&(a=f(a,this.axis[d])):a=this.axis[d];c&&(a?c[d]&&(a=f(a,c[d])):a=c[d]);return a},inspectObjects:function(b){j.forEach("chart,plotarea,axis,grid,series,marker,indicator".split(","),function(c){b(this[c])},this);this.seriesThemes&&j.forEach(this.seriesThemes,b);this.markerThemes&&j.forEach(this.markerThemes,b)},reverseFills:function(){this.inspectObjects(function(b){if(b&&b.fill)b.fill=d.reverse(b.fill)})},addMarker:function(b,
c){this.markers[b]=c;this._buildMarkerArray()},setMarkers:function(b){this.markers=b;this._buildMarkerArray()},_buildMarkerArray:function(){this._markers=[];for(var b in this.markers)this._markers.push(this.markers[b])}});g.mixin(c,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c",
"#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:0.8,length:3},microTick:{width:0.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",
fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:0.1,color:"#ccc"},lineShadow:null,stroke:{width:1.5,color:"#333"},
outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:0.1,color:"#ccc"},markerShadow:null}}});return c})},"dojox/lang/utils":function(){define(["..","dojo/_base/lang"],function(g,j){var f=j.getObject("lang.utils",!0,g),h={},e=Object.prototype.toString,d=function(c){if(c)switch(e.call(c)){case "[object Array]":return c.slice(0);
case "[object Object]":return j.delegate(c)}return c};j.mixin(f,{coerceType:function(c,b){switch(typeof c){case "number":return Number(eval("("+b+")"));case "string":return""+b;case "boolean":return Boolean(eval("("+b+")"))}return eval("("+b+")")},updateWithObject:function(c,b,e){if(!b)return c;for(var a in c)if(a in b&&!(a in h)){var g=c[a];g&&"object"==typeof g?f.updateWithObject(g,b[a],e):c[a]=e?f.coerceType(g,b[a]):d(b[a])}return c},updateWithPattern:function(c,b,e,a){if(!b||!e)return c;for(var g in e)g in
b&&!(g in h)&&(c[g]=a?f.coerceType(e[g],b[g]):d(b[g]));return c},merge:function(c,b){if(b){var d=e.call(c),a=e.call(b),g,h;switch(a){case "[object Array]":if(a==d){d=Array(Math.max(c.length,b.length));for(g=0,a=d.length;g<a;++g)d[g]=f.merge(c[g],b[g]);return d}return b.slice(0);case "[object Object]":if(a==d&&c){d=j.delegate(c);for(g in b)g in c?(a=c[g],h=b[g],h!==a&&(d[g]=f.merge(a,h))):d[g]=j.clone(b[g]);return d}return j.clone(b)}}return b}});return f})},"dojox/gfx/gradutils":function(){define(["./_base",
"dojo/_base/lang","./matrix","dojo/_base/Color"],function(g,j,f,h){function e(d,c){if(0>=d)return c[0].color;var b=c.length;if(1<=d)return c[b-1].color;for(var e=0;e<b;++e){var a=c[e];if(a.offset>=d)return e?(b=c[e-1],h.blendColors(new h(b.color),new h(a.color),(d-b.offset)/(a.offset-b.offset))):a.color}return c[b-1].color}g=g.gradutils={};g.getColor=function(d,c){var b;if(d){switch(d.type){case "linear":b=Math.atan2(d.y2-d.y1,d.x2-d.x1);b=f.rotate(-b);var i=f.project(d.x2-d.x1,d.y2-d.y1),a=f.multiplyPoint(i,
c),g=f.multiplyPoint(i,d.x1,d.y1),i=f.multiplyPoint(i,d.x2,d.y2),i=f.multiplyPoint(b,i.x-g.x,i.y-g.y).x;b=f.multiplyPoint(b,a.x-g.x,a.y-g.y).x/i;break;case "radial":b=c.x-d.cx,a=c.y-d.cy,b=Math.sqrt(b*b+a*a)/d.r}return e(b,d.colors)}return new h(d||[0,0,0,0])};g.reverse=function(d){if(d)switch(d.type){case "linear":case "radial":if(d=j.delegate(d),d.colors){for(var c=d.colors,b=c.length,e=0,a,f=d.colors=Array(c.length);e<b;++e)a=c[e],f[e]={offset:1-a.offset,color:a.color};f.sort(function(a,b){return a.offset-
b.offset})}}return d};return g})},"dojox/charting/Series":function(){define(["dojo/_base/lang","dojo/_base/declare","./Element"],function(g,j,f){return j("dojox.charting.Series",f,{constructor:function(f,e,d){g.mixin(this,d);if("string"!=typeof this.plot)this.plot="default";this.update(e)},clear:function(){this.dyn={}},update:function(f){g.isArray(f)?this.data=f:(this.source=f,this.data=this.source.data,this.source.setSeriesObject&&this.source.setSeriesObject(this));this.dirty=!0;this.clear()}})})},
"dojox/charting/axis2d/common":function(){define(["dojo/_base/lang","dojo/_base/window","dojo/dom-geometry","dojox/gfx"],function(g,j,f,h){var e=g.getObject("dojox.charting.axis2d.common",!0),d=function(c){c.marginLeft="0px";c.marginTop="0px";c.marginRight="0px";c.marginBottom="0px";c.paddingLeft="0px";c.paddingTop="0px";c.paddingRight="0px";c.paddingBottom="0px";c.borderLeftWidth="0px";c.borderTopWidth="0px";c.borderRightWidth="0px";c.borderBottomWidth="0px"};return g.mixin(e,{createText:{gfx:function(c,
b,d,a,e,f,g,h){return b.createText({x:d,y:a,text:f,align:e}).setFont(g).setFill(h)},html:function(c,b,e,a,g,o,p,l,m){var b=j.doc.createElement("div"),n=b.style,q;if(c.getTextDir)b.dir=c.getTextDir(o);d(n);n.font=p;b.innerHTML=(""+o).replace(/\s/g,"&nbsp;");n.color=l;n.position="absolute";n.left="-10000px";j.body().appendChild(b);o=h.normalizedLength(h.splitFontString(p).size);if(!m)b.getBoundingClientRect?(q=b.getBoundingClientRect(),q=q.width||q.right-q.left):q=f.getMarginBox(b).w;"rtl"==b.dir&&
(e+=m?m:q);j.body().removeChild(b);n.position="relative";if(m)switch(n.width=m+"px",g){case "middle":n.textAlign="center";n.left=e-m/2+"px";break;case "end":n.textAlign="right";n.left=e-m+"px";break;default:n.left=e+"px",n.textAlign="left"}else switch(g){case "middle":n.left=Math.floor(e-q/2)+"px";break;case "end":n.left=Math.floor(e-q)+"px";break;default:n.left=Math.floor(e)+"px"}n.top=Math.floor(a-o)+"px";n.whiteSpace="nowrap";e=j.doc.createElement("div");a=e.style;d(a);a.width="0px";a.height="0px";
e.appendChild(b);c.node.insertBefore(e,c.node.firstChild);return e}}})})},"dojox/lang/functional":function(){define(["./functional/lambda","./functional/array","./functional/object"],function(g){return g})},"dojox/lang/functional/array":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","./lambda"],function(g,j,f,h){var e={};j.mixin(h,{filter:function(d,c,b){"string"==typeof d&&(d=d.split(""));var b=b||g.global,c=h.lambda(c),f=[],a,k,o;if(j.isArray(d))for(k=0,o=d.length;k<
o;++k)a=d[k],c.call(b,a,k,d)&&f.push(a);else if("function"==typeof d.hasNext&&"function"==typeof d.next)for(k=0;d.hasNext();)a=d.next(),c.call(b,a,k++,d)&&f.push(a);else for(k in d)k in e||(a=d[k],c.call(b,a,k,d)&&f.push(a));return f},forEach:function(d,c,b){"string"==typeof d&&(d=d.split(""));var b=b||g.global,c=h.lambda(c),f,a;if(j.isArray(d))for(f=0,a=d.length;f<a;c.call(b,d[f],f,d),++f);else if("function"==typeof d.hasNext&&"function"==typeof d.next)for(f=0;d.hasNext();c.call(b,d.next(),f++,d));
else for(f in d)f in e||c.call(b,d[f],f,d);return b},map:function(d,c,b){"string"==typeof d&&(d=d.split(""));var b=b||g.global,c=h.lambda(c),f,a,k;if(j.isArray(d)){f=Array(a=d.length);for(k=0;k<a;f[k]=c.call(b,d[k],k,d),++k);}else if("function"==typeof d.hasNext&&"function"==typeof d.next){f=[];for(k=0;d.hasNext();f.push(c.call(b,d.next(),k++,d)));}else for(k in f=[],d)k in e||f.push(c.call(b,d[k],k,d));return f},every:function(d,c,b){"string"==typeof d&&(d=d.split(""));var b=b||g.global,c=h.lambda(c),
f,a;if(j.isArray(d))for(f=0,a=d.length;f<a;++f){if(!c.call(b,d[f],f,d))return!1}else if("function"==typeof d.hasNext&&"function"==typeof d.next)for(f=0;d.hasNext();){if(!c.call(b,d.next(),f++,d))return!1}else for(f in d)if(!(f in e)&&!c.call(b,d[f],f,d))return!1;return!0},some:function(d,c,b){"string"==typeof d&&(d=d.split(""));var b=b||g.global,c=h.lambda(c),f,a;if(j.isArray(d))for(f=0,a=d.length;f<a;++f){if(c.call(b,d[f],f,d))return!0}else if("function"==typeof d.hasNext&&"function"==typeof d.next)for(f=
0;d.hasNext();){if(c.call(b,d.next(),f++,d))return!0}else for(f in d)if(!(f in e)&&c.call(b,d[f],f,d))return!0;return!1}});return h})},"dojox/lang/functional/reversed":function(){define(["dojo/_base/lang","dojo/_base/kernel","./lambda"],function(g,j,f){g.mixin(f,{filterRev:function(g,e,d){"string"==typeof g&&(g=g.split(""));for(var d=d||j.global,e=f.lambda(e),c=[],b,i=g.length-1;0<=i;--i)b=g[i],e.call(d,b,i,g)&&c.push(b);return c},forEachRev:function(g,e,d){"string"==typeof g&&(g=g.split(""));for(var d=
d||j.global,e=f.lambda(e),c=g.length-1;0<=c;e.call(d,g[c],c,g),--c);},mapRev:function(g,e,d){"string"==typeof g&&(g=g.split(""));for(var d=d||j.global,e=f.lambda(e),c=g.length,b=Array(c),c=c-1,i=0;0<=c;b[i++]=e.call(d,g[c],c,g),--c);return b},everyRev:function(g,e,d){"string"==typeof g&&(g=g.split(""));for(var d=d||j.global,e=f.lambda(e),c=g.length-1;0<=c;--c)if(!e.call(d,g[c],c,g))return!1;return!0},someRev:function(g,e,d){"string"==typeof g&&(g=g.split(""));for(var d=d||j.global,e=f.lambda(e),c=
g.length-1;0<=c;--c)if(e.call(d,g[c],c,g))return!0;return!1}});return f})},"dojox/charting/axis2d/Default":function(){define("dojo/_base/lang,dojo/_base/array,dojo/_base/sniff,dojo/_base/declare,dojo/_base/connect,dojo/dom-geometry,./Invisible,../scaler/common,../scaler/linear,./common,dojox/gfx,dojox/lang/utils,dojox/lang/functional".split(","),function(g,j,f,h,e,d,c,b,i,a,k,o,p){return h("dojox.charting.axis2d.Default",c,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,
includeZero:!1,fixed:!0,majorLabels:!0,minorTicks:!0,minorLabels:!0,microTicks:!1,rotation:0,htmlLabels:!0,enableCache:!1,dropLabels:!0,labelSizeChange:!1},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(a,b){this.opt=
g.clone(this.defaultParams);o.updateWithObject(this.opt,b);o.updateWithPattern(this.opt,b,this.optionalParams);if(this.opt.enableCache)this._textFreePool=[],this._lineFreePool=[],this._textUsePool=[],this._lineUsePool=[];this._invalidMaxLabelSize=!0},setWindow:function(a,b){if(a!=this.scale)this._invalidMaxLabelSize=!0;return this.inherited(arguments)},_groupLabelWidth:function(a,b,c){if(!a.length)return 0;if(50<a.length)a.length=50;g.isObject(a[0])&&(a=p.map(a,function(a){return a.text}));c&&(a=
p.map(a,function(a){return 0==g.trim(a).length?"":a.substring(0,c)+this.trailingSymbol},this));a=a.join("<br>");return k._base._getTextBox(a,{font:b}).w||0},_getMaxLabelSize:function(a,b,c,d,e,f){if(null==this._maxLabelSize&&6==arguments.length){var h=this.opt;this.scaler.minMinorStep=this._prevMinMinorStep=0;var k=g.clone(h);delete k.to;delete k.from;var t=i.buildScaler(a,b,c,k,h.to-h.from);t.minMinorStep=0;this._majorStart=t.major.start;h=i.buildTicks(t,h);if(f&&h){var x=t=0,o=function(a){a.label&&
this.push(a.label)},p=[];this.opt.majorLabels&&(j.forEach(h.major,o,p),t=this._groupLabelWidth(p,e,k.maxLabelCharCount),k.maxLabelSize&&(t=Math.min(k.maxLabelSize,t)));p=[];this.opt.dropLabels&&this.opt.minorLabels&&(j.forEach(h.minor,o,p),x=this._groupLabelWidth(p,e,k.maxLabelCharCount),k.maxLabelSize&&(x=Math.min(k.maxLabelSize,x)));this._maxLabelSize={majLabelW:t,minLabelW:x,majLabelH:f,minLabelH:f}}else this._maxLabelSize=null}return this._maxLabelSize},calculate:function(a,b,c){this.inherited(arguments);
this.scaler.minMinorStep=this._prevMinMinorStep;if((this._invalidMaxLabelSize||c!=this._oldSpan)&&Infinity!=a&&-Infinity!=b){this._invalidMaxLabelSize=!1;if(this.opt.labelSizeChange)this._maxLabelSize=null;this._oldSpan=c;var d=this.opt,e=this.chart.theme.axis,f=d.rotation%360,g=this.chart.theme.axis.tick.labelGap,h=d.font||e.majorTick&&e.majorTick.font||e.tick&&e.tick.font,e=h?k.normalizedLength(k.splitFontString(h).size):0,h=this._getMaxLabelSize(a,b,c,f,h,e);"number"!=typeof g&&(g=4);if(h&&d.dropLabels){var d=
Math.abs(Math.cos(f*Math.PI/180)),j=Math.abs(Math.sin(f*Math.PI/180));0>f&&(f+=360);switch(f){case 0:case 180:this.vertical?f=e:(f=h.majLabelW,e=h.minLabelW);break;case 90:case 270:this.vertical?(f=h.majLabelW,e=h.minLabelW):f=e;break;default:var f=this.vertical?Math.min(h.majLabelW,e/d):Math.min(h.majLabelW,e/j),x=Math.sqrt(h.minLabelW*h.minLabelW+e*e),e=Math.min(x,this.vertical?e*d+h.minLabelW*j:h.minLabelW*d+e*j)}this.scaler.minMinorStep=this._prevMinMinorStep=Math.max(f,e)+g;this._skipInterval=
this.scaler.minMinorStep<=this.scaler.minor.tick*this.scaler.bounds.scale?0:Math.floor((f+g)/(this.scaler.major.tick*this.scaler.bounds.scale))}else this._skipInterval=0}this.ticks=i.buildTicks(this.scaler,this.opt);return this},getOffsets:function(){var a={l:0,r:0,t:0,b:0};if(!this.scaler)return a;var b=this.opt,c=this.chart.theme.axis,d=this.chart.theme.axis.tick.labelGap,e=b.titleFont||c.title&&c.title.font,c=0==b.titleGap?0:b.titleGap||c.title&&c.title.gap,f=this.chart.theme.getTick("major",b),
g=this.chart.theme.getTick("minor",b),e=e?k.normalizedLength(k.splitFontString(e).size):0,i=b.rotation%360,h=b.leftBottom,j=Math.abs(Math.cos(i*Math.PI/180)),o=Math.abs(Math.sin(i*Math.PI/180));this.trailingSymbol=void 0===b.trailingSymbol||null===b.trailingSymbol?this.trailingSymbol:b.trailingSymbol;"number"!=typeof d&&(d=4);0>i&&(i+=360);var p=this._getMaxLabelSize();if(p){var C=Math.ceil(Math.max(p.majLabelW,p.minLabelW))+1,G=Math.ceil(Math.max(p.majLabelH,p.minLabelH))+1;if(this.vertical)switch(p=
h?"l":"r",i){case 0:case 180:a[p]=C;a.t=a.b=G/2;break;case 90:case 270:a[p]=G;a.t=a.b=C/2;break;default:45>=i||180<i&&225>=i?(a[p]=G*o/2+C*j,a[h?"t":"b"]=G*j/2+C*o,a[h?"b":"t"]=G*j/2):315<i||180>i&&135<i?(a[p]=G*o/2+C*j,a[h?"b":"t"]=G*j/2+C*o,a[h?"t":"b"]=G*j/2):90>i||180<i&&270>i?(a[p]=G*o+C*j,a[h?"t":"b"]=G*j+C*o):(a[p]=G*o+C*j,a[h?"b":"t"]=G*j+C*o)}else switch(p=h?"b":"t",i){case 0:case 180:a[p]=G;a.l=a.r=C/2;break;case 90:case 270:a[p]=C;a.l=a.r=G/2;break;default:45<=i&&90>=i||225<=i&&270>=i?
(a[p]=G*j/2+C*o,a[h?"r":"l"]=G*o/2+C*j,a[h?"l":"r"]=G*o/2):90<=i&&135>=i||270<=i&&315>=i?(a[p]=G*j/2+C*o,a[h?"l":"r"]=G*o/2+C*j,a[h?"r":"l"]=G*o/2):45>i||180<i&&225>i?(a[p]=G*j+C*o,a[h?"r":"l"]=G*o+C*j):(a[p]=G*j+C*o,a[h?"l":"r"]=G*o+C*j)}a[p]+=d+Math.max(f.length,g.length)+(b.title?e+c:0)}return a},cleanGroup:function(a){if(this.opt.enableCache&&this.group)this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._textFreePool=this._textFreePool.concat(this._textUsePool),
this._textUsePool=[];this.inherited(arguments)},createText:function(b,c,d,e,f,g,i,h,k){if(!this.opt.enableCache||"html"==b)return a.createText[b](this.chart,c,d,e,f,g,i,h,k);0<this._textFreePool.length?(b=this._textFreePool.pop(),b.setShape({x:d,y:e,text:g,align:f}),c.add(b)):b=a.createText[b](this.chart,c,d,e,f,g,i,h);this._textUsePool.push(b);return b},createLine:function(a,b){var c;this.opt.enableCache&&0<this._lineFreePool.length?(c=this._lineFreePool.pop(),c.setShape(b),a.add(c)):c=a.createLine(b);
this.opt.enableCache&&this._lineUsePool.push(c);return c},render:function(b,c){var d,e,g,h,o,p,t,x,w,E,C,G,I,Q;if(!this.dirty||!this.scaler)return this;var K=this.opt;w=this.chart.theme.axis;var F=K.leftBottom,z=K.rotation%360,y=0,A,D,y=this.chart.theme.axis.tick.labelGap,L=K.font||w.majorTick&&w.majorTick.font||w.tick&&w.tick.font,J=K.titleFont||w.title&&w.title.font,N=K.fontColor||w.majorTick&&w.majorTick.fontColor||w.tick&&w.tick.fontColor||"black",T=K.titleFontColor||w.title&&w.title.fontColor||
"black";o=0==K.titleGap?0:K.titleGap||w.title&&w.title.gap||15;var H=K.titleOrientation||w.title&&w.title.orientation||"axis",B=this.chart.theme.getTick("major",K),V=this.chart.theme.getTick("minor",K),M=this.chart.theme.getTick("micro",K);Math.max(B.length,V.length,M.length);var P="stroke"in K?K.stroke:w.stroke,O=L?k.normalizedLength(k.splitFontString(L).size):0;p=Math.abs(Math.cos(z*Math.PI/180));A=Math.abs(Math.sin(z*Math.PI/180));var R=J?k.normalizedLength(k.splitFontString(J).size):0;"number"!=
typeof y&&(y=4);0>z&&(z+=360);var Z=this._getMaxLabelSize(),Z=Z&&Z.majLabelW;if(this.vertical){I=b.height-c.b;Q=void 0;C=c.t;G=void 0;w=(b.height-c.b+c.t)/2;E=void 0;A=O*A+(Z||0)*p+y+Math.max(B.length,V.length)+R+o;t=0;x=-1;d=0;e=0;o=1;p=0;g=y;h=0;switch(z){case 0:D="end";e=0.4*O;break;case 90:D="middle";d=-O;break;case 180:D="start";e=0.4*-O;break;case 270:D="middle";break;default:45>z?(D="end",e=0.4*O):90>z?(D="end",e=0.4*O):135>z?D="start":225>z?(D="start",e=0.4*-O):270>z?(D="start",d=F?0:0.4*
O):315>z?(D="end",d=F?0:0.4*O):(D="end",e=0.4*O)}if(F)Q=G=c.l,y=H&&"away"==H?90:270,E=c.l-A+(270==y?R:0),o=-1,g=-g;else switch(Q=G=b.width-c.r,y=H&&"axis"==H?90:270,E=b.width-c.r+A-(270==y?0:R),D){case "start":D="end";break;case "end":D="start";break;case "middle":d+=O}}else{Q=c.l;I=void 0;G=b.width-c.r;C=void 0;E=(b.width-c.r+c.l)/2;w=void 0;A=O*p+(Z||0)*A+y+Math.max(B.length,V.length)+R+o;t=1;x=0;d=0;e=0;o=0;p=1;g=0;h=y;switch(z){case 0:D="middle";e=O;break;case 90:D="start";d=0.4*-O;break;case 180:D=
"middle";break;case 270:D="end";d=0.4*O;break;default:45>z?(D="start",e=F?O:0):135>z?(D="start",d=0.4*-O):180>z?(D="start",e=F?0:-O):225>z?(D="end",e=F?0:-O):315>z?(D="end",e=F?0.4*O:0):(D="end",e=F?O:0)}if(F)I=C=b.height-c.b,y=H&&"axis"==H?180:0,w=b.height-c.b+A-(y?R:0);else switch(I=C=c.t,y=H&&"away"==H?180:0,w=c.t-A+(y?0:R),p=-1,h=-h,D){case "start":D="end";break;case "end":D="start";break;case "middle":e-=O}}this.cleanGroup();var U=this.group,F=this.scaler,H=this.ticks,$=i.getTransformerFromModel(this.scaler),
X=(!K.title||!y)&&!z&&this.opt.htmlLabels&&!f("ie")&&!f("opera")?"html":"gfx",Y=o*B.length,S=p*B.length,aa=this._skipInterval;U.createLine({x1:Q,y1:I,x2:G,y2:C}).setStroke(P);K.title&&(J=a.createText[X](this.chart,U,E,w,"middle",K.title,J,T),"html"==X?this.htmlElements.push(J):J.setTransform(k.matrix.rotategAt(y,E,w)));if(null==H)return this.dirty=!1,this;var W=0<H.major.length?(H.major[0].value-this._majorStart)/F.major.tick:0,ha=this.opt.majorLabels;j.forEach(H.major,function(a,b){var c=$(a.value),
f=Q+t*c,i=I+x*c,b=b+W;this.createLine(U,{x1:f,y1:i,x2:f+Y,y2:i+S}).setStroke(B);if(a.label&&(!aa||0==(b-(1+aa))%(1+aa))){var j=K.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,L,K.maxLabelCharCount):{text:a.label,truncated:!1},j=K.maxLabelSize?this.getTextWithLimitLength(j.text,L,K.maxLabelSize,j.truncated):j,c=this.createText(X,U,f+Y+g+(z?0:d),i+S+h+(z?0:e),D,j.text,L,N);this.chart.truncateBidi&&j.truncated&&this.chart.truncateBidi(c,a.label,X);j.truncated&&this.labelTooltip(c,this.chart,
a.label,j.text,L,X);"html"==X?this.htmlElements.push(c):z&&c.setTransform([{dx:d,dy:e},k.matrix.rotategAt(z,f+Y+g,i+S+h)])}},this);Y=o*V.length;S=p*V.length;ha=this.opt.minorLabels&&F.minMinorStep<=F.minor.tick*F.bounds.scale;j.forEach(H.minor,function(a){var b=$(a.value),c=Q+t*b,f=I+x*b;this.createLine(U,{x1:c,y1:f,x2:c+Y,y2:f+S}).setStroke(V);if(ha&&a.label){var i=K.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,L,K.maxLabelCharCount):{text:a.label,truncated:!1},i=K.maxLabelSize?this.getTextWithLimitLength(i.text,
L,K.maxLabelSize,i.truncated):i,b=this.createText(X,U,c+Y+g+(z?0:d),f+S+h+(z?0:e),D,i.text,L,N);this.chart.getTextDir&&i.truncated&&this.chart.truncateBidi(b,a.label,X);i.truncated&&this.labelTooltip(b,this.chart,a.label,i.text,L,X);"html"==X?this.htmlElements.push(b):z&&b.setTransform([{dx:d,dy:e},k.matrix.rotategAt(z,c+Y+g,f+S+h)])}},this);Y=o*M.length;S=p*M.length;j.forEach(H.micro,function(a){var b=$(a.value),a=Q+t*b,b=I+x*b;this.createLine(U,{x1:a,y1:b,x2:a+Y,y2:b+S}).setStroke(M)},this);this.dirty=
!1;return this},labelTooltip:function(a,b,c,f,i,h){var j=["dijit/Tooltip"],o={type:"rect"},t=["above","below"],f=k._base._getTextBox(f,{font:i}).w||0,i=i?k.normalizedLength(k.splitFontString(i).size):0;"html"==h?(g.mixin(o,d.position(a.firstChild,!0)),o.width=Math.ceil(f),o.height=Math.ceil(i),this._events.push({shape:dojo,handle:e.connect(a.firstChild,"onmouseover",this,function(){require(j,function(a){a.show(c,o,t)})})}),this._events.push({shape:dojo,handle:e.connect(a.firstChild,"onmouseout",this,
function(){require(j,function(a){a.hide(o)})})})):(h=a.getShape(),b=b.getCoords(),o=g.mixin(o,{x:h.x-f/2,y:h.y}),o.x+=b.x,o.y+=b.y,o.x=Math.round(o.x),o.y=Math.round(o.y),o.width=Math.ceil(f),o.height=Math.ceil(i),this._events.push({shape:a,handle:a.connect("onmouseenter",this,function(){require(j,function(a){a.show(c,o,t)})})}),this._events.push({shape:a,handle:a.connect("onmouseleave",this,function(){require(j,function(a){a.hide(o)})})}))}})})},"dojox/charting/axis2d/Invisible":function(){define("dojo/_base/lang,dojo/_base/declare,./Base,../scaler/linear,dojox/gfx,dojox/lang/utils".split(","),
function(g,j,f,h,e,d){return j("dojox.charting.axis2d.Invisible",f,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1},constructor:function(c,b){this.opt=g.clone(this.defaultParams);d.updateWithObject(this.opt,b);d.updateWithPattern(this.opt,b,this.optionalParams)},dependOnData:function(){return!("min"in this.opt)||!("max"in this.opt)},clear:function(){delete this.scaler;
delete this.ticks;this.dirty=!0;return this},initialized:function(){return"scaler"in this&&!(this.dirty&&this.dependOnData())},setWindow:function(c,b){this.scale=c;this.offset=b;return this.clear()},getWindowScale:function(){return"scale"in this?this.scale:1},getWindowOffset:function(){return"offset"in this?this.offset:0},calculate:function(c,b,d){if(this.initialized())return this;var a=this.opt;this.labels=a.labels;this.scaler=h.buildScaler(c,b,d,a);var e=this.scaler.bounds;if("scale"in this){a.from=
e.lower+this.offset;a.to=(e.upper-e.lower)/this.scale+a.from;if(!isFinite(a.from)||isNaN(a.from)||!isFinite(a.to)||isNaN(a.to)||a.to-a.from>=e.upper-e.lower)delete a.from,delete a.to,delete this.scale,delete this.offset;else{if(a.from<e.lower)a.to+=e.lower-a.from,a.from=e.lower;else if(a.to>e.upper)a.from+=e.upper-a.to,a.to=e.upper;this.offset=a.from-e.lower}this.scaler=h.buildScaler(c,b,d,a);1==this.scale&&0==this.offset&&(delete this.scale,delete this.offset)}return this},getScaler:function(){return this.scaler},
getTicks:function(){return this.ticks}})})},"dojox/charting/axis2d/Base":function(){define(["dojo/_base/declare","../Element"],function(g,j){return g("dojox.charting.axis2d.Base",j,{constructor:function(f,g){this.vertical=g&&g.vertical;this.opt={};this.opt.min=g&&g.min;this.opt.max=g&&g.max},clear:function(){return this},initialized:function(){return!1},calculate:function(){return this},getScaler:function(){return null},getTicks:function(){return null},getOffsets:function(){return{l:0,r:0,t:0,b:0}},
render:function(){this.dirty=!1;return this}})})},"dojox/charting/scaler/linear":function(){define(["dojo/_base/lang","./common"],function(g,j){function f(c,b){for(var c=c.toLowerCase(),d=b.length-1;0<=d;--d)if(c===b[d])return!0;return!1}var h=g.getObject("dojox.charting.scaler.linear",!0),e=j.getNumericLabel,d=function(c,b,d,a,e,j,p){d=g.delegate(d);if(!a){if("major"==d.fixUpper)d.fixUpper="minor";if("major"==d.fixLower)d.fixLower="minor"}if(!e){if("minor"==d.fixUpper)d.fixUpper="micro";if("minor"==
d.fixLower)d.fixLower="micro"}if(!j){if("micro"==d.fixUpper)d.fixUpper="none";if("micro"==d.fixLower)d.fixLower="none"}var l=f(d.fixLower,["major"])?Math.floor(d.min/a)*a:f(d.fixLower,["minor"])?Math.floor(d.min/e)*e:f(d.fixLower,["micro"])?Math.floor(d.min/j)*j:d.min,m=f(d.fixUpper,["major"])?Math.ceil(d.max/a)*a:f(d.fixUpper,["minor"])?Math.ceil(d.max/e)*e:f(d.fixUpper,["micro"])?Math.ceil(d.max/j)*j:d.max;d.useMin&&(c=l);d.useMax&&(b=m);var n=!a||d.useMin&&f(d.fixLower,["major"])?c:Math.ceil(c/
a)*a,q=!e||d.useMin&&f(d.fixLower,["major","minor"])?c:Math.ceil(c/e)*e,r=!j||d.useMin&&f(d.fixLower,["major","minor","micro"])?c:Math.ceil(c/j)*j,u=!a?0:(d.useMax&&f(d.fixUpper,["major"])?Math.round((b-n)/a):Math.floor((b-n)/a))+1,s=!e?0:(d.useMax&&f(d.fixUpper,["major","minor"])?Math.round((b-q)/e):Math.floor((b-q)/e))+1,d=!j?0:(d.useMax&&f(d.fixUpper,["major","minor","micro"])?Math.round((b-r)/j):Math.floor((b-r)/j))+1,v=e?Math.round(a/e):0,t=j?Math.round(e/j):0,x=a?Math.floor(Math.log(a)/Math.LN10):
0,w=e?Math.floor(Math.log(e)/Math.LN10):0,E=p/(b-c);isFinite(E)||(E=1);return{bounds:{lower:l,upper:m,from:c,to:b,scale:E,span:p},major:{tick:a,start:n,count:u,prec:x},minor:{tick:e,start:q,count:s,prec:w},micro:{tick:j,start:r,count:d,prec:0},minorPerMajor:v,microPerMinor:t,scaler:h}};return g.mixin(h,{buildScaler:function(c,b,e,a,f,g){var h={fixUpper:"none",fixLower:"none",natural:!1};if(a){if("fixUpper"in a)h.fixUpper=""+a.fixUpper;if("fixLower"in a)h.fixLower=""+a.fixLower;if("natural"in a)h.natural=
Boolean(a.natural)}g=!g||3>g?3:g;if("min"in a)c=a.min;if("max"in a)b=a.max;a.includeZero&&(0<c&&(c=0),0>b&&(b=0));h.min=c;h.useMin=!0;h.max=b;h.useMax=!0;if("from"in a)c=a.from,h.useMin=!1;if("to"in a)b=a.to,h.useMax=!1;if(b<=c)return d(c,b,h,0,0,0,e);f||(f=b-c);var f=Math.floor(Math.log(f)/Math.LN10),f=a&&"majorTickStep"in a?a.majorTickStep:Math.pow(10,f),j=0,m=0,n;if(a&&"minorTickStep"in a)j=a.minorTickStep;else{do{j=f/10;if(!h.natural||0.9<j)if(n=d(c,b,h,f,j,0,e),n.bounds.scale*n.minor.tick>g)break;
j=f/5;if(!h.natural||0.9<j)if(n=d(c,b,h,f,j,0,e),n.bounds.scale*n.minor.tick>g)break;j=f/2;if(!h.natural||0.9<j)if(n=d(c,b,h,f,j,0,e),n.bounds.scale*n.minor.tick>g)break;return d(c,b,h,f,0,0,e)}while(0)}if(a&&"microTickStep"in a)m=a.microTickStep,n=d(c,b,h,f,j,m,e);else{do{m=j/10;if(!h.natural||0.9<m)if(n=d(c,b,h,f,j,m,e),3<n.bounds.scale*n.micro.tick)break;m=j/5;if(!h.natural||0.9<m)if(n=d(c,b,h,f,j,m,e),3<n.bounds.scale*n.micro.tick)break;m=j/2;if(!h.natural||0.9<m)if(n=d(c,b,h,f,j,m,e),3<n.bounds.scale*
n.micro.tick)break;m=0}while(0)}return m?n:d(c,b,h,f,j,0,e)},buildTicks:function(c,b){var d,a,f,g=c.major.start,h=c.minor.start,j=c.micro.start;if(b.microTicks&&c.micro.tick)d=c.micro.tick,a=j;else if(b.minorTicks&&c.minor.tick)d=c.minor.tick,a=h;else if(c.major.tick)d=c.major.tick,a=g;else return null;var m=1/c.bounds.scale;if(c.bounds.to<=c.bounds.from||isNaN(m)||!isFinite(m)||0>=d||isNaN(d)||!isFinite(d))return null;for(var n=[],q=[],r=[];a<=c.bounds.to+m;){if(Math.abs(g-a)<d/2){f={value:g};if(b.majorLabels)f.label=
e(g,c.major.prec,b);n.push(f);g+=c.major.tick;h+=c.minor.tick}else if(Math.abs(h-a)<d/2){if(b.minorTicks){f={value:h};if(b.minorLabels&&c.minMinorStep<=c.minor.tick*c.bounds.scale)f.label=e(h,c.minor.prec,b);q.push(f)}h+=c.minor.tick}else b.microTicks&&r.push({value:j});j+=c.micro.tick;a+=d}return{major:n,minor:q,micro:r}},getTransformerFromModel:function(c){var b=c.bounds.from,d=c.bounds.scale;return function(a){return(a-b)*d}},getTransformerFromPlot:function(c){var b=c.bounds.from,d=c.bounds.scale;
return function(a){return a/d+b}}})})},"dojox/charting/scaler/common":function(){define(["dojo/_base/lang"],function(g){var j=function(e,d){return Math.abs(e-d)<=1.0E-6*(Math.abs(e)+Math.abs(d))},f=g.getObject("dojox.charting.scaler.common",!0),h={};return g.mixin(f,{doIfLoaded:function(e,d,c){if(void 0==h[e])try{h[e]=require(e)}catch(b){h[e]=null}return h[e]?d(h[e]):c()},getNumericLabel:function(e,d,c){var b="";f.doIfLoaded("dojo/number",function(a){b=(c.fixed?a.format(e,{places:0>d?-d:0}):a.format(e))||
""},function(){b=c.fixed?e.toFixed(0>d?-d:0):e.toString()});if(c.labelFunc){var g=c.labelFunc(b,e,d);if(g)return g}if(c.labels){for(var g=c.labels,a=0,h=g.length;a<h;){var o=Math.floor((a+h)/2);g[o].value<e?a=o+1:h=o}if(a<g.length&&j(g[a].value,e))return g[a].text;--a;if(0<=a&&a<g.length&&j(g[a].value,e))return g[a].text;a+=2;if(a<g.length&&j(g[a].value,e))return g[a].text}return b}})})},"dojox/charting/plot2d/Bubble":function(){define("dojo/_base/lang,dojo/_base/declare,dojo/_base/array,./CartesianBase,./_PlotEvents,./common,dojox/lang/functional,dojox/lang/functional/reversed,dojox/lang/utils,dojox/gfx/fx".split(","),
function(g,j,f,h,e,d,c,b,i,a){var k=b.lambda("item.purgeGroup()");return j("dojox.charting.plot2d.Bubble",[h,e],{defaultParams:{hAxis:"x",vAxis:"y",animate:null},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},styleFunc:null,font:"",fontColor:""},constructor:function(a,b){this.opt=g.clone(this.defaultParams);i.updateWithObject(this.opt,b);i.updateWithPattern(this.opt,b,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate},render:function(a,
b){if(this.zoom&&!this.isDataDirty())return this.performZoom(a,b);this.resetEvents();if(this.dirty=this.isDirty()){f.forEach(this.series,k);this._eventSeries={};this.cleanGroup();var e=this.group;c.forEachRev(this.series,function(a){a.cleanGroup(e)})}for(var g=this.chart.theme,i=this._hScaler.scaler.getTransformerFromModel(this._hScaler),h=this._vScaler.scaler.getTransformerFromModel(this._vScaler),j=this.events(),u=this.series.length-1;0<=u;--u){var s=this.series[u];if(!this.dirty&&!s.dirty)g.skip(),
this._reconnectEvents(s.name);else if(s.cleanGroup(),s.data.length)if("number"==typeof s.data[0])console.warn("dojox.charting.plot2d.Bubble: the data in the following series cannot be rendered as a bubble chart; ",s);else{var v=g.next("circle",[this.opt,s]),e=s.group,t=f.map(s.data,function(c){return c?{x:i(c.x)+b.l,y:a.height-b.b-h(c.y),radius:this._vScaler.bounds.scale*(c.size/2)}:null},this),x=null,w=null,E=null,C=this.opt.styleFunc,G=function(a){return C?g.addMixin(v,"circle",[a,C(a)],!0):g.addMixin(v,
"circle",a,!0)};if(v.series.shadow&&(E=f.map(t,function(c,d){if(null!==c){var f=G(s.data[d]).series.shadow,f=e.createCircle({cx:c.x+f.dx,cy:c.y+f.dy,r:c.radius}).setStroke(f).setFill(f.color);this.animate&&this._animateBubble(f,a.height-b.b,c.radius);return f}return null},this),E.length))s.dyn.shadow=E[E.length-1].getStroke();if(v.series.outline&&(w=f.map(t,function(c,f){if(null!==c){var g=G(s.data[f]),g=d.makeStroke(g.series.outline);g.width=2*g.width+v.series.stroke.width;g=e.createCircle({cx:c.x,
cy:c.y,r:c.radius}).setStroke(g);this.animate&&this._animateBubble(g,a.height-b.b,c.radius);return g}return null},this),w.length))s.dyn.outline=w[w.length-1].getStroke();x=f.map(t,function(c,d){if(null!==c){var f=G(s.data[d]),g={x:c.x-c.radius,y:c.y-c.radius,width:2*c.radius,height:2*c.radius},i=this._plotFill(f.series.fill,a,b),i=this._shapeFill(i,g),f=e.createCircle({cx:c.x,cy:c.y,r:c.radius}).setFill(i).setStroke(f.series.stroke);this.animate&&this._animateBubble(f,a.height-b.b,c.radius);return f}return null},
this);if(x.length)s.dyn.fill=x[x.length-1].getFill(),s.dyn.stroke=x[x.length-1].getStroke();if(j){var I=Array(x.length);f.forEach(x,function(a,b){if(null!==a){var c={element:"circle",index:b,run:s,shape:a,outline:w&&w[b]||null,shadow:E&&E[b]||null,x:s.data[b].x,y:s.data[b].y,r:s.data[b].size/2,cx:t[b].x,cy:t[b].y,cr:t[b].radius};this._connectEvents(c);I[b]=c}},this);this._eventSeries[s.name]=I}else delete this._eventSeries[s.name];s.dirty=!1}else s.dirty=!1,g.skip()}this.dirty=!1;return this},_animateBubble:function(b,
c,d){a.animateTransform(g.delegate({shape:b,duration:1200,transform:[{name:"translate",start:[0,c],end:[0,0]},{name:"scale",start:[0,1/d],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/CartesianBase":function(){define("dojo/_base/lang,dojo/_base/declare,dojo/_base/connect,./Base,../scaler/primitive,dojox/gfx/fx".split(","),function(g,j,f,h,e,d){return j("dojox.charting.plot2d.CartesianBase",h,{constructor:function(){this.axes=["hAxis","vAxis"];this.zoom=null;this.zoomQueue=
[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0}},clear:function(){this.inherited(arguments);this._vAxis=this._hAxis=null;return this},cleanGroup:function(c){this.inherited(arguments,[c||this.chart.plotGroup])},setAxis:function(c){c&&(this[c.vertical?"_vAxis":"_hAxis"]=c);return this},toPage:function(c){var b=this._hAxis,d=this._vAxis,a=b.getScaler(),e=d.getScaler(),f=a.scaler.getTransformerFromModel(a),g=e.scaler.getTransformerFromModel(e),h=this.chart.getCoords(),j=this.chart.offsets,
n=this.chart.dim,a=function(a){var c={};c.x=f(a[b.name])+h.x+j.l;c.y=h.y+n.height-j.b-g(a[d.name]);return c};return c?a(c):a},toData:function(c){var b=this._hAxis,d=this._vAxis,a=b.getScaler(),e=d.getScaler(),f=a.scaler.getTransformerFromPlot(a),g=e.scaler.getTransformerFromPlot(e),h=this.chart.getCoords(),j=this.chart.offsets,n=this.chart.dim,a=function(a){var c={};c[b.name]=f(a.x-h.x-j.l);c[d.name]=g(h.y+n.height-a.y-j.b);return c};return c?a(c):a},isDirty:function(){return this.dirty||this._hAxis&&
this._hAxis.dirty||this._vAxis&&this._vAxis.dirty},performZoom:function(c,b){var e=this._vAxis.scale||1,a=this._hAxis.scale||1,h=this._hScaler.bounds,h=(h.from-h.lower)*h.scale,j=this._vScaler.bounds,j=(j.from-j.lower)*j.scale,p=e/this.lastWindow.vscale,l=a/this.lastWindow.hscale,p=d.animateTransform(g.delegate({shape:this.group,duration:1200,transform:[{name:"translate",start:[0,0],end:[b.l*(1-l),(c.height-b.b)*(1-p)]},{name:"scale",start:[1,1],end:[l,p]},{name:"original"},{name:"translate",start:[0,
0],end:[(this.lastWindow.xoffset-h)/(1==this.lastWindow.hscale?a:this.lastWindow.hscale),(j-this.lastWindow.yoffset)/(1==this.lastWindow.vscale?e:this.lastWindow.vscale)]}]},this.zoom));g.mixin(this.lastWindow,{vscale:e,hscale:a,xoffset:h,yoffset:j});this.zoomQueue.push(p);f.connect(p,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();0<this.zoomQueue.length&&this.zoomQueue[0].play()});1==this.zoomQueue.length&&this.zoomQueue[0].play();return this},initializeScalers:function(c,b){this._hAxis?
(this._hAxis.initialized()||this._hAxis.calculate(b.hmin,b.hmax,c.width),this._hScaler=this._hAxis.getScaler()):this._hScaler=e.buildScaler(b.hmin,b.hmax,c.width);this._vAxis?(this._vAxis.initialized()||this._vAxis.calculate(b.vmin,b.vmax,c.height),this._vScaler=this._vAxis.getScaler()):this._vScaler=e.buildScaler(b.vmin,b.vmax,c.height);return this}})})},"dojox/charting/plot2d/Base":function(){define(["dojo/_base/declare","../Element","dojo/_base/array","./common"],function(g,j,f,h){return g("dojox.charting.plot2d.Base",
j,{constructor:function(){},clear:function(){this.series=[];this.dirty=!0;return this},setAxis:function(){return this},assignAxes:function(e){f.forEach(this.axes,function(d){this[d]&&this.setAxis(e[this[d]])},this)},addSeries:function(e){this.series.push(e);return this},getSeriesStats:function(){return h.collectSimpleStats(this.series)},calculateAxes:function(e){this.initializeScalers(e,this.getSeriesStats());return this},initializeScalers:function(){return this},isDataDirty:function(){return f.some(this.series,
function(e){return e.dirty})},render:function(){return this},getRequiredColors:function(){return this.series.length}})})},"dojox/charting/plot2d/common":function(){define("dojo/_base/lang,dojo/_base/array,dojo/_base/Color,dojox/gfx,dojox/lang/functional,../scaler/common".split(","),function(g,j,f,h,e,d){var c=g.getObject("dojox.charting.plot2d.common",!0);return g.mixin(c,{doIfLoaded:d.doIfLoaded,makeStroke:function(b){if(!b)return b;if("string"==typeof b||b instanceof f)b={color:b};return h.makeParameters(h.defaultStroke,
b)},augmentColor:function(b,c){var a=new f(b),d=new f(c);d.a=a.a;return d},augmentStroke:function(b,d){var a=c.makeStroke(b);if(a)a.color=c.augmentColor(a.color,d);return a},augmentFill:function(b,d){new f(d);return"string"==typeof b||b instanceof f?c.augmentColor(b,d):b},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(b){for(var d=g.delegate(c.defaultStats),a=0;a<b.length;++a)for(var e=
b[a],f=0;f<e.data.length;f++)if(null!==e.data[f]){if("number"==typeof e.data[f]){var f=d.vmin,h=d.vmax;(!("ymin"in e)||!("ymax"in e))&&j.forEach(e.data,function(a,b){if(null!==a){var c=b+1,e=a;isNaN(e)&&(e=0);d.hmin=Math.min(d.hmin,c);d.hmax=Math.max(d.hmax,c);d.vmin=Math.min(d.vmin,e);d.vmax=Math.max(d.vmax,e)}})}else{var l=d.hmin,m=d.hmax,f=d.vmin,h=d.vmax;(!("xmin"in e)||!("xmax"in e)||!("ymin"in e)||!("ymax"in e))&&j.forEach(e.data,function(a,b){if(null!==a){var c="x"in a?a.x:b+1,e=a.y;isNaN(c)&&
(c=0);isNaN(e)&&(e=0);d.hmin=Math.min(d.hmin,c);d.hmax=Math.max(d.hmax,c);d.vmin=Math.min(d.vmin,e);d.vmax=Math.max(d.vmax,e)}});if("xmin"in e)d.hmin=Math.min(l,e.xmin);if("xmax"in e)d.hmax=Math.max(m,e.xmax)}if("ymin"in e)d.vmin=Math.min(f,e.ymin);if("ymax"in e)d.vmax=Math.max(h,e.ymax);break}return d},calculateBarSize:function(b,c,a){a||(a=1);var d=c.gap,d=(b-2*d)/a;"minBarSize"in c&&(d=Math.max(d,c.minBarSize));"maxBarSize"in c&&(d=Math.min(d,c.maxBarSize));d=Math.max(d,1);return{size:d,gap:(b-
d*a)/2}},collectStackedStats:function(b){var d=g.clone(c.defaultStats);if(b.length){d.hmin=Math.min(d.hmin,1);d.hmax=e.foldl(b,"seed, run -> Math.max(seed, run.data.length)",d.hmax);for(var a=0;a<d.hmax;++a){var f=b[0].data[a],f=f&&("number"==typeof f?f:f.y);isNaN(f)&&(f=0);d.vmin=Math.min(d.vmin,f);for(var h=1;h<b.length;++h){var j=b[h].data[a],j=j&&("number"==typeof j?j:j.y);isNaN(j)&&(j=0);f+=j}d.vmax=Math.max(d.vmax,f)}}return d},curve:function(b,c){var a=b.slice(0);"x"==c&&(a[a.length]=a[0]);
return j.map(a,function(b,d){if(0==d)return"M"+b.x+","+b.y;if(isNaN(c)){if("X"==c||"x"==c||"S"==c){var e,f=a[d-1],g=a[d],h,j,r,u=1/6;1==d?(e="x"==c?a[a.length-2]:f,u=1/3):e=a[d-2];d==a.length-1?(h="x"==c?a[1]:g,u=1/3):h=a[d+1];j=Math.sqrt((g.x-f.x)*(g.x-f.x)+(g.y-f.y)*(g.y-f.y));r=Math.sqrt((g.x-e.x)*(g.x-e.x)+(g.y-e.y)*(g.y-e.y));var s=Math.sqrt((h.x-f.x)*(h.x-f.x)+(h.y-f.y)*(h.y-f.y)),v=r*u,u=s*u;v>j/2&&u>j/2?(v=j/2,u=j/2):v>j/2?(v=j/2,u=j/2*s/r):u>j/2&&(u=j/2,v=j/2*r/s);"S"==c&&(e==f&&(v=0),g==
h&&(u=0));j=f.x+v*(g.x-e.x)/r;e=f.y+v*(g.y-e.y)/r;r=g.x-u*(h.x-f.x)/s;f=g.y-u*(h.y-f.y)/s}}else return g=b.x-a[d-1].x,"C"+(b.x-(c-1)*(g/c))+","+a[d-1].y+" "+(b.x-g/c)+","+b.y+" "+b.x+","+b.y;return"C"+(j+","+e+" "+r+","+f+" "+g.x+","+g.y)}).join(" ")},getLabel:function(b,c,a){return d.doIfLoaded("dojo/number",function(d){return(c?d.format(b,{places:a}):d.format(b))||""},function(){return c?b.toFixed(a):b.toString()})}})})},"dojox/charting/scaler/primitive":function(){define(["dojo/_base/lang"],function(g){var j=
g.getObject("dojox.charting.scaler.primitive",!0);return g.mixin(j,{buildScaler:function(f,g,e){f==g&&(f-=0.5,g+=0.5);return{bounds:{lower:f,upper:g,from:f,to:g,scale:e/(g-f),span:e},scaler:j}},buildTicks:function(){return{major:[],minor:[],micro:[]}},getTransformerFromModel:function(f){var g=f.bounds.from,e=f.bounds.scale;return function(d){return(d-g)*e}},getTransformerFromPlot:function(f){var g=f.bounds.from,e=f.bounds.scale;return function(d){return d/e+g}}})})},"dojox/gfx/fx":function(){define("dojo/_base/lang,./_base,./matrix,dojo/_base/Color,dojo/_base/array,dojo/_base/fx,dojo/_base/connect".split(","),
function(g,j,f,h,e,d,c){function b(a,b){this.start=a;this.end=b}function i(a,b,c){this.start=a;this.end=b;this.units=c}function a(a,b){this.start=a;this.end=b;this.temp=new h}function k(a){this.values=a;this.length=a.length}function o(a,b){this.values=a;this.def=b?b:{}}function p(a,b){this.stack=a;this.original=b}function l(b,c,d,e){if(b.values)return new k(b.values);var f,g;g=b.start?j.normalizeColor(b.start):f=c?d?c[d]:c:e;b.end?b=j.normalizeColor(b.end):(f||(f=c?d?c[d]:c:e),b=f);return new a(g,
b)}var m=j.fx={};b.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};i.prototype.getValue=function(a){return(this.end-this.start)*a+this.start+this.units};a.prototype.getValue=function(a){return h.blendColors(this.start,this.end,a,this.temp)};k.prototype.getValue=function(a){return this.values[Math.min(Math.floor(a*this.length),this.length-1)]};o.prototype.getValue=function(a){var b=g.clone(this.def),c;for(c in this.values)b[c]=this.values[c].getValue(a);return b};p.prototype.getValue=
function(a){var b=[];e.forEach(this.stack,function(c){if(c instanceof f.Matrix2D)b.push(c);else if("original"==c.name&&this.original)b.push(this.original);else if("matrix"==c.name){if(c.start instanceof f.Matrix2D&&c.end instanceof f.Matrix2D){var d=new f.Matrix2D,g;for(g in c.start)d[g]=(c.end[g]-c.start[g])*a+c.start[g];b.push(d)}}else c.name in f&&(d=f[c.name],"function"!=typeof d?b.push(d):(g=e.map(c.start,function(b,d){return(c.end[d]-b)*a+b}),d=d.apply(f,g),d instanceof f.Matrix2D&&b.push(d)))},
this);return b};var n=new h(0,0,0,0);m.animateStroke=function(a){if(!a.easing)a.easing=d._defaultEasing;var e=new d.Animation(a),f=a.shape,g;c.connect(e,"beforeBegin",e,function(){g=f.getStroke();var c=a.color,d={},e;if(c)d.color=l(c,g,"color",n);if((c=a.style)&&c.values)d.style=new k(c.values);if(c=a.width){var h=c;h.values?e=new k(h.values):(c=h.start?h.start:e=g?g.width:1,h.end?e=h.end:"number"!=typeof e&&(e=g?g.width:1),e=new b(c,e));d.width=e}if((c=a.cap)&&c.values)d.cap=new k(c.values);if(c=
a.join)if(c.values)d.join=new k(c.values);else if(e=c.start?c.start:g&&g.join||0,c=c.end?c.end:g&&g.join||0,"number"==typeof e&&"number"==typeof c)d.join=new b(e,c);this.curve=new o(d,g)});c.connect(e,"onAnimate",f,"setStroke");return e};m.animateFill=function(a){if(!a.easing)a.easing=d._defaultEasing;var b=new d.Animation(a),e=a.shape,f;c.connect(b,"beforeBegin",b,function(){f=e.getFill();var b=a.color;if(b)this.curve=l(b,f,"",n)});c.connect(b,"onAnimate",e,"setFill");return b};m.animateFont=function(a){if(!a.easing)a.easing=
d._defaultEasing;var b=new d.Animation(a),e=a.shape,f;c.connect(b,"beforeBegin",b,function(){f=e.getFont();var b=a.style,c={},d,g;if(b&&b.values)c.style=new k(b.values);if((b=a.variant)&&b.values)c.variant=new k(b.values);if((b=a.weight)&&b.values)c.weight=new k(b.values);if((b=a.family)&&b.values)c.family=new k(b.values);if((b=a.size)&&b.units)d=parseFloat(b.start?b.start:e.font&&e.font.size||"0"),g=parseFloat(b.end?b.end:e.font&&e.font.size||"0"),c.size=new i(d,g,b.units);this.curve=new o(c,f)});
c.connect(b,"onAnimate",e,"setFont");return b};m.animateTransform=function(a){if(!a.easing)a.easing=d._defaultEasing;var b=new d.Animation(a),e=a.shape,f;c.connect(b,"beforeBegin",b,function(){f=e.getTransform();this.curve=new p(a.transform,f)});c.connect(b,"onAnimate",e,"setTransform");return b};return m})},"dojox/charting/plot2d/_PlotEvents":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(g,j,f,h){return f("dojox.charting.plot2d._PlotEvents",
null,{constructor:function(){this._shapeEvents=[];this._eventSeries={}},destroy:function(){this.resetEvents();this.inherited(arguments)},plotEvent:function(){},raiseEvent:function(e){this.plotEvent(e);var d=g.delegate(e);d.originalEvent=e.type;d.originalPlot=e.plot;d.type="onindirect";j.forEach(this.chart.stack,function(c){if(c!==this&&c.plotEvent)d.plot=c,c.plotEvent(d)},this)},connect:function(e,d){this.dirty=!0;return h.connect(this,"plotEvent",e,d)},events:function(){return!!this.plotEvent.after},
resetEvents:function(){if(this._shapeEvents.length)j.forEach(this._shapeEvents,function(e){e.shape.disconnect(e.handle)}),this._shapeEvents=[];this.raiseEvent({type:"onplotreset",plot:this})},_connectSingleEvent:function(e,d){this._shapeEvents.push({shape:e.eventMask,handle:e.eventMask.connect(d,this,function(c){e.type=d;e.event=c;this.raiseEvent(e);e.event=null})})},_connectEvents:function(e){if(e)e.chart=this.chart,e.plot=this,e.hAxis=this.hAxis||null,e.vAxis=this.vAxis||null,e.eventMask=e.eventMask||
e.shape,this._connectSingleEvent(e,"onmouseover"),this._connectSingleEvent(e,"onmouseout"),this._connectSingleEvent(e,"onclick")},_reconnectEvents:function(e){(e=this._eventSeries[e])&&j.forEach(e,this._connectEvents,this)},fireEvent:function(e,d,c,b){if((e=this._eventSeries[e])&&e.length&&c<e.length)c=e[c],c.type=d,c.event=b||null,this.raiseEvent(c),c.event=null}})})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(g,j,f,h,e){var d=
{};g.setObject("dojo.number",d);d.format=function(b,c){var c=g.mixin({},c||{}),a=j.normalizeLocale(c.locale),a=j.getLocalization("dojo.cldr","number",a);c.customs=a;a=c.pattern||a[(c.type||"decimal")+"Format"];return isNaN(b)||Infinity==Math.abs(b)?null:d._applyPattern(b,a,c)};d._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;d._applyPattern=function(b,c,a){var a=a||{},e=a.customs.group,f=a.customs.decimal,c=c.split(";"),g=c[0],c=c[0>b?1:0]||"-"+g;if(-1!=c.indexOf("%"))b*=100;else if(-1!=c.indexOf("\u2030"))b*=
1E3;else if(-1!=c.indexOf("\u00a4"))e=a.customs.currencyGroup||e,f=a.customs.currencyDecimal||f,c=c.replace(/\u00a4{1,3}/,function(b){return a[["symbol","currency","displayName"][b.length-1]]||a.currency||""});else if(-1!=c.indexOf("E"))throw Error("exponential notation not supported");var h=d._numberPatternRE,g=g.match(h);if(!g)throw Error("unable to find a number expression in pattern: "+c);if(!1===a.fractional)a.places=0;return c.replace(h,d._formatAbsolute(b,g[0],{decimal:f,group:e,places:a.places,
round:a.round}))};d.round=function(b,c,a){a=10/(a||10);return(a*+b).toFixed(c)/a};if(0==(0.9).toFixed()){var c=d.round;d.round=function(b,d,a){var e=Math.pow(10,-d||0),f=Math.abs(b);if(!b||f>=e)e=0;else if(f/=e,0.5>f||0.95<=f)e=0;return c(b,d,a)+(0<b?e:-e)}}d._formatAbsolute=function(b,c,a){a=a||{};if(!0===a.places)a.places=0;if(Infinity===a.places)a.places=6;var c=c.split("."),e="string"==typeof a.places&&a.places.indexOf(","),f=a.places;if(e)f=a.places.substring(e+1);else if(!(0<=f))f=(c[1]||[]).length;
0>a.round||(b=d.round(b,f,a.round));var b=(""+Math.abs(b)).split("."),g=b[1]||"";if(c[1]||a.places){if(e)a.places=a.places.substring(0,e);e=void 0!==a.places?a.places:c[1]&&c[1].lastIndexOf("0")+1;e>g.length&&(b[1]=h.pad(g,e,"0",!0));f<g.length&&(b[1]=g.substr(0,f))}else b[1]&&b.pop();f=c[0].replace(",","");e=f.indexOf("0");-1!=e&&(e=f.length-e,e>b[0].length&&(b[0]=h.pad(b[0],e)),-1==f.indexOf("#")&&(b[0]=b[0].substr(b[0].length-e)));var f=c[0].lastIndexOf(","),j,m;-1!=f&&(j=c[0].length-f-1,c=c[0].substr(0,
f),f=c.lastIndexOf(","),-1!=f&&(m=c.length-f-1));c=[];for(f=b[0];f;)e=f.length-j,c.push(0<e?f.substr(e):f),f=0<e?f.slice(0,e):"",m&&(j=m,delete m);b[0]=c.reverse().join(a.group||",");return b.join(a.decimal||".")};d.regexp=function(b){return d._parseInfo(b).regexp};d._parseInfo=function(b){var b=b||{},c=j.normalizeLocale(b.locale),c=j.getLocalization("dojo.cldr","number",c),a=b.pattern||c[(b.type||"decimal")+"Format"],f=c.group,g=c.decimal,h=1;if(-1!=a.indexOf("%"))h/=100;else if(-1!=a.indexOf("\u2030"))h/=
1E3;else{var l=-1!=a.indexOf("\u00a4");l&&(f=c.currencyGroup||f,g=c.currencyDecimal||g)}c=a.split(";");1==c.length&&c.push("-"+c[0]);c=e.buildGroupRE(c,function(a){a="(?:"+e.escapeString(a,".")+")";return a.replace(d._numberPatternRE,function(a){var c={signed:!1,separator:b.strict?f:[f,""],fractional:b.fractional,decimal:g,exponent:!1},a=a.split("."),e=b.places;1==a.length&&1!=h&&(a[1]="###");if(1==a.length||0===e)c.fractional=!1;else{void 0===e&&(e=b.pattern?a[1].lastIndexOf("0")+1:Infinity);if(e&&
void 0==b.fractional)c.fractional=!0;!b.places&&e<a[1].length&&(e+=","+a[1].length);c.places=e}a=a[0].split(",");if(1<a.length&&(c.groupSize=a.pop().length,1<a.length))c.groupSize2=a.pop().length;return"("+d._realNumberRegexp(c)+")"})},!0);l&&(c=c.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(a,c,d,f){a=e.escapeString(b[["symbol","currency","displayName"][d.length-1]]||b.currency||"");c=c?"[\\s\\xa0]":"";f=f?"[\\s\\xa0]":"";return!b.strict?(c&&(c+="*"),f&&(f+="*"),"(?:"+c+a+f+")?"):c+a+
f}));return{regexp:c.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:f,decimal:g,factor:h}};d.parse=function(b,c){var a=d._parseInfo(c),e=RegExp("^"+a.regexp+"$").exec(b);if(!e)return NaN;var f=e[1];if(!e[1]){if(!e[2])return NaN;f=e[2];a.factor*=-1}f=f.replace(RegExp("["+a.group+"\\s\\xa0]","g"),"").replace(a.decimal,".");return f*a.factor};d._realNumberRegexp=function(b){b=b||{};if(!("places"in b))b.places=Infinity;if("string"!=typeof b.decimal)b.decimal=".";if(!("fractional"in b)||/^0/.test(b.places))b.fractional=
[!0,!1];if(!("exponent"in b))b.exponent=[!0,!1];if(!("eSigned"in b))b.eSigned=[!0,!1];var c=d._integerRegexp(b),a=e.buildGroupRE(b.fractional,function(a){var c="";a&&0!==b.places&&(c="\\"+b.decimal,c=Infinity==b.places?"(?:"+c+"\\d+)?":c+("\\d{"+b.places+"}"));return c},!0),f=e.buildGroupRE(b.exponent,function(a){return a?"([eE]"+d._integerRegexp({signed:b.eSigned})+")":""}),c=c+a;a&&(c="(?:(?:"+c+")|(?:"+a+"))");return c+f};d._integerRegexp=function(b){b=b||{};if(!("signed"in b))b.signed=[!0,!1];
if("separator"in b){if(!("groupSize"in b))b.groupSize=3}else b.separator="";var c=e.buildGroupRE(b.signed,function(a){return a?"[-+]":""},!0),a=e.buildGroupRE(b.separator,function(a){if(!a)return"(?:\\d+)";a=e.escapeString(a);" "==a?a="\\s":"\u00a0"==a&&(a="\\s\\xa0");var c=b.groupSize,d=b.groupSize2;return d?(a="(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+a+"]\\d{"+d+"})*["+a+"]\\d{"+c+"})",0<c-d?"(?:"+a+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":a):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+a+"]\\d{"+c+"})*)"},!0);return c+a};
return d})},"JBrowse/View/Track/FeatureDetailMixin":function(){define(["dojo/_base/declare","dojo/_base/array","JBrowse/Util","JBrowse/View/FASTA"],function(g,j,f,h){return g(null,{_setupEventHandlers:function(){var e=this.config.events||{};if(!e.click)e.click=(this.config.style||{}).linkTemplate?{action:"newWindow",url:this.config.style.linkTemplate}:{action:"contentDialog",title:"{type} {name}",content:dojo.hitch(this,"defaultFeatureDetail")};var e=dojo.clone(e),d;for(d in this.config){var c=d.replace(/^on(?=[A-Z])/,
"");c!=d&&(e[c.toLowerCase()]=this.config[d])}for(d in e)"string"==typeof e[d]&&(e[d]={url:e[d]});this.eventHandlers=e;this.eventHandlers.click=this._makeClickHandler(this.eventHandlers.click)},defaultFeatureDetail:function(e,d,c,b){var g=dojo.hitch(this,"_fmtDetailField"),b=b||dojo.create("div",{className:"detail feature-detail feature-detail-"+e.name,innerHTML:""}),c=dojo.create("div",{className:"core"},b);c.innerHTML+='<h2 class="sectiontitle">Primary Data</h2>';c.innerHTML+=g("Name",d.get("name"));
c.innerHTML+=g("Type",d.get("type"));c.innerHTML+=g("Description",d.get("note"));c.innerHTML+=g("Position",f.assembleLocString({start:d.get("start"),end:d.get("end"),ref:this.refSeq.name,strand:d.get("strand")}));c.innerHTML+=g("Length",f.addCommas(d.get("end")-d.get("start"))+" bp");c=j.filter(d.tags(),function(a){return!{name:1,start:1,end:1,strand:1,note:1,subfeatures:1,type:1}[a.toLowerCase()]});if(c.length){var a='<div class="additional"><h2 class="sectiontitle">Attributes</h2>';dojo.forEach(c.sort(),
function(b){a+=g(b,d.get(b))});a+="</div>";b.innerHTML+=a}c=dojo.create("div",{className:"field_container feature_sequence"},b);dojo.create("h2",{className:"field feature_sequence",innerHTML:"Region sequence"},c);var k="feature_sequence"+this._uniqID(),o=dojo.create("div",{id:k,innerHTML:'<div style="height: 12em">Loading...</div>',className:"value feature_sequence"},c);e.browser.getStore("refseqs",dojo.hitch(this,function(a){o=dojo.byId(k)||o;a?a.getFeatures({ref:this.refSeq.name,start:d.get("start"),
end:d.get("end")},dojo.hitch(this,function(a){a=a.get("seq");o=dojo.byId(k)||o;o.innerHTML="";(new h({width:62,htmlMaxRows:10})).renderHTML({ref:this.refSeq.name,start:d.get("start"),end:d.get("end"),strand:d.get("strand"),type:d.get("type")},-1==d.get("strand")?f.revcom(a):a,o)}),function(){},dojo.hitch(this,function(){o=dojo.byId(k)||o;o.innerHTML='<span class="ghosted">reference sequence not available</span>'})):o.innerHTML='<span class="ghosted">reference sequence not available</span>'}));(c=
d.get("subfeatures"))&&c.length&&this._subfeaturesDetail(e,c,b);return b},_uniqID:function(){this._idCounter=this._idCounter||0;return this._idCounter++},_subfeaturesDetail:function(e,d,c){c=dojo.create("div",{className:"field_container subfeatures"},c);dojo.create("h2",{className:"field subfeatures",innerHTML:"Subfeatures"},c);var b=dojo.create("div",{className:"value subfeatures"},c);j.forEach(d||[],function(c){this.defaultFeatureDetail(e,c,null,dojo.create("div",{className:"detail feature-detail subfeature-detail feature-detail-"+
e.name+" subfeature-detail-"+e.name,innerHTML:""},b))},this)}})})},"JBrowse/View/FASTA":function(){define(["dojo/_base/declare","JBrowse/Util"],function(g,j){return g(null,{constructor:function(f){this.width=f.width||78;this.htmlMaxRows=f.htmlMaxRows||15},renderHTML:function(f,g,e){var f=this.renderText(f,g),g=f.match(/\n/g).length+1,e=dojo.create("textarea",{className:"fasta",cols:this.width,rows:Math.min(g,this.htmlMaxRows),readonly:!0},e),d=0;e.innerHTML=f.replace(/\n/g,function(){return d++?"":
"\n"});return e},renderText:function(f,g){return">"+f.ref+" "+j.assembleLocString(f)+(f.type?" class="+f.type:"")+" length="+(f.end-f.start)+"\n"+this._wrap(g,this.width)},_wrap:function(f,g){g=g||this.width;return f.replace(RegExp("(.{"+g+"})","g"),"$1\n")}})})},"JBrowse/View/GranularRectLayout":function(){define(["dojo/_base/declare"],function(g){return g(null,{constructor:function(g){this.pitchX=g.pitchX||10;this.pitchY=g.pitchY||10;this.bitmap=[];this.rectangles={};this.pTotalHeight=this.maxTop=
0},addRect:function(g,f,h,e){if(this.rectangles[g])return this.rectangles[g].top*this.pitchY;f=Math.floor(f/this.pitchX);h=Math.floor(h/this.pitchX);e=Math.ceil(e/this.pitchY);f={id:g,l:f,r:h,mX:Math.floor((f+h)/2),h:e};for(h=0;h<=this.pTotalHeight&&this._collides(f,h);h++);f.top=h;this._addRectToBitmap(f);this.rectangles[g]=f;this.pTotalHeight=Math.max(this.pTotalHeight||0,h+e);return h*this.pitchY},_collides:function(g,f){var h=this.bitmap,e=h[f];if(e&&(e[g.l]||e[g.r]||e[g.mX]))return!0;for(var e=
f+g.h,d=f;d<e;d++){var c=h[d];if(c){if(c.allFilled)return!0;if(c.length>g.l)for(var b=g.l;b<=g.r;b++)if(c[b])return!0}}return!1},_autovivify:function(g,f){var h;if(!(h=g[f]))h=[],g[f]=h;return h},_addRectToBitmap:function(g){var f=this.bitmap,h=this._autovivify,e=g.top+g.h;if(2E4<g.r-g.l)for(var d=g.top;d<e;d++)h(f,d).allFilled=!0;else for(d=g.top;d<e;d++)for(var c=h(f,d),b=g.l;b<=g.r;b++)c[b]=!0},discardRange:function(){},hasSeen:function(g){return!!this.rectangles[g]},cleanup:function(){},getTotalHeight:function(){return this.pTotalHeight*
this.pitchY}})})},"JBrowse/View/Track/FixedImage/Wiggle":function(){define(["dojo/_base/declare","JBrowse/View/Track/FixedImage","JBrowse/View/Track/YScaleMixin"],function(g,j,f){return g([j,f],{constructor:function(){},updateStaticElements:function(f){this.inherited(arguments);this.updateYScaleFromViewDimensions(f)},makeImageLoadHandler:function(f,e,d,c){return this.inherited(arguments,[f,e,d,dojo.hitch(this,function(){this.makeWiggleYScale();c&&c()})])},makeWiggleYScale:function(){var f=this;this.store.getGlobalStats(function(e){f.yscale||
f.makeYScale({min:e.scoreMin,max:e.scoreMax})})}})})},"JBrowse/View/Track/FixedImage":function(){define(["dojo/_base/declare","JBrowse/View/Track/BlockBased"],function(g,j){return g(j,{constructor:function(f){this.trackPadding=f.trackPadding||0},handleImageError:function(f){(f.currentTarget||f.srcElement).style.display="none";dojo.stopEvent(f)},makeImageLoadHandler:function(f,g,e,d){var c=dojo.hitch(this,function(){this.imageHeight=f.height;f.style.height=f.height+"px";f.style.width=100*(f.baseWidth/
e)+"%";this.heightUpdate(f.height,g);d&&d();return!0});return dojo.isIE?function(){window.setTimeout(c,250)}:c},fillBlock:function(f){var g=f.blockIndex,e=f.block,d=f.leftBase,c=f.rightBase,b=f.finishCallback||function(){},i=c-d;this.store.getImages({scale:f.scale,start:d,end:c},dojo.hitch(this,function(a){dojo.forEach(a,function(a){a.className="image-track";if(!a.parentNode||!a.parentNode.parentNode){a.style.position="absolute";a.style.left=100*((a.startBase-d)/i)+"%";switch(this.config.align){case "top":a.style.top=
"0px";break;default:a.style.bottom=this.trackPadding+"px"}e.appendChild(a)}var b=this.makeImageLoadHandler(a,g,i);a.complete?b():a.onload=b},this);b()}),dojo.hitch(this,function(a){404!=a.status&&this.fillBlockError(g,e,a);b()}))},startZoom:function(){},endZoom:function(){this.clear()},clear:function(){this.inherited(arguments)},transfer:function(f,g){if(f&&g)for(var e=f.childNodes,d=g.startBase,c=g.endBase,b,i=0;i<e.length;i++)if(b=e[i],"startBase"in b&&b.startBase<c&&b.startBase+b.baseWidth>d)b.style.left=
100*((b.startBase-d)/(c-d))+"%",g.appendChild(b)}})})},"JBrowse/View/Track/Wiggle":function(){define(["JBrowse/View/Track/Wiggle/XYPlot"],function(g){return g})},"JBrowse/View/Track/Wiggle/XYPlot":function(){define("dojo/_base/declare,dojo/_base/array,dojo/on,JBrowse/View/Track/WiggleBase,JBrowse/View/Track/YScaleMixin,JBrowse/Util,JBrowse/Digest/Crc32".split(","),function(g,j,f,h,e,d,c){return g([h,e],{_defaultConfig:function(){return d.deepUpdate(dojo.clone(this.inherited(arguments)),{style:{pos_color:"blue",
neg_color:"red",origin_color:"#888"}})},_getScaling:function(b,d){this.getRegionStats(this._getScalingRegion(),dojo.hitch(this,function(a){var d=c.objectFingerprint(a);if(!this.lastScaling||this.lastScaling._statsFingerprint!=d){a=this._calculateScaling(a);if(0.005>Math.abs(a.min/a.max))a.min=0;this.makeYScale({fixBounds:!0,min:a.min,max:a.max});a.min=this.ruler.scaler.bounds.lower;a.max=this.ruler.scaler.bounds.upper;a.range=a.max-a.min;this.lastScaling=a}b(this.lastScaling)}),d)},updateStaticElements:function(b){this.inherited(arguments);
this.updateYScaleFromViewDimensions(b)},_drawFeatures:function(b,c,a,d,e,f,g,h){var j=e.getContext("2d"),q=e.height,r=dojo.hitch(this,function(a){return q*(1-h.normalize.call(this,a))}),u=r(h.origin),s=this.config.style.pos_color,v=this.config.style.neg_color,t=this.config.style.clip_marker_color,x=this.config.style.bg_color,w=this.config.disable_clip_markers;dojo.forEach(f,function(a,b){var c=g[b],d=a.get("score");c.t=r(d);if(x&&0<=c.t)j.fillStyle=x,j.fillRect(c.l,0,c.w,q);if(c.t<=q)if(c.t<=u){if(j.fillStyle=
s,j.fillRect(c.l,c.t,c.w,u-c.t+1),!w&&0>c.t)j.fillStyle=t||v,j.fillRect(c.l,0,c.w,2)}else if(j.fillStyle=v,j.fillRect(c.l,u,c.w,c.t-u+1),!w&&c.t>=q)j.fillStyle=t||s,j.fillRect(c.l,q-3,c.w,2)},this)},_postDraw:function(b,c,a,d,e,f,g,h){var j=e.getContext("2d"),q=e.height,r=dojo.hitch(this,function(a){return q*(1-h.normalize.call(this,a))});this.config.variance_band&&this.getGlobalStats(dojo.hitch(this,function(a){if("scoreMean"in a&&"scoreStdDev"in a){var b=function(b,c,d){j.fillStyle=c;var c=r(a.scoreMean+
b),f=r(a.scoreMean-b)-c,f=Math.max(1,f);j.fillRect(0,c,e.width,f);j.font="12px sans-serif";0<b?(j.fillText("+"+d,2,c),j.fillText("-"+d,2,c+f)):j.fillText(d,2,c)};b(2*a.scoreStdDev,"rgba(0,0,0,0.12)","2\u03c3");b(a.scoreStdDev,"rgba(0,0,0,0.25)","1\u03c3");b(0,"rgba(255,255,0,0.7)","mean")}}));b=this.config.style.origin_color;if("string"==typeof b&&!{none:1,off:1,no:1,zero:1}[b])c=r(h.origin),j.fillStyle=b,j.fillRect(0,c,e.width-1,1)}})})},"JBrowse/View/Track/WiggleBase":function(){define("dojo/_base/declare,dojo/_base/array,dojo/on,JBrowse/View/Track/Canvas,JBrowse/View/Track/ExportMixin,JBrowse/Util,JBrowse/Digest/Crc32".split(","),
function(g,j,f,h,e,d,c){return g([h,e],{constructor:function(b){this.store=b.store},_defaultConfig:function(){return{maxExportSpan:5E5}},_getScaling:function(b,d){this.getRegionStats(this._getScalingRegion(),dojo.hitch(this,function(a){var e=c.objectFingerprint(a);if(!this.lastScaling||this.lastScaling._statsFingerprint!=e)try{this.lastScaling=this._calculateScaling(a),b(this.lastScaling)}catch(f){d(f)}else b(this.lastScaling)}),d)},_getScalingRegion:function(){return dojo.clone(this.browser.getCurrentRefSeq())},
_calculateScaling:function(b){if("z_score"==this.config.autoscale&&!this.config.scale||"z_score"==this.config.scale&&!this.config.autoscale)this.config.scale="z_score",this.config.autoscale="z_score";var d=parseFloat(this.config.z_score_bound)||4,a="min_score"in this.config?parseFloat(this.config.min_score):function(){switch(this.config.autoscale){case "z_score":return Math.max(-d,(b.scoreMin-b.scoreMean)/b.scoreStdDev);case "global":return b.scoreMin;default:return Math.max(b.scoreMin,b.scoreMean-
d*b.scoreStdDev)}}.call(this),e="max_score"in this.config?parseFloat(this.config.max_score):function(){switch(this.config.autoscale){case "z_score":return Math.min(d,(b.scoreMax-b.scoreMean)/b.scoreStdDev);case "global":return b.scoreMax;default:return Math.min(b.scoreMax,b.scoreMean+d*b.scoreStdDev)}}.call(this);if("number"!=typeof e||isNaN(e))throw"cannot display track "+this.name+", could not determine max_score.  Do you need to set max_score in its configuration?";if("number"!=typeof a||isNaN(a))throw"cannot display track "+
this.name+", could not determine min_score.  Do you need to set min_score in its configuration?";"log"==this.config.scale&&(e=Math.log(e),a=a?Math.log(a):0);var f=parseFloat(this.config.data_offset)||0,g="bicolor_pivot"in this.config?"mean"==this.config.bicolor_pivot?b.scoreMean||0:"zero"==this.config.bicolor_pivot?0:parseFloat(this.config.bicolor_pivot):"z_score"==this.config.scale?b.scoreMean||0:"log"==this.config.scale?1:0,h={offset:f,min:a+f,max:e+f,range:e-a,origin:g,_statsFingerprint:c.objectFingerprint(b)};
h.normalize=function(){switch(this.config.scale){case "z_score":return function(c){with(h)return(c+f-b.scoreMean)/b.scoreStdDev-a/range};case "log":return function(b){with(h)return(Math.log(b+f)-a)/range};default:return function(b){with(h)return(b+f-a)/range}}}.call(this);return h},getFeatures:function(b,c,a){this.store.getFeatures.apply(this.store,arguments)},getGlobalStats:function(b,c){this.store.getGlobalStats(b,c)},getRegionStats:function(b,c,a){this.store.getRegionStats(b,c,a)},fillBlock:function(b){var c=
b.blockIndex,a=b.block,d=b.leftBase,e=b.rightBase,f=b.scale,g=b.finishCallback||function(){},h=e-d,n=Math.ceil((e-d)*f),q=parseInt((this.config.style||{}).height)||100;this.heightUpdate(q,c);try{dojo.create("canvas").getContext("2d").fillStyle="red"}catch(r){this.fatalError="This browser does not support HTML canvas elements.";this.fillBlockError(c,a,this.fatalError);return}this._getScaling(dojo.hitch(this,function(b){var r=dojo.create("canvas",{height:q,width:n,style:{cursor:"default",width:"100%",
height:q+"px"},innerHTML:"Your web browser cannot display this type of track.",className:"canvas-track"},a);r.startBase=d;var v=[];this.getFeatures({ref:this.refSeq.name,basesPerSpan:1/f,scale:f,start:d,end:e+1},function(a){v.push(a)},dojo.hitch(this,function(){if(a.parentNode){var t=j.map(v,function(a){return this._featureRect(f,d,r,a,b)},this);this._preDraw(f,d,e,a,r,v,t,b);this._drawFeatures(f,d,e,a,r,v,t,b);this._postDraw(f,d,e,a,r,v,t,b);this._makeScoreDisplay(f,d,e,a,r,v,t);this.heightUpdate(r.height,
c);if(!r.parentNode||!r.parentNode.parentNode)switch(r.style.position="absolute",r.style.left=100*((r.startBase-d)/h)+"%",this.config.align){case "top":r.style.top="0px";break;default:r.style.bottom=this.trackPadding+"px"}g()}}))}),dojo.hitch(this,function(b){this.error=b;this.fillBlockError(c,a);g()}))},_featureRect:function(b,c,a,d){b={w:Math.ceil((d.get("end")-d.get("start"))*b),l:Math.round((d.get("start")-c)*b)};if(0>b.l)b.w+=b.l,b.l=0;b.w=Math.min(a.width-b.l,b.w);b.r=b.w+b.l;return b},_preDraw:function(){},
_drawFeatures:function(){},_postDraw:function(){},_calculatePixelScores:function(b,c,a){var d=Array(b);dojo.forEach(c,function(b,c){for(var e=a[c],f=e.r,g=b.get("score"),e=Math.round(e.l);e<f;e++)d[e]=e in d?Math.max(d[e],g):g},this);return d},_makeScoreDisplay:function(b,c,a,d,e,g,h){var j=this._calculatePixelScores(e.width,g,h),n=dojo.create("div",{className:"wiggleValueDisplay",style:{position:"fixed",display:"none",zIndex:15}},d),q=dojo.create("div",{className:"wigglePositionIndicator",style:{position:"fixed",
display:"none",height:e.height+"px",zIndex:15}},d);dojo.forEach([e,q,n],function(a){f(a,"mousemove",dojo.hitch(this,function(a){var b=dojo.position(e),c=a.pageX,a=a.pageX-b.x;q.style.display="block";q.style.left=c+"px";q.style.top=b.y+"px";this._showPixelValue(n,j[Math.round(a)])?(n.style.left=c+"px",n.style.top=b.y+"px",n.style.display="block"):n.style.display="none"}))},this);f(d,"mouseout",function(a){var b=a.srcElement||a.target,a=a.relatedTarget||a.toElement;if(!b||!a||b.parentNode!=a.parentNode)n.style.display=
"none",q.style.display="none"})},_showPixelValue:function(b,c){return"number"==typeof c?(b.innerHTML=parseFloat(c.toPrecision(6)),!0):!1},_exportFormats:function(){return["bedGraph","Wiggle","GFF3"]}})})},"JBrowse/View/Track/Canvas":function(){define(["dojo/_base/declare","JBrowse/View/Track/BlockBased"],function(g,j){return g(j,{constructor:function(f){this.trackPadding=f.trackPadding||0;if(!("style"in this.config))this.config.style={}},testCanvasSupport:function(f,g){try{return dojo.create("canvas").getContext("2d").fillStyle=
"red",!0}catch(e){return this.fatalError="This browser does not support HTML canvas elements.",this.fillBlockError(f,g,this.fatalError),!1}},fillBlock:function(f){var g=f.blockIndex,e=f.leftBase,d=f.rightBase,c=f.scale;this.testCanvasSupport(g,f.block)&&(this.heightUpdate(this.height,g),this.renderCanvases(c,e,d,dojo.hitch(this,"layoutCanvases",f)))},layoutCanvases:function(f,g){var e=f.block,d=f.leftBase;dojo.forEach(g,function(c){this.heightUpdate(c.height,blockIndex);c.className="canvas-track";
if(!c.parentNode||!c.parentNode.parentNode){c.style.position="absolute";c.style.left=100*((c.startBase-d)/blockWidth)+"%";switch(this.config.align){case "top":c.style.top="0px";break;default:c.style.bottom=this.trackPadding+"px"}e.appendChild(c)}},this)},startZoom:function(f,g,e){this.empty||this.preRenderCanvases(f,g,e)},preRenderCanvases:function(){},endZoom:function(){this.clear()},clear:function(){this.inherited(arguments)},transfer:function(f,g){if(f&&g)for(var e=f.childNodes,d=g.startBase,c=
g.endBase,b,i=0;i<e.length;i++)if(b=e[i],"startBase"in b&&b.startBase<c&&b.startBase+b.baseWidth>d)b.style.left=100*((b.startBase-d)/(c-d))+"%",g.appendChild(b)}})})},"JBrowse/View/Track/Wiggle/Density":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Color","JBrowse/View/Track/WiggleBase","JBrowse/Util"],function(g,j,f,h){return g(h,{_defaultConfig:function(){return{maxExportSpan:5E5,style:{height:32}}},_drawFeatures:function(e,d,c,b,g,a,h,j){var p=g.getContext("2d"),l=g.height,
m=j.normalize,n="function"==typeof this.config.style.color?this.config.style.color:function(){var a=new f(this.config.style.pos_color||"#00f"),b=new f(this.config.style.neg_color||"#f00"),c=new f("white"),d=new f("black"),e=new f(this.config.style.bg_color||"rgba(230,230,230,0.6)"),g=new f(this.config.style.clip_marker_color),h=this.config.disable_clip_markers,i=m(j.origin);return function(j){j=j.get("score");j=m(j);return h||1>=j&&0<=j?f.blendColors(e,j>=i?a:b,Math.abs(j-i)):g||(1<j?c:d)}}.call(this);
dojo.forEach(a,function(a,b){var c=h[b];p.fillStyle=""+n(a);p.fillRect(c.l,0,c.w,l)})},_postDraw:function(){}})})},"JBrowse/View/Track/Alignments":function(){define(["dojo/_base/declare","dojo/_base/array","JBrowse/Util","JBrowse/View/Track/HTMLFeatures","JBrowse/View/Track/MismatchesMixin"],function(g,j,f,h,e){return g([h,e],{_defaultConfig:function(){return f.deepUpdate(dojo.clone(this.inherited(arguments)),{maxFeatureScreenDensity:1.5,layoutPitchY:4,style:{_defaultLabelScale:50,className:"alignment",
arrowheadClass:"arrowhead",centerChildrenVertically:!0,showMismatches:!0,showSubfeatures:!1}})},renderFeature:function(d,c,b,e,a,f,g,h){var j=this.inherited(arguments),m=Math.max(d.get("start"),g),n=Math.min(d.get("end"),h);this.config.style.showMismatches&&this._drawMismatches(d,j,e,m,n);d.get("multi_segment_template")&&!d.get("multi_segment_all_aligned")&&(j.className+=" missing_mate");return j},handleSubFeatures:function(d,c,b,e,a){this.config.style.showSubfeatures&&this.inherited(arguments)},
_drawMismatches:function(d,c,b,e,a){var f=a-e;if(1<f*b){var g=this._getMismatches(d),h=this.getCharacterMeasurements(),l=b>=h.w;j.forEach(g,function(g){var h=d.get("start")+g.start,j=h+g.length;if(!(j<=e||h>=a)){var o=g.base,p=Math.max(h,e),j=Math.min(j,a),s=j-p,v=dojo.create("span",{className:g.type+" base_"+o.toLowerCase(),style:{position:"absolute",left:100*(p-e)/f+"%",width:1<b*s?100*s/f+"%":"1px"}},c);if(!l)v.title=o;if(l&&20>=g.length)for(var t=0;t<g.length;t++){var x=h+t;x>=p&&x<=j&&dojo.create("span",
{className:"base base_"+o.toLowerCase(),style:{position:"absolute",width:b+"px",left:100*((x-p)/s)+"%"},innerHTML:o},v)}}},this)}},getCharacterMeasurements:function(){if(!this._measurements)this._measurements=this._measureSequenceCharacterSize(this.div);return this._measurements},_measureSequenceCharacterSize:function(d){var c=dojo.create("div",{innerHTML:'<span class="base mismatch">A</span><span class="base mismatch">C</span><span class="base mismatch">T</span><span class="base mismatch">G</span><span class="base mismatch">N</span>',
style:{visibility:"hidden",position:"absolute",left:"0px"}},d),b={w:c.clientWidth/5,h:c.clientHeight};d.removeChild(c);return b}})})},"JBrowse/View/Track/MismatchesMixin":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Color","JBrowse/Util"],function(g,j,f,h){return g(null,{defaultFeatureDetail:function(e,d){var c=dojo.hitch(this,function(a,b){a=h.ucFirst(a.replace(/_/g," "));return this._fmtDetailField(a,b)}),b=dojo.create("div",{className:"detail feature-detail feature-detail-"+
e.name,innerHTML:""});b.innerHTML+=c("Name",d.get("name"));b.innerHTML+=c("Type",d.get("type"));b.innerHTML+=c("Score",d.get("score"));b.innerHTML+=c("Description",d.get("note"));b.innerHTML+=c("Position",h.assembleLocString({start:d.get("start"),end:d.get("end"),ref:this.refSeq.name})+({1:" (+)","-1":" (-)","0":" (no strand)"}[d.get("strand")]||""));d.get("seq");d.get("seq")&&(b.innerHTML+=c("Sequence and Quality",this._renderSeqQual(d)));var f=j.filter(d.tags(),function(a){return!{name:1,score:1,
start:1,end:1,strand:1,note:1,subfeatures:1,type:1}[a.toLowerCase()]}).sort();dojo.forEach(f,function(a){b.innerHTML+=c(a,d.get(a))});return b},_renderSeqQual:function(e){var d=e.get("seq"),e=e.get("qual")||"";if(!d)return"";for(var e=e.split(/\s+/),c=(""+Math.max.apply(Math,e)).length,b=" ";b.length<c-1;)b+=" ";for(var d=j.map(d,function(a){return a+b}),f=function(a,b){return"<tr"+(b?' class="'+b+'"':"")+">"+j.map(a,function(a){return"<td>"+a+"</td>"}).join("")+"</tr>"},a="",c=Math.round(50/c);d.length;){var g=
d.slice(0,Math.min(d.length,c)),d=d.slice(c),a=a+f(g,"seq");e.length&&(g=e.slice(0,Math.min(e.length,c)),e=e.slice(c),a+=f(g,"qual"))}return'<table class="baseQuality">'+a+"</table>"},_getMismatches:function(e){var d=[];e.get("MD")&&d.push.apply(d,this._mdToMismatches(e,e.get("MD")));e.get("cigar")&&d.push.apply(d,this._cigarToMismatches(e,e.get("cigar")));return d},_parseCigar:function(e){return j.map(e.match(/\d+\D/g),function(d){return[d.match(/\D/)[0].toUpperCase(),parseInt(d)]})},_cigarToMismatches:function(e,
d){var c=this._parseCigar(d),b=0,f=[];j.forEach(c,function(a){var c=a[0].toUpperCase();c&&(a=a[1],"I"==c?f.push({start:b,type:"insertion",base:""+a,length:1}):"D"==c?f.push({start:b,type:"deletion",base:"*",length:a}):"N"==c?f.push({start:b,type:"skip",base:"N",length:a}):"X"==c&&f.push({start:b,type:"mismatch",base:"X",length:a}),b+=a)});return f},_mdToMismatches:function(e,d){var c=[],b={start:0,base:"",length:0,type:"mismatch"},f=e.get("seq"),a=function(){c.push(b);b={start:b.start+b.length,length:0,
base:"",type:"mismatch"}};j.forEach(d.match(/(\d+|\^[a-z]+|[a-z])/ig),function(c){if(c.match(/^\d/))b.start+=parseInt(c);else if(c.match(/^\^/))b.length=c.length-1,b.base="*",b.type="deletion",a();else if(c.match(/^[a-z]/i))for(var d=0;d<c.length;d++)b.length=1,b.base=f?f.substr(b.start,1):"X",a()});return c},_getStyleSheets:function(e){var d=[];j.forEach(e,function(c){d.push(c);j.forEach(c.cssRules||c.rules,function(b){b.styleSheet&&d.push.apply(d,this._getStyleSheets([b.styleSheet]))},this)},this);
return d},colorForBase:function(e){this._baseStyles=this._baseStyles||function(){var d={},c=this._getStyleSheets(document.styleSheets);j.forEach(c,function(b){(b=b.rules||b.cssRules)&&j.forEach(b,function(b){var a=/^\.base_([^\s_]+)$/.exec(b.selectorText);if(a&&a[1]){var c=a[1];if((a=/\#[0-9a-f]{3,6}|(?:rgb|hsl)a?\([^\)]*\)/gi.exec(b.cssText))&&a[0])d[c.toLowerCase()]=a[0],d[c.toUpperCase()]=a[0]}})});return d}.call(this);return this._baseStyles[e]||"black"}})})},"JBrowse/View/Track/Alignments2":function(){define(["dojo/_base/declare",
"dojo/_base/array","JBrowse/Util","JBrowse/View/Track/CanvasFeatures","JBrowse/View/Track/MismatchesMixin"],function(g,j,f,h,e){return g([h,e],{constructor:function(){if(!this.config.style.showMismatches)this._drawMismatches=function(){}},_defaultConfig:function(){return f.deepUpdate(dojo.clone(this.inherited(arguments)),{style:{color:function(d){var c=d.get("multi_segment_template")&&!d.get("multi_segment_all_aligned"),b=d.get("strand");return c?this.getStyle(d,"color_missing_mate"):1==b||"+"==b?
this.getStyle(d,"color_fwd_strand"):-1==b||"-"==b?this.getStyle(d,"color_rev_strand"):this.colorForBase("reference")},color_fwd_strand:"#EC8B8B",color_rev_strand:"#898FD8",color_missing_mate:"#D11919",border_color:null,height:7,marginBottom:1,showMismatches:!0,mismatchFont:"bold 10px Courier New,monospace"}})},renderFeature:function(d,c,b){this.inherited(arguments);0.3<c.scale&&this._drawMismatches(d,c,b)},_drawMismatches:function(d,c,b){var e=b.f;if(1<b.w){var c=this._getMismatches(e),a=this.getCharacterMeasurements(d);
j.forEach(c,function(c){var f=e.get("start")+c.start,g=f+c.length,h=b.h,f=b.toX(f),j=b.t,g=b.toX(g)-f;if("mismatch"==c.type||"deletion"==c.type){if(d.fillStyle=this.colorForBase(c.base),d.fillRect(f,j,g,h),g>=a.w&&h>=a.h-3)d.font=this.config.style.mismatchFont,d.fillStyle="deletion"==c.type?"white":"black",d.fillText(c.base,f+(g-a.w)/2+1,j+h-(h-a.h+4)/2)}else if("insertion"==c.type){if(d.fillStyle="black",d.fillRect(f-1,j,2,h),g>=a.w&&h>=a.h-3)d.font=this.config.style.mismatchFont,d.fillStyle="black",
d.fillText("("+c.base+")",f+2,j+h-(h-a.h+4)/2)}else if("skip"==c.type)d.clearRect(f,j,g,h),d.fillStyle="#333",d.fillRect(f,j+(h-2)/2,g,2)},this)}},getCharacterMeasurements:function(){var d;if(!(d=this.charSize)){var c;try{c=(this.config.style.mismatchFont.match(/(\d+)px/i)||[])[1]}catch(b){}c=c||Infinity;d={w:c,h:c}}return this.charSize=d}})})},"JBrowse/View/Track/CanvasFeatures":function(){define("dojo/_base/declare,dojo/dom-construct,dojo/_base/array,dojo/dom-geometry,dojo/on,JBrowse/View/GranularRectLayout,JBrowse/View/Track/Canvas,JBrowse/Errors,JBrowse/View/Track/FeatureDetailMixin".split(","),
function(g,j,f,h,e,d,c,b,i){var a=g(null,{constructor:function(a){a=a.canvas;this.canvasDims={h:a.height,w:a.width};this.byCoord=Array(a.width);for(var b=0;b<a.width;b++)this.byCoord[b]=Array(a.height);this.byID={}},getByID:function(a){return this.byID[a]},getByCoord:function(a,b){return(this.byCoord[a]||[])[b]},_clampCoord:function(a,b,c){return Math.round(Math.max(b,Math.min(a,c)))},addAll:function(a){var b=this.byCoord,c=this.byID,d=this.canvasDims.w,e=this.canvasDims.h;f.forEach(a,function(a){for(var f=
0;f<a.w;++f)for(var g=0;g<a.h;++g){var h=this._clampCoord(a.l+f,0,d-1),i=this._clampCoord(a.t+g,0,e-1);b[h][i]=a}c[a.f.id()]=a},this)}});return g([c,i],{constructor:function(){this._setupEventHandlers()},_defaultConfig:function(){return{maxFeatureScreenDensity:400,style:{color:"goldenrod",mouseovercolor:"rgba(0,0,0,0.3)",border_color:null,height:11,marginBottom:1}}},getStyle:function(a,b){var c=this.config.style[b];return"function"==typeof c?c.call(this,a,b,null,null,this):c},fillBlock:function(a){var b=
a.blockIndex,c=a.block,d=a.leftBase,e=a.rightBase,f=a.scale;this.testCanvasSupport(b,c)&&this.store.getRegionStats({ref:this.refSeq.name,start:d,end:e},dojo.hitch(this,function(d){var e=d.featureDensity;f<(this.config.style.featureScale||e/this.config.maxFeatureScreenDensity)?(this.fillTooManyFeaturesMessage(b,c,f),a.finishCallback()):this.fillFeatures(dojo.mixin({stats:d},a))}),dojo.hitch(this,function(b){this._handleError(b);a.finishCallback(b)}))},_getLayout:function(a){if((!this.layout||this.layout.pitchX!=
4/a)&&a){var b=this.config.layoutPitchY||parseInt(this.config.style.height+this.config.style.marginBottom)||3;this.layout=new d({pitchX:4/a,pitchY:b})}return this.layout},fillFeatures:function(a){var c=this,d=a.blockIndex,e=a.block,f=a.scale,g=a.leftBase,h=a.rightBase,i=a.finishCallback,j=!1;this.config.blockDisplayTimeout&&window.setTimeout(function(){j=!0},this.config.blockDisplayTimeout);var s=[],v=function(a){return(a-g)*f},t=dojo.hitch(this,function(c){if(j)throw new b.TrackBlockTimeout({track:this,
blockIndex:d,block:e});s.push(this.layoutFeature(a,c,v))});this.store.getFeatures({ref:this.refSeq.name,start:g,end:h},t,function(){var b=c._getLayout(f).getTotalHeight(),g=e.featureCanvas=dojo.create("canvas",{height:b,width:e.offsetWidth+1,style:{cursor:"default",height:b+"px"},innerHTML:"Your web browser cannot display this type of thisB.",className:"canvas-track"},e);c.renderFeatures(a,g,s);c.renderClickMap(a,g,s);c.layoutCanvases([g]);c.heightUpdate(b,d);i()},dojo.hitch(c,function(a){this._handleError(a);
i(a)}))},startZoom:function(){this.inherited(arguments);f.forEach(this.blocks,function(a){try{a.featureCanvas.style.width="100%"}catch(b){}})},endZoom:function(){f.forEach(this.blocks,function(a){try{delete a.featureCanvas.style.width}catch(b){}});this.inherited(arguments)},layoutFeature:function(a,b,c){var d=a.scale,e=b.get("start"),a=b.get("end"),f=this.getStyle(b,"height"),g=f+this.getStyle(b,"marginBottom"),h=b.id(),d=this._getLayout(d).addRect(h,e,a,g),b={l:c(e),h:f,t:d,f:b,toX:c};b.w=c(a)-b.l;
return b},renderClickMap:function(b,c,d){var f=this,g=b.block,i=new a({canvas:c});g.fRectIndex=i;i.addAll(d);if(c.getContext("2d")){e(c,"mousemove",function(a){h.normalizeEvent(a);a=i.getByCoord(a.layerX,a.layerY);f.highlightFeature(b,a&&a.f)});e(c,"mouseout",function(){f.highlightFeature(b,void 0)});for(var j in this.eventHandlers){var r=this.eventHandlers[j];e(c,j,function(a){h.normalizeEvent(a);(a=i.getByCoord(a.layerX,a.layerY))&&r.call({track:f,feature:a.f,fRect:a,callbackArgs:[f,a.f]})})}}else console.warn("No 2d context available from canvas")},
renderFeatures:function(a,b,c){b=b.getContext("2d");f.forEach(c,dojo.hitch(this,"renderFeature",b,a))},highlightFeature:function(a,b){if(this.lastHighlight!=b)f.forEach(this.blocks,function(c){var d;try{d=c.featureCanvas.getContext("2d")}catch(e){return}if(this.lastHighlight){var f=c.fRectIndex.getByID(this.lastHighlight.id());f&&this.renderFeature(d,a,f)}if(b&&(c=c.fRectIndex.getByID(b.id())))d.fillStyle=this.getStyle(c.f,"mouseovercolor"),d.fillRect(c.l,c.t,c.w,c.h)},this),this.lastHighlight=b},
renderFeature:function(a,b,c){if(b=this.getStyle(c.f,"color"))a.fillStyle=b,a.fillRect(c.l,c.t,c.w,c.h);if(3<c.h){if(b=this.getStyle(c.f,"border_color"))a.lineWidth=1,a.strokeStyle=b,a.strokeRect(c.l+0.5,c.t+0.5,c.w-1,c.h-1)}else if(1<c.h&&(b=this.getStyle(c.f,"border_color")))a.fillStyle=b,a.fillRect(c.l,c.t+c.h-1,c.w,1)}})})},"JBrowse/View/Track/FeatureCoverage":function(){define(["dojo/_base/declare","dojo/_base/array","JBrowse/View/Track/Wiggle","JBrowse/Util"],function(g,j,f,h){var e=h.fastDeclare({get:function(d){return this[d]},
tags:function(){return["start","end","score"]},score:0,constructor:function(d){this.start=d.start;this.end=d.end;this.score=d.score}});return g(f,{_defaultConfig:function(){return h.deepUpdate(dojo.clone(this.inherited(arguments)),{min_score:0,max_score:100})},getGlobalStats:function(){return{}},getFeatures:function(d,c,b){var f=d.start,a=d.end-f,g=Math.ceil(d.basesPerSpan),h=Array(Math.ceil(a/g)),j=function(a,b){var c=(a-f-1)/g,d=Math.floor(c);return{bin:d,overlap:b?1-(c-d):c-d}};this.store.getFeatures(d,
dojo.hitch(this,function(a){var b=j(a.get("start"),!1),a=j(a.get("end"),!0);b.bin==a.bin?h[b.bin]=(h[b.bin]||0)+a.overlap+b.overlap-1:(h[b.bin]=(h[b.bin]||0)+b.overlap,h[a.bin]=(h[a.bin]||0)+a.overlap);for(b=b.bin+1;b<=a.bin-1;b++)h[b]=(h[b]||0)+1}),function(){for(var a=0;a<h.length;a++){var d=f+g*a;c(new e({start:d,end:d+g,score:h[a]||0}))}b()})}})})},"JBrowse/View/Track/SNPCoverage":function(){define("dojo/_base/declare,dojo/_base/array,JBrowse/View/Track/Wiggle,JBrowse/Util,JBrowse/Model/NestedFrequencyTable,JBrowse/View/Track/MismatchesMixin".split(","),
function(g,j,f,h,e,d){var c=h.fastDeclare({get:function(b){return this[b]},tags:function(){return["start","end","score"]},score:0,constructor:function(b){this.start=b.start;this.end=b.end;this.score=b.score}});return g([f,d],{constructor:function(){delete this.config.bicolor_pivot;delete this.config.scale;delete this.config.align},_defaultConfig:function(){return h.deepUpdate(dojo.clone(this.inherited(arguments)),{min_score:0,max_score:100})},getGlobalStats:function(){return{}},getFeatures:function(b,
d,a){for(var f=this,g=b.start,h=b.end,j=Math.ceil(b.basesPerSpan),m=function(a){return Math.floor((a-g)/j)},n=m(h),q=Array(n+1),r=0;r<=n;r++)q[r]=new e;var u=function(a,b){var c=(a-g)/j,d=Math.floor(c);return 0<=d&&d<=n?{bin:d,overlap:b?1-(c-d):c-d}:b?{bin:n,overlap:1}:{bin:0,overlap:1}};f.store.getFeatures(b,function(a){var b=u(a.get("start"),!1),c=u(a.get("end")-1,!0);b.bin==c.bin?q[b.bin].increment("reference",c.overlap+b.overlap-1):(q[b.bin].increment("reference",b.overlap),q[c.bin].increment("reference",
c.overlap));for(var d=b.bin+1;d<=c.bin-1;d++)q[d].increment("reference",1);if(1==j){for(d=b.bin;d<=c.bin;d++)q[d].snpsCounted=1;if(d=a.get("MD")){b=f._mdToMismatches(a,d);for(d=0;d<b.length;d++)if(c=m(a.get("start")+b[d].start),c=q[c]){var e={"-1":"-",1:"+"}[""+a.get("strand")]||"unstranded";c.decrement("reference",1/j);c.getNested(b[d].bases).increment(e,1/j)}}}},function(){var e=function(){for(var b=0;b<=n;b++){var e=g+j*b;d(new c({start:e,end:e+j,score:q[b]}))}a()};if(1==j){var r;f.browser.getStore("refseqs",
function(a){a?a.getFeatures(b,function(a){r=a.get("seq")},function(){if(r)for(var a=g;a<=h;a++){var b=m(a);q[b].refBase=r[b]}e()},e):e()})}else e()})},_drawFeatures:function(b,c,a,d,e,f,g,h){var j=this,q=e.getContext("2d"),r=e.height,u=dojo.hitch(this,function(a){return r*(1-h.normalize.call(this,a))}),s=u(h.origin),b=parseInt(d.parentNode.style.height)-e.height,v=dojo.create("canvas",{height:b,width:e.width,style:{cursor:"default",width:"100%",height:b+"px"},innerHTML:"Your web browser cannot display this type of track.",
className:"SNP-indicator-track"},d),t=v.getContext("2d"),x=this.config.style.neg_color,w=this.config.style.clip_marker_color,E=this.config.style.bg_color,C=this.config.disable_clip_markers,G=function(a,b,c,d){if(E&&0<=b)q.fillStyle=E,q.fillRect(d.l,0,d.w,r);if(b<=r)if(q.fillStyle=j.colorForBase(a),b<=s){if(q.fillRect(d.l,b,d.w,c),!C&&0>b)q.fillStyle=w||x,q.fillRect(d.l,0,d.w,2)}else if(q.fillRect(d.l,s,d.w,c),!C&&b>=r)q.fillStyle=w||j.colorForBase(a),q.fillRect(d.l,r-3,d.w,2)};dojo.forEach(f,function(a,
b){var c=g[b],d=a.get("score"),e=d.total();d.forEach(function(a,b){if("reference"!=b&&a>0.5*e)t.beginPath(),t.arc(c.l+0.5*c.w,0.4*v.height,0.2*v.height,1.75*Math.PI,1.25*Math.PI,!1),t.lineTo(c.l+0.5*c.w,0),t.closePath(),t.fillStyle=j.colorForBase(b),t.fill(),t.lineWidth=1,t.strokeStyle="black",t.stroke()});G("reference",u(e),s-u(d.get("reference"))+1,c);e-=d.get("reference");d.forEach(function(a,b){"reference"!=b&&(G(b,u(e),s-u(a)+1,c),e-=a)})},this)},_mdToMismatches:function(b,c){var a=[],d={start:0,
bases:""},e=b.get("seq"),f=function(){a.push(d);d={start:d.start+d.bases.length,bases:""}};j.forEach(c.match(/(\d+|\^[a-z]+|[a-z])/ig),function(a){if(a.match(/^\d/))d.start+=parseInt(a);else if(a.match(/^\^/))for(a=a.length-1;a--;)d.bases="*",f();else if(a.match(/^[a-z]/i))d.bases=e.substr(d.start,a.length),f()});return a},_showPixelValue:function(b,c){function a(a){return parseFloat(a).toPrecision(6).replace(/0+$/,"").replace(/\.$/,"")}if(!c)return!1;if(c.snpsCounted){var d=c.total(),e="<table>",
f=function(a){return Math.round(100*(a/d))+"%"},e=e+('<tr class="ref"><td>'+(c.refBase?c.refBase+"*":"Ref")+'</td><td class="count">'+a(c.get("reference"))+'</td><td class="pct">'+f(c.get("reference"))+"</td></tr>");c.forEach(function(b,c){if("reference"!=c){var d="";b.forEach&&(d=[],b.forEach(function(b,c){d.push(a(b)+" "+c)}),(d=d.join(", "))&&(d="("+d+")"));c={"*":"del"}[c]||c;e+="<tr><td>"+c+'</td><td class="count">'+a(b)+'</td><td class="pct">'+f(b)+'</td><td class="subdist">'+d+"</td></tr>"}});
e+='<tr class="total"><td>Total</td><td class="count">'+a(d)+'</td><td class="pct">&nbsp;</td><td class="subdist">&nbsp;</td></tr>';b.innerHTML=e+"</table>"}else b.innerHTML='<table><tr><td>Total</td><td class="count">'+a(c)+"</td></tr></table>";return!0}})})},"JBrowse/Model/NestedFrequencyTable":function(){define(["JBrowse/Util"],function(g){var j=g.fastDeclare({constructor:function(f){this._categories={};f&&dojo.mixin(this._categories,f)},total:function(){var f=0,g;for(g in this._categories)var e=
this._categories[g],f=f+(e.total?e.total():e);return f},decrement:function(f,g){g||(g=1);f=f?f.toString():"default";return this._categories[f]?this._categories[f]=Math.max(0,this._categories[f]-g):0},increment:function(f,g){g||(g=1);f=f?f.toString():"default";return this._categories[f]=(this._categories[f]||0)+g},get:function(f){return this._categories[f]||0},getNested:function(f){"string"==typeof f&&(f=f.split("/"));if(!f.length)return this;var g=f[0].toString(),e=this._categories[g];if(!e||!e._categories)e=
this._categories[g]=new j(e?{"default":e+0}:{});return 1<f.length?e.getNested(f.slice(1)):e},categories:function(){return g.dojof.keys(this._categories)},toString:function(){return this.total().toPrecision(6).toString()},valueOf:function(){return this.total()},forEach:function(f,g){var e=this._categories;if(g)for(var d in e)f.call(g,e[d],d);else for(d in e)f(e[d],d)}});return j})},"JBrowse/Store/TrackMetaData":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/data/util/simpleFetch",
"JBrowse/Util","JBrowse/Digest/Crc32"],function(g,j,f,h,e){var d=h.dojof,g=g(null,{_noDataValue:"(no data)",constructor:function(c){var b=["conf"];this._filterFacet=function(){var a=c.indexFacets||function(){return!0};"string"==typeof a&&(a=[a]);if(dojo.isArray(a))var d=a,a=function(a){return dojo.some(d,function(b){return a==b.toLowerCase()})};var e=this.getIdentityAttributes();return function(c){return dojo.some(e,function(a){return a==c})||a(c)&&!dojo.some(b,function(a){return a==c})}}.call(this);
this.onReadyFuncs=dojo.isArray(c.onReady)?dojo.clone(c.onReady):c.onReady?[c.onReady]:[];this._indexItems({store:this,items:dojo.map(c.trackConfigs,dojo.hitch(this,"_trackConfigToItem"))});var d=0;c.metadataStores=dojo.filter(c.metadataStores,function(a){return a});if(!c.metadataStores||!c.metadataStores.length)this._finishLoad();else{var a=dojo.hitch(this,function(){++d==c.metadataStores.length&&this._finishLoad()});dojo.forEach(c.metadataStores,function(b){b.fetch({scope:this,onComplete:dojo.hitch(this,
function(c){this._indexItems({store:b,items:c,supplementalOnly:!0});a()}),onError:function(b){console.error(""+b);a()}})},this)}c.browser.subscribe("/jbrowse/v1/c/tracks/new",dojo.hitch(this,"addTracks"));c.browser.subscribe("/jbrowse/v1/c/tracks/replace",dojo.hitch(this,function(a){this.deleteTracks(a);this.addTracks(a)}));c.browser.subscribe("/jbrowse/v1/c/tracks/delete",dojo.hitch(this,"deleteTracks"))},_trackConfigToItem:function(c){var b=dojo.clone(c.metadata||{});b.label=c.label;b.key=c.key;
b.conf=c;b["track type"]=c.type;if(c.category)b.category=c.category;return b},addTracks:function(c){c.length&&(delete this.previousQueryFingerprint,delete this.previousResults);j.forEach(c,function(b){this._indexItems({store:this,items:[this._trackConfigToItem(b)]});var c=b.label,a=this.fetchItemByIdentity(c);if(a)this.onNew(a);else console.error("failed to add "+c+" track to track metadata store",b)},this)},deleteTracks:function(c){c.length&&(delete this.previousQueryFingerprint,delete this.previousResults);
j.forEach(c,function(b){if(b=this.fetchItemByIdentity(b.label))b.DELETED=!0,this.onDelete(b)},this)},_finishLoad:function(){this.facets.sort();dojo.forEach(d.values(this.facetIndexes.byName),function(b){b.avgBucketSize=b.itemCount/b.bucketCount});this.facetIndexes.facetRank=dojo.clone(this.facets).sort(dojo.hitch(this,function(b,c){return this.facetIndexes.byName[b].avgBucketSize-this.facetIndexes.byName[c].avgBucketSize}));var c=dojo.hitch(this,"_itemSortFunc");dojo.forEach(d.values(this.facetIndexes.byName),
function(b){dojo.forEach(d.keys(b.byValue),function(d){b.byValue[d].items=b.byValue[d].items.sort(c)})},this);this.ready=!0;this._onReady()},_itemSortFunc:function(c,b){var d=this.getIdentity(c),a=this.getIdentity(b);return d==a?0:d>a?1:d<a?-1:0},_indexItems:function(c){var b=c.store,e=c.items,a={},e=dojo.map(e,function(c){var d=b.getAttributes(c),e={};dojo.forEach(d,function(d){var f=d.toLowerCase();a[f]=!0;e[f]=b.getValue(c,d)});return e},this);this.identIndex=this.identIndex||{};var e=function(){var a=
{};return dojo.map(e,function(b){var d=this.getIdentity(b),e=this.identIndex[d];e&&e.DELETED&&delete e.DELETED;if(a[d]||c.supplementalOnly&&!e)return null;a[d]=!0;return this.identIndex[d]=dojo.mixin(e||{},b)},this)}.call(this),e=dojo.filter(e,function(a){return a}),f=this._addFacets(d.keys(a));this.facetIndexes=this.facetIndexes||{itemCount:0,bucketCount:0,byName:{}};dojo.forEach(f,function(a){this.facetIndexes.byName[a]||(this.facetIndexes.bucketCount++,this.facetIndexes.byName[a]={itemCount:0,
bucketCount:0,byValue:{}})},this);if(f.length){var g={};dojo.forEach(f,function(a){g[a]={}});dojo.forEach(e,function(a){this.facetIndexes.itemCount++;dojo.forEach(f,function(b){var c=this.getValue(a,b,void 0);"undefined"!=typeof c&&(g[b][this.getIdentity(a)]=1,this._indexItem(b,c,a))},this)},this);dojo.forEach(f,function(a){dojo.forEach(d.values(this.identIndex),function(b){g[a][this.getIdentity(b)]||this._indexItem(a,this._noDataValue,b)},this)},this)}},_indexItem:function(c,b,d){var c=this.facetIndexes.byName[c],
a=c.byValue[b];a||(a=c.byValue[b]={itemCount:0,items:[]},c.bucketCount++);a.itemCount++;c.itemCount++;a.items.push(d)},_addFacets:function(c){var b=this.facets||[],d={};this.facets=dojo.filter(b.concat(c),function(a){var b=this._filterFacet(a)&&!d[a];d[a]=!0;return b},this);return this.facets.slice(b.length)},getCount:function(){return this._fetchCount},getFacetCounts:function(c){var b=this._fetchFacetCounts[c]||this._fetchFacetCounts.__other__;return b?b[c]:void 0},getFacetNames:function(){return this.facets},
getFacetValues:function(c){c=this.facetIndexes.byName[c];return!c?[]:d.keys(c.byValue)},getFacetStats:function(c){var b=this.facetIndexes.byName[c];if(!b)return{};var d={};dojo.forEach(["itemCount","bucketCount","avgBucketSize"],function(a){d[a]=b[a]});return d},getValue:function(c,b,d){c=c[b];return"undefined"==typeof c?d:c},getValues:function(c,b){var d=[c[b]];return"undefined"==typeof d[0]?[]:d},getAttributes:function(c){return d.keys(c)},hasAttribute:function(c,b){return c.hasOwnProperty(b)},
containsValue:function(c,b,d){return c[b]==d},isItem:function(c){return"object"==typeof c&&"string"==typeof c.label},isItemLoaded:function(){return this.ready},loadItem:function(){},getItem:function(c){return this.ready?this.identIndex[c]:null},_fetchItems:function(c,b,f){if(this.ready){var a=dojo.clone(c.query||{});dojo.forEach(d.keys(a),function(b){dojo.isArray(a[b])||(a[b]=[a[b]])},this);f=e.objectFingerprint(a);f==this.previousQueryFingerprint?f=this.previousResults:(this.previousQueryFingerprint=
f,this.previousResults=f=this._doQuery(a));b(f,c);this.onFetchSuccess()}else this.onReady(dojo.hitch(this,"_fetchItems",c,b,f))},_doQuery:function(c){var b=this._compileTextFilter(c.text);delete c.text;var e=[],a=[];if(b)a.push(this._filterDeleted(j.filter(d.values(this.identIndex),b)).sort(dojo.hitch(this,"_itemSortFunc"))),a[0].facetName="Contains text";a.push.apply(a,dojo.map(d.keys(c),function(a){var b=c[a],d=[];if(!this.facetIndexes.byName[a])throw console.error("No facet defined with name '"+
a+"'."),"No facet defined with name '"+a+"', faceted search failed.";dojo.forEach(b,function(b){d.push.apply(d,this._filterDeleted((this.facetIndexes.byName[a].byValue[b]||{}).items||[]))},this);d.facetName=a;d.sort(dojo.hitch(this,"_itemSortFunc"));return d},this));dojo.forEach(a,function(a){a.myOffset=0;a.topItem=function(){return this[this.myOffset]};a.shift=function(){this.myOffset++}});var f={};if(a.length){var g=0;for(dojo.forEach(a,function(a){g+=a.length});g;){var h={},l=[],m,n;dojo.forEach(a,
function(a){m=(n=a.topItem())?this.getIdentity(n):"(at end of set)";h[m]?h[m].push(a):(h[m]=[a],l.push(m))},this);1==l.length?e.push(n):(l.sort(),"(at end of set)"==l[0]?(m=l[1],b=0):(m=l[0],b=1),m="(at end of set)"==l[0]?l[1]:l[0],2==l.length&&h[m].length==a.length-1&&(b=h[l[b]][0],this._countItem(f,h[m][0].topItem(),b.facetName)));dojo.forEach(h[m],function(a){a.shift();g--})}}else e=this._filterDeleted(d.values(this.identIndex));dojo.forEach(d.keys(f).concat(["__other__"]),function(a){dojo.forEach(e,
function(b){this._countItem(f,b,a)},this)},this);1==a.length&&dojo.forEach(d.values(this.identIndex),function(b){this._countItem(f,b,a[0].facetName)},this);this._fetchFacetCounts=f;this._fetchCount=e.length;return e},_countItem:function(c,b,d){var a=c[d];a||(a=c[d]={});dojo.forEach("__other__"==d?this.facets:[d],function(c){var d=this.getValue(b,c,this._noDataValue),e=a[c];e||(e=a[c]={},e[d]=0);e[d]=(e[d]||0)+1},this)},onReady:function(c,b){c=c||dojo.global;b=dojo.hitch(c,b);this.ready?b():this.onReadyFuncs.push(b)},
_onReady:function(){dojo.forEach(this.onReadyFuncs||[],function(c){c.call()})},onFetchSuccess:function(){},onNew:function(){},onDelete:function(){},onSet:function(){},_filterDeleted:function(c){return j.filter(c,function(b){return!b.DELETED})},_compileTextFilter:function(c){if(void 0===c)return null;for(var b=/\s*["']([^"']+)["']\s*/g,d=/(\S+)/g,a=function(){var a=b.exec(c)||d.exec(c);if(a){var a=a[1],e=Math.max(b.lastIndex,d.lastIndex);d.lastIndex=b.lastIndex=e}return a},e=[],f;f=a();)f=dojo.regexp.escapeString(f,
"*?").replace(/\*/g,".+").replace(/ /g,"\\s+").replace(/\?/g,"."),e.push(RegExp(f,"i"));return dojo.hitch(this,function(a){return dojo.some(this.facets,function(b){var c=this.getValue(a,b);return j.every(e,function(a){return a.test(c)})},this)})},getFeatures:function(){return{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0,"dojo.data.api.Notification":!0}},close:function(){},getLabel:function(c){return this.getValue(c,"key",void 0)},getLabelAttributes:function(){return["key"]},getIdentityAttributes:function(){return["label"]},
getIdentity:function(c){return this.getValue(c,"label",void 0)},fetchItemByIdentity:function(c){return this.identIndex[c]}});dojo.extend(g,f);return g})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(g,j,f){var h={};g.setObject("dojo.data.util.simpleFetch",h);h.errorHandler=function(e,d){d.onError&&d.onError.call(d.scope||j.global,e,d)};h.fetchHandler=function(e,d){var c=d.abort||null,b=!1,g=d.start?d.start:0,a=d.count&&Infinity!==d.count?
g+d.count:e.length;d.abort=function(){b=!0;c&&c.call(d)};var h=d.scope||j.global;if(!d.store)d.store=this;d.onBegin&&d.onBegin.call(h,e.length,d);d.sort&&e.sort(f.createSortFunction(d.sort,this));if(d.onItem)for(var o=g;o<e.length&&o<a;++o){var p=e[o];b||d.onItem.call(h,p,d)}d.onComplete&&!b&&(o=null,d.onItem||(o=e.slice(g,a)),d.onComplete.call(h,o,d))};h.fetch=function(e){e=e||{};if(!e.store)e.store=this;this._fetchItems(e,g.hitch(this,"fetchHandler"),g.hitch(this,"errorHandler"));return e};return h})},
"xstyle/load-css":function(){define([],function(){function g(a,b){var c=a[d]("link");c.rel="stylesheet";c.type="text/css";if(b)c.href=b;return c}function j(a){for(var a=a.split("!"),b,c=1;b=a[c++];)b=b.split("=",2),a[b[0]]=2==b.length?b[1]:!0;return a}function f(b){if(a["dom-create-style-element"])return c=document.createElement("style"),c.setAttribute("type","text/css"),c.appendChild(document.createTextNode(b)),k.insertBefore(c,k.firstChild),c;var c=document.createStyleSheet();c.cssText=b;return c.owningElement}
var h="onreadystatechange",e="onload",d="createElement",c=!1,b=document,i="undefined"==typeof _css_cache?{}:_css_cache,a={"event-link-onload":null===document.createElement("link").onload&&!navigator.userAgent.match(/AppleWebKit/),"dom-create-style-element":!document.createStyleSheet},k=b.head||(b.head=b.getElementsByTagName("head")[0]);if(!a["bundled-css"])var o=function(b,d){function f(a){if(a=a.sheet||a.styleSheet)for(var b=document.styleSheets,c=b.length;0<c;c--)if(b[c-1]==a)return!0}function g(a,
b){f(a.link)?(i(a),b()):c||setTimeout(function(){g(a,b)},a.wait)}function i(a){a=a.link;a[h]=a[e]=null}function j(){k||(k=!0,d())}if(require.onError)require.onError=function(a){return function(){c=!0;a.apply(this,arguments)}}(require.onError);var k;(function(b,c){var d=b.link;d[h]=d[e]=function(){if(!d.readyState||"complete"==d.readyState)a["event-link-onload"]=!0,i(b),c()}})(b,j);a["event-link-onload"]||g(b,j)};return function(a,c,d){for(var e=a.split(","),h=e.length,r=function(){0==--h&&c(v.sheet||
v.styleSheet)},u=0;u<e.length;u++){var a=e[u],s=i[a];if(s)return v=f(s),r();var a=j(a),s=a.shift(),s=s.lastIndexOf(".")<=s.lastIndexOf("/")?s+".css":s,v=g(b),a="nowait"in a?"false"!=a.nowait:!(!d||!d.cssDeferLoad);o({link:v,url:s,wait:d&&d.cssWatchPeriod||25},r);a&&c(v);v.href=s;k.appendChild(v)}}})},"dojox/gfx/svg":function(){define("dojo/_base/lang,dojo/_base/sniff,dojo/_base/window,dojo/dom,dojo/_base/declare,dojo/_base/array,dojo/dom-geometry,dojo/dom-attr,dojo/_base/Color,./_base,./shape,./path".split(","),
function(g,j,f,h,e,d,c,b,i,a,k,o){function p(a,b){return f.doc.createElementNS?f.doc.createElementNS(a,b):f.doc.createElement(b)}function l(a){return m.useSvgWeb?f.doc.createTextNode(a,!0):f.doc.createTextNode(a)}var m=a.svg={};m.useSvgWeb="undefined"!=typeof window.svgweb;var n=navigator.userAgent,q=j("ios"),r=j("android"),u=j("chrome")||r&&4<=r?"auto":"optimizeLegibility";m.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};m.getRef=function(a){return!a||"none"==a?null:
a.match(/^url\(#.+\)$/)?h.byId(a.slice(5,-1)):a.match(/^#dojoUnique\d+$/)?h.byId(a.slice(1)):null};m.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var s=0;m.Shape=e("dojox.gfx.svg.Shape",k.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var a=this.rawNode.getAttribute("fill");(a=m.getRef(a))&&a.parentNode.removeChild(a)}if(this.clip&&
(a=this.rawNode.getAttribute("clip-path")))(a=h.byId(a.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);this.rawNode=null;k.Shape.prototype.destroy.apply(this,arguments)},setFill:function(b){if(!b)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var c,e=function(a){this.setAttribute(a,c[a].toFixed(8))};if("object"==typeof b&&"type"in b){switch(b.type){case "linear":c=a.makeParameters(a.defaultLinearGradient,b);b=this._setFillObject(c,
"linearGradient");d.forEach(["x1","y1","x2","y2"],e,b);break;case "radial":c=a.makeParameters(a.defaultRadialGradient,b);b=this._setFillObject(c,"radialGradient");d.forEach(["cx","cy","r"],e,b);break;case "pattern":c=a.makeParameters(a.defaultPattern,b),b=this._setFillObject(c,"pattern"),d.forEach(["x","y","width","height"],e,b)}this.fillStyle=c;return this}this.fillStyle=c=a.normalizeColor(b);this.rawNode.setAttribute("fill",c.toCss());this.rawNode.setAttribute("fill-opacity",c.a);this.rawNode.setAttribute("fill-rule",
"evenodd");return this},setStroke:function(b){var c=this.rawNode;if(!b)return this.strokeStyle=null,c.setAttribute("stroke","none"),c.setAttribute("stroke-opacity",0),this;if("string"==typeof b||g.isArray(b)||b instanceof i)b={color:b};b=this.strokeStyle=a.makeParameters(a.defaultStroke,b);b.color=a.normalizeColor(b.color);if(b){c.setAttribute("stroke",b.color.toCss());c.setAttribute("stroke-opacity",b.color.a);c.setAttribute("stroke-width",b.width);c.setAttribute("stroke-linecap",b.cap);"number"==
typeof b.join?(c.setAttribute("stroke-linejoin","miter"),c.setAttribute("stroke-miterlimit",b.join)):c.setAttribute("stroke-linejoin",b.join);var d=b.style.toLowerCase();d in m.dasharray&&(d=m.dasharray[d]);if(d instanceof Array){for(var d=g._toArray(d),e=0;e<d.length;++e)d[e]*=b.width;if("butt"!=b.cap){for(e=0;e<d.length;e+=2)d[e]-=b.width,1>d[e]&&(d[e]=1);for(e=1;e<d.length;e+=2)d[e]+=b.width}d=d.join(",")}c.setAttribute("stroke-dasharray",d);c.setAttribute("dojoGfxStrokeStyle",b.style)}return this},
_getParentSurface:function(){for(var b=this.parent;b&&!(b instanceof a.Surface);b=b.parent);return b},_setFillObject:function(b,c){var d=m.xmlns.svg;this.fillStyle=b;var e=this._getParentSurface().defNode,f=this.rawNode.getAttribute("fill");if(f=m.getRef(f))if(f.tagName.toLowerCase()!=c.toLowerCase()){var g=f.id;f.parentNode.removeChild(f);f=p(d,c);f.setAttribute("id",g);e.appendChild(f)}else for(;f.childNodes.length;)f.removeChild(f.lastChild);else f=p(d,c),f.setAttribute("id",a._base._getUniqueId()),
e.appendChild(f);if("pattern"==c)f.setAttribute("patternUnits","userSpaceOnUse"),d=p(d,"image"),d.setAttribute("x",0),d.setAttribute("y",0),d.setAttribute("width",b.width.toFixed(8)),d.setAttribute("height",b.height.toFixed(8)),d.setAttributeNS?d.setAttributeNS(m.xmlns.xlink,"xlink:href",b.src):d.setAttribute("xlink:href",b.src),f.appendChild(d);else{f.setAttribute("gradientUnits","userSpaceOnUse");for(e=0;e<b.colors.length;++e){var g=b.colors[e],h=p(d,"stop"),i=g.color=a.normalizeColor(g.color);
h.setAttribute("offset",g.offset.toFixed(8));h.setAttribute("stop-color",i.toCss());h.setAttribute("stop-opacity",i.a);f.appendChild(h)}}this.rawNode.setAttribute("fill","url(#"+f.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return f},_applyTransform:function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+
","+a.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(a){a=this.rawNode=a;"image"!=this.shape.type&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this.getUID()},setShape:function(b){this.shape=a.makeParameters(this.shape,
b);for(var c in this.shape)"type"!=c&&this.rawNode.setAttribute(c,this.shape[c]);this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(a){this.inherited(arguments);var c=a?"width"in a?"rect":"cx"in a?"ellipse":"points"in a?"polyline":"d"in a?"path":null:null;if(a&&!c)return this;if("polyline"===c)a=g.clone(a),
a.points=a.points.join(",");var d,e=b.get(this.rawNode,"clip-path");e&&(d=h.byId(e.match(/gfx_clip[\d]+/)[0]))&&d.removeChild(d.childNodes[0]);a?(d?(c=p(m.xmlns.svg,c),d.appendChild(c)):(e="gfx_clip"+ ++s,this.rawNode.setAttribute("clip-path","url(#"+e+")"),d=p(m.xmlns.svg,"clipPath"),c=p(m.xmlns.svg,c),d.appendChild(c),this.rawNode.parentNode.appendChild(d),b.set(d,"id",e)),b.set(c,a)):(this.rawNode.removeAttribute("clip-path"),d&&d.parentNode.removeChild(d));return this},_removeClipNode:function(){var a,
c=b.get(this.rawNode,"clip-path");c&&(a=h.byId(c.match(/gfx_clip[\d]+/)[0]))&&a.parentNode.removeChild(a);return a}});m.Group=e("dojox.gfx.svg.Group",m.Shape,{constructor:function(){k.Container._init.call(this)},setRawNode:function(a){this.rawNode=a;this.rawNode.__gfxObject__=this.getUID()},destroy:function(){this.clear(!0);m.Shape.prototype.destroy.apply(this,arguments)}});m.Group.nodeType="g";m.Rect=e("dojox.gfx.svg.Rect",[m.Shape,k.Rect],{setShape:function(b){this.shape=a.makeParameters(this.shape,
b);this.bbox=null;for(var c in this.shape)"type"!=c&&"r"!=c&&this.rawNode.setAttribute(c,this.shape[c]);null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});m.Rect.nodeType="rect";m.Ellipse=e("dojox.gfx.svg.Ellipse",[m.Shape,k.Ellipse],{});m.Ellipse.nodeType="ellipse";m.Circle=e("dojox.gfx.svg.Circle",[m.Shape,k.Circle],{});m.Circle.nodeType="circle";m.Line=e("dojox.gfx.svg.Line",[m.Shape,k.Line],{});m.Line.nodeType="line";
m.Polyline=e("dojox.gfx.svg.Polyline",[m.Shape,k.Polyline],{setShape:function(b,c){b&&b instanceof Array?(this.shape=a.makeParameters(this.shape,{points:b}),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=a.makeParameters(this.shape,b);this.bbox=null;this._normalizePoints();for(var d=[],e=this.shape.points,f=0;f<e.length;++f)d.push(e[f].x.toFixed(8),e[f].y.toFixed(8));this.rawNode.setAttribute("points",d.join(" "));return this}});m.Polyline.nodeType="polyline";
m.Image=e("dojox.gfx.svg.Image",[m.Shape,k.Image],{setShape:function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;var b=this.rawNode,c;for(c in this.shape)"type"!=c&&"src"!=c&&b.setAttribute(c,this.shape[c]);b.setAttribute("preserveAspectRatio","none");b.setAttributeNS?b.setAttributeNS(m.xmlns.xlink,"xlink:href",this.shape.src):b.setAttribute("xlink:href",this.shape.src);b.__gfxObject__=this.getUID();return this}});m.Image.nodeType="image";m.Text=e("dojox.gfx.svg.Text",[m.Shape,k.Text],
{setShape:function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;var b=this.rawNode,c=this.shape;b.setAttribute("x",c.x);b.setAttribute("y",c.y);b.setAttribute("text-anchor",c.align);b.setAttribute("text-decoration",c.decoration);b.setAttribute("rotate",c.rotated?90:0);b.setAttribute("kerning",c.kerning?"auto":0);b.setAttribute("text-rendering",u);b.firstChild?b.firstChild.nodeValue=c.text:b.appendChild(l(c.text));return this},getTextWidth:function(){var a=this.rawNode,b=a.parentNode,
a=a.cloneNode(!0);a.style.visibility="hidden";var c=0,d=a.firstChild.nodeValue;b.appendChild(a);if(""!=d)for(;!c;)c=a.getBBox?parseInt(a.getBBox().width):68;b.removeChild(a);return c}});m.Text.nodeType="text";m.Path=e("dojox.gfx.svg.Path",[m.Shape,o.Path],{_updateWithSegment:function(a){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(a){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):
this.rawNode.removeAttribute("d");return this}});m.Path.nodeType="path";m.TextPath=e("dojox.gfx.svg.TextPath",[m.Shape,o.TextPath],{_updateWithSegment:function(a){this.inherited(arguments);this._setTextPath()},setShape:function(a){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var b=this.rawNode;if(!b.firstChild){var c=p(m.xmlns.svg,"textPath"),d=l("");c.appendChild(d);b.appendChild(c)}c=(c=b.firstChild.getAttributeNS(m.xmlns.xlink,
"href"))&&m.getRef(c);if(!c&&(d=this._getParentSurface())){var d=d.defNode,c=p(m.xmlns.svg,"path"),e=a._base._getUniqueId();c.setAttribute("id",e);d.appendChild(c);b.firstChild.setAttributeNS?b.firstChild.setAttributeNS(m.xmlns.xlink,"xlink:href","#"+e):b.firstChild.setAttribute("xlink:href","#"+e)}c&&c.setAttribute("d",this.shape.path)}},_setText:function(){var a=this.rawNode;if(!a.firstChild){var b=p(m.xmlns.svg,"textPath"),c=l("");b.appendChild(c);a.appendChild(b)}a=a.firstChild;b=this.text;a.setAttribute("alignment-baseline",
"middle");switch(b.align){case "middle":a.setAttribute("text-anchor","middle");a.setAttribute("startOffset","50%");break;case "end":a.setAttribute("text-anchor","end");a.setAttribute("startOffset","100%");break;default:a.setAttribute("text-anchor","start"),a.setAttribute("startOffset","0%")}a.setAttribute("baseline-shift","0.5ex");a.setAttribute("text-decoration",b.decoration);a.setAttribute("rotate",b.rotated?90:0);a.setAttribute("kerning",b.kerning?"auto":0);a.firstChild.data=b.text}});m.TextPath.nodeType=
"text";var v=534<function(){var a=/WebKit\/(\d*)/.exec(n);return a?a[1]:0}();m.Surface=e("dojox.gfx.svg.Surface",k.Surface,{constructor:function(){k.Container._init.call(this)},destroy:function(){k.Container.clear.call(this,!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(a,b){if(!this.rawNode)return this;this.rawNode.setAttribute("width",a);this.rawNode.setAttribute("height",b);if(v)this.rawNode.style.width=a,this.rawNode.style.height=b;return this},getDimensions:function(){return this.rawNode?
{width:a.normalizedLength(this.rawNode.getAttribute("width")),height:a.normalizedLength(this.rawNode.getAttribute("height"))}:null}});m.createSurface=function(a,b,c){var d=new m.Surface;d.rawNode=p(m.xmlns.svg,"svg");d.rawNode.setAttribute("overflow","hidden");b&&d.rawNode.setAttribute("width",b);c&&d.rawNode.setAttribute("height",c);b=p(m.xmlns.svg,"defs");d.rawNode.appendChild(b);d.defNode=b;d._parent=h.byId(a);d._parent.appendChild(d.rawNode);return d};var j={_setFont:function(){var a=this.fontStyle;
this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)}},t=k.Container,e={openBatch:function(){this.fragment=m.useSvgWeb?f.doc.createDocumentFragment(!0):f.doc.createDocumentFragment()},closeBatch:function(){this.fragment&&(this.rawNode.appendChild(this.fragment),delete this.fragment)},add:function(a){this!=a.getParent()&&
(this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode),t.add.apply(this,arguments),a.setClip(a.clip));return this},remove:function(a,b){this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode),this.fragment&&this.fragment==a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode),a._removeClipNode(),t.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.lastChild;)a.removeChild(a.lastChild);var b=
this.defNode;if(b){for(;b.lastChild;)b.removeChild(b.lastChild);a.appendChild(b)}return t.clear.apply(this,arguments)},getBoundingBox:t.getBoundingBox,_moveChildToFront:t._moveChildToFront,_moveChildToBack:t._moveChildToBack},o={createObject:function(a,b){if(!this.rawNode)return null;var c=new a,d=p(m.xmlns.svg,a.nodeType);c.setRawNode(d);c.setShape(b);this.add(c);return c}};g.extend(m.Text,j);g.extend(m.TextPath,j);g.extend(m.Group,e);g.extend(m.Group,k.Creator);g.extend(m.Group,o);g.extend(m.Surface,
e);g.extend(m.Surface,k.Creator);g.extend(m.Surface,o);m.fixTarget=function(a){if(!a.gfxTarget)a.gfxTarget=q&&a.target.wholeText?k.byId(a.target.parentElement.__gfxObject__):k.byId(a.target.__gfxObject__);return!0};if(m.useSvgWeb)m.createSurface=function(b,d,e){var f=new m.Surface;if(!d||!e)var g=c.position(b),d=d||g.w,e=e||g.h;var b=h.byId(b),g=b.id?b.id+"_svgweb":a._base._getUniqueId(),i=p(m.xmlns.svg,"svg");i.id=g;i.setAttribute("width",d);i.setAttribute("height",e);svgweb.appendChild(i,b);i.addEventListener("SVGLoad",
function(){f.rawNode=this;f.isLoaded=!0;var a=p(m.xmlns.svg,"defs");f.rawNode.appendChild(a);f.defNode=a;if(f.onLoad)f.onLoad(f)},!1);f.isLoaded=!1;return f},m.Surface.extend({destroy:function(){var a=this.rawNode;svgweb.removeChild(a,a.parentNode)}}),j={connect:function(a,b,c){"on"===a.substring(0,2)&&(a=a.substring(2));c=2==arguments.length?b:g.hitch(b,c);this.getEventSource().addEventListener(a,c,!1);return[this,a,c]},disconnect:function(a){this.getEventSource().removeEventListener(a[1],a[2],!1);
delete a[0]}},g.extend(m.Shape,j),g.extend(m.Surface,j);return m})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(g,j,f,h,e){e=f("dojox.gfx.path.Path",e.Shape,{constructor:function(d){this.shape=j.clone(g.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=d;this.segmented=!1},setAbsoluteMode:function(d){this._confirmSegmented();this.absolute="string"==typeof d?"absolute"==d:d;return this},getAbsoluteMode:function(){this._confirmSegmented();
return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var d=this.bbox,c=this._getRealMatrix();this.bbox=null;for(var b=0,e=this.segments.length;b<e;++b)this._updateWithSegment(this.segments[b],c);c=this.bbox;this.bbox=d;return this.tbbox=c?[{x:c.l,y:c.t},{x:c.r,y:c.t},{x:c.r,
y:c.b},{x:c.l,y:c.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(d,c,b){if(b)c=h.multiplyPoint(b,d,c),d=c.x,c=c.y;if(this.bbox&&"l"in this.bbox){if(this.bbox.l>d)this.bbox.l=d;if(this.bbox.r<d)this.bbox.r=d;if(this.bbox.t>c)this.bbox.t=c;if(this.bbox.b<c)this.bbox.b=c}else this.bbox={l:d,b:c,r:d,t:c}},_updateWithSegment:function(d,c){var b=d.args,e=
b.length,a;switch(d.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(a=0;a<e;a+=2)this._updateBBox(b[a],b[a+1],c);this.last.x=b[e-2];this.last.y=b[e-1];this.absolute=!0;break;case "H":for(a=0;a<e;++a)this._updateBBox(b[a],this.last.y,c);this.last.x=b[e-1];this.absolute=!0;break;case "V":for(a=0;a<e;++a)this._updateBBox(this.last.x,b[a],c);this.last.y=b[e-1];this.absolute=!0;break;case "m":a=0;if(!("x"in this.last))this._updateBBox(this.last.x=b[0],this.last.y=b[1],c),a=2;for(;a<e;a+=
2)this._updateBBox(this.last.x+=b[a],this.last.y+=b[a+1],c);this.absolute=!1;break;case "l":case "t":for(a=0;a<e;a+=2)this._updateBBox(this.last.x+=b[a],this.last.y+=b[a+1],c);this.absolute=!1;break;case "h":for(a=0;a<e;++a)this._updateBBox(this.last.x+=b[a],this.last.y,c);this.absolute=!1;break;case "v":for(a=0;a<e;++a)this._updateBBox(this.last.x,this.last.y+=b[a],c);this.absolute=!1;break;case "c":for(a=0;a<e;a+=6)this._updateBBox(this.last.x+b[a],this.last.y+b[a+1],c),this._updateBBox(this.last.x+
b[a+2],this.last.y+b[a+3],c),this._updateBBox(this.last.x+=b[a+4],this.last.y+=b[a+5],c);this.absolute=!1;break;case "s":case "q":for(a=0;a<e;a+=4)this._updateBBox(this.last.x+b[a],this.last.y+b[a+1],c),this._updateBBox(this.last.x+=b[a+2],this.last.y+=b[a+3],c);this.absolute=!1;break;case "A":for(a=0;a<e;a+=7)this._updateBBox(b[a+5],b[a+6],c);this.last.x=b[e-2];this.last.y=b[e-1];this.absolute=!0;break;case "a":for(a=0;a<e;a+=7)this._updateBBox(this.last.x+=b[a+5],this.last.y+=b[a+6],c);this.absolute=
!1}var f=[d.action];for(a=0;a<e;++a)f.push(g.formatNumber(b[a],!0));"string"==typeof this.shape.path?this.shape.path+=f.join(""):Array.prototype.push.apply(this.shape.path,f)},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(d,c){this.tbbox=null;var b=this._validSegments[d.toLowerCase()];"number"==typeof b&&(b?c.length>=b&&(b={action:d,args:c.slice(0,c.length-c.length%b)},this.segments.push(b),this._updateWithSegment(b)):(b={action:d,args:[]},this.segments.push(b),this._updateWithSegment(b)))},
_collectArgs:function(d,c){for(var b=0;b<c.length;++b){var e=c[b];"boolean"==typeof e?d.push(e?1:0):"number"==typeof e?d.push(e):e instanceof Array?this._collectArgs(d,e):"x"in e&&"y"in e&&d.push(e.x,e.y)}},moveTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"M":"m",d);return this},lineTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"L":"l",d);return this},hLineTo:function(){this._confirmSegmented();
var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"H":"h",d);return this},vLineTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"V":"v",d);return this},curveTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"C":"c",d);return this},smoothCurveTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"S":
"s",d);return this},qCurveTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"Q":"q",d);return this},qSmoothCurveTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"T":"t",d);return this},arcTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"A":"a",d);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",
[]);return this},_confirmSegmented:function(){if(!this.segmented){var d=this.shape.path;this.shape.path=[];this._setPath(d);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(d){d=j.isArray(d)?d:d.match(g.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(d){for(var c="",b=[],e=d.length,a=0;a<e;++a){var f=d[a],h=parseFloat(f);isNaN(h)?(c&&this._pushSegment(c,b),b=[],c=f):b.push(h)}this._pushSegment(c,b)}},setShape:function(d){this.inherited(arguments,
["string"==typeof d?{path:d}:d]);this.segmented=!1;this.segments=[];g.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});f=f("dojox.gfx.path.TextPath",e,{constructor:function(){if(!("text"in this))this.text=j.clone(g.defaultTextPath);if(!("fontStyle"in this))this.fontStyle=j.clone(g.defaultFont)},getText:function(){return this.text},setText:function(d){this.text=g.makeParameters(this.text,"string"==typeof d?{text:d}:d);this._setText();return this},getFont:function(){return this.fontStyle},
setFont:function(d){this.fontStyle="string"==typeof d?g.splitFontString(d):g.makeParameters(g.defaultFont,d);this._setFont();return this}});return g.path={Path:e,TextPath:f}})},"dojox/data/CsvStore":function(){define("dojo/_base/lang,dojo/_base/declare,dojo/_base/xhr,dojo/_base/kernel,dojo/data/util/filter,dojo/data/util/simpleFetch".split(","),function(g,j,f,h,e,d){j=j("dojox.data.CsvStore",null,{constructor:function(c){this._attributes=[];this._attributeIndexes={};this._dataArray=[];this._arrayOfAllItems=
[];this._loadFinished=!1;if(c.url)this.url=c.url;this._csvData=c.data;if(c.label)this.label=c.label;else if(""===this.label)this.label=void 0;this._storeProp="_csvStore";this._idProp="_csvId";this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._loadInProgress=!1;this._queuedFetches=[];this.identifier=c.identifier;""===this.identifier?delete this.identifier:this._idMap={};if("separator"in c)this.separator=c.separator;if("urlPreventCache"in c)this.urlPreventCache=c.urlPreventCache?
!0:!1},url:"",label:"",identifier:"",separator:",",urlPreventCache:!1,_assertIsItem:function(c){if(!this.isItem(c))throw Error(this.declaredClass+": a function was passed an item argument that was not an item");},_getIndex:function(c){c=this.getIdentity(c);this.identifier&&(c=this._idMap[c]);return c},getValue:function(c,b,d){this._assertIsItem(c);var a=d;if("string"===typeof b)b=this._attributeIndexes[b],null!=b&&(a=this._dataArray[this._getIndex(c)][b]||d);else throw Error(this.declaredClass+": a function was passed an attribute argument that was not a string");
return a},getValues:function(c,b){var d=this.getValue(c,b);return d?[d]:[]},getAttributes:function(c){this._assertIsItem(c);for(var b=[],c=this._dataArray[this._getIndex(c)],d=0;d<c.length;d++)""!==c[d]&&b.push(this._attributes[d]);return b},hasAttribute:function(c,b){this._assertIsItem(c);if("string"===typeof b){var d=this._attributeIndexes[b],a=this._dataArray[this._getIndex(c)];return"undefined"!==typeof d&&d<a.length&&""!==a[d]}throw Error(this.declaredClass+": a function was passed an attribute argument that was not a string");
},containsValue:function(c,b,d){var a=void 0;"string"===typeof d&&(a=e.patternToRegExp(d,!1));return this._containsValue(c,b,d,a)},_containsValue:function(c,b,d,a){c=this.getValues(c,b);for(b=0;b<c.length;++b){var e=c[b];if("string"===typeof e&&a)return null!==e.match(a);if(d===e)return!0}return!1},isItem:function(c){if(c&&c[this._storeProp]===this)if(c=c[this._idProp],this.identifier){if(this._dataArray[this._idMap[c]])return!0}else if(0<=c&&c<this._dataArray.length)return!0;return!1},isItemLoaded:function(c){return this.isItem(c)},
loadItem:function(){},getFeatures:function(){return this._features},getLabel:function(c){if(this.label&&this.isItem(c))return this.getValue(c,this.label)},getLabelAttributes:function(){return this.label?[this.label]:null},_fetchItems:function(c,b,d){var a=this,g=function(c,d){var f=null;if(c.query){var g,h,f=[],i=c.queryOptions?c.queryOptions.ignoreCase:!1,j={};for(g in c.query)h=c.query[g],"string"===typeof h&&(j[g]=e.patternToRegExp(h,i));for(i=0;i<d.length;++i){var k=!0,l=d[i];for(g in c.query)h=
c.query[g],a._containsValue(l,g,h,j[g])||(k=!1);k&&f.push(l)}}else f=d.slice(0,d.length);b(f,c)};if(this._loadFinished)g(c,this._arrayOfAllItems);else if(""!==this.url)if(this._loadInProgress)this._queuedFetches.push({args:c,filter:g});else{this._loadInProgress=!0;var h=f.get({url:a.url,handleAs:"text",preventCache:a.urlPreventCache});h.addCallback(function(b){try{a._processData(b),g(c,a._arrayOfAllItems),a._handleQueuedFetches()}catch(e){d(e,c)}});h.addErrback(function(b){a._loadInProgress=!1;if(d)d(b,
c);else throw b;});var j=null;if(c.abort)j=c.abort;c.abort=function(){h&&-1===h.fired&&h.cancel();j&&j.call(c)}}else if(this._csvData)try{this._processData(this._csvData),this._csvData=null,g(c,this._arrayOfAllItems)}catch(l){d(l,c)}else{var m=Error(this.declaredClass+": No CSV source data was provided as either URL or String data input.");if(d)d(m,c);else throw m;}},close:function(){},_getArrayOfArraysFromCsvFileContents:function(c){if(g.isString(c)){for(var b=RegExp("^\\s+","g"),d=RegExp("\\s+$",
"g"),a=RegExp('""',"g"),e=[],f=this._splitLines(c),c=0;c<f.length;++c){var h=f[c];if(0<h.length){for(var h=h.split(this.separator),j=0;j<h.length;){var m=h[j].replace(b,""),n=m.replace(d,""),q=n.charAt(0),r=n.charAt(n.length-1),u=n.charAt(n.length-2),s=n.charAt(n.length-3);if(2===n.length&&'""'==n)h[j]="";else if('"'==q&&('"'!=r||'"'==r&&'"'==u&&'"'!=s)){if(j+1===h.length)return;h[j]=m+this.separator+h[j+1];h.splice(j+1,1)}else'"'==q&&'"'==r&&(n=n.slice(1,n.length-1),n=n.replace(a,'"')),h[j]=n,j+=
1}e.push(h)}}this._attributes=e.shift();for(c=0;c<this._attributes.length;c++)this._attributeIndexes[this._attributes[c]]=c;this._dataArray=e}},_splitLines:function(c){var b=[],d,a="",e=!1;for(d=0;d<c.length;d++){var f=c.charAt(d);switch(f){case '"':e=!e;a+=f;break;case "\r":e?a+=f:(b.push(a),a="",d<c.length-1&&"\n"==c.charAt(d+1)&&d++);break;case "\n":e?a+=f:(b.push(a),a="");break;default:a+=f}}""!==a&&b.push(a);return b},_processData:function(c){this._getArrayOfArraysFromCsvFileContents(c);this._arrayOfAllItems=
[];if(this.identifier&&void 0===this._attributeIndexes[this.identifier])throw Error(this.declaredClass+": Identity specified is not a column header in the data set.");for(c=0;c<this._dataArray.length;c++){var b=c;this.identifier&&(b=this._dataArray[c][this._attributeIndexes[this.identifier]],this._idMap[b]=c);this._arrayOfAllItems.push(this._createItemFromIdentity(b))}this._loadFinished=!0;this._loadInProgress=!1},_createItemFromIdentity:function(c){var b={};b[this._storeProp]=this;b[this._idProp]=
c;return b},getIdentity:function(c){return this.isItem(c)?c[this._idProp]:null},fetchItemByIdentity:function(c){var b,d=c.scope?c.scope:h.global;if(this._loadFinished)b=this._createItemFromIdentity(c.identity),this.isItem(b)||(b=null),c.onItem&&c.onItem.call(d,b);else{var a=this;if(""!==this.url)this._loadInProgress?this._queuedFetches.push({args:c}):(this._loadInProgress=!0,b=f.get({url:a.url,handleAs:"text"}),b.addCallback(function(b){try{a._processData(b);var e=a._createItemFromIdentity(c.identity);
a.isItem(e)||(e=null);c.onItem&&c.onItem.call(d,e);a._handleQueuedFetches()}catch(f){c.onError&&c.onError.call(d,f)}}),b.addErrback(function(a){this._loadInProgress=!1;c.onError&&c.onError.call(d,a)}));else if(this._csvData)try{a._processData(a._csvData),a._csvData=null,b=a._createItemFromIdentity(c.identity),a.isItem(b)||(b=null),c.onItem&&c.onItem.call(d,b)}catch(e){c.onError&&c.onError.call(d,e)}}},getIdentityAttributes:function(){return this.identifier?[this.identifier]:null},_handleQueuedFetches:function(){if(0<
this._queuedFetches.length){for(var c=0;c<this._queuedFetches.length;c++){var b=this._queuedFetches[c],d=b.filter,a=b.args;d?d(a,this._arrayOfAllItems):this.fetchItemByIdentity(b.args)}this._queuedFetches=[]}}});g.extend(j,d);return j})},"jszlib/main":function(){define(["jszlib/inflate"],function(g){return{inflate:g}})},"jszlib/inflate":function(){define(["./arrayCopy"],function(g){function j(){}function f(){this.was=[0]}function h(a,c,f){this.hufts=new Int32Array(3*b);this.window=new Uint8Array(f);
this.end=f;this.checkfn=c;this.mode=k;this.reset(a,null);this.index=this.table=this.left=0;this.blens=null;this.bb=new Int32Array(1);this.tb=new Int32Array(1);this.codes=new e;this.check=this.write=this.read=this.bitb=this.bitk=this.last=0;this.inftree=new d}function e(){}function d(){}function c(a,b,c,d){if(null==b)return 1;for(var e=a&65535,a=a>>16&65535,f;0<d;){f=d<v?d:v;for(d-=f;16<=f;)e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,
a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,e+=b[c++]&255,a+=e,f-=16;if(0!=f){do e+=b[c++]&255,a+=e;while(0!=--f)}e%=s;a%=s}return a<<16|e}var b=1440,i=["Z_OK: stream correct","Z_STREAM_END: end of stream","Z_NEED_DICT: stream not yet complete"];i[-1]="Z_ERRNO";i[-2]="Z_STREAM_ERROR";i[-3]="Z_DATA_ERROR";i[-4]="Z_MEM_ERROR";i[-5]="Z_BUF_ERROR: premature end of buffer";
i[-6]="Z_VERSION_ERROR";var a=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],k=0,o=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,
7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,
0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,
8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,
0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,
8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,
0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,
195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],p=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,
89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],m=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],n=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,
8193,12289,16385,24577],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];j.prototype.inflateInit=function(a,b){a||(a=15);b&&(b=!1);this.istate=new f;return this.istate.inflateInit(this,b?-a:a)};j.prototype.inflate=function(a){return null==this.istate?-2:this.istate.inflate(this,a)};j.prototype.inflateEnd=function(){if(null==this.istate)return-2;var a=istate.inflateEnd(this);this.istate=null;return a};j.prototype.inflateSync=function(){return istate.inflateSync(this)};j.prototype.inflateSetDictionary=
function(a,b){return istate.inflateSetDictionary(this,a,b)};f.prototype.inflateReset=function(a){if(null==a||null==a.istate)return-2;a.total_in=a.total_out=0;a.msg=null;a.istate.mode=0!=a.istate.nowrap?7:0;a.istate.blocks.reset(a,null);return 0};f.prototype.inflateEnd=function(a){null!=this.blocks&&this.blocks.free(a);this.blocks=null;return 0};f.prototype.inflateInit=function(a,b){this.blocks=a.msg=null;0>b&&(b=-b);if(8>b||15<b)return this.inflateEnd(a),-2;this.wbits=b;a.istate.blocks=new h(a,0!=
a.istate.nowrap?null:this,1<<b);this.inflateReset(a);return 0};f.prototype.inflate=function(a,b){var c,d;if(null==a||null==a.istate||null==a.next_in)return-2;b=4==b?-5:0;for(c=-5;;)switch(a.istate.mode){case 0:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;if(8!=((a.istate.method=a.next_in[a.next_in_index++])&15)){a.istate.mode=13;a.msg="unknown compression method";a.istate.marker=5;break}if((a.istate.method>>4)+8>a.istate.wbits){a.istate.mode=13;a.msg="invalid window size";a.istate.marker=
5;break}a.istate.mode=1;case 1:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;d=a.next_in[a.next_in_index++]&255;if(0!=((a.istate.method<<8)+d)%31){a.istate.mode=13;a.msg="incorrect header check";a.istate.marker=5;break}if(0==(d&32)){a.istate.mode=7;break}a.istate.mode=2;case 2:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need=(a.next_in[a.next_in_index++]&255)<<24&4278190080;a.istate.mode=3;case 3:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=
(a.next_in[a.next_in_index++]&255)<<16&16711680;a.istate.mode=4;case 4:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<8&65280;a.istate.mode=5;case 5:if(0==a.avail_in)return c;a.avail_in--;a.total_in++;a.istate.need+=a.next_in[a.next_in_index++]&255;a.adler=a.istate.need;a.istate.mode=6;return 2;case 6:return a.istate.mode=13,a.msg="need dictionary",a.istate.marker=0,-2;case 7:c=a.istate.blocks.proc(a,c);if(-3==c){a.istate.mode=13;a.istate.marker=
0;break}0==c&&(c=b);if(1!=c)return c;c=b;a.istate.blocks.reset(a,a.istate.was);if(0!=a.istate.nowrap){a.istate.mode=12;break}a.istate.mode=8;case 8:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need=(a.next_in[a.next_in_index++]&255)<<24&4278190080;a.istate.mode=9;case 9:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<16&16711680;a.istate.mode=10;case 10:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=
(a.next_in[a.next_in_index++]&255)<<8&65280;a.istate.mode=11;case 11:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=a.next_in[a.next_in_index++]&255;if(a.istate.was[0]!=a.istate.need){a.istate.mode=13;a.msg="incorrect data check";a.istate.marker=5;break}a.istate.mode=12;case 12:return 1;case 13:return-3;default:return-2}};f.prototype.inflateSetDictionary=function(a,b,d){var e=0,f=d;if(null==a||null==a.istate||6!=a.istate.mode)return-2;if(c(1,b,0,d)!=a.adler)return-3;a.adler=
c(0,null,0,0);f>=1<<a.istate.wbits&&(f=(1<<a.istate.wbits)-1,e=d-f);a.istate.blocks.set_dictionary(b,e,f);a.istate.mode=7;return 0};var r=[0,0,255,255];f.prototype.inflateSync=function(a){var b,c,d;if(null==a||null==a.istate)return-2;if(13!=a.istate.mode)a.istate.mode=13,a.istate.marker=0;if(0==(b=a.avail_in))return-5;c=a.next_in_index;for(d=a.istate.marker;0!=b&&4>d;)a.next_in[c]==r[d]?d++:d=0!=a.next_in[c]?0:4-d,c++,b--;a.total_in+=c-a.next_in_index;a.next_in_index=c;a.avail_in=b;a.istate.marker=
d;if(4!=d)return-3;b=a.total_in;c=a.total_out;this.inflateReset(a);a.total_in=b;a.total_out=c;a.istate.mode=7;return 0};f.prototype.inflateSyncPoint=function(a){return null==a||null==a.istate||null==a.istate.blocks?-2:a.istate.blocks.sync_point()};var u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];h.prototype.reset=function(a,b){if(b)b[0]=this.check;6==this.mode&&this.codes.free(a);this.mode=k;this.read=this.write=this.bitb=this.bitk=0;if(this.checkfn)this.check=c(0,null,0,0),a.adler=this.check};
h.prototype.proc=function(b,c){var d,e,f,h,i,j,l;h=b.next_in_index;i=b.avail_in;e=this.bitb;f=this.bitk;j=this.write;for(l=j<this.read?this.read-j-1:this.end-j;;)switch(this.mode){case k:for(;3>f;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=h-b.next_in_index,b.next_in_index=h,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[h++]&255)<<f;f+=8}d=e&7;this.last=d&1;switch(d>>>1){case 0:e>>>=3;f-=3;d=f&7;e>>>=d;f-=d;this.mode=1;break;case 1:var n=new Int32Array(1),m=
new Int32Array(1),q=[],r=[];d=m;var s=q,v=r;n[0]=9;d[0]=5;s[0]=o;v[0]=p;this.codes.init(n[0],m[0],q[0],0,r[0],0,b);e>>>=3;f-=3;this.mode=6;break;case 2:e>>>=3;f-=3;this.mode=3;break;case 3:return e>>>=3,f-=3,this.mode=13,b.msg="invalid block type",c=-3,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=h-b.next_in_index,b.next_in_index=h,this.write=j,this.inflate_flush(b,c)}break;case 1:for(;32>f;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=h-b.next_in_index,b.next_in_index=
h,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[h++]&255)<<f;f+=8}if((~e>>>16&65535)!=(e&65535))return this.mode=13,b.msg="invalid stored block lengths",c=-3,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=h-b.next_in_index,b.next_in_index=h,this.write=j,this.inflate_flush(b,c);this.left=e&65535;e=f=0;this.mode=0!=this.left?2:0!=this.last?7:k;break;case 2:if(0==i||0==l&&(j==end&&0!=read&&(j=0,l=j<this.read?this.read-j-1:this.end-j),0==l&&(this.write=j,c=this.inflate_flush(b,c),j=this.write,
l=j<this.read?this.read-j-1:this.end-j,j==this.end&&0!=this.read&&(j=0,l=j<this.read?this.read-j-1:this.end-j),0==l)))return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=h-b.next_in_index,b.next_in_index=h,this.write=j,this.inflate_flush(b,c);c=0;d=this.left;d>i&&(d=i);d>l&&(d=l);g(b.next_in,h,this.window,j,d);h+=d;i-=d;j+=d;l-=d;if(0!=(this.left-=d))break;this.mode=0!=this.last?7:k;break;case 3:for(;14>f;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=h-b.next_in_index,
b.next_in_index=h,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[h++]&255)<<f;f+=8}this.table=d=e&16383;if(29<(d&31)||29<(d>>5&31))return this.mode=9,b.msg="too many length or distance symbols",c=-3,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=h-b.next_in_index,b.next_in_index=h,this.write=j,this.inflate_flush(b,c);d=258+(d&31)+(d>>5&31);if(null==this.blens||this.blens.length<d)this.blens=new Int32Array(d);else for(l=0;l<d;l++)this.blens[l]=0;e>>>=14;f-=14;this.index=0;this.mode=4;case 4:for(;this.index<
4+(this.table>>>10);){for(;3>f;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=h-b.next_in_index,b.next_in_index=h,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[h++]&255)<<f;f+=8}this.blens[u[this.index++]]=e&7;e>>>=3;f-=3}for(;19>this.index;)this.blens[u[this.index++]]=0;this.bb[0]=7;d=this.inftree.inflate_trees_bits(this.blens,this.bb,this.tb,this.hufts,b);if(0!=d){c=d;if(-3==c)this.blens=null,this.mode=9;this.bitb=e;this.bitk=f;b.avail_in=i;b.total_in+=h-b.next_in_index;
b.next_in_index=h;this.write=j;return this.inflate_flush(b,c)}this.index=0;this.mode=5;case 5:for(;;){d=this.table;if(!(this.index<258+(d&31)+(d>>5&31)))break;for(d=this.bb[0];f<d;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=h-b.next_in_index,b.next_in_index=h,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[h++]&255)<<f;f+=8}d=this.hufts[3*(this.tb[0]+(e&a[d]))+1];m=this.hufts[3*(this.tb[0]+(e&a[d]))+2];if(16>m)e>>>=d,f-=d,this.blens[this.index++]=m;else{l=18==
m?7:m-14;for(n=18==m?11:3;f<d+l;){if(0!=i)c=0;else return this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=h-b.next_in_index,b.next_in_index=h,this.write=j,this.inflate_flush(b,c);i--;e|=(b.next_in[h++]&255)<<f;f+=8}e>>>=d;f-=d;n+=e&a[l];e>>>=l;f-=l;l=this.index;d=this.table;if(l+n>258+(d&31)+(d>>5&31)||16==m&&1>l)return this.blens=null,this.mode=9,b.msg="invalid bit length repeat",c=-3,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=h-b.next_in_index,b.next_in_index=h,this.write=j,this.inflate_flush(b,
c);m=16==m?this.blens[l-1]:0;do this.blens[l++]=m;while(0!=--n);this.index=l}}this.tb[0]=-1;n=new Int32Array(1);m=new Int32Array(1);q=new Int32Array(1);r=new Int32Array(1);n[0]=9;m[0]=6;d=this.table;d=this.inftree.inflate_trees_dynamic(257+(d&31),1+(d>>5&31),this.blens,n,m,q,r,this.hufts,b);if(0!=d){if(-3==d)this.blens=null,this.mode=13;c=d;this.bitb=e;this.bitk=f;b.avail_in=i;b.total_in+=h-b.next_in_index;b.next_in_index=h;this.write=j;return this.inflate_flush(b,c)}this.codes.init(n[0],m[0],this.hufts,
q[0],this.hufts,r[0],b);this.mode=6;case 6:this.bitb=e;this.bitk=f;b.avail_in=i;b.total_in+=h-b.next_in_index;b.next_in_index=h;this.write=j;if(1!=(c=this.codes.proc(this,b,c)))return this.inflate_flush(b,c);c=0;this.codes.free(b);h=b.next_in_index;i=b.avail_in;e=this.bitb;f=this.bitk;j=this.write;l=j<this.read?this.read-j-1:this.end-j;if(0==this.last){this.mode=k;break}this.mode=7;case 7:this.write=j;c=this.inflate_flush(b,c);j=this.write;if(this.read!=this.write)return this.bitb=e,this.bitk=f,b.avail_in=
i,b.total_in+=h-b.next_in_index,b.next_in_index=h,this.write=j,this.inflate_flush(b,c);this.mode=12;case 8:return c=1,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=h-b.next_in_index,b.next_in_index=h,this.write=j,this.inflate_flush(b,c);case 9:return c=-3,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=h-b.next_in_index,b.next_in_index=h,this.write=j,this.inflate_flush(b,c);default:return c=-2,this.bitb=e,this.bitk=f,b.avail_in=i,b.total_in+=h-b.next_in_index,b.next_in_index=h,this.write=j,this.inflate_flush(b,
c)}};h.prototype.free=function(a){this.reset(a,null);this.hufts=this.window=null};h.prototype.set_dictionary=function(a,b,c){g(a,b,this.window,0,c);this.read=this.write=c};h.prototype.sync_point=function(){return 1==this.mode};h.prototype.inflate_flush=function(a,b){var d,e,f;e=a.next_out_index;f=this.read;d=(f<=this.write?this.write:this.end)-f;if(d>a.avail_out)d=a.avail_out;0!=d&&-5==b&&(b=0);a.avail_out-=d;a.total_out+=d;if(null!=this.checkfn)this.check=c(this.check,this.window,f,d),a.adler=this.check;
g(this.window,f,a.next_out,e,d);e+=d;f+=d;if(f==this.end){f=0;if(this.write==this.end)this.write=0;d=this.write-f;if(d>a.avail_out)d=a.avail_out;0!=d&&-5==b&&(b=0);a.avail_out-=d;a.total_out+=d;if(null!=this.checkfn)this.check=c(this.check,this.window,f,d),a.adler=this.check;g(this.window,f,a.next_out,e,d);e+=d;f+=d}a.next_out_index=e;this.read=f;return b};e.prototype.init=function(a,b,c,d,e,f){this.mode=0;this.lbits=a;this.dbits=b;this.ltree=c;this.ltree_index=d;this.dtree=e;this.dtree_index=f;this.tree=
null};e.prototype.proc=function(b,c,d){var e,f,g=0,h=0,i=0,j,k,l,i=c.next_in_index;j=c.avail_in;g=b.bitb;h=b.bitk;k=b.write;for(l=k<b.read?b.read-k-1:b.end-k;;)switch(this.mode){case 0:if(258<=l&&10<=j&&(b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,d=this.inflate_fast(this.lbits,this.dbits,this.ltree,this.ltree_index,this.dtree,this.dtree_index,b,c),i=c.next_in_index,j=c.avail_in,g=b.bitb,h=b.bitk,k=b.write,l=k<b.read?b.read-k-1:b.end-k,0!=d)){this.mode=
1==d?7:9;break}this.need=this.lbits;this.tree=this.ltree;this.tree_index=this.ltree_index;this.mode=1;case 1:for(e=this.need;h<e;){if(0!=j)d=0;else return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);j--;g|=(c.next_in[i++]&255)<<h;h+=8}e=3*(this.tree_index+(g&a[e]));g>>>=this.tree[e+1];h-=this.tree[e+1];f=this.tree[e];if(0==f){this.lit=this.tree[e+2];this.mode=6;break}if(0!=(f&16)){this.get=f&15;this.len=this.tree[e+2];this.mode=2;break}if(0==
(f&64)){this.need=f;this.tree_index=e/3+this.tree[e+2];break}if(0!=(f&32)){this.mode=7;break}this.mode=9;c.msg="invalid literal/length code";d=-3;b.bitb=g;b.bitk=h;c.avail_in=j;c.total_in+=i-c.next_in_index;c.next_in_index=i;b.write=k;return b.inflate_flush(c,d);case 2:for(e=this.get;h<e;){if(0!=j)d=0;else return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);j--;g|=(c.next_in[i++]&255)<<h;h+=8}this.len+=g&a[e];g>>=e;h-=e;this.need=this.dbits;
this.tree=this.dtree;this.tree_index=this.dtree_index;this.mode=3;case 3:for(e=this.need;h<e;){if(0!=j)d=0;else return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);j--;g|=(c.next_in[i++]&255)<<h;h+=8}e=3*(this.tree_index+(g&a[e]));g>>=this.tree[e+1];h-=this.tree[e+1];f=this.tree[e];if(0!=(f&16)){this.get=f&15;this.dist=this.tree[e+2];this.mode=4;break}if(0==(f&64)){this.need=f;this.tree_index=e/3+this.tree[e+2];break}this.mode=9;c.msg=
"invalid distance code";d=-3;b.bitb=g;b.bitk=h;c.avail_in=j;c.total_in+=i-c.next_in_index;c.next_in_index=i;b.write=k;return b.inflate_flush(c,d);case 4:for(e=this.get;h<e;){if(0!=j)d=0;else return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);j--;g|=(c.next_in[i++]&255)<<h;h+=8}this.dist+=g&a[e];g>>=e;h-=e;this.mode=5;case 5:for(e=k-this.dist;0>e;)e+=b.end;for(;0!=this.len;){if(0==l&&(k==b.end&&0!=b.read&&(k=0,l=k<b.read?b.read-k-1:
b.end-k),0==l&&(b.write=k,d=b.inflate_flush(c,d),k=b.write,l=k<b.read?b.read-k-1:b.end-k,k==b.end&&0!=b.read&&(k=0,l=k<b.read?b.read-k-1:b.end-k),0==l)))return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);b.window[k++]=b.window[e++];l--;e==b.end&&(e=0);this.len--}this.mode=0;break;case 6:if(0==l&&(k==b.end&&0!=b.read&&(k=0,l=k<b.read?b.read-k-1:b.end-k),0==l&&(b.write=k,d=b.inflate_flush(c,d),k=b.write,l=k<b.read?b.read-k-1:b.end-k,
k==b.end&&0!=b.read&&(k=0,l=k<b.read?b.read-k-1:b.end-k),0==l)))return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);d=0;b.window[k++]=this.lit;l--;this.mode=0;break;case 7:7<h&&(h-=8,j++,i--);b.write=k;d=b.inflate_flush(c,d);k=b.write;if(b.read!=b.write)return b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);this.mode=8;case 8:return d=1,b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=
i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);case 9:return d=-3,b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d);default:return d=-2,b.bitb=g,b.bitk=h,c.avail_in=j,c.total_in+=i-c.next_in_index,c.next_in_index=i,b.write=k,b.inflate_flush(c,d)}};e.prototype.free=function(){};e.prototype.inflate_fast=function(b,c,d,e,f,h,i,j){var k,l,n,m,o,p,q,r,s,v,u,B;p=j.next_in_index;q=j.avail_in;m=i.bitb;o=i.bitk;r=i.write;s=r<i.read?
i.read-r-1:i.end-r;b=a[b];v=a[c];do{for(;20>o;)q--,m|=(j.next_in[p++]&255)<<o,o+=8;k=m&b;l=d;n=e;B=3*(n+k);if(0==(c=l[B]))m>>=l[B+1],o-=l[B+1],i.window[r++]=l[B+2],s--;else{do{m>>=l[B+1];o-=l[B+1];if(0!=(c&16)){c&=15;u=l[B+2]+(m&a[c]);m>>=c;for(o-=c;15>o;)q--,m|=(j.next_in[p++]&255)<<o,o+=8;k=m&v;l=f;n=h;B=3*(n+k);c=l[B];do if(m>>=l[B+1],o-=l[B+1],0!=(c&16)){for(c&=15;o<c;)q--,m|=(j.next_in[p++]&255)<<o,o+=8;k=l[B+2]+(m&a[c]);m>>=c;o-=c;s-=u;if(r>=k)k=r-k,i.window[r++]=i.window[k++],i.window[r++]=
i.window[k++],u-=2;else{k=r-k;do k+=i.end;while(0>k);c=i.end-k;if(u>c){u-=c;if(0<r-k&&c>r-k){do i.window[r++]=i.window[k++];while(0!=--c)}else g(i.window,k,i.window,r,c),r+=c;k=0}}do i.window[r++]=i.window[k++];while(0!=--u);break}else if(0==(c&64))k+=l[B+2],k+=m&a[c],B=3*(n+k),c=l[B];else return j.msg="invalid distance code",u=j.avail_in-q,u=o>>3<u?o>>3:u,q+=u,p-=u,o-=u<<3,i.bitb=m,i.bitk=o,j.avail_in=q,j.total_in+=p-j.next_in_index,j.next_in_index=p,i.write=r,-3;while(1);break}if(0==(c&64)){if(k+=
l[B+2],k+=m&a[c],B=3*(n+k),0==(c=l[B])){m>>=l[B+1];o-=l[B+1];i.window[r++]=l[B+2];s--;break}}else{if(0!=(c&32))return u=j.avail_in-q,u=o>>3<u?o>>3:u,q+=u,p-=u,o-=u<<3,i.bitb=m,i.bitk=o,j.avail_in=q,j.total_in+=p-j.next_in_index,j.next_in_index=p,i.write=r,1;j.msg="invalid literal/length code";u=j.avail_in-q;u=o>>3<u?o>>3:u;q+=u;p-=u;o-=u<<3;i.bitb=m;i.bitk=o;j.avail_in=q;j.total_in+=p-j.next_in_index;j.next_in_index=p;i.write=r;return-3}}while(1)}}while(258<=s&&10<=q);u=j.avail_in-q;u=o>>3<u?o>>3:
u;p-=u;i.bitb=m;i.bitk=o-(u<<3);j.avail_in=q+u;j.total_in+=p-j.next_in_index;j.next_in_index=p;i.write=r;return 0};d.prototype.huft_build=function(a,c,d,e,f,h,i,j,k,l,m){var n,o,p,q,r,s,u,v,B;s=0;o=d;do this.c[a[c+s]]++,s++,o--;while(0!=o);if(this.c[0]==d)return i[0]=-1,j[0]=0;r=j[0];for(p=1;15>=p&&!(0!=this.c[p]);p++);q=p;r<p&&(r=p);for(o=15;0!=o&&!(0!=this.c[o]);o--);l=o;r>o&&(r=o);j[0]=r;for(j=1<<p;p<o;p++,j<<=1)if(0>(j-=this.c[p]))return-3;if(0>(j-=this.c[o]))return-3;this.c[o]+=j;this.x[1]=p=
0;s=1;for(u=2;0!=--o;)this.x[u]=p+=this.c[s],u++,s++;s=o=0;do{if(0!=(p=a[c+s]))this.v[this.x[p]++]=o;s++}while(++o<d);d=this.x[l];s=this.x[0]=o=0;c=-1;v=-r;for(B=u=this.u[0]=0;q<=l;q++)for(a=this.c[q];0!=a--;){for(;q>v+r;){c++;v+=r;B=l-v;B=B>r?r:B;if((n=1<<(p=q-v))>a+1)if(n-=a+1,u=q,p<B)for(;++p<B&&!((n<<=1)<=this.c[++u]);)n-=this.c[u];B=1<<p;if(this.hn[0]+B>b)return-3;this.u[c]=u=this.hn[0];this.hn[0]+=B;0!=c?(this.x[c]=o,this.r[0]=p,this.r[1]=r,p=o>>>v-r,this.r[2]=u-this.u[c-1]-p,g(this.r,0,k,3*
(this.u[c-1]+p),3)):i[0]=u}this.r[1]=q-v;s>=d?this.r[0]=192:m[s]<e?(this.r[0]=256>this.v[s]?0:96,this.r[2]=this.v[s++]):(this.r[0]=h[this.v[s]-e]+16+64,this.r[2]=f[this.v[s++]-e]);n=1<<q-v;for(p=o>>>v;p<B;p+=n)g(this.r,0,k,3*(u+p),3);for(p=1<<q-1;0!=(o&p);p>>>=1)o^=p;o^=p;for(p=(1<<v)-1;(o&p)!=this.x[c];)c--,v-=r,p=(1<<v)-1}return 0!=j&&1!=l?-5:0};d.prototype.inflate_trees_bits=function(a,b,c,d,e){this.initWorkArea(19);this.hn[0]=0;a=this.huft_build(a,0,19,19,null,null,c,b,d,this.hn,this.v);if(-3==
a)e.msg="oversubscribed dynamic bit lengths tree";else if(-5==a||0==b[0])e.msg="incomplete dynamic bit lengths tree",a=-3;return a};d.prototype.inflate_trees_dynamic=function(a,b,c,d,e,f,g,h,i){this.initWorkArea(288);this.hn[0]=0;f=this.huft_build(c,0,a,257,l,m,f,d,h,this.hn,this.v);if(0!=f||0==d[0]){if(-3==f)i.msg="oversubscribed literal/length tree";else if(-4!=f)i.msg="incomplete literal/length tree",f=-3;return f}this.initWorkArea(288);f=this.huft_build(c,a,b,0,n,q,g,e,h,this.hn,this.v);if(0!=
f||0==e[0]&&257<a){if(-3==f)i.msg="oversubscribed distance tree";else if(-5==f)i.msg="incomplete distance tree",f=-3;else if(-4!=f)i.msg="empty distance tree with lengths",f=-3;return f}return 0};d.prototype.initWorkArea=function(a){var b;if(null==this.hn)this.hn=new Int32Array(1),this.v=new Int32Array(a),this.c=new Int32Array(16),this.r=new Int32Array(3),this.u=new Int32Array(15),this.x=new Int32Array(16);if(this.v.length<a)this.v=new Int32Array(a);for(b=0;b<a;b++)this.v[b]=0;for(b=0;16>b;b++)this.c[b]=
0;for(b=0;3>b;b++)this.r[b]=0;g(this.c,0,this.u,0,15);g(this.c,0,this.x,0,16)};var s=65521,v=5552;return function(a,b,c,d){a=b?new Uint8Array(a,b,c):new Uint8Array(a);c=new j;c.inflateInit(15,!0);c.next_in=a;c.next_in_index=0;c.avail_in=a.length;for(var a=[],e=0;;){var f=new Uint8Array(32E3);c.next_out=f;c.next_out_index=0;c.avail_out=f.length;var h=c.inflate(0);if(0!=h&&1!=h)throw a=c.msg?"object"==typeof c.msg?c.msg:"string"==typeof c.msg?Error(c.msg):Error('Unknown error in inflate: msg="'+c.msg+
'", status="'+i[h]||h+'"'):Error('Inflate error, status="'+i[h]||h+'")'),a.statusCode=h,a.statusString=i[h],a;if(0!=c.avail_out){var k=new Uint8Array(f.length-c.avail_out);g(f,0,k,0,f.length-c.avail_out);f=k}a.push(f);e+=f.length;if(1==h)break}d&&(d[0]=(b||0)+c.next_in_index);if(1==a.length)return a[0].buffer;b=new Uint8Array(e);for(c=d=0;c<a.length;++c)h=a[c],g(h,0,b,d,h.length),d+=h.length;return b.buffer}})},"*now":function(g){g(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});
(function(){var g=this.require;g({cache:{}});!g.async&&g(["dojo"]);g.boot&&g.apply(null,g.boot)})();